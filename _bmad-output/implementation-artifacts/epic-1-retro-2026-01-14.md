# Epic 1 Retrospective - Web SDK Verification Flow

**Date:** 2026-01-14
**Epic:** Epic 1 - Web SDK Verification Flow
**Facilitator:** Bob (Scrum Master)
**Participants:** Edmond (Project Lead), Alice (Product Owner), Charlie (Senior Dev), Dana (QA Engineer), Elena (Junior Dev), Winston (Architect), John (Product Manager)

---

## Epic Summary

**Epic Goal:** Enable end-users to complete identity verification through an embeddable SDK with document capture, selfie, and liveness detection.

**Delivery Metrics:**
- **Completed Stories:** 6/6 (100%)
- **Test Coverage:** 130 tests passing
- **Bundle Size:** 200KB (at target limit)
- **Duration:** ~2-3 sprints
- **Production Incidents:** 0 (not yet deployed)

**Stories Completed:**
1. Story 1.1: SDK Initialization & Welcome Screen
2. Story 1.2: Document Type Selection
3. Story 1.3: Document Capture with Camera
4. Story 1.4: Document Upload Fallback
5. Story 1.5: Selfie Capture with Liveness Detection
6. Story 1.6: Review & Submit Verification

---

## What Went Well

### Code Quality & Testing
- **Comprehensive test coverage:** 130 unit tests passing across all 6 stories
- **Excellent documentation:** Each story included detailed "Dev Notes" and "Previous Story Intelligence" sections
- **Code reviews caught issues early:** Every story had a review section documenting fixes before marking "done"
- **Bundle size discipline:** Stayed exactly at 200KB target despite adding MediaPipe for liveness detection

### Technical Patterns
- **Smart code reuse:** Compression service from Story 1.3 reused in Stories 1.4, 1.5, and 1.6
- **Consistent event patterns:** Event emission pattern established in Story 1.1, followed throughout
- **Store management:** Svelte stores pattern established early, used consistently
- **Component structure:** Atomic design pattern (atoms, pages) maintained across all stories

### Process & Collaboration
- **"Previous Story Intelligence" sections accelerated development:** By Story 1.3, clear patterns were documented, making Stories 1.4-1.6 faster
- **Strong team collaboration:** Code reviews, knowledge sharing, and pattern documentation
- **Accessibility improvements:** Team went back and added ARIA labels, keyboard navigation, and screen reader support

---

## Challenges & Issues

### Critical: Backend Infrastructure Missing
- **Epic 1 SDK has nowhere to submit data:** Story 1.6 uses mock API (`__blrn_use_mock_api` flag)
- **Cannot test end-to-end:** Unit tests pass, but full verification flow untestable without backend
- **Integration risk:** Building frontend without backend creates risk of integration failures later

### Planning Gap: Cross-Epic Dependencies
- **Epic 2 depends on Epic 4:** Omang Processing (Epic 2) needs REST API (Epic 4) to function
- **Dependency chain not identified:** Original plan treated epics as independent
- **Frontend-first approach created risk:** Should have built foundation (backend) before features (frontend)

### Technical Challenges
- **Bundle size pressure:** MediaPipe integration pushed SDK to exactly 200KB limit - no room for growth
- **Accessibility requirements not explicit:** Had to retrofit ARIA labels and keyboard navigation after stories were "done"
- **Mock API creates false sense of completion:** Stories marked "done" but can't actually function in production

---

## Key Insights

1. **Frontend-first approach created integration risk**
   - Building UI without backend led to mock APIs and inability to test end-to-end
   - Should plan backend foundation before frontend features

2. **Code reuse patterns established early paid dividends**
   - Compression service, event patterns, store management reused across all stories
   - "Previous Story Intelligence" sections accelerated later stories

3. **Cross-epic dependencies must be planned upfront**
   - Epic 2 depends on Epic 4, which wasn't identified until retrospective
   - Need dependency mapping across all epics, not just within epics

4. **Comprehensive testing gives confidence in quality**
   - 130 tests passing provides confidence in code quality
   - But unit tests alone insufficient - need integration tests with real backend

---

## Significant Discovery: Backend Gap Requires Epic Reordering

### Discovery
During Epic 1 execution, the team discovered that:
- No backend infrastructure exists to receive SDK submissions
- Epic 2 (Omang Processing) cannot start without Epic 4 (REST API)
- Epic 3 (Case Management) also depends on Epic 4
- Original epic order was: Epic 1 → Epic 2 → Epic 3 → Epic 4

### Impact
- Epic 1 SDK is "code complete" but non-functional (mock API only)
- Cannot test end-to-end verification flow
- Epic 2 stories assume API endpoints exist (wrong assumption)
- Risk of integration failures when backend is eventually built

### Resolution
**Team Decision:** Create Epic 1.5 (Backend Foundation) before starting Epic 2

**Epic 1.5 will include:**
- Story 1.5.1: API Authentication (JWT tokens, session management)
- Story 1.5.2: Create Verification Endpoint (POST /api/v1/verifications)
- Story 1.5.3: Document Upload Endpoint (S3 presigned URLs)
- Story 1.5.4: Basic DynamoDB Schema (verification cases table)

**New Epic Order:** Epic 1 → Epic 1.5 → Epic 2 → Epic 3 → Epic 4 (remaining stories)

---

## Action Items

### Process Improvements

1. **Create Epic 1.5: Backend Foundation**
   - **Owner:** Winston (Architect) + John (PM)
   - **Deadline:** End of this week
   - **Success Criteria:** 4 stories defined with clear acceptance criteria

2. **Add explicit accessibility acceptance criteria to all future stories**
   - **Owner:** Alice (Product Owner)
   - **Deadline:** Before Epic 1.5 story creation
   - **Success Criteria:** Template created with WCAG 2.1 AA requirements

3. **Implement cross-epic dependency planning**
   - **Owner:** John (PM) + Winston (Architect)
   - **Deadline:** Before Epic 2 planning
   - **Success Criteria:** Dependency map created showing epic relationships

### Technical Debt

1. **Replace mock API with real endpoints**
   - **Owner:** Charlie (Senior Dev)
   - **Priority:** HIGH
   - **Estimated Effort:** Part of Epic 1.5 Story 1.5.2
   - **Note:** Story 1.6 currently uses `__blrn_use_mock_api` flag

2. **End-to-end integration testing**
   - **Owner:** Dana (QA Engineer)
   - **Priority:** MEDIUM
   - **Estimated Effort:** 1 week after Epic 1.5 complete
   - **Note:** Cannot test full flow until backend exists

### Documentation

1. **Continue "Previous Story Intelligence" pattern**
   - **Owner:** All developers
   - **Deadline:** Ongoing
   - **Success Criteria:** Every story includes learnings from previous story

### Team Agreements

- All stories must include explicit accessibility acceptance criteria
- Cross-epic dependencies must be identified during planning
- Bundle size must be monitored in every frontend story
- Code reviews are mandatory before marking stories "done"

---

## Epic 1.5 Preparation Tasks

### Technical Setup
- [ ] **AWS account setup (af-south-1 region)**
  - Owner: Winston (Architect)
  - Estimated: 2 days
  - Status: ✅ AWS credentials verified, full access confirmed

- [ ] **Serverless Framework configuration**
  - Owner: Charlie (Senior Dev)
  - Estimated: 1 day

- [ ] **DynamoDB table design**
  - Owner: Winston (Architect)
  - Estimated: 2 days

- [ ] **API Gateway + Lambda setup**
  - Owner: Charlie (Senior Dev)
  - Estimated: 3 days

### Knowledge Development
- [ ] **Serverless Framework training for team**
  - Owner: Charlie (Senior Dev)
  - Estimated: 1 day

- [ ] **AWS SDK v3 documentation review**
  - Owner: Elena (Junior Dev)
  - Estimated: 1 day

**Total Estimated Effort:** 10 days (2 weeks)

---

## Critical Path Items (Must Complete Before Epic 2)

1. **Complete Epic 1.5 (Backend Foundation)**
   - **Owner:** Charlie (Senior Dev) + Winston (Architect)
   - **Must Complete By:** End of Sprint +2
   - **Stories:** API auth, create verification, document upload, DynamoDB schema

2. **Epic 2 Planning Review Session**
   - **Owner:** John (PM) + Alice (Product Owner) + Winston (Architect)
   - **Must Complete By:** Before Epic 2 kickoff
   - **Deliverable:** Updated Epic 2 stories with API integration and revised dependencies

3. **End-to-End Integration Testing**
   - **Owner:** Dana (QA Engineer)
   - **Must Complete By:** After Epic 1.5, before Epic 2
   - **Deliverable:** Test plan for full verification flow (SDK → API → Database)

---

## Epic 1 Readiness Assessment

### Testing & Quality
**Status:** ✅ Excellent (with gap)
- 130 unit tests passing
- Comprehensive test coverage per story
- Code quality high, bundle size at target (200KB)
- **Gap:** No integration tests (requires backend from Epic 1.5)

### Deployment
**Status:** ❌ Not Ready
- No AWS infrastructure deployed
- No CDN setup for SDK
- No production environment
- **Scheduled:** After Epic 1.5 completion (2-3 weeks)

### Stakeholder Acceptance
**Status:** ⏳ Pending
- Cannot demo without backend
- Mock API in use
- **Action:** Stakeholder demo after Epic 1.5 deployment

### Technical Health
**Status:** ✅ Stable
- Code maintainable and well-documented
- No critical technical debt
- Patterns established for future stories

### Unresolved Blockers
**Status:** ⚠️ Backend Missing
- Epic 1.5 will resolve
- Must complete before Epic 2

---

## Next Epic Preview: Epic 2 - Omang Document Processing

**Goal:** Process Omang cards with OCR extraction, validation, and biometric matching.

**Dependencies on Epic 1:**
- Web SDK must capture and submit document images ✅
- Session management and API integration must be working ⚠️ (Epic 1.5)
- Image compression and quality validation must be reliable ✅

**Preparation Needed:**
- AWS Textract integration for OCR
- AWS Rekognition Face Liveness integration
- Backend API endpoints for verification submission (Epic 1.5)
- DynamoDB schema for storing verification cases (Epic 1.5)

**Technical Prerequisites:**
- Backend services (Epic 1.5 will provide)
- AWS service integrations
- API authentication and authorization (Epic 1.5)

**Epic Update Required:** YES
- Epic 2 stories assume API endpoints exist
- Must update Epic 2 acceptance criteria to include API integration
- Must add API contract tests to Epic 2 stories

---

## Team Performance Summary

**Strengths:**
- 100% story completion rate
- Excellent test coverage and code quality
- Strong collaboration and knowledge sharing
- Established reusable patterns early

**Areas for Improvement:**
- Cross-epic dependency planning
- Backend-first architecture approach
- Explicit accessibility requirements in stories
- Integration testing strategy

**Team Velocity:**
- 6 stories completed in ~2-3 sprints
- Average: 2-3 stories per sprint
- Quality maintained throughout (no regressions)

---

## Retrospective Outcomes

### Decisions Made
1. ✅ Create Epic 1.5 (Backend Foundation) before Epic 2
2. ✅ Add accessibility template for all future stories
3. ✅ Create cross-epic dependency map
4. ✅ Epic 2 planning review session required

### Commitments
- 7 action items assigned with owners and deadlines
- 5 preparation tasks for Epic 1.5
- 3 critical path items before Epic 2

### Next Steps
1. Execute preparation sprint (2 weeks)
2. Complete Epic 1.5 (Backend Foundation)
3. Review action items in next standup
4. Hold Epic 2 planning review session

---

## Closing Remarks

**Bob (Scrum Master):** "Epic 1 delivered 6 stories with 100% completion. We overcame bundle size constraints, integrated MediaPipe for liveness detection, and established patterns that will accelerate future work. The retrospective surfaced a critical backend gap, and the team collaboratively designed Epic 1.5 to address it. Well done, team."

**Key Lesson:** Foundation before features. Building frontend without backend created integration risk. Epic 1.5 will provide the foundation Epic 2 needs to succeed.

---

**Retrospective Status:** ✅ Complete
**Next Retrospective:** After Epic 1.5 completion
**Document Saved:** `_bmad-output/implementation-artifacts/epic-1-retro-2026-01-14.md`
