{"version":3,"mappings":"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","names":["base64Js","byteLength","toByteArray","fromByteArray","lookup","revLookup","Arr","code","i","len","getLens","b64","validLen","placeHoldersLen","lens","_byteLength","tmp","arr","curByte","tripletToBase64","num","encodeChunk","uint8","start","end","output","extraBytes","parts","maxChunkLength","len2","ieee754","buffer","offset","isLE","mLen","nBytes","e","m","eLen","eMax","eBias","nBits","d","s","value","c","rt","base64","require$$0","require$$1","customInspectSymbol","exports","Buffer","SlowBuffer","K_MAX_LENGTH","typedArraySupport","proto","createBuffer","length","buf","arg","encodingOrOffset","allocUnsafe","from","fromString","fromArrayView","isInstance","fromArrayBuffer","valueOf","b","fromObject","assertSize","size","alloc","fill","encoding","checked","string","actual","fromArrayLike","array","arrayView","copy","byteOffset","obj","numberIsNaN","a","x","y","list","pos","mustMatch","loweredCase","utf8ToBytes","base64ToBytes","slowToString","hexSlice","utf8Slice","asciiSlice","latin1Slice","base64Slice","utf16leSlice","swap","n","str","max","target","thisStart","thisEnd","thisCopy","targetCopy","bidirectionalIndexOf","val","dir","arrayIndexOf","indexSize","arrLength","valLength","read","foundIndex","found","j","hexWrite","remaining","strLen","parsed","utf8Write","blitBuffer","asciiWrite","asciiToBytes","base64Write","ucs2Write","utf16leToBytes","res","firstByte","codePoint","bytesPerSequence","secondByte","thirdByte","fourthByte","tempCodePoint","decodeCodePointsArray","MAX_ARGUMENTS_LENGTH","codePoints","ret","out","hexSliceLookupTable","bytes","newBuf","checkOffset","ext","noAssert","mul","defineBigIntMethod","validateNumber","first","last","boundsError","lo","hi","checkInt","min","maxBytes","wrtBigUInt64LE","checkIntBI","wrtBigUInt64BE","limit","sub","checkIEEE754","writeFloat","littleEndian","writeDouble","targetStart","errors","E","sym","getMessage","Base","name","range","input","msg","received","addNumericalSeparator","checkBounds","type","INVALID_BASE64_RE","base64clean","units","leadSurrogate","byteArray","src","dst","alphabet","table","i16","fn","BufferBigIntNotDefined","ipv4Regex","ipv6Regex","ip","buff","result","byte","sections","isv4","v4Buffer","argv","word","prefixlen","family","_normalizeFamily","bits","addr","mask","addrBuffer","maskBuffer","networkAddress","other","cidrString","cidrParts","aBuffer","bBuffer","t","ipl","octet","balancedMatch","balanced","maybeMatch","r","reg","begs","beg","left","right","ai","bi","braceExpansion","expandTop","escSlash","escOpen","escClose","escComma","escPeriod","numeric","escapeBraces","unescapeBraces","parseCommaParts","pre","body","post","p","postParts","expand","embrace","isPadded","el","lte","gte","isTop","expansions","k","expansion","isNumericSequence","isAlphaSequence","isSequence","isOptions","N","width","incr","test","reverse","pad","need","z","posixClasses","braceEscape","regexpEscape","rangesToString","ranges","parseClass","glob","position","negs","sawStart","uflag","escaping","negate","endPos","rangeStart","WHILE","cls","unip","u","neg","sranges","snegs","escape","windowsPathsNoEscape","unescape","minimatch","pattern","options","assertValidPattern","Minimatch","starDotExtRE","starDotExtTest","f","starDotExtTestDot","starDotExtTestNocase","starDotExtTestNocaseDot","starDotStarRE","starDotStarTest","starDotStarTestDot","dotStarRE","dotStarTest","starRE","starTest","starTestDot","qmarksRE","qmarksTestNocase","$0","noext","qmarksTestNoExt","qmarksTestNocaseDot","qmarksTestNoExtDot","qmarksTestDot","qmarksTest","defaultPlatform","define_process_env_default","path","sep","GLOBSTAR","plTypes","qmark","star","twoStarDot","twoStarNoDot","charSet","set","reSpecials","addPatternStartSet","filter","defaults","def","orig","braceExpand","MAX_PATTERN_LENGTH","makeRe","match","mm","globUnescape","globMagic","regExpEscape","part","_","args","rawGlobParts","__","isUNC","isDrive","ss","globParts","optimizationLevel","gs","prev","didSomething","dd","gss","next","p2","splin","matched","emptyGSMatch","which","negateOffset","file","partial","fileUNC","patternUNC","fd","pd","fi","pi","fl","pl","fr","pr","swallowee","hit","fastTest","re","hasMagic","patternListStack","negativeLists","stateChar","dotTravAllowed","dotFileAllowed","patternStart","subPatternStart","clearStateChar","plEntry","needUflag","consumed","magic","tail","$1","$2","addPatternStart","nl","nlBefore","nlFirst","nlAfter","nlLast","closeParensBefore","openParensBefore","cleanAfter","dollar","flags","er","twoStar","pp","ff","filename","regexMatch","key1","key2","keyMatch","keyMatchFunc","arg0","arg1","name1","name2","keyGet","keyGetFunc","keyMatch2","regexp","keyMatch2Func","keyGet2","pathVar","keys","values","index","keyGet2Func","arg2","name3","keyMatch3","keyMatch3Func","keyMatch4","tokens","key","v","keyMatch4Func","KeyMatch5","keyMatch5Func","regexMatchFunc","ipMatch","ip1","ip2","ipMatchFunc","globMatch","generateGFunction","rm","memorized","domain","generateSyncedGFunction","CsvError","message","contexts","context","is_object","normalize_columns_array","columns","normalizedColumns","l","column","ResizeableBuffer","np","cr","space","tab","init_state","delimiter","underscore","normalize_options","opts","opt","date","delimiter_json","rd","isRecordEmpty","record","field","boms","transform","original_options","info","bufLen","quote","quoting","needMoreDataSize","recordDelimiterMaxLength","numOfCharLeft","requiredLength","nextBuf","push","close","bom","comment_no_infix","from_line","ltrim","max_record_size","raw","relax_quotes","rtrim","skip_empty_lines","to","to_line","comment","record_delimiter","bomSkipped","previousBuf","rawBuffer","escapeIsQuote","bomLength","chr","nextChr","isNextChrTrimable","isNextChrComment","isNextChrDelimiter","isNextChrRecordDelimiter","err","recordDelimiterLength","errField","errRecord","delimiterLength","lappend","rappend","group_columns_by_name","relax_column_count","relax_column_count_less","relax_column_count_more","skip_records_with_empty_values","enabled","recordLength","finalErr","objname","extRecord","firstLineToHeaders","headers","normalizedHeaders","cast","wasQuoting","on_record","timchars","loop1","timchar","sourceBuf","targetBuf","targetPos","sourceLength","ignore_last_delimiters","del","rdLength","rds","loop","skip_records_with_error","isColumns","parse","data","records","parser","err1","err2","BasicCsvParser","line","BracketAwareCsvParser","baseParser","rawTokens","processedTokens","currentToken","bracketCount","token","char","PolicyLoader","model","sec","item","policy","Helper","defaultFileSystem","ErrorNoFileSystem","setDefaultFileSystem","fs","getDefaultFileSystem","mustGetDefaultFileSystem","FileAdapter","filePath","handler","pList","arrayToString","gList","element","text","ptype","rule","rules","oldRule","newRule","fieldIndex","fieldValues","StringAdapter","escapeAssertionReg","escapeAssertion","lastDotIdx","removeComments","arrayEquals","aLen","bLen","arrayRemoveDuplicates","evalRegG","evalReg","hasEval","replaceEval","ruleName","getEvalValue","subMatch","generatorRunSync","iterator","done","temp","generatorRunAsync","customIn","bracketCompatible","exp","reResult","Config","confName","config","section","option","lines","linesCount","currentLine","seenSections","commentPos","lineNumber","shouldWrite","lineNum","equalIndex","itemChild","root","COMPOUND","IDENTIFIER","MEMBER_EXP","LITERAL","THIS_EXP","CALL_EXP","UNARY_EXP","BINARY_EXP","LOGICAL_EXP","CONDITIONAL_EXP","ARRAY_EXP","PERIOD_CODE","COMMA_CODE","SQUOTE_CODE","DQUOTE_CODE","OPAREN_CODE","CPAREN_CODE","OBRACK_CODE","CBRACK_CODE","QUMARK_CODE","SEMCOL_CODE","COLON_CODE","throwError","error","unary_ops","binary_ops","getMaxKeyLen","max_len","max_unop_len","max_binop_len","literals","this_str","binaryPrecedence","op_val","createBinaryExpression","operator","isDecimalDigit","ch","isIdentifierStart","isIdentifierPart","jsep","expr","charAtFunc","charCodeAtFunc","exprI","exprICode","gobbleSpaces","gobbleExpression","gobbleBinaryExpression","consequent","alternate","gobbleBinaryOp","to_check","tc_len","node","biop","prec","stack","biop_info","cur_biop","gobbleToken","gobbleNumericLiteral","gobbleStringLiteral","gobbleArray","gobbleVariable","number","chCode","closed","gobbleIdentifier","identifier","gobbleArguments","termination","ch_i","separator_count","gobbleGroup","nodes","op_name","precedence","literal_name","literal_value","module","o","h","P","Effect","DefaultEffectorStream","eft","DefaultEffector","DefaultLogger","enable","format","logger","getLogger","logPrint","DEFAULT_DOMAIN","loadOrDefault","map","Role","role","hierarchyLevel","Roles","matchingFunc","ok","role1","DefaultRoleManager","maxHierarchyLevel","extraDomain","_a","allRoles","dom","role2","resolve","users","user","domains","roles","hasRoles","hasUsers","defaultDomain","defaultSeparator","sectionNameMap","PolicyOp","requiredSections","Model","cfg","secName","ast","Assertion","stringArguments","util.escapeAssertion","nodeMap","assertionMap","ms","astKey","op","_b","rmMap","astMap","util.arrayEquals","priorityIndex","priorityRule","insertIndex","oneRule","effects","equals","fieldValue","bool","util.arrayRemoveDuplicates","assertion","_c","domainIndex","subIndex","subjectHierarchyMap","policyA","policyB","domainA","domainB","priorityA","groupPolicies","policyMap","child","parent","newModel","newModelFromFile","rbac.DefaultRoleManager","count","FunctionMap","fm","util.keyMatchFunc","util.keyGetFunc","util.keyMatch2Func","util.keyGet2Func","util.keyMatch3Func","util.keyMatch4Func","util.keyMatch5Func","util.regexMatchFunc","util.ipMatchFunc","util.globMatch","func","EnforceContext","rType","pType","eType","mType","CoreEnforcer","asyncCompile","matcherKey","addBinaryOp","expression","compileAsync","compile","adapter","watcher","watcherEx","autoSave","autoBuildRoleLinks","explain","matcher","enforceContext","rvals","_d","_e","_f","_g","_h","_j","_k","explainIndex","functions","expString","effectExpr","HasEval","policyLen","rTokens","rTokensLen","effectStream","parameters","ruleNames","expWithRule","eftRes","rec","reqStr","rval","InternalEnforcer","useWatcher","newRules","oldRules","ManagementEnforcer","params","Enforcer","modelPath","policyPath","lazyLoad","policyString","hasRole","res1","res2","permission","q","withDomain","permissions","resLocal","tokensLength","policySubjects","subjects","inherits","newEnforcerWithClass","enforcer","__vitePreload","parsedParamLen","enableLog","newEnforcer","__classPrivateFieldGet","this","receiver","state","kind","__classPrivateFieldSet","_AwaitLock_acquired","_AwaitLock_waitingResolvers","AwaitLock_1","AwaitLock$1","timeout","resolver","timer","reject","AwaitLock"],"ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42],"sources":["../../../../node_modules/.pnpm/base64-js@1.5.1/node_modules/base64-js/index.js","../../../../node_modules/.pnpm/ieee754@1.2.1/node_modules/ieee754/index.js","../../../../node_modules/.pnpm/buffer@6.0.3/node_modules/buffer/index.js","../../../../node_modules/.pnpm/casbin@5.48.0/node_modules/casbin/lib/esm/util/ip.js","../../../../node_modules/.pnpm/balanced-match@1.0.2/node_modules/balanced-match/index.js","../../../../node_modules/.pnpm/brace-expansion@2.0.2/node_modules/brace-expansion/index.js","../../../../node_modules/.pnpm/minimatch@7.4.6/node_modules/minimatch/dist/mjs/brace-expressions.js","../../../../node_modules/.pnpm/minimatch@7.4.6/node_modules/minimatch/dist/mjs/escape.js","../../../../node_modules/.pnpm/minimatch@7.4.6/node_modules/minimatch/dist/mjs/unescape.js","../../../../node_modules/.pnpm/minimatch@7.4.6/node_modules/minimatch/dist/mjs/index.js","../../../../node_modules/.pnpm/casbin@5.48.0/node_modules/casbin/lib/esm/util/builtinOperators.js","../../../../node_modules/.pnpm/csv-parse@5.6.0/node_modules/csv-parse/lib/api/CsvError.js","../../../../node_modules/.pnpm/csv-parse@5.6.0/node_modules/csv-parse/lib/utils/is_object.js","../../../../node_modules/.pnpm/csv-parse@5.6.0/node_modules/csv-parse/lib/api/normalize_columns_array.js","../../../../node_modules/.pnpm/csv-parse@5.6.0/node_modules/csv-parse/lib/utils/ResizeableBuffer.js","../../../../node_modules/.pnpm/csv-parse@5.6.0/node_modules/csv-parse/lib/api/init_state.js","../../../../node_modules/.pnpm/csv-parse@5.6.0/node_modules/csv-parse/lib/utils/underscore.js","../../../../node_modules/.pnpm/csv-parse@5.6.0/node_modules/csv-parse/lib/api/normalize_options.js","../../../../node_modules/.pnpm/csv-parse@5.6.0/node_modules/csv-parse/lib/api/index.js","../../../../node_modules/.pnpm/csv-parse@5.6.0/node_modules/csv-parse/lib/sync.js","../../../../node_modules/.pnpm/casbin@5.48.0/node_modules/casbin/lib/esm/persist/helper.js","../../../../node_modules/.pnpm/casbin@5.48.0/node_modules/casbin/lib/esm/persist/fileSystem.js","../../../../node_modules/.pnpm/casbin@5.48.0/node_modules/casbin/lib/esm/persist/fileAdapter.js","../../../../node_modules/.pnpm/casbin@5.48.0/node_modules/casbin/lib/esm/persist/stringAdapter.js","../../../../node_modules/.pnpm/casbin@5.48.0/node_modules/casbin/lib/esm/util/util.js","../../../../node_modules/.pnpm/casbin@5.48.0/node_modules/casbin/lib/esm/config.js","../../../../node_modules/.pnpm/jsep@0.3.5/node_modules/jsep/build/jsep.js","../../../../node_modules/.pnpm/@casbin+expression-eval@5.3.0/node_modules/@casbin/expression-eval/dist/expression-eval.module.js","../../../../node_modules/.pnpm/casbin@5.48.0/node_modules/casbin/lib/esm/effect/effector.js","../../../../node_modules/.pnpm/casbin@5.48.0/node_modules/casbin/lib/esm/effect/defaultEffectorStream.js","../../../../node_modules/.pnpm/casbin@5.48.0/node_modules/casbin/lib/esm/effect/defaultEffector.js","../../../../node_modules/.pnpm/casbin@5.48.0/node_modules/casbin/lib/esm/log/defaultLogger.js","../../../../node_modules/.pnpm/casbin@5.48.0/node_modules/casbin/lib/esm/log/logUtil.js","../../../../node_modules/.pnpm/casbin@5.48.0/node_modules/casbin/lib/esm/rbac/defaultRoleManager.js","../../../../node_modules/.pnpm/casbin@5.48.0/node_modules/casbin/lib/esm/model/model.js","../../../../node_modules/.pnpm/casbin@5.48.0/node_modules/casbin/lib/esm/model/assertion.js","../../../../node_modules/.pnpm/casbin@5.48.0/node_modules/casbin/lib/esm/model/functionMap.js","../../../../node_modules/.pnpm/casbin@5.48.0/node_modules/casbin/lib/esm/enforceContext.js","../../../../node_modules/.pnpm/casbin@5.48.0/node_modules/casbin/lib/esm/coreEnforcer.js","../../../../node_modules/.pnpm/casbin@5.48.0/node_modules/casbin/lib/esm/internalEnforcer.js","../../../../node_modules/.pnpm/casbin@5.48.0/node_modules/casbin/lib/esm/managementEnforcer.js","../../../../node_modules/.pnpm/casbin@5.48.0/node_modules/casbin/lib/esm/enforcer.js","../../../../node_modules/.pnpm/await-lock@2.2.2/node_modules/await-lock/build/AwaitLock.js"],"sourcesContent":["'use strict'\n\nexports.byteLength = byteLength\nexports.toByteArray = toByteArray\nexports.fromByteArray = fromByteArray\n\nvar lookup = []\nvar revLookup = []\nvar Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array\n\nvar code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'\nfor (var i = 0, len = code.length; i < len; ++i) {\n  lookup[i] = code[i]\n  revLookup[code.charCodeAt(i)] = i\n}\n\n// Support decoding URL-safe base64 strings, as Node.js does.\n// See: https://en.wikipedia.org/wiki/Base64#URL_applications\nrevLookup['-'.charCodeAt(0)] = 62\nrevLookup['_'.charCodeAt(0)] = 63\n\nfunction getLens (b64) {\n  var len = b64.length\n\n  if (len % 4 > 0) {\n    throw new Error('Invalid string. Length must be a multiple of 4')\n  }\n\n  // Trim off extra bytes after placeholder bytes are found\n  // See: https://github.com/beatgammit/base64-js/issues/42\n  var validLen = b64.indexOf('=')\n  if (validLen === -1) validLen = len\n\n  var placeHoldersLen = validLen === len\n    ? 0\n    : 4 - (validLen % 4)\n\n  return [validLen, placeHoldersLen]\n}\n\n// base64 is 4/3 + up to two characters of the original data\nfunction byteLength (b64) {\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction _byteLength (b64, validLen, placeHoldersLen) {\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction toByteArray (b64) {\n  var tmp\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n\n  var arr = new Arr(_byteLength(b64, validLen, placeHoldersLen))\n\n  var curByte = 0\n\n  // if there are placeholders, only get up to the last complete 4 chars\n  var len = placeHoldersLen > 0\n    ? validLen - 4\n    : validLen\n\n  var i\n  for (i = 0; i < len; i += 4) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 18) |\n      (revLookup[b64.charCodeAt(i + 1)] << 12) |\n      (revLookup[b64.charCodeAt(i + 2)] << 6) |\n      revLookup[b64.charCodeAt(i + 3)]\n    arr[curByte++] = (tmp >> 16) & 0xFF\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 2) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 2) |\n      (revLookup[b64.charCodeAt(i + 1)] >> 4)\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 1) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 10) |\n      (revLookup[b64.charCodeAt(i + 1)] << 4) |\n      (revLookup[b64.charCodeAt(i + 2)] >> 2)\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  return arr\n}\n\nfunction tripletToBase64 (num) {\n  return lookup[num >> 18 & 0x3F] +\n    lookup[num >> 12 & 0x3F] +\n    lookup[num >> 6 & 0x3F] +\n    lookup[num & 0x3F]\n}\n\nfunction encodeChunk (uint8, start, end) {\n  var tmp\n  var output = []\n  for (var i = start; i < end; i += 3) {\n    tmp =\n      ((uint8[i] << 16) & 0xFF0000) +\n      ((uint8[i + 1] << 8) & 0xFF00) +\n      (uint8[i + 2] & 0xFF)\n    output.push(tripletToBase64(tmp))\n  }\n  return output.join('')\n}\n\nfunction fromByteArray (uint8) {\n  var tmp\n  var len = uint8.length\n  var extraBytes = len % 3 // if we have 1 byte left, pad 2 bytes\n  var parts = []\n  var maxChunkLength = 16383 // must be multiple of 3\n\n  // go through the array every three bytes, we'll deal with trailing stuff later\n  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {\n    parts.push(encodeChunk(uint8, i, (i + maxChunkLength) > len2 ? len2 : (i + maxChunkLength)))\n  }\n\n  // pad the end with zeros, but make sure to not forget the extra bytes\n  if (extraBytes === 1) {\n    tmp = uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 2] +\n      lookup[(tmp << 4) & 0x3F] +\n      '=='\n    )\n  } else if (extraBytes === 2) {\n    tmp = (uint8[len - 2] << 8) + uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 10] +\n      lookup[(tmp >> 4) & 0x3F] +\n      lookup[(tmp << 2) & 0x3F] +\n      '='\n    )\n  }\n\n  return parts.join('')\n}\n","/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */\nexports.read = function (buffer, offset, isLE, mLen, nBytes) {\n  var e, m\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var nBits = -7\n  var i = isLE ? (nBytes - 1) : 0\n  var d = isLE ? -1 : 1\n  var s = buffer[offset + i]\n\n  i += d\n\n  e = s & ((1 << (-nBits)) - 1)\n  s >>= (-nBits)\n  nBits += eLen\n  for (; nBits > 0; e = (e * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  m = e & ((1 << (-nBits)) - 1)\n  e >>= (-nBits)\n  nBits += mLen\n  for (; nBits > 0; m = (m * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  if (e === 0) {\n    e = 1 - eBias\n  } else if (e === eMax) {\n    return m ? NaN : ((s ? -1 : 1) * Infinity)\n  } else {\n    m = m + Math.pow(2, mLen)\n    e = e - eBias\n  }\n  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)\n}\n\nexports.write = function (buffer, value, offset, isLE, mLen, nBytes) {\n  var e, m, c\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0)\n  var i = isLE ? 0 : (nBytes - 1)\n  var d = isLE ? 1 : -1\n  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0\n\n  value = Math.abs(value)\n\n  if (isNaN(value) || value === Infinity) {\n    m = isNaN(value) ? 1 : 0\n    e = eMax\n  } else {\n    e = Math.floor(Math.log(value) / Math.LN2)\n    if (value * (c = Math.pow(2, -e)) < 1) {\n      e--\n      c *= 2\n    }\n    if (e + eBias >= 1) {\n      value += rt / c\n    } else {\n      value += rt * Math.pow(2, 1 - eBias)\n    }\n    if (value * c >= 2) {\n      e++\n      c /= 2\n    }\n\n    if (e + eBias >= eMax) {\n      m = 0\n      e = eMax\n    } else if (e + eBias >= 1) {\n      m = ((value * c) - 1) * Math.pow(2, mLen)\n      e = e + eBias\n    } else {\n      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)\n      e = 0\n    }\n  }\n\n  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n  e = (e << mLen) | m\n  eLen += mLen\n  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n  buffer[offset + i - d] |= s * 128\n}\n","/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <https://feross.org>\n * @license  MIT\n */\n/* eslint-disable no-proto */\n\n'use strict'\n\nconst base64 = require('base64-js')\nconst ieee754 = require('ieee754')\nconst customInspectSymbol =\n  (typeof Symbol === 'function' && typeof Symbol['for'] === 'function') // eslint-disable-line dot-notation\n    ? Symbol['for']('nodejs.util.inspect.custom') // eslint-disable-line dot-notation\n    : null\n\nexports.Buffer = Buffer\nexports.SlowBuffer = SlowBuffer\nexports.INSPECT_MAX_BYTES = 50\n\nconst K_MAX_LENGTH = 0x7fffffff\nexports.kMaxLength = K_MAX_LENGTH\n\n/**\n * If `Buffer.TYPED_ARRAY_SUPPORT`:\n *   === true    Use Uint8Array implementation (fastest)\n *   === false   Print warning and recommend using `buffer` v4.x which has an Object\n *               implementation (most compatible, even IE6)\n *\n * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,\n * Opera 11.6+, iOS 4.2+.\n *\n * We report that the browser does not support typed arrays if the are not subclassable\n * using __proto__. Firefox 4-29 lacks support for adding new properties to `Uint8Array`\n * (See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438). IE 10 lacks support\n * for __proto__ and has a buggy typed array implementation.\n */\nBuffer.TYPED_ARRAY_SUPPORT = typedArraySupport()\n\nif (!Buffer.TYPED_ARRAY_SUPPORT && typeof console !== 'undefined' &&\n    typeof console.error === 'function') {\n  console.error(\n    'This browser lacks typed array (Uint8Array) support which is required by ' +\n    '`buffer` v5.x. Use `buffer` v4.x if you require old browser support.'\n  )\n}\n\nfunction typedArraySupport () {\n  // Can typed array instances can be augmented?\n  try {\n    const arr = new Uint8Array(1)\n    const proto = { foo: function () { return 42 } }\n    Object.setPrototypeOf(proto, Uint8Array.prototype)\n    Object.setPrototypeOf(arr, proto)\n    return arr.foo() === 42\n  } catch (e) {\n    return false\n  }\n}\n\nObject.defineProperty(Buffer.prototype, 'parent', {\n  enumerable: true,\n  get: function () {\n    if (!Buffer.isBuffer(this)) return undefined\n    return this.buffer\n  }\n})\n\nObject.defineProperty(Buffer.prototype, 'offset', {\n  enumerable: true,\n  get: function () {\n    if (!Buffer.isBuffer(this)) return undefined\n    return this.byteOffset\n  }\n})\n\nfunction createBuffer (length) {\n  if (length > K_MAX_LENGTH) {\n    throw new RangeError('The value \"' + length + '\" is invalid for option \"size\"')\n  }\n  // Return an augmented `Uint8Array` instance\n  const buf = new Uint8Array(length)\n  Object.setPrototypeOf(buf, Buffer.prototype)\n  return buf\n}\n\n/**\n * The Buffer constructor returns instances of `Uint8Array` that have their\n * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of\n * `Uint8Array`, so the returned instances will have all the node `Buffer` methods\n * and the `Uint8Array` methods. Square bracket notation works as expected -- it\n * returns a single octet.\n *\n * The `Uint8Array` prototype remains unmodified.\n */\n\nfunction Buffer (arg, encodingOrOffset, length) {\n  // Common case.\n  if (typeof arg === 'number') {\n    if (typeof encodingOrOffset === 'string') {\n      throw new TypeError(\n        'The \"string\" argument must be of type string. Received type number'\n      )\n    }\n    return allocUnsafe(arg)\n  }\n  return from(arg, encodingOrOffset, length)\n}\n\nBuffer.poolSize = 8192 // not used by this implementation\n\nfunction from (value, encodingOrOffset, length) {\n  if (typeof value === 'string') {\n    return fromString(value, encodingOrOffset)\n  }\n\n  if (ArrayBuffer.isView(value)) {\n    return fromArrayView(value)\n  }\n\n  if (value == null) {\n    throw new TypeError(\n      'The first argument must be one of type string, Buffer, ArrayBuffer, Array, ' +\n      'or Array-like Object. Received type ' + (typeof value)\n    )\n  }\n\n  if (isInstance(value, ArrayBuffer) ||\n      (value && isInstance(value.buffer, ArrayBuffer))) {\n    return fromArrayBuffer(value, encodingOrOffset, length)\n  }\n\n  if (typeof SharedArrayBuffer !== 'undefined' &&\n      (isInstance(value, SharedArrayBuffer) ||\n      (value && isInstance(value.buffer, SharedArrayBuffer)))) {\n    return fromArrayBuffer(value, encodingOrOffset, length)\n  }\n\n  if (typeof value === 'number') {\n    throw new TypeError(\n      'The \"value\" argument must not be of type number. Received type number'\n    )\n  }\n\n  const valueOf = value.valueOf && value.valueOf()\n  if (valueOf != null && valueOf !== value) {\n    return Buffer.from(valueOf, encodingOrOffset, length)\n  }\n\n  const b = fromObject(value)\n  if (b) return b\n\n  if (typeof Symbol !== 'undefined' && Symbol.toPrimitive != null &&\n      typeof value[Symbol.toPrimitive] === 'function') {\n    return Buffer.from(value[Symbol.toPrimitive]('string'), encodingOrOffset, length)\n  }\n\n  throw new TypeError(\n    'The first argument must be one of type string, Buffer, ArrayBuffer, Array, ' +\n    'or Array-like Object. Received type ' + (typeof value)\n  )\n}\n\n/**\n * Functionally equivalent to Buffer(arg, encoding) but throws a TypeError\n * if value is a number.\n * Buffer.from(str[, encoding])\n * Buffer.from(array)\n * Buffer.from(buffer)\n * Buffer.from(arrayBuffer[, byteOffset[, length]])\n **/\nBuffer.from = function (value, encodingOrOffset, length) {\n  return from(value, encodingOrOffset, length)\n}\n\n// Note: Change prototype *after* Buffer.from is defined to workaround Chrome bug:\n// https://github.com/feross/buffer/pull/148\nObject.setPrototypeOf(Buffer.prototype, Uint8Array.prototype)\nObject.setPrototypeOf(Buffer, Uint8Array)\n\nfunction assertSize (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('\"size\" argument must be of type number')\n  } else if (size < 0) {\n    throw new RangeError('The value \"' + size + '\" is invalid for option \"size\"')\n  }\n}\n\nfunction alloc (size, fill, encoding) {\n  assertSize(size)\n  if (size <= 0) {\n    return createBuffer(size)\n  }\n  if (fill !== undefined) {\n    // Only pay attention to encoding if it's a string. This\n    // prevents accidentally sending in a number that would\n    // be interpreted as a start offset.\n    return typeof encoding === 'string'\n      ? createBuffer(size).fill(fill, encoding)\n      : createBuffer(size).fill(fill)\n  }\n  return createBuffer(size)\n}\n\n/**\n * Creates a new filled Buffer instance.\n * alloc(size[, fill[, encoding]])\n **/\nBuffer.alloc = function (size, fill, encoding) {\n  return alloc(size, fill, encoding)\n}\n\nfunction allocUnsafe (size) {\n  assertSize(size)\n  return createBuffer(size < 0 ? 0 : checked(size) | 0)\n}\n\n/**\n * Equivalent to Buffer(num), by default creates a non-zero-filled Buffer instance.\n * */\nBuffer.allocUnsafe = function (size) {\n  return allocUnsafe(size)\n}\n/**\n * Equivalent to SlowBuffer(num), by default creates a non-zero-filled Buffer instance.\n */\nBuffer.allocUnsafeSlow = function (size) {\n  return allocUnsafe(size)\n}\n\nfunction fromString (string, encoding) {\n  if (typeof encoding !== 'string' || encoding === '') {\n    encoding = 'utf8'\n  }\n\n  if (!Buffer.isEncoding(encoding)) {\n    throw new TypeError('Unknown encoding: ' + encoding)\n  }\n\n  const length = byteLength(string, encoding) | 0\n  let buf = createBuffer(length)\n\n  const actual = buf.write(string, encoding)\n\n  if (actual !== length) {\n    // Writing a hex string, for example, that contains invalid characters will\n    // cause everything after the first invalid character to be ignored. (e.g.\n    // 'abxxcd' will be treated as 'ab')\n    buf = buf.slice(0, actual)\n  }\n\n  return buf\n}\n\nfunction fromArrayLike (array) {\n  const length = array.length < 0 ? 0 : checked(array.length) | 0\n  const buf = createBuffer(length)\n  for (let i = 0; i < length; i += 1) {\n    buf[i] = array[i] & 255\n  }\n  return buf\n}\n\nfunction fromArrayView (arrayView) {\n  if (isInstance(arrayView, Uint8Array)) {\n    const copy = new Uint8Array(arrayView)\n    return fromArrayBuffer(copy.buffer, copy.byteOffset, copy.byteLength)\n  }\n  return fromArrayLike(arrayView)\n}\n\nfunction fromArrayBuffer (array, byteOffset, length) {\n  if (byteOffset < 0 || array.byteLength < byteOffset) {\n    throw new RangeError('\"offset\" is outside of buffer bounds')\n  }\n\n  if (array.byteLength < byteOffset + (length || 0)) {\n    throw new RangeError('\"length\" is outside of buffer bounds')\n  }\n\n  let buf\n  if (byteOffset === undefined && length === undefined) {\n    buf = new Uint8Array(array)\n  } else if (length === undefined) {\n    buf = new Uint8Array(array, byteOffset)\n  } else {\n    buf = new Uint8Array(array, byteOffset, length)\n  }\n\n  // Return an augmented `Uint8Array` instance\n  Object.setPrototypeOf(buf, Buffer.prototype)\n\n  return buf\n}\n\nfunction fromObject (obj) {\n  if (Buffer.isBuffer(obj)) {\n    const len = checked(obj.length) | 0\n    const buf = createBuffer(len)\n\n    if (buf.length === 0) {\n      return buf\n    }\n\n    obj.copy(buf, 0, 0, len)\n    return buf\n  }\n\n  if (obj.length !== undefined) {\n    if (typeof obj.length !== 'number' || numberIsNaN(obj.length)) {\n      return createBuffer(0)\n    }\n    return fromArrayLike(obj)\n  }\n\n  if (obj.type === 'Buffer' && Array.isArray(obj.data)) {\n    return fromArrayLike(obj.data)\n  }\n}\n\nfunction checked (length) {\n  // Note: cannot use `length < K_MAX_LENGTH` here because that fails when\n  // length is NaN (which is otherwise coerced to zero.)\n  if (length >= K_MAX_LENGTH) {\n    throw new RangeError('Attempt to allocate Buffer larger than maximum ' +\n                         'size: 0x' + K_MAX_LENGTH.toString(16) + ' bytes')\n  }\n  return length | 0\n}\n\nfunction SlowBuffer (length) {\n  if (+length != length) { // eslint-disable-line eqeqeq\n    length = 0\n  }\n  return Buffer.alloc(+length)\n}\n\nBuffer.isBuffer = function isBuffer (b) {\n  return b != null && b._isBuffer === true &&\n    b !== Buffer.prototype // so Buffer.isBuffer(Buffer.prototype) will be false\n}\n\nBuffer.compare = function compare (a, b) {\n  if (isInstance(a, Uint8Array)) a = Buffer.from(a, a.offset, a.byteLength)\n  if (isInstance(b, Uint8Array)) b = Buffer.from(b, b.offset, b.byteLength)\n  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {\n    throw new TypeError(\n      'The \"buf1\", \"buf2\" arguments must be one of type Buffer or Uint8Array'\n    )\n  }\n\n  if (a === b) return 0\n\n  let x = a.length\n  let y = b.length\n\n  for (let i = 0, len = Math.min(x, y); i < len; ++i) {\n    if (a[i] !== b[i]) {\n      x = a[i]\n      y = b[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\nBuffer.isEncoding = function isEncoding (encoding) {\n  switch (String(encoding).toLowerCase()) {\n    case 'hex':\n    case 'utf8':\n    case 'utf-8':\n    case 'ascii':\n    case 'latin1':\n    case 'binary':\n    case 'base64':\n    case 'ucs2':\n    case 'ucs-2':\n    case 'utf16le':\n    case 'utf-16le':\n      return true\n    default:\n      return false\n  }\n}\n\nBuffer.concat = function concat (list, length) {\n  if (!Array.isArray(list)) {\n    throw new TypeError('\"list\" argument must be an Array of Buffers')\n  }\n\n  if (list.length === 0) {\n    return Buffer.alloc(0)\n  }\n\n  let i\n  if (length === undefined) {\n    length = 0\n    for (i = 0; i < list.length; ++i) {\n      length += list[i].length\n    }\n  }\n\n  const buffer = Buffer.allocUnsafe(length)\n  let pos = 0\n  for (i = 0; i < list.length; ++i) {\n    let buf = list[i]\n    if (isInstance(buf, Uint8Array)) {\n      if (pos + buf.length > buffer.length) {\n        if (!Buffer.isBuffer(buf)) buf = Buffer.from(buf)\n        buf.copy(buffer, pos)\n      } else {\n        Uint8Array.prototype.set.call(\n          buffer,\n          buf,\n          pos\n        )\n      }\n    } else if (!Buffer.isBuffer(buf)) {\n      throw new TypeError('\"list\" argument must be an Array of Buffers')\n    } else {\n      buf.copy(buffer, pos)\n    }\n    pos += buf.length\n  }\n  return buffer\n}\n\nfunction byteLength (string, encoding) {\n  if (Buffer.isBuffer(string)) {\n    return string.length\n  }\n  if (ArrayBuffer.isView(string) || isInstance(string, ArrayBuffer)) {\n    return string.byteLength\n  }\n  if (typeof string !== 'string') {\n    throw new TypeError(\n      'The \"string\" argument must be one of type string, Buffer, or ArrayBuffer. ' +\n      'Received type ' + typeof string\n    )\n  }\n\n  const len = string.length\n  const mustMatch = (arguments.length > 2 && arguments[2] === true)\n  if (!mustMatch && len === 0) return 0\n\n  // Use a for loop to avoid recursion\n  let loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return len\n      case 'utf8':\n      case 'utf-8':\n        return utf8ToBytes(string).length\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return len * 2\n      case 'hex':\n        return len >>> 1\n      case 'base64':\n        return base64ToBytes(string).length\n      default:\n        if (loweredCase) {\n          return mustMatch ? -1 : utf8ToBytes(string).length // assume utf8\n        }\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\nBuffer.byteLength = byteLength\n\nfunction slowToString (encoding, start, end) {\n  let loweredCase = false\n\n  // No need to verify that \"this.length <= MAX_UINT32\" since it's a read-only\n  // property of a typed array.\n\n  // This behaves neither like String nor Uint8Array in that we set start/end\n  // to their upper/lower bounds if the value passed is out of range.\n  // undefined is handled specially as per ECMA-262 6th Edition,\n  // Section 13.3.3.7 Runtime Semantics: KeyedBindingInitialization.\n  if (start === undefined || start < 0) {\n    start = 0\n  }\n  // Return early if start > this.length. Done here to prevent potential uint32\n  // coercion fail below.\n  if (start > this.length) {\n    return ''\n  }\n\n  if (end === undefined || end > this.length) {\n    end = this.length\n  }\n\n  if (end <= 0) {\n    return ''\n  }\n\n  // Force coercion to uint32. This will also coerce falsey/NaN values to 0.\n  end >>>= 0\n  start >>>= 0\n\n  if (end <= start) {\n    return ''\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  while (true) {\n    switch (encoding) {\n      case 'hex':\n        return hexSlice(this, start, end)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Slice(this, start, end)\n\n      case 'ascii':\n        return asciiSlice(this, start, end)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Slice(this, start, end)\n\n      case 'base64':\n        return base64Slice(this, start, end)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return utf16leSlice(this, start, end)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = (encoding + '').toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\n// This property is used by `Buffer.isBuffer` (and the `is-buffer` npm package)\n// to detect a Buffer instance. It's not possible to use `instanceof Buffer`\n// reliably in a browserify context because there could be multiple different\n// copies of the 'buffer' package in use. This method works even for Buffer\n// instances that were created from another copy of the `buffer` package.\n// See: https://github.com/feross/buffer/issues/154\nBuffer.prototype._isBuffer = true\n\nfunction swap (b, n, m) {\n  const i = b[n]\n  b[n] = b[m]\n  b[m] = i\n}\n\nBuffer.prototype.swap16 = function swap16 () {\n  const len = this.length\n  if (len % 2 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 16-bits')\n  }\n  for (let i = 0; i < len; i += 2) {\n    swap(this, i, i + 1)\n  }\n  return this\n}\n\nBuffer.prototype.swap32 = function swap32 () {\n  const len = this.length\n  if (len % 4 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 32-bits')\n  }\n  for (let i = 0; i < len; i += 4) {\n    swap(this, i, i + 3)\n    swap(this, i + 1, i + 2)\n  }\n  return this\n}\n\nBuffer.prototype.swap64 = function swap64 () {\n  const len = this.length\n  if (len % 8 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 64-bits')\n  }\n  for (let i = 0; i < len; i += 8) {\n    swap(this, i, i + 7)\n    swap(this, i + 1, i + 6)\n    swap(this, i + 2, i + 5)\n    swap(this, i + 3, i + 4)\n  }\n  return this\n}\n\nBuffer.prototype.toString = function toString () {\n  const length = this.length\n  if (length === 0) return ''\n  if (arguments.length === 0) return utf8Slice(this, 0, length)\n  return slowToString.apply(this, arguments)\n}\n\nBuffer.prototype.toLocaleString = Buffer.prototype.toString\n\nBuffer.prototype.equals = function equals (b) {\n  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')\n  if (this === b) return true\n  return Buffer.compare(this, b) === 0\n}\n\nBuffer.prototype.inspect = function inspect () {\n  let str = ''\n  const max = exports.INSPECT_MAX_BYTES\n  str = this.toString('hex', 0, max).replace(/(.{2})/g, '$1 ').trim()\n  if (this.length > max) str += ' ... '\n  return '<Buffer ' + str + '>'\n}\nif (customInspectSymbol) {\n  Buffer.prototype[customInspectSymbol] = Buffer.prototype.inspect\n}\n\nBuffer.prototype.compare = function compare (target, start, end, thisStart, thisEnd) {\n  if (isInstance(target, Uint8Array)) {\n    target = Buffer.from(target, target.offset, target.byteLength)\n  }\n  if (!Buffer.isBuffer(target)) {\n    throw new TypeError(\n      'The \"target\" argument must be one of type Buffer or Uint8Array. ' +\n      'Received type ' + (typeof target)\n    )\n  }\n\n  if (start === undefined) {\n    start = 0\n  }\n  if (end === undefined) {\n    end = target ? target.length : 0\n  }\n  if (thisStart === undefined) {\n    thisStart = 0\n  }\n  if (thisEnd === undefined) {\n    thisEnd = this.length\n  }\n\n  if (start < 0 || end > target.length || thisStart < 0 || thisEnd > this.length) {\n    throw new RangeError('out of range index')\n  }\n\n  if (thisStart >= thisEnd && start >= end) {\n    return 0\n  }\n  if (thisStart >= thisEnd) {\n    return -1\n  }\n  if (start >= end) {\n    return 1\n  }\n\n  start >>>= 0\n  end >>>= 0\n  thisStart >>>= 0\n  thisEnd >>>= 0\n\n  if (this === target) return 0\n\n  let x = thisEnd - thisStart\n  let y = end - start\n  const len = Math.min(x, y)\n\n  const thisCopy = this.slice(thisStart, thisEnd)\n  const targetCopy = target.slice(start, end)\n\n  for (let i = 0; i < len; ++i) {\n    if (thisCopy[i] !== targetCopy[i]) {\n      x = thisCopy[i]\n      y = targetCopy[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\n// Finds either the first index of `val` in `buffer` at offset >= `byteOffset`,\n// OR the last index of `val` in `buffer` at offset <= `byteOffset`.\n//\n// Arguments:\n// - buffer - a Buffer to search\n// - val - a string, Buffer, or number\n// - byteOffset - an index into `buffer`; will be clamped to an int32\n// - encoding - an optional encoding, relevant is val is a string\n// - dir - true for indexOf, false for lastIndexOf\nfunction bidirectionalIndexOf (buffer, val, byteOffset, encoding, dir) {\n  // Empty buffer means no match\n  if (buffer.length === 0) return -1\n\n  // Normalize byteOffset\n  if (typeof byteOffset === 'string') {\n    encoding = byteOffset\n    byteOffset = 0\n  } else if (byteOffset > 0x7fffffff) {\n    byteOffset = 0x7fffffff\n  } else if (byteOffset < -0x80000000) {\n    byteOffset = -0x80000000\n  }\n  byteOffset = +byteOffset // Coerce to Number.\n  if (numberIsNaN(byteOffset)) {\n    // byteOffset: it it's undefined, null, NaN, \"foo\", etc, search whole buffer\n    byteOffset = dir ? 0 : (buffer.length - 1)\n  }\n\n  // Normalize byteOffset: negative offsets start from the end of the buffer\n  if (byteOffset < 0) byteOffset = buffer.length + byteOffset\n  if (byteOffset >= buffer.length) {\n    if (dir) return -1\n    else byteOffset = buffer.length - 1\n  } else if (byteOffset < 0) {\n    if (dir) byteOffset = 0\n    else return -1\n  }\n\n  // Normalize val\n  if (typeof val === 'string') {\n    val = Buffer.from(val, encoding)\n  }\n\n  // Finally, search either indexOf (if dir is true) or lastIndexOf\n  if (Buffer.isBuffer(val)) {\n    // Special case: looking for empty string/buffer always fails\n    if (val.length === 0) {\n      return -1\n    }\n    return arrayIndexOf(buffer, val, byteOffset, encoding, dir)\n  } else if (typeof val === 'number') {\n    val = val & 0xFF // Search for a byte value [0-255]\n    if (typeof Uint8Array.prototype.indexOf === 'function') {\n      if (dir) {\n        return Uint8Array.prototype.indexOf.call(buffer, val, byteOffset)\n      } else {\n        return Uint8Array.prototype.lastIndexOf.call(buffer, val, byteOffset)\n      }\n    }\n    return arrayIndexOf(buffer, [val], byteOffset, encoding, dir)\n  }\n\n  throw new TypeError('val must be string, number or Buffer')\n}\n\nfunction arrayIndexOf (arr, val, byteOffset, encoding, dir) {\n  let indexSize = 1\n  let arrLength = arr.length\n  let valLength = val.length\n\n  if (encoding !== undefined) {\n    encoding = String(encoding).toLowerCase()\n    if (encoding === 'ucs2' || encoding === 'ucs-2' ||\n        encoding === 'utf16le' || encoding === 'utf-16le') {\n      if (arr.length < 2 || val.length < 2) {\n        return -1\n      }\n      indexSize = 2\n      arrLength /= 2\n      valLength /= 2\n      byteOffset /= 2\n    }\n  }\n\n  function read (buf, i) {\n    if (indexSize === 1) {\n      return buf[i]\n    } else {\n      return buf.readUInt16BE(i * indexSize)\n    }\n  }\n\n  let i\n  if (dir) {\n    let foundIndex = -1\n    for (i = byteOffset; i < arrLength; i++) {\n      if (read(arr, i) === read(val, foundIndex === -1 ? 0 : i - foundIndex)) {\n        if (foundIndex === -1) foundIndex = i\n        if (i - foundIndex + 1 === valLength) return foundIndex * indexSize\n      } else {\n        if (foundIndex !== -1) i -= i - foundIndex\n        foundIndex = -1\n      }\n    }\n  } else {\n    if (byteOffset + valLength > arrLength) byteOffset = arrLength - valLength\n    for (i = byteOffset; i >= 0; i--) {\n      let found = true\n      for (let j = 0; j < valLength; j++) {\n        if (read(arr, i + j) !== read(val, j)) {\n          found = false\n          break\n        }\n      }\n      if (found) return i\n    }\n  }\n\n  return -1\n}\n\nBuffer.prototype.includes = function includes (val, byteOffset, encoding) {\n  return this.indexOf(val, byteOffset, encoding) !== -1\n}\n\nBuffer.prototype.indexOf = function indexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, true)\n}\n\nBuffer.prototype.lastIndexOf = function lastIndexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, false)\n}\n\nfunction hexWrite (buf, string, offset, length) {\n  offset = Number(offset) || 0\n  const remaining = buf.length - offset\n  if (!length) {\n    length = remaining\n  } else {\n    length = Number(length)\n    if (length > remaining) {\n      length = remaining\n    }\n  }\n\n  const strLen = string.length\n\n  if (length > strLen / 2) {\n    length = strLen / 2\n  }\n  let i\n  for (i = 0; i < length; ++i) {\n    const parsed = parseInt(string.substr(i * 2, 2), 16)\n    if (numberIsNaN(parsed)) return i\n    buf[offset + i] = parsed\n  }\n  return i\n}\n\nfunction utf8Write (buf, string, offset, length) {\n  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nfunction asciiWrite (buf, string, offset, length) {\n  return blitBuffer(asciiToBytes(string), buf, offset, length)\n}\n\nfunction base64Write (buf, string, offset, length) {\n  return blitBuffer(base64ToBytes(string), buf, offset, length)\n}\n\nfunction ucs2Write (buf, string, offset, length) {\n  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nBuffer.prototype.write = function write (string, offset, length, encoding) {\n  // Buffer#write(string)\n  if (offset === undefined) {\n    encoding = 'utf8'\n    length = this.length\n    offset = 0\n  // Buffer#write(string, encoding)\n  } else if (length === undefined && typeof offset === 'string') {\n    encoding = offset\n    length = this.length\n    offset = 0\n  // Buffer#write(string, offset[, length][, encoding])\n  } else if (isFinite(offset)) {\n    offset = offset >>> 0\n    if (isFinite(length)) {\n      length = length >>> 0\n      if (encoding === undefined) encoding = 'utf8'\n    } else {\n      encoding = length\n      length = undefined\n    }\n  } else {\n    throw new Error(\n      'Buffer.write(string, encoding, offset[, length]) is no longer supported'\n    )\n  }\n\n  const remaining = this.length - offset\n  if (length === undefined || length > remaining) length = remaining\n\n  if ((string.length > 0 && (length < 0 || offset < 0)) || offset > this.length) {\n    throw new RangeError('Attempt to write outside buffer bounds')\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  let loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'hex':\n        return hexWrite(this, string, offset, length)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Write(this, string, offset, length)\n\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return asciiWrite(this, string, offset, length)\n\n      case 'base64':\n        // Warning: maxLength not taken into account in base64Write\n        return base64Write(this, string, offset, length)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return ucs2Write(this, string, offset, length)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\nBuffer.prototype.toJSON = function toJSON () {\n  return {\n    type: 'Buffer',\n    data: Array.prototype.slice.call(this._arr || this, 0)\n  }\n}\n\nfunction base64Slice (buf, start, end) {\n  if (start === 0 && end === buf.length) {\n    return base64.fromByteArray(buf)\n  } else {\n    return base64.fromByteArray(buf.slice(start, end))\n  }\n}\n\nfunction utf8Slice (buf, start, end) {\n  end = Math.min(buf.length, end)\n  const res = []\n\n  let i = start\n  while (i < end) {\n    const firstByte = buf[i]\n    let codePoint = null\n    let bytesPerSequence = (firstByte > 0xEF)\n      ? 4\n      : (firstByte > 0xDF)\n          ? 3\n          : (firstByte > 0xBF)\n              ? 2\n              : 1\n\n    if (i + bytesPerSequence <= end) {\n      let secondByte, thirdByte, fourthByte, tempCodePoint\n\n      switch (bytesPerSequence) {\n        case 1:\n          if (firstByte < 0x80) {\n            codePoint = firstByte\n          }\n          break\n        case 2:\n          secondByte = buf[i + 1]\n          if ((secondByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0x1F) << 0x6 | (secondByte & 0x3F)\n            if (tempCodePoint > 0x7F) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 3:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | (thirdByte & 0x3F)\n            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 4:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          fourthByte = buf[i + 3]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | (fourthByte & 0x3F)\n            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {\n              codePoint = tempCodePoint\n            }\n          }\n      }\n    }\n\n    if (codePoint === null) {\n      // we did not generate a valid codePoint so insert a\n      // replacement char (U+FFFD) and advance only 1 byte\n      codePoint = 0xFFFD\n      bytesPerSequence = 1\n    } else if (codePoint > 0xFFFF) {\n      // encode to utf16 (surrogate pair dance)\n      codePoint -= 0x10000\n      res.push(codePoint >>> 10 & 0x3FF | 0xD800)\n      codePoint = 0xDC00 | codePoint & 0x3FF\n    }\n\n    res.push(codePoint)\n    i += bytesPerSequence\n  }\n\n  return decodeCodePointsArray(res)\n}\n\n// Based on http://stackoverflow.com/a/22747272/680742, the browser with\n// the lowest limit is Chrome, with 0x10000 args.\n// We go 1 magnitude less, for safety\nconst MAX_ARGUMENTS_LENGTH = 0x1000\n\nfunction decodeCodePointsArray (codePoints) {\n  const len = codePoints.length\n  if (len <= MAX_ARGUMENTS_LENGTH) {\n    return String.fromCharCode.apply(String, codePoints) // avoid extra slice()\n  }\n\n  // Decode in chunks to avoid \"call stack size exceeded\".\n  let res = ''\n  let i = 0\n  while (i < len) {\n    res += String.fromCharCode.apply(\n      String,\n      codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH)\n    )\n  }\n  return res\n}\n\nfunction asciiSlice (buf, start, end) {\n  let ret = ''\n  end = Math.min(buf.length, end)\n\n  for (let i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i] & 0x7F)\n  }\n  return ret\n}\n\nfunction latin1Slice (buf, start, end) {\n  let ret = ''\n  end = Math.min(buf.length, end)\n\n  for (let i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i])\n  }\n  return ret\n}\n\nfunction hexSlice (buf, start, end) {\n  const len = buf.length\n\n  if (!start || start < 0) start = 0\n  if (!end || end < 0 || end > len) end = len\n\n  let out = ''\n  for (let i = start; i < end; ++i) {\n    out += hexSliceLookupTable[buf[i]]\n  }\n  return out\n}\n\nfunction utf16leSlice (buf, start, end) {\n  const bytes = buf.slice(start, end)\n  let res = ''\n  // If bytes.length is odd, the last 8 bits must be ignored (same as node.js)\n  for (let i = 0; i < bytes.length - 1; i += 2) {\n    res += String.fromCharCode(bytes[i] + (bytes[i + 1] * 256))\n  }\n  return res\n}\n\nBuffer.prototype.slice = function slice (start, end) {\n  const len = this.length\n  start = ~~start\n  end = end === undefined ? len : ~~end\n\n  if (start < 0) {\n    start += len\n    if (start < 0) start = 0\n  } else if (start > len) {\n    start = len\n  }\n\n  if (end < 0) {\n    end += len\n    if (end < 0) end = 0\n  } else if (end > len) {\n    end = len\n  }\n\n  if (end < start) end = start\n\n  const newBuf = this.subarray(start, end)\n  // Return an augmented `Uint8Array` instance\n  Object.setPrototypeOf(newBuf, Buffer.prototype)\n\n  return newBuf\n}\n\n/*\n * Need to make sure that buffer isn't trying to write out of bounds.\n */\nfunction checkOffset (offset, ext, length) {\n  if ((offset % 1) !== 0 || offset < 0) throw new RangeError('offset is not uint')\n  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length')\n}\n\nBuffer.prototype.readUintLE =\nBuffer.prototype.readUIntLE = function readUIntLE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  let val = this[offset]\n  let mul = 1\n  let i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUintBE =\nBuffer.prototype.readUIntBE = function readUIntBE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) {\n    checkOffset(offset, byteLength, this.length)\n  }\n\n  let val = this[offset + --byteLength]\n  let mul = 1\n  while (byteLength > 0 && (mul *= 0x100)) {\n    val += this[offset + --byteLength] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUint8 =\nBuffer.prototype.readUInt8 = function readUInt8 (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  return this[offset]\n}\n\nBuffer.prototype.readUint16LE =\nBuffer.prototype.readUInt16LE = function readUInt16LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return this[offset] | (this[offset + 1] << 8)\n}\n\nBuffer.prototype.readUint16BE =\nBuffer.prototype.readUInt16BE = function readUInt16BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return (this[offset] << 8) | this[offset + 1]\n}\n\nBuffer.prototype.readUint32LE =\nBuffer.prototype.readUInt32LE = function readUInt32LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return ((this[offset]) |\n      (this[offset + 1] << 8) |\n      (this[offset + 2] << 16)) +\n      (this[offset + 3] * 0x1000000)\n}\n\nBuffer.prototype.readUint32BE =\nBuffer.prototype.readUInt32BE = function readUInt32BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] * 0x1000000) +\n    ((this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    this[offset + 3])\n}\n\nBuffer.prototype.readBigUInt64LE = defineBigIntMethod(function readBigUInt64LE (offset) {\n  offset = offset >>> 0\n  validateNumber(offset, 'offset')\n  const first = this[offset]\n  const last = this[offset + 7]\n  if (first === undefined || last === undefined) {\n    boundsError(offset, this.length - 8)\n  }\n\n  const lo = first +\n    this[++offset] * 2 ** 8 +\n    this[++offset] * 2 ** 16 +\n    this[++offset] * 2 ** 24\n\n  const hi = this[++offset] +\n    this[++offset] * 2 ** 8 +\n    this[++offset] * 2 ** 16 +\n    last * 2 ** 24\n\n  return BigInt(lo) + (BigInt(hi) << BigInt(32))\n})\n\nBuffer.prototype.readBigUInt64BE = defineBigIntMethod(function readBigUInt64BE (offset) {\n  offset = offset >>> 0\n  validateNumber(offset, 'offset')\n  const first = this[offset]\n  const last = this[offset + 7]\n  if (first === undefined || last === undefined) {\n    boundsError(offset, this.length - 8)\n  }\n\n  const hi = first * 2 ** 24 +\n    this[++offset] * 2 ** 16 +\n    this[++offset] * 2 ** 8 +\n    this[++offset]\n\n  const lo = this[++offset] * 2 ** 24 +\n    this[++offset] * 2 ** 16 +\n    this[++offset] * 2 ** 8 +\n    last\n\n  return (BigInt(hi) << BigInt(32)) + BigInt(lo)\n})\n\nBuffer.prototype.readIntLE = function readIntLE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  let val = this[offset]\n  let mul = 1\n  let i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readIntBE = function readIntBE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  let i = byteLength\n  let mul = 1\n  let val = this[offset + --i]\n  while (i > 0 && (mul *= 0x100)) {\n    val += this[offset + --i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readInt8 = function readInt8 (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  if (!(this[offset] & 0x80)) return (this[offset])\n  return ((0xff - this[offset] + 1) * -1)\n}\n\nBuffer.prototype.readInt16LE = function readInt16LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  const val = this[offset] | (this[offset + 1] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt16BE = function readInt16BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  const val = this[offset + 1] | (this[offset] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt32LE = function readInt32LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset]) |\n    (this[offset + 1] << 8) |\n    (this[offset + 2] << 16) |\n    (this[offset + 3] << 24)\n}\n\nBuffer.prototype.readInt32BE = function readInt32BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] << 24) |\n    (this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    (this[offset + 3])\n}\n\nBuffer.prototype.readBigInt64LE = defineBigIntMethod(function readBigInt64LE (offset) {\n  offset = offset >>> 0\n  validateNumber(offset, 'offset')\n  const first = this[offset]\n  const last = this[offset + 7]\n  if (first === undefined || last === undefined) {\n    boundsError(offset, this.length - 8)\n  }\n\n  const val = this[offset + 4] +\n    this[offset + 5] * 2 ** 8 +\n    this[offset + 6] * 2 ** 16 +\n    (last << 24) // Overflow\n\n  return (BigInt(val) << BigInt(32)) +\n    BigInt(first +\n    this[++offset] * 2 ** 8 +\n    this[++offset] * 2 ** 16 +\n    this[++offset] * 2 ** 24)\n})\n\nBuffer.prototype.readBigInt64BE = defineBigIntMethod(function readBigInt64BE (offset) {\n  offset = offset >>> 0\n  validateNumber(offset, 'offset')\n  const first = this[offset]\n  const last = this[offset + 7]\n  if (first === undefined || last === undefined) {\n    boundsError(offset, this.length - 8)\n  }\n\n  const val = (first << 24) + // Overflow\n    this[++offset] * 2 ** 16 +\n    this[++offset] * 2 ** 8 +\n    this[++offset]\n\n  return (BigInt(val) << BigInt(32)) +\n    BigInt(this[++offset] * 2 ** 24 +\n    this[++offset] * 2 ** 16 +\n    this[++offset] * 2 ** 8 +\n    last)\n})\n\nBuffer.prototype.readFloatLE = function readFloatLE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, true, 23, 4)\n}\n\nBuffer.prototype.readFloatBE = function readFloatBE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, false, 23, 4)\n}\n\nBuffer.prototype.readDoubleLE = function readDoubleLE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, true, 52, 8)\n}\n\nBuffer.prototype.readDoubleBE = function readDoubleBE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, false, 52, 8)\n}\n\nfunction checkInt (buf, value, offset, ext, max, min) {\n  if (!Buffer.isBuffer(buf)) throw new TypeError('\"buffer\" argument must be a Buffer instance')\n  if (value > max || value < min) throw new RangeError('\"value\" argument is out of bounds')\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n}\n\nBuffer.prototype.writeUintLE =\nBuffer.prototype.writeUIntLE = function writeUIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) {\n    const maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  let mul = 1\n  let i = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUintBE =\nBuffer.prototype.writeUIntBE = function writeUIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) {\n    const maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  let i = byteLength - 1\n  let mul = 1\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUint8 =\nBuffer.prototype.writeUInt8 = function writeUInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0)\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeUint16LE =\nBuffer.prototype.writeUInt16LE = function writeUInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  this[offset] = (value & 0xff)\n  this[offset + 1] = (value >>> 8)\n  return offset + 2\n}\n\nBuffer.prototype.writeUint16BE =\nBuffer.prototype.writeUInt16BE = function writeUInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  this[offset] = (value >>> 8)\n  this[offset + 1] = (value & 0xff)\n  return offset + 2\n}\n\nBuffer.prototype.writeUint32LE =\nBuffer.prototype.writeUInt32LE = function writeUInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  this[offset + 3] = (value >>> 24)\n  this[offset + 2] = (value >>> 16)\n  this[offset + 1] = (value >>> 8)\n  this[offset] = (value & 0xff)\n  return offset + 4\n}\n\nBuffer.prototype.writeUint32BE =\nBuffer.prototype.writeUInt32BE = function writeUInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  this[offset] = (value >>> 24)\n  this[offset + 1] = (value >>> 16)\n  this[offset + 2] = (value >>> 8)\n  this[offset + 3] = (value & 0xff)\n  return offset + 4\n}\n\nfunction wrtBigUInt64LE (buf, value, offset, min, max) {\n  checkIntBI(value, min, max, buf, offset, 7)\n\n  let lo = Number(value & BigInt(0xffffffff))\n  buf[offset++] = lo\n  lo = lo >> 8\n  buf[offset++] = lo\n  lo = lo >> 8\n  buf[offset++] = lo\n  lo = lo >> 8\n  buf[offset++] = lo\n  let hi = Number(value >> BigInt(32) & BigInt(0xffffffff))\n  buf[offset++] = hi\n  hi = hi >> 8\n  buf[offset++] = hi\n  hi = hi >> 8\n  buf[offset++] = hi\n  hi = hi >> 8\n  buf[offset++] = hi\n  return offset\n}\n\nfunction wrtBigUInt64BE (buf, value, offset, min, max) {\n  checkIntBI(value, min, max, buf, offset, 7)\n\n  let lo = Number(value & BigInt(0xffffffff))\n  buf[offset + 7] = lo\n  lo = lo >> 8\n  buf[offset + 6] = lo\n  lo = lo >> 8\n  buf[offset + 5] = lo\n  lo = lo >> 8\n  buf[offset + 4] = lo\n  let hi = Number(value >> BigInt(32) & BigInt(0xffffffff))\n  buf[offset + 3] = hi\n  hi = hi >> 8\n  buf[offset + 2] = hi\n  hi = hi >> 8\n  buf[offset + 1] = hi\n  hi = hi >> 8\n  buf[offset] = hi\n  return offset + 8\n}\n\nBuffer.prototype.writeBigUInt64LE = defineBigIntMethod(function writeBigUInt64LE (value, offset = 0) {\n  return wrtBigUInt64LE(this, value, offset, BigInt(0), BigInt('0xffffffffffffffff'))\n})\n\nBuffer.prototype.writeBigUInt64BE = defineBigIntMethod(function writeBigUInt64BE (value, offset = 0) {\n  return wrtBigUInt64BE(this, value, offset, BigInt(0), BigInt('0xffffffffffffffff'))\n})\n\nBuffer.prototype.writeIntLE = function writeIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    const limit = Math.pow(2, (8 * byteLength) - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  let i = 0\n  let mul = 1\n  let sub = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i - 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeIntBE = function writeIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    const limit = Math.pow(2, (8 * byteLength) - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  let i = byteLength - 1\n  let mul = 1\n  let sub = 0\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i + 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeInt8 = function writeInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80)\n  if (value < 0) value = 0xff + value + 1\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeInt16LE = function writeInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  this[offset] = (value & 0xff)\n  this[offset + 1] = (value >>> 8)\n  return offset + 2\n}\n\nBuffer.prototype.writeInt16BE = function writeInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  this[offset] = (value >>> 8)\n  this[offset + 1] = (value & 0xff)\n  return offset + 2\n}\n\nBuffer.prototype.writeInt32LE = function writeInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  this[offset] = (value & 0xff)\n  this[offset + 1] = (value >>> 8)\n  this[offset + 2] = (value >>> 16)\n  this[offset + 3] = (value >>> 24)\n  return offset + 4\n}\n\nBuffer.prototype.writeInt32BE = function writeInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (value < 0) value = 0xffffffff + value + 1\n  this[offset] = (value >>> 24)\n  this[offset + 1] = (value >>> 16)\n  this[offset + 2] = (value >>> 8)\n  this[offset + 3] = (value & 0xff)\n  return offset + 4\n}\n\nBuffer.prototype.writeBigInt64LE = defineBigIntMethod(function writeBigInt64LE (value, offset = 0) {\n  return wrtBigUInt64LE(this, value, offset, -BigInt('0x8000000000000000'), BigInt('0x7fffffffffffffff'))\n})\n\nBuffer.prototype.writeBigInt64BE = defineBigIntMethod(function writeBigInt64BE (value, offset = 0) {\n  return wrtBigUInt64BE(this, value, offset, -BigInt('0x8000000000000000'), BigInt('0x7fffffffffffffff'))\n})\n\nfunction checkIEEE754 (buf, value, offset, ext, max, min) {\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n  if (offset < 0) throw new RangeError('Index out of range')\n}\n\nfunction writeFloat (buf, value, offset, littleEndian, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 23, 4)\n  return offset + 4\n}\n\nBuffer.prototype.writeFloatLE = function writeFloatLE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeFloatBE = function writeFloatBE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, false, noAssert)\n}\n\nfunction writeDouble (buf, value, offset, littleEndian, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 52, 8)\n  return offset + 8\n}\n\nBuffer.prototype.writeDoubleLE = function writeDoubleLE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeDoubleBE = function writeDoubleBE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, false, noAssert)\n}\n\n// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)\nBuffer.prototype.copy = function copy (target, targetStart, start, end) {\n  if (!Buffer.isBuffer(target)) throw new TypeError('argument should be a Buffer')\n  if (!start) start = 0\n  if (!end && end !== 0) end = this.length\n  if (targetStart >= target.length) targetStart = target.length\n  if (!targetStart) targetStart = 0\n  if (end > 0 && end < start) end = start\n\n  // Copy 0 bytes; we're done\n  if (end === start) return 0\n  if (target.length === 0 || this.length === 0) return 0\n\n  // Fatal error conditions\n  if (targetStart < 0) {\n    throw new RangeError('targetStart out of bounds')\n  }\n  if (start < 0 || start >= this.length) throw new RangeError('Index out of range')\n  if (end < 0) throw new RangeError('sourceEnd out of bounds')\n\n  // Are we oob?\n  if (end > this.length) end = this.length\n  if (target.length - targetStart < end - start) {\n    end = target.length - targetStart + start\n  }\n\n  const len = end - start\n\n  if (this === target && typeof Uint8Array.prototype.copyWithin === 'function') {\n    // Use built-in when available, missing from IE11\n    this.copyWithin(targetStart, start, end)\n  } else {\n    Uint8Array.prototype.set.call(\n      target,\n      this.subarray(start, end),\n      targetStart\n    )\n  }\n\n  return len\n}\n\n// Usage:\n//    buffer.fill(number[, offset[, end]])\n//    buffer.fill(buffer[, offset[, end]])\n//    buffer.fill(string[, offset[, end]][, encoding])\nBuffer.prototype.fill = function fill (val, start, end, encoding) {\n  // Handle string cases:\n  if (typeof val === 'string') {\n    if (typeof start === 'string') {\n      encoding = start\n      start = 0\n      end = this.length\n    } else if (typeof end === 'string') {\n      encoding = end\n      end = this.length\n    }\n    if (encoding !== undefined && typeof encoding !== 'string') {\n      throw new TypeError('encoding must be a string')\n    }\n    if (typeof encoding === 'string' && !Buffer.isEncoding(encoding)) {\n      throw new TypeError('Unknown encoding: ' + encoding)\n    }\n    if (val.length === 1) {\n      const code = val.charCodeAt(0)\n      if ((encoding === 'utf8' && code < 128) ||\n          encoding === 'latin1') {\n        // Fast path: If `val` fits into a single byte, use that numeric value.\n        val = code\n      }\n    }\n  } else if (typeof val === 'number') {\n    val = val & 255\n  } else if (typeof val === 'boolean') {\n    val = Number(val)\n  }\n\n  // Invalid ranges are not set to a default, so can range check early.\n  if (start < 0 || this.length < start || this.length < end) {\n    throw new RangeError('Out of range index')\n  }\n\n  if (end <= start) {\n    return this\n  }\n\n  start = start >>> 0\n  end = end === undefined ? this.length : end >>> 0\n\n  if (!val) val = 0\n\n  let i\n  if (typeof val === 'number') {\n    for (i = start; i < end; ++i) {\n      this[i] = val\n    }\n  } else {\n    const bytes = Buffer.isBuffer(val)\n      ? val\n      : Buffer.from(val, encoding)\n    const len = bytes.length\n    if (len === 0) {\n      throw new TypeError('The value \"' + val +\n        '\" is invalid for argument \"value\"')\n    }\n    for (i = 0; i < end - start; ++i) {\n      this[i + start] = bytes[i % len]\n    }\n  }\n\n  return this\n}\n\n// CUSTOM ERRORS\n// =============\n\n// Simplified versions from Node, changed for Buffer-only usage\nconst errors = {}\nfunction E (sym, getMessage, Base) {\n  errors[sym] = class NodeError extends Base {\n    constructor () {\n      super()\n\n      Object.defineProperty(this, 'message', {\n        value: getMessage.apply(this, arguments),\n        writable: true,\n        configurable: true\n      })\n\n      // Add the error code to the name to include it in the stack trace.\n      this.name = `${this.name} [${sym}]`\n      // Access the stack to generate the error message including the error code\n      // from the name.\n      this.stack // eslint-disable-line no-unused-expressions\n      // Reset the name to the actual name.\n      delete this.name\n    }\n\n    get code () {\n      return sym\n    }\n\n    set code (value) {\n      Object.defineProperty(this, 'code', {\n        configurable: true,\n        enumerable: true,\n        value,\n        writable: true\n      })\n    }\n\n    toString () {\n      return `${this.name} [${sym}]: ${this.message}`\n    }\n  }\n}\n\nE('ERR_BUFFER_OUT_OF_BOUNDS',\n  function (name) {\n    if (name) {\n      return `${name} is outside of buffer bounds`\n    }\n\n    return 'Attempt to access memory outside buffer bounds'\n  }, RangeError)\nE('ERR_INVALID_ARG_TYPE',\n  function (name, actual) {\n    return `The \"${name}\" argument must be of type number. Received type ${typeof actual}`\n  }, TypeError)\nE('ERR_OUT_OF_RANGE',\n  function (str, range, input) {\n    let msg = `The value of \"${str}\" is out of range.`\n    let received = input\n    if (Number.isInteger(input) && Math.abs(input) > 2 ** 32) {\n      received = addNumericalSeparator(String(input))\n    } else if (typeof input === 'bigint') {\n      received = String(input)\n      if (input > BigInt(2) ** BigInt(32) || input < -(BigInt(2) ** BigInt(32))) {\n        received = addNumericalSeparator(received)\n      }\n      received += 'n'\n    }\n    msg += ` It must be ${range}. Received ${received}`\n    return msg\n  }, RangeError)\n\nfunction addNumericalSeparator (val) {\n  let res = ''\n  let i = val.length\n  const start = val[0] === '-' ? 1 : 0\n  for (; i >= start + 4; i -= 3) {\n    res = `_${val.slice(i - 3, i)}${res}`\n  }\n  return `${val.slice(0, i)}${res}`\n}\n\n// CHECK FUNCTIONS\n// ===============\n\nfunction checkBounds (buf, offset, byteLength) {\n  validateNumber(offset, 'offset')\n  if (buf[offset] === undefined || buf[offset + byteLength] === undefined) {\n    boundsError(offset, buf.length - (byteLength + 1))\n  }\n}\n\nfunction checkIntBI (value, min, max, buf, offset, byteLength) {\n  if (value > max || value < min) {\n    const n = typeof min === 'bigint' ? 'n' : ''\n    let range\n    if (byteLength > 3) {\n      if (min === 0 || min === BigInt(0)) {\n        range = `>= 0${n} and < 2${n} ** ${(byteLength + 1) * 8}${n}`\n      } else {\n        range = `>= -(2${n} ** ${(byteLength + 1) * 8 - 1}${n}) and < 2 ** ` +\n                `${(byteLength + 1) * 8 - 1}${n}`\n      }\n    } else {\n      range = `>= ${min}${n} and <= ${max}${n}`\n    }\n    throw new errors.ERR_OUT_OF_RANGE('value', range, value)\n  }\n  checkBounds(buf, offset, byteLength)\n}\n\nfunction validateNumber (value, name) {\n  if (typeof value !== 'number') {\n    throw new errors.ERR_INVALID_ARG_TYPE(name, 'number', value)\n  }\n}\n\nfunction boundsError (value, length, type) {\n  if (Math.floor(value) !== value) {\n    validateNumber(value, type)\n    throw new errors.ERR_OUT_OF_RANGE(type || 'offset', 'an integer', value)\n  }\n\n  if (length < 0) {\n    throw new errors.ERR_BUFFER_OUT_OF_BOUNDS()\n  }\n\n  throw new errors.ERR_OUT_OF_RANGE(type || 'offset',\n                                    `>= ${type ? 1 : 0} and <= ${length}`,\n                                    value)\n}\n\n// HELPER FUNCTIONS\n// ================\n\nconst INVALID_BASE64_RE = /[^+/0-9A-Za-z-_]/g\n\nfunction base64clean (str) {\n  // Node takes equal signs as end of the Base64 encoding\n  str = str.split('=')[0]\n  // Node strips out invalid characters like \\n and \\t from the string, base64-js does not\n  str = str.trim().replace(INVALID_BASE64_RE, '')\n  // Node converts strings with length < 2 to ''\n  if (str.length < 2) return ''\n  // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not\n  while (str.length % 4 !== 0) {\n    str = str + '='\n  }\n  return str\n}\n\nfunction utf8ToBytes (string, units) {\n  units = units || Infinity\n  let codePoint\n  const length = string.length\n  let leadSurrogate = null\n  const bytes = []\n\n  for (let i = 0; i < length; ++i) {\n    codePoint = string.charCodeAt(i)\n\n    // is surrogate component\n    if (codePoint > 0xD7FF && codePoint < 0xE000) {\n      // last char was a lead\n      if (!leadSurrogate) {\n        // no lead yet\n        if (codePoint > 0xDBFF) {\n          // unexpected trail\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        } else if (i + 1 === length) {\n          // unpaired lead\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        }\n\n        // valid lead\n        leadSurrogate = codePoint\n\n        continue\n      }\n\n      // 2 leads in a row\n      if (codePoint < 0xDC00) {\n        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n        leadSurrogate = codePoint\n        continue\n      }\n\n      // valid surrogate pair\n      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000\n    } else if (leadSurrogate) {\n      // valid bmp char, but last char was a lead\n      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n    }\n\n    leadSurrogate = null\n\n    // encode utf8\n    if (codePoint < 0x80) {\n      if ((units -= 1) < 0) break\n      bytes.push(codePoint)\n    } else if (codePoint < 0x800) {\n      if ((units -= 2) < 0) break\n      bytes.push(\n        codePoint >> 0x6 | 0xC0,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x10000) {\n      if ((units -= 3) < 0) break\n      bytes.push(\n        codePoint >> 0xC | 0xE0,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x110000) {\n      if ((units -= 4) < 0) break\n      bytes.push(\n        codePoint >> 0x12 | 0xF0,\n        codePoint >> 0xC & 0x3F | 0x80,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else {\n      throw new Error('Invalid code point')\n    }\n  }\n\n  return bytes\n}\n\nfunction asciiToBytes (str) {\n  const byteArray = []\n  for (let i = 0; i < str.length; ++i) {\n    // Node's code seems to be doing this and not & 0x7F..\n    byteArray.push(str.charCodeAt(i) & 0xFF)\n  }\n  return byteArray\n}\n\nfunction utf16leToBytes (str, units) {\n  let c, hi, lo\n  const byteArray = []\n  for (let i = 0; i < str.length; ++i) {\n    if ((units -= 2) < 0) break\n\n    c = str.charCodeAt(i)\n    hi = c >> 8\n    lo = c % 256\n    byteArray.push(lo)\n    byteArray.push(hi)\n  }\n\n  return byteArray\n}\n\nfunction base64ToBytes (str) {\n  return base64.toByteArray(base64clean(str))\n}\n\nfunction blitBuffer (src, dst, offset, length) {\n  let i\n  for (i = 0; i < length; ++i) {\n    if ((i + offset >= dst.length) || (i >= src.length)) break\n    dst[i + offset] = src[i]\n  }\n  return i\n}\n\n// ArrayBuffer or Uint8Array objects from other contexts (i.e. iframes) do not pass\n// the `instanceof` check but they should be treated as of that type.\n// See: https://github.com/feross/buffer/issues/166\nfunction isInstance (obj, type) {\n  return obj instanceof type ||\n    (obj != null && obj.constructor != null && obj.constructor.name != null &&\n      obj.constructor.name === type.name)\n}\nfunction numberIsNaN (obj) {\n  // For IE11 support\n  return obj !== obj // eslint-disable-line no-self-compare\n}\n\n// Create lookup table for `toString('hex')`\n// See: https://github.com/feross/buffer/issues/219\nconst hexSliceLookupTable = (function () {\n  const alphabet = '0123456789abcdef'\n  const table = new Array(256)\n  for (let i = 0; i < 16; ++i) {\n    const i16 = i * 16\n    for (let j = 0; j < 16; ++j) {\n      table[i16 + j] = alphabet[i] + alphabet[j]\n    }\n  }\n  return table\n})()\n\n// Return not function with Error if BigInt not supported\nfunction defineBigIntMethod (fn) {\n  return typeof BigInt === 'undefined' ? BufferBigIntNotDefined : fn\n}\n\nfunction BufferBigIntNotDefined () {\n  throw new Error('BigInt not supported')\n}\n","// This is a minimal subset of node-ip for handling IPMatch\n// https://github.com/indutny/node-ip/blob/master/lib/ip.js\n//\n// ### License\n//\n// This software is licensed under the MIT License.\n//\n// Copyright Fedor Indutny, 2012.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\nimport { Buffer } from 'buffer/';\nconst ipv4Regex = /^(\\d{1,3}\\.){3,3}\\d{1,3}$/;\nconst ipv6Regex = /^(::)?(((\\d{1,3}\\.){3}(\\d{1,3}){1})?([0-9a-f]){0,4}:{0,2}){1,8}(::)?$/i;\nexport const ip = {\n    toBuffer: function (ip, buff, offset) {\n        offset = offset ? offset : 0;\n        let result;\n        if (this.isV4Format(ip)) {\n            result = buff || new Buffer(offset + 4);\n            ip.split(/\\./g).map(function (byte) {\n                offset = offset ? offset : 0;\n                result[offset++] = parseInt(byte, 10) & 0xff;\n            });\n        }\n        else if (this.isV6Format(ip)) {\n            const sections = ip.split(':', 8);\n            let i;\n            for (i = 0; i < sections.length; i++) {\n                const isv4 = this.isV4Format(sections[i]);\n                let v4Buffer;\n                if (isv4) {\n                    v4Buffer = this.toBuffer(sections[i]);\n                    sections[i] = v4Buffer.slice(0, 2).toString('hex');\n                }\n                if (v4Buffer && ++i < 8) {\n                    sections.splice(i, 0, v4Buffer.slice(2, 4).toString('hex'));\n                }\n            }\n            if (sections[0] === '') {\n                while (sections.length < 8)\n                    sections.unshift('0');\n            }\n            else if (sections[sections.length - 1] === '') {\n                while (sections.length < 8)\n                    sections.push('0');\n            }\n            else if (sections.length < 8) {\n                for (i = 0; i < sections.length && sections[i] !== ''; i++) { }\n                const argv = [i, 1];\n                for (i = 9 - sections.length; i > 0; i--) {\n                    // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n                    // @ts-ignore\n                    argv.push('0');\n                }\n                // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n                // @ts-ignore\n                // eslint-disable-next-line prefer-spread\n                sections.splice.apply(sections, argv);\n            }\n            result = buff || new Buffer(offset + 16);\n            for (i = 0; i < sections.length; i++) {\n                const word = parseInt(sections[i], 16);\n                result[offset++] = (word >> 8) & 0xff;\n                result[offset++] = word & 0xff;\n            }\n        }\n        if (!result) {\n            throw Error('Invalid ip address: ' + ip);\n        }\n        return result;\n    },\n    toString: function (buff, offset, length) {\n        offset = offset ? offset : 0;\n        length = length || buff.length - offset;\n        let result = [];\n        if (length === 4) {\n            // IPv4\n            for (let i = 0; i < length; i++) {\n                result.push(buff[offset + i]);\n            }\n            // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n            // @ts-ignore\n            result = result.join('.');\n        }\n        else if (length === 16) {\n            // IPv6\n            for (let i = 0; i < length; i += 2) {\n                result.push(buff.readUInt16BE(offset + i).toString(16));\n            }\n            // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n            // @ts-ignore\n            result = result.join(':');\n            // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n            // @ts-ignore\n            result = result.replace(/(^|:)0(:0)*:0(:|$)/, '$1::$3');\n            // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n            // @ts-ignore\n            result = result.replace(/:{3,4}/, '::');\n        }\n        // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n        // @ts-ignore\n        return result;\n    },\n    isV4Format: function (ip) {\n        return ipv4Regex.test(ip);\n    },\n    isV6Format: function (ip) {\n        return ipv6Regex.test(ip);\n    },\n    fromPrefixLen: function (prefixlen, family) {\n        if (prefixlen > 32) {\n            family = 'ipv6';\n        }\n        else {\n            family = _normalizeFamily(typeof family === 'string' ? family : '');\n        }\n        let len = 4;\n        if (family === 'ipv6') {\n            len = 16;\n        }\n        const buff = new Buffer(len);\n        for (let i = 0, n = buff.length; i < n; ++i) {\n            let bits = 8;\n            if (prefixlen < 8) {\n                bits = prefixlen;\n            }\n            prefixlen -= bits;\n            buff[i] = ~(0xff >> bits) & 0xff;\n        }\n        return ip.toString(buff);\n    },\n    mask: function (addr, mask) {\n        const addrBuffer = ip.toBuffer(addr);\n        const maskBuffer = ip.toBuffer(mask);\n        const result = new Buffer(Math.max(addrBuffer.length, maskBuffer.length));\n        let i;\n        // Same protocol - do bitwise and\n        if (addrBuffer.length === maskBuffer.length) {\n            for (i = 0; i < addrBuffer.length; i++) {\n                result[i] = addrBuffer[i] & maskBuffer[i];\n            }\n        }\n        else if (maskBuffer.length === 4) {\n            // IPv6 address and IPv4 mask\n            // (Mask low bits)\n            for (i = 0; i < maskBuffer.length; i++) {\n                result[i] = addrBuffer[addrBuffer.length - 4 + i] & maskBuffer[i];\n            }\n        }\n        else {\n            // IPv6 mask and IPv4 addr\n            for (let i = 0; i < result.length - 6; i++) {\n                result[i] = 0;\n            }\n            // ::ffff:ipv4\n            result[10] = 0xff;\n            result[11] = 0xff;\n            for (i = 0; i < addrBuffer.length; i++) {\n                result[i + 12] = addrBuffer[i] & maskBuffer[i + 12];\n            }\n            i = i + 12;\n        }\n        for (; i < result.length; i++)\n            result[i] = 0;\n        return ip.toString(result);\n    },\n    subnet: function (addr, mask) {\n        const networkAddress = ip.toLong(ip.mask(addr, mask));\n        // Calculate the mask's length.\n        const maskBuffer = ip.toBuffer(mask);\n        let maskLength = 0;\n        for (let i = 0; i < maskBuffer.length; i++) {\n            if (maskBuffer[i] === 0xff) {\n                maskLength += 8;\n            }\n            else {\n                let octet = maskBuffer[i] & 0xff;\n                while (octet) {\n                    octet = (octet << 1) & 0xff;\n                    maskLength++;\n                }\n            }\n        }\n        return {\n            contains: function (other) {\n                return networkAddress === ip.toLong(ip.mask(other, mask));\n            },\n        };\n    },\n    cidrSubnet: function (cidrString) {\n        const cidrParts = cidrString.split('/');\n        const addr = cidrParts[0];\n        if (cidrParts.length !== 2)\n            throw new Error('invalid CIDR subnet: ' + addr);\n        const mask = ip.fromPrefixLen(parseInt(cidrParts[1], 10));\n        return ip.subnet(addr, mask);\n    },\n    isEqual: function (a, b) {\n        let aBuffer = ip.toBuffer(a);\n        let bBuffer = ip.toBuffer(b);\n        // Same protocol\n        if (aBuffer.length === bBuffer.length) {\n            for (let i = 0; i < aBuffer.length; i++) {\n                if (aBuffer[i] !== bBuffer[i])\n                    return false;\n            }\n            return true;\n        }\n        // Swap\n        if (bBuffer.length === 4) {\n            const t = bBuffer;\n            bBuffer = aBuffer;\n            aBuffer = t;\n        }\n        // a - IPv4, b - IPv6\n        for (let i = 0; i < 10; i++) {\n            if (bBuffer[i] !== 0)\n                return false;\n        }\n        const word = bBuffer.readUInt16BE(10);\n        if (word !== 0 && word !== 0xffff)\n            return false;\n        for (let i = 0; i < 4; i++) {\n            if (aBuffer[i] !== bBuffer[i + 12])\n                return false;\n        }\n        return true;\n    },\n    toLong: function (ip) {\n        let ipl = 0;\n        ip.split('.').forEach(function (octet) {\n            ipl <<= 8;\n            ipl += parseInt(octet);\n        });\n        return ipl >>> 0;\n    },\n    fromLong: function (ipl) {\n        return (ipl >>> 24) + '.' + ((ipl >> 16) & 255) + '.' + ((ipl >> 8) & 255) + '.' + (ipl & 255);\n    },\n};\nfunction _normalizeFamily(family) {\n    return family ? family.toLowerCase() : 'ipv4';\n}\n","'use strict';\nmodule.exports = balanced;\nfunction balanced(a, b, str) {\n  if (a instanceof RegExp) a = maybeMatch(a, str);\n  if (b instanceof RegExp) b = maybeMatch(b, str);\n\n  var r = range(a, b, str);\n\n  return r && {\n    start: r[0],\n    end: r[1],\n    pre: str.slice(0, r[0]),\n    body: str.slice(r[0] + a.length, r[1]),\n    post: str.slice(r[1] + b.length)\n  };\n}\n\nfunction maybeMatch(reg, str) {\n  var m = str.match(reg);\n  return m ? m[0] : null;\n}\n\nbalanced.range = range;\nfunction range(a, b, str) {\n  var begs, beg, left, right, result;\n  var ai = str.indexOf(a);\n  var bi = str.indexOf(b, ai + 1);\n  var i = ai;\n\n  if (ai >= 0 && bi > 0) {\n    if(a===b) {\n      return [ai, bi];\n    }\n    begs = [];\n    left = str.length;\n\n    while (i >= 0 && !result) {\n      if (i == ai) {\n        begs.push(i);\n        ai = str.indexOf(a, i + 1);\n      } else if (begs.length == 1) {\n        result = [ begs.pop(), bi ];\n      } else {\n        beg = begs.pop();\n        if (beg < left) {\n          left = beg;\n          right = bi;\n        }\n\n        bi = str.indexOf(b, i + 1);\n      }\n\n      i = ai < bi && ai >= 0 ? ai : bi;\n    }\n\n    if (begs.length) {\n      result = [ left, right ];\n    }\n  }\n\n  return result;\n}\n","var balanced = require('balanced-match');\n\nmodule.exports = expandTop;\n\nvar escSlash = '\\0SLASH'+Math.random()+'\\0';\nvar escOpen = '\\0OPEN'+Math.random()+'\\0';\nvar escClose = '\\0CLOSE'+Math.random()+'\\0';\nvar escComma = '\\0COMMA'+Math.random()+'\\0';\nvar escPeriod = '\\0PERIOD'+Math.random()+'\\0';\n\nfunction numeric(str) {\n  return parseInt(str, 10) == str\n    ? parseInt(str, 10)\n    : str.charCodeAt(0);\n}\n\nfunction escapeBraces(str) {\n  return str.split('\\\\\\\\').join(escSlash)\n            .split('\\\\{').join(escOpen)\n            .split('\\\\}').join(escClose)\n            .split('\\\\,').join(escComma)\n            .split('\\\\.').join(escPeriod);\n}\n\nfunction unescapeBraces(str) {\n  return str.split(escSlash).join('\\\\')\n            .split(escOpen).join('{')\n            .split(escClose).join('}')\n            .split(escComma).join(',')\n            .split(escPeriod).join('.');\n}\n\n\n// Basically just str.split(\",\"), but handling cases\n// where we have nested braced sections, which should be\n// treated as individual members, like {a,{b,c},d}\nfunction parseCommaParts(str) {\n  if (!str)\n    return [''];\n\n  var parts = [];\n  var m = balanced('{', '}', str);\n\n  if (!m)\n    return str.split(',');\n\n  var pre = m.pre;\n  var body = m.body;\n  var post = m.post;\n  var p = pre.split(',');\n\n  p[p.length-1] += '{' + body + '}';\n  var postParts = parseCommaParts(post);\n  if (post.length) {\n    p[p.length-1] += postParts.shift();\n    p.push.apply(p, postParts);\n  }\n\n  parts.push.apply(parts, p);\n\n  return parts;\n}\n\nfunction expandTop(str) {\n  if (!str)\n    return [];\n\n  // I don't know why Bash 4.3 does this, but it does.\n  // Anything starting with {} will have the first two bytes preserved\n  // but *only* at the top level, so {},a}b will not expand to anything,\n  // but a{},b}c will be expanded to [a}c,abc].\n  // One could argue that this is a bug in Bash, but since the goal of\n  // this module is to match Bash's rules, we escape a leading {}\n  if (str.substr(0, 2) === '{}') {\n    str = '\\\\{\\\\}' + str.substr(2);\n  }\n\n  return expand(escapeBraces(str), true).map(unescapeBraces);\n}\n\nfunction embrace(str) {\n  return '{' + str + '}';\n}\nfunction isPadded(el) {\n  return /^-?0\\d/.test(el);\n}\n\nfunction lte(i, y) {\n  return i <= y;\n}\nfunction gte(i, y) {\n  return i >= y;\n}\n\nfunction expand(str, isTop) {\n  var expansions = [];\n\n  var m = balanced('{', '}', str);\n  if (!m) return [str];\n\n  // no need to expand pre, since it is guaranteed to be free of brace-sets\n  var pre = m.pre;\n  var post = m.post.length\n    ? expand(m.post, false)\n    : [''];\n\n  if (/\\$$/.test(m.pre)) {    \n    for (var k = 0; k < post.length; k++) {\n      var expansion = pre+ '{' + m.body + '}' + post[k];\n      expansions.push(expansion);\n    }\n  } else {\n    var isNumericSequence = /^-?\\d+\\.\\.-?\\d+(?:\\.\\.-?\\d+)?$/.test(m.body);\n    var isAlphaSequence = /^[a-zA-Z]\\.\\.[a-zA-Z](?:\\.\\.-?\\d+)?$/.test(m.body);\n    var isSequence = isNumericSequence || isAlphaSequence;\n    var isOptions = m.body.indexOf(',') >= 0;\n    if (!isSequence && !isOptions) {\n      // {a},b}\n      if (m.post.match(/,(?!,).*\\}/)) {\n        str = m.pre + '{' + m.body + escClose + m.post;\n        return expand(str);\n      }\n      return [str];\n    }\n\n    var n;\n    if (isSequence) {\n      n = m.body.split(/\\.\\./);\n    } else {\n      n = parseCommaParts(m.body);\n      if (n.length === 1) {\n        // x{{a,b}}y ==> x{a}y x{b}y\n        n = expand(n[0], false).map(embrace);\n        if (n.length === 1) {\n          return post.map(function(p) {\n            return m.pre + n[0] + p;\n          });\n        }\n      }\n    }\n\n    // at this point, n is the parts, and we know it's not a comma set\n    // with a single entry.\n    var N;\n\n    if (isSequence) {\n      var x = numeric(n[0]);\n      var y = numeric(n[1]);\n      var width = Math.max(n[0].length, n[1].length)\n      var incr = n.length == 3\n        ? Math.abs(numeric(n[2]))\n        : 1;\n      var test = lte;\n      var reverse = y < x;\n      if (reverse) {\n        incr *= -1;\n        test = gte;\n      }\n      var pad = n.some(isPadded);\n\n      N = [];\n\n      for (var i = x; test(i, y); i += incr) {\n        var c;\n        if (isAlphaSequence) {\n          c = String.fromCharCode(i);\n          if (c === '\\\\')\n            c = '';\n        } else {\n          c = String(i);\n          if (pad) {\n            var need = width - c.length;\n            if (need > 0) {\n              var z = new Array(need + 1).join('0');\n              if (i < 0)\n                c = '-' + z + c.slice(1);\n              else\n                c = z + c;\n            }\n          }\n        }\n        N.push(c);\n      }\n    } else {\n      N = [];\n\n      for (var j = 0; j < n.length; j++) {\n        N.push.apply(N, expand(n[j], false));\n      }\n    }\n\n    for (var j = 0; j < N.length; j++) {\n      for (var k = 0; k < post.length; k++) {\n        var expansion = pre + N[j] + post[k];\n        if (!isTop || isSequence || expansion)\n          expansions.push(expansion);\n      }\n    }\n  }\n\n  return expansions;\n}\n\n","// translate the various posix character classes into unicode properties\n// this works across all unicode locales\n// { <posix class>: [<translation>, /u flag required, negated]\nconst posixClasses = {\n    '[:alnum:]': ['\\\\p{L}\\\\p{Nl}\\\\p{Nd}', true],\n    '[:alpha:]': ['\\\\p{L}\\\\p{Nl}', true],\n    '[:ascii:]': ['\\\\x' + '00-\\\\x' + '7f', false],\n    '[:blank:]': ['\\\\p{Zs}\\\\t', true],\n    '[:cntrl:]': ['\\\\p{Cc}', true],\n    '[:digit:]': ['\\\\p{Nd}', true],\n    '[:graph:]': ['\\\\p{Z}\\\\p{C}', true, true],\n    '[:lower:]': ['\\\\p{Ll}', true],\n    '[:print:]': ['\\\\p{C}', true],\n    '[:punct:]': ['\\\\p{P}', true],\n    '[:space:]': ['\\\\p{Z}\\\\t\\\\r\\\\n\\\\v\\\\f', true],\n    '[:upper:]': ['\\\\p{Lu}', true],\n    '[:word:]': ['\\\\p{L}\\\\p{Nl}\\\\p{Nd}\\\\p{Pc}', true],\n    '[:xdigit:]': ['A-Fa-f0-9', false],\n};\n// only need to escape a few things inside of brace expressions\n// escapes: [ \\ ] -\nconst braceEscape = (s) => s.replace(/[[\\]\\\\-]/g, '\\\\$&');\n// escape all regexp magic characters\nconst regexpEscape = (s) => s.replace(/[-[\\]{}()*+?.,\\\\^$|#\\s]/g, '\\\\$&');\n// everything has already been escaped, we just have to join\nconst rangesToString = (ranges) => ranges.join('');\n// takes a glob string at a posix brace expression, and returns\n// an equivalent regular expression source, and boolean indicating\n// whether the /u flag needs to be applied, and the number of chars\n// consumed to parse the character class.\n// This also removes out of order ranges, and returns ($.) if the\n// entire class just no good.\nexport const parseClass = (glob, position) => {\n    const pos = position;\n    /* c8 ignore start */\n    if (glob.charAt(pos) !== '[') {\n        throw new Error('not in a brace expression');\n    }\n    /* c8 ignore stop */\n    const ranges = [];\n    const negs = [];\n    let i = pos + 1;\n    let sawStart = false;\n    let uflag = false;\n    let escaping = false;\n    let negate = false;\n    let endPos = pos;\n    let rangeStart = '';\n    WHILE: while (i < glob.length) {\n        const c = glob.charAt(i);\n        if ((c === '!' || c === '^') && i === pos + 1) {\n            negate = true;\n            i++;\n            continue;\n        }\n        if (c === ']' && sawStart && !escaping) {\n            endPos = i + 1;\n            break;\n        }\n        sawStart = true;\n        if (c === '\\\\') {\n            if (!escaping) {\n                escaping = true;\n                i++;\n                continue;\n            }\n            // escaped \\ char, fall through and treat like normal char\n        }\n        if (c === '[' && !escaping) {\n            // either a posix class, a collation equivalent, or just a [\n            for (const [cls, [unip, u, neg]] of Object.entries(posixClasses)) {\n                if (glob.startsWith(cls, i)) {\n                    // invalid, [a-[] is fine, but not [a-[:alpha]]\n                    if (rangeStart) {\n                        return ['$.', false, glob.length - pos, true];\n                    }\n                    i += cls.length;\n                    if (neg)\n                        negs.push(unip);\n                    else\n                        ranges.push(unip);\n                    uflag = uflag || u;\n                    continue WHILE;\n                }\n            }\n        }\n        // now it's just a normal character, effectively\n        escaping = false;\n        if (rangeStart) {\n            // throw this range away if it's not valid, but others\n            // can still match.\n            if (c > rangeStart) {\n                ranges.push(braceEscape(rangeStart) + '-' + braceEscape(c));\n            }\n            else if (c === rangeStart) {\n                ranges.push(braceEscape(c));\n            }\n            rangeStart = '';\n            i++;\n            continue;\n        }\n        // now might be the start of a range.\n        // can be either c-d or c-] or c<more...>] or c] at this point\n        if (glob.startsWith('-]', i + 1)) {\n            ranges.push(braceEscape(c + '-'));\n            i += 2;\n            continue;\n        }\n        if (glob.startsWith('-', i + 1)) {\n            rangeStart = c;\n            i += 2;\n            continue;\n        }\n        // not the start of a range, just a single character\n        ranges.push(braceEscape(c));\n        i++;\n    }\n    if (endPos < i) {\n        // didn't see the end of the class, not a valid class,\n        // but might still be valid as a literal match.\n        return ['', false, 0, false];\n    }\n    // if we got no ranges and no negates, then we have a range that\n    // cannot possibly match anything, and that poisons the whole glob\n    if (!ranges.length && !negs.length) {\n        return ['$.', false, glob.length - pos, true];\n    }\n    // if we got one positive range, and it's a single character, then that's\n    // not actually a magic pattern, it's just that one literal character.\n    // we should not treat that as \"magic\", we should just return the literal\n    // character. [_] is a perfectly valid way to escape glob magic chars.\n    if (negs.length === 0 &&\n        ranges.length === 1 &&\n        /^\\\\?.$/.test(ranges[0]) &&\n        !negate) {\n        const r = ranges[0].length === 2 ? ranges[0].slice(-1) : ranges[0];\n        return [regexpEscape(r), false, endPos - pos, false];\n    }\n    const sranges = '[' + (negate ? '^' : '') + rangesToString(ranges) + ']';\n    const snegs = '[' + (negate ? '' : '^') + rangesToString(negs) + ']';\n    const comb = ranges.length && negs.length\n        ? '(' + sranges + '|' + snegs + ')'\n        : ranges.length\n            ? sranges\n            : snegs;\n    return [comb, uflag, endPos - pos, true];\n};\n//# sourceMappingURL=brace-expressions.js.map","/**\n * Escape all magic characters in a glob pattern.\n *\n * If the {@link windowsPathsNoEscape | GlobOptions.windowsPathsNoEscape}\n * option is used, then characters are escaped by wrapping in `[]`, because\n * a magic character wrapped in a character class can only be satisfied by\n * that exact character.  In this mode, `\\` is _not_ escaped, because it is\n * not interpreted as a magic character, but instead as a path separator.\n */\nexport const escape = (s, { windowsPathsNoEscape = false, } = {}) => {\n    // don't need to escape +@! because we escape the parens\n    // that make those magic, and escaping ! as [!] isn't valid,\n    // because [!]] is a valid glob class meaning not ']'.\n    return windowsPathsNoEscape\n        ? s.replace(/[?*()[\\]]/g, '[$&]')\n        : s.replace(/[?*()[\\]\\\\]/g, '\\\\$&');\n};\n//# sourceMappingURL=escape.js.map","/**\n * Un-escape a string that has been escaped with {@link escape}.\n *\n * If the {@link windowsPathsNoEscape} option is used, then square-brace\n * escapes are removed, but not backslash escapes.  For example, it will turn\n * the string `'[*]'` into `*`, but it will not turn `'\\\\*'` into `'*'`,\n * becuase `\\` is a path separator in `windowsPathsNoEscape` mode.\n *\n * When `windowsPathsNoEscape` is not set, then both brace escapes and\n * backslash escapes are removed.\n *\n * Slashes (and backslashes in `windowsPathsNoEscape` mode) cannot be escaped\n * or unescaped.\n */\nexport const unescape = (s, { windowsPathsNoEscape = false, } = {}) => {\n    return windowsPathsNoEscape\n        ? s.replace(/\\[([^\\/\\\\])\\]/g, '$1')\n        : s.replace(/((?!\\\\).|^)\\[([^\\/\\\\])\\]/g, '$1$2').replace(/\\\\([^\\/])/g, '$1');\n};\n//# sourceMappingURL=unescape.js.map","import expand from 'brace-expansion';\nimport { parseClass } from './brace-expressions.js';\nimport { escape } from './escape.js';\nimport { unescape } from './unescape.js';\nexport const minimatch = (p, pattern, options = {}) => {\n    assertValidPattern(pattern);\n    // shortcut: comments match nothing.\n    if (!options.nocomment && pattern.charAt(0) === '#') {\n        return false;\n    }\n    return new Minimatch(pattern, options).match(p);\n};\nexport default minimatch;\n// Optimized checking for the most common glob patterns.\nconst starDotExtRE = /^\\*+([^+@!?\\*\\[\\(]*)$/;\nconst starDotExtTest = (ext) => (f) => !f.startsWith('.') && f.endsWith(ext);\nconst starDotExtTestDot = (ext) => (f) => f.endsWith(ext);\nconst starDotExtTestNocase = (ext) => {\n    ext = ext.toLowerCase();\n    return (f) => !f.startsWith('.') && f.toLowerCase().endsWith(ext);\n};\nconst starDotExtTestNocaseDot = (ext) => {\n    ext = ext.toLowerCase();\n    return (f) => f.toLowerCase().endsWith(ext);\n};\nconst starDotStarRE = /^\\*+\\.\\*+$/;\nconst starDotStarTest = (f) => !f.startsWith('.') && f.includes('.');\nconst starDotStarTestDot = (f) => f !== '.' && f !== '..' && f.includes('.');\nconst dotStarRE = /^\\.\\*+$/;\nconst dotStarTest = (f) => f !== '.' && f !== '..' && f.startsWith('.');\nconst starRE = /^\\*+$/;\nconst starTest = (f) => f.length !== 0 && !f.startsWith('.');\nconst starTestDot = (f) => f.length !== 0 && f !== '.' && f !== '..';\nconst qmarksRE = /^\\?+([^+@!?\\*\\[\\(]*)?$/;\nconst qmarksTestNocase = ([$0, ext = '']) => {\n    const noext = qmarksTestNoExt([$0]);\n    if (!ext)\n        return noext;\n    ext = ext.toLowerCase();\n    return (f) => noext(f) && f.toLowerCase().endsWith(ext);\n};\nconst qmarksTestNocaseDot = ([$0, ext = '']) => {\n    const noext = qmarksTestNoExtDot([$0]);\n    if (!ext)\n        return noext;\n    ext = ext.toLowerCase();\n    return (f) => noext(f) && f.toLowerCase().endsWith(ext);\n};\nconst qmarksTestDot = ([$0, ext = '']) => {\n    const noext = qmarksTestNoExtDot([$0]);\n    return !ext ? noext : (f) => noext(f) && f.endsWith(ext);\n};\nconst qmarksTest = ([$0, ext = '']) => {\n    const noext = qmarksTestNoExt([$0]);\n    return !ext ? noext : (f) => noext(f) && f.endsWith(ext);\n};\nconst qmarksTestNoExt = ([$0]) => {\n    const len = $0.length;\n    return (f) => f.length === len && !f.startsWith('.');\n};\nconst qmarksTestNoExtDot = ([$0]) => {\n    const len = $0.length;\n    return (f) => f.length === len && f !== '.' && f !== '..';\n};\n/* c8 ignore start */\nconst defaultPlatform = (typeof process === 'object' && process\n    ? (typeof process.env === 'object' &&\n        process.env &&\n        process.env.__MINIMATCH_TESTING_PLATFORM__) ||\n        process.platform\n    : 'posix');\nconst path = {\n    win32: { sep: '\\\\' },\n    posix: { sep: '/' },\n};\n/* c8 ignore stop */\nexport const sep = defaultPlatform === 'win32' ? path.win32.sep : path.posix.sep;\nminimatch.sep = sep;\nexport const GLOBSTAR = Symbol('globstar **');\nminimatch.GLOBSTAR = GLOBSTAR;\nconst plTypes = {\n    '!': { open: '(?:(?!(?:', close: '))[^/]*?)' },\n    '?': { open: '(?:', close: ')?' },\n    '+': { open: '(?:', close: ')+' },\n    '*': { open: '(?:', close: ')*' },\n    '@': { open: '(?:', close: ')' },\n};\n// any single thing other than /\n// don't need to escape / when using new RegExp()\nconst qmark = '[^/]';\n// * => any number of characters\nconst star = qmark + '*?';\n// ** when dots are allowed.  Anything goes, except .. and .\n// not (^ or / followed by one or two dots followed by $ or /),\n// followed by anything, any number of times.\nconst twoStarDot = '(?:(?!(?:\\\\/|^)(?:\\\\.{1,2})($|\\\\/)).)*?';\n// not a ^ or / followed by a dot,\n// followed by anything, any number of times.\nconst twoStarNoDot = '(?:(?!(?:\\\\/|^)\\\\.).)*?';\n// \"abc\" -> { a:true, b:true, c:true }\nconst charSet = (s) => s.split('').reduce((set, c) => {\n    set[c] = true;\n    return set;\n}, {});\n// characters that need to be escaped in RegExp.\nconst reSpecials = charSet('().*{}+?[]^$\\\\!');\n// characters that indicate we have to add the pattern start\nconst addPatternStartSet = charSet('[.(');\nexport const filter = (pattern, options = {}) => (p) => minimatch(p, pattern, options);\nminimatch.filter = filter;\nconst ext = (a, b = {}) => Object.assign({}, a, b);\nexport const defaults = (def) => {\n    if (!def || typeof def !== 'object' || !Object.keys(def).length) {\n        return minimatch;\n    }\n    const orig = minimatch;\n    const m = (p, pattern, options = {}) => orig(p, pattern, ext(def, options));\n    return Object.assign(m, {\n        Minimatch: class Minimatch extends orig.Minimatch {\n            constructor(pattern, options = {}) {\n                super(pattern, ext(def, options));\n            }\n            static defaults(options) {\n                return orig.defaults(ext(def, options)).Minimatch;\n            }\n        },\n        unescape: (s, options = {}) => orig.unescape(s, ext(def, options)),\n        escape: (s, options = {}) => orig.escape(s, ext(def, options)),\n        filter: (pattern, options = {}) => orig.filter(pattern, ext(def, options)),\n        defaults: (options) => orig.defaults(ext(def, options)),\n        makeRe: (pattern, options = {}) => orig.makeRe(pattern, ext(def, options)),\n        braceExpand: (pattern, options = {}) => orig.braceExpand(pattern, ext(def, options)),\n        match: (list, pattern, options = {}) => orig.match(list, pattern, ext(def, options)),\n        sep: orig.sep,\n        GLOBSTAR: GLOBSTAR,\n    });\n};\nminimatch.defaults = defaults;\n// Brace expansion:\n// a{b,c}d -> abd acd\n// a{b,}c -> abc ac\n// a{0..3}d -> a0d a1d a2d a3d\n// a{b,c{d,e}f}g -> abg acdfg acefg\n// a{b,c}d{e,f}g -> abdeg acdeg abdeg abdfg\n//\n// Invalid sets are not expanded.\n// a{2..}b -> a{2..}b\n// a{b}c -> a{b}c\nexport const braceExpand = (pattern, options = {}) => {\n    assertValidPattern(pattern);\n    // Thanks to Yeting Li <https://github.com/yetingli> for\n    // improving this regexp to avoid a ReDOS vulnerability.\n    if (options.nobrace || !/\\{(?:(?!\\{).)*\\}/.test(pattern)) {\n        // shortcut. no need to expand.\n        return [pattern];\n    }\n    return expand(pattern);\n};\nminimatch.braceExpand = braceExpand;\nconst MAX_PATTERN_LENGTH = 1024 * 64;\nconst assertValidPattern = (pattern) => {\n    if (typeof pattern !== 'string') {\n        throw new TypeError('invalid pattern');\n    }\n    if (pattern.length > MAX_PATTERN_LENGTH) {\n        throw new TypeError('pattern is too long');\n    }\n};\n// parse a component of the expanded set.\n// At this point, no pattern may contain \"/\" in it\n// so we're going to return a 2d array, where each entry is the full\n// pattern, split on '/', and then turned into a regular expression.\n// A regexp is made at the end which joins each array with an\n// escaped /, and another full one which joins each regexp with |.\n//\n// Following the lead of Bash 4.1, note that \"**\" only has special meaning\n// when it is the *only* thing in a path portion.  Otherwise, any series\n// of * is equivalent to a single *.  Globstar behavior is enabled by\n// default, and can be disabled by setting options.noglobstar.\nexport const makeRe = (pattern, options = {}) => new Minimatch(pattern, options).makeRe();\nminimatch.makeRe = makeRe;\nexport const match = (list, pattern, options = {}) => {\n    const mm = new Minimatch(pattern, options);\n    list = list.filter(f => mm.match(f));\n    if (mm.options.nonull && !list.length) {\n        list.push(pattern);\n    }\n    return list;\n};\nminimatch.match = match;\n// replace stuff like \\* with *\nconst globUnescape = (s) => s.replace(/\\\\(.)/g, '$1');\nconst globMagic = /[?*]|[+@!]\\(.*?\\)|\\[|\\]/;\nconst regExpEscape = (s) => s.replace(/[-[\\]{}()*+?.,\\\\^$|#\\s]/g, '\\\\$&');\nexport class Minimatch {\n    options;\n    set;\n    pattern;\n    windowsPathsNoEscape;\n    nonegate;\n    negate;\n    comment;\n    empty;\n    preserveMultipleSlashes;\n    partial;\n    globSet;\n    globParts;\n    nocase;\n    isWindows;\n    platform;\n    windowsNoMagicRoot;\n    regexp;\n    constructor(pattern, options = {}) {\n        assertValidPattern(pattern);\n        options = options || {};\n        this.options = options;\n        this.pattern = pattern;\n        this.platform = options.platform || defaultPlatform;\n        this.isWindows = this.platform === 'win32';\n        this.windowsPathsNoEscape =\n            !!options.windowsPathsNoEscape || options.allowWindowsEscape === false;\n        if (this.windowsPathsNoEscape) {\n            this.pattern = this.pattern.replace(/\\\\/g, '/');\n        }\n        this.preserveMultipleSlashes = !!options.preserveMultipleSlashes;\n        this.regexp = null;\n        this.negate = false;\n        this.nonegate = !!options.nonegate;\n        this.comment = false;\n        this.empty = false;\n        this.partial = !!options.partial;\n        this.nocase = !!this.options.nocase;\n        this.windowsNoMagicRoot =\n            options.windowsNoMagicRoot !== undefined\n                ? options.windowsNoMagicRoot\n                : !!(this.isWindows && this.nocase);\n        this.globSet = [];\n        this.globParts = [];\n        this.set = [];\n        // make the set of regexps etc.\n        this.make();\n    }\n    hasMagic() {\n        if (this.options.magicalBraces && this.set.length > 1) {\n            return true;\n        }\n        for (const pattern of this.set) {\n            for (const part of pattern) {\n                if (typeof part !== 'string')\n                    return true;\n            }\n        }\n        return false;\n    }\n    debug(..._) { }\n    make() {\n        const pattern = this.pattern;\n        const options = this.options;\n        // empty patterns and comments match nothing.\n        if (!options.nocomment && pattern.charAt(0) === '#') {\n            this.comment = true;\n            return;\n        }\n        if (!pattern) {\n            this.empty = true;\n            return;\n        }\n        // step 1: figure out negation, etc.\n        this.parseNegate();\n        // step 2: expand braces\n        this.globSet = [...new Set(this.braceExpand())];\n        if (options.debug) {\n            this.debug = (...args) => console.error(...args);\n        }\n        this.debug(this.pattern, this.globSet);\n        // step 3: now we have a set, so turn each one into a series of\n        // path-portion matching patterns.\n        // These will be regexps, except in the case of \"**\", which is\n        // set to the GLOBSTAR object for globstar behavior,\n        // and will not contain any / characters\n        //\n        // First, we preprocess to make the glob pattern sets a bit simpler\n        // and deduped.  There are some perf-killing patterns that can cause\n        // problems with a glob walk, but we can simplify them down a bit.\n        const rawGlobParts = this.globSet.map(s => this.slashSplit(s));\n        this.globParts = this.preprocess(rawGlobParts);\n        this.debug(this.pattern, this.globParts);\n        // glob --> regexps\n        let set = this.globParts.map((s, _, __) => {\n            if (this.isWindows && this.windowsNoMagicRoot) {\n                // check if it's a drive or unc path.\n                const isUNC = s[0] === '' &&\n                    s[1] === '' &&\n                    (s[2] === '?' || !globMagic.test(s[2])) &&\n                    !globMagic.test(s[3]);\n                const isDrive = /^[a-z]:/i.test(s[0]);\n                if (isUNC) {\n                    return [...s.slice(0, 4), ...s.slice(4).map(ss => this.parse(ss))];\n                }\n                else if (isDrive) {\n                    return [s[0], ...s.slice(1).map(ss => this.parse(ss))];\n                }\n            }\n            return s.map(ss => this.parse(ss));\n        });\n        this.debug(this.pattern, set);\n        // filter out everything that didn't compile properly.\n        this.set = set.filter(s => s.indexOf(false) === -1);\n        // do not treat the ? in UNC paths as magic\n        if (this.isWindows) {\n            for (let i = 0; i < this.set.length; i++) {\n                const p = this.set[i];\n                if (p[0] === '' &&\n                    p[1] === '' &&\n                    this.globParts[i][2] === '?' &&\n                    typeof p[3] === 'string' &&\n                    /^[a-z]:$/i.test(p[3])) {\n                    p[2] = '?';\n                }\n            }\n        }\n        this.debug(this.pattern, this.set);\n    }\n    // various transforms to equivalent pattern sets that are\n    // faster to process in a filesystem walk.  The goal is to\n    // eliminate what we can, and push all ** patterns as far\n    // to the right as possible, even if it increases the number\n    // of patterns that we have to process.\n    preprocess(globParts) {\n        // if we're not in globstar mode, then turn all ** into *\n        if (this.options.noglobstar) {\n            for (let i = 0; i < globParts.length; i++) {\n                for (let j = 0; j < globParts[i].length; j++) {\n                    if (globParts[i][j] === '**') {\n                        globParts[i][j] = '*';\n                    }\n                }\n            }\n        }\n        const { optimizationLevel = 1 } = this.options;\n        if (optimizationLevel >= 2) {\n            // aggressive optimization for the purpose of fs walking\n            globParts = this.firstPhasePreProcess(globParts);\n            globParts = this.secondPhasePreProcess(globParts);\n        }\n        else if (optimizationLevel >= 1) {\n            // just basic optimizations to remove some .. parts\n            globParts = this.levelOneOptimize(globParts);\n        }\n        else {\n            globParts = this.adjascentGlobstarOptimize(globParts);\n        }\n        return globParts;\n    }\n    // just get rid of adjascent ** portions\n    adjascentGlobstarOptimize(globParts) {\n        return globParts.map(parts => {\n            let gs = -1;\n            while (-1 !== (gs = parts.indexOf('**', gs + 1))) {\n                let i = gs;\n                while (parts[i + 1] === '**') {\n                    i++;\n                }\n                if (i !== gs) {\n                    parts.splice(gs, i - gs);\n                }\n            }\n            return parts;\n        });\n    }\n    // get rid of adjascent ** and resolve .. portions\n    levelOneOptimize(globParts) {\n        return globParts.map(parts => {\n            parts = parts.reduce((set, part) => {\n                const prev = set[set.length - 1];\n                if (part === '**' && prev === '**') {\n                    return set;\n                }\n                if (part === '..') {\n                    if (prev && prev !== '..' && prev !== '.' && prev !== '**') {\n                        set.pop();\n                        return set;\n                    }\n                }\n                set.push(part);\n                return set;\n            }, []);\n            return parts.length === 0 ? [''] : parts;\n        });\n    }\n    levelTwoFileOptimize(parts) {\n        if (!Array.isArray(parts)) {\n            parts = this.slashSplit(parts);\n        }\n        let didSomething = false;\n        do {\n            didSomething = false;\n            // <pre>/<e>/<rest> -> <pre>/<rest>\n            if (!this.preserveMultipleSlashes) {\n                for (let i = 1; i < parts.length - 1; i++) {\n                    const p = parts[i];\n                    // don't squeeze out UNC patterns\n                    if (i === 1 && p === '' && parts[0] === '')\n                        continue;\n                    if (p === '.' || p === '') {\n                        didSomething = true;\n                        parts.splice(i, 1);\n                        i--;\n                    }\n                }\n                if (parts[0] === '.' &&\n                    parts.length === 2 &&\n                    (parts[1] === '.' || parts[1] === '')) {\n                    didSomething = true;\n                    parts.pop();\n                }\n            }\n            // <pre>/<p>/../<rest> -> <pre>/<rest>\n            let dd = 0;\n            while (-1 !== (dd = parts.indexOf('..', dd + 1))) {\n                const p = parts[dd - 1];\n                if (p && p !== '.' && p !== '..' && p !== '**') {\n                    didSomething = true;\n                    parts.splice(dd - 1, 2);\n                    dd -= 2;\n                }\n            }\n        } while (didSomething);\n        return parts.length === 0 ? [''] : parts;\n    }\n    // First phase: single-pattern processing\n    // <pre> is 1 or more portions\n    // <rest> is 1 or more portions\n    // <p> is any portion other than ., .., '', or **\n    // <e> is . or ''\n    //\n    // **/.. is *brutal* for filesystem walking performance, because\n    // it effectively resets the recursive walk each time it occurs,\n    // and ** cannot be reduced out by a .. pattern part like a regexp\n    // or most strings (other than .., ., and '') can be.\n    //\n    // <pre>/**/../<p>/<p>/<rest> -> {<pre>/../<p>/<p>/<rest>,<pre>/**/<p>/<p>/<rest>}\n    // <pre>/<e>/<rest> -> <pre>/<rest>\n    // <pre>/<p>/../<rest> -> <pre>/<rest>\n    // **/**/<rest> -> **/<rest>\n    //\n    // **/*/<rest> -> */**/<rest> <== not valid because ** doesn't follow\n    // this WOULD be allowed if ** did follow symlinks, or * didn't\n    firstPhasePreProcess(globParts) {\n        let didSomething = false;\n        do {\n            didSomething = false;\n            // <pre>/**/../<p>/<p>/<rest> -> {<pre>/../<p>/<p>/<rest>,<pre>/**/<p>/<p>/<rest>}\n            for (let parts of globParts) {\n                let gs = -1;\n                while (-1 !== (gs = parts.indexOf('**', gs + 1))) {\n                    let gss = gs;\n                    while (parts[gss + 1] === '**') {\n                        // <pre>/**/**/<rest> -> <pre>/**/<rest>\n                        gss++;\n                    }\n                    // eg, if gs is 2 and gss is 4, that means we have 3 **\n                    // parts, and can remove 2 of them.\n                    if (gss > gs) {\n                        parts.splice(gs + 1, gss - gs);\n                    }\n                    let next = parts[gs + 1];\n                    const p = parts[gs + 2];\n                    const p2 = parts[gs + 3];\n                    if (next !== '..')\n                        continue;\n                    if (!p ||\n                        p === '.' ||\n                        p === '..' ||\n                        !p2 ||\n                        p2 === '.' ||\n                        p2 === '..') {\n                        continue;\n                    }\n                    didSomething = true;\n                    // edit parts in place, and push the new one\n                    parts.splice(gs, 1);\n                    const other = parts.slice(0);\n                    other[gs] = '**';\n                    globParts.push(other);\n                    gs--;\n                }\n                // <pre>/<e>/<rest> -> <pre>/<rest>\n                if (!this.preserveMultipleSlashes) {\n                    for (let i = 1; i < parts.length - 1; i++) {\n                        const p = parts[i];\n                        // don't squeeze out UNC patterns\n                        if (i === 1 && p === '' && parts[0] === '')\n                            continue;\n                        if (p === '.' || p === '') {\n                            didSomething = true;\n                            parts.splice(i, 1);\n                            i--;\n                        }\n                    }\n                    if (parts[0] === '.' &&\n                        parts.length === 2 &&\n                        (parts[1] === '.' || parts[1] === '')) {\n                        didSomething = true;\n                        parts.pop();\n                    }\n                }\n                // <pre>/<p>/../<rest> -> <pre>/<rest>\n                let dd = 0;\n                while (-1 !== (dd = parts.indexOf('..', dd + 1))) {\n                    const p = parts[dd - 1];\n                    if (p && p !== '.' && p !== '..' && p !== '**') {\n                        didSomething = true;\n                        const needDot = dd === 1 && parts[dd + 1] === '**';\n                        const splin = needDot ? ['.'] : [];\n                        parts.splice(dd - 1, 2, ...splin);\n                        if (parts.length === 0)\n                            parts.push('');\n                        dd -= 2;\n                    }\n                }\n            }\n        } while (didSomething);\n        return globParts;\n    }\n    // second phase: multi-pattern dedupes\n    // {<pre>/*/<rest>,<pre>/<p>/<rest>} -> <pre>/*/<rest>\n    // {<pre>/<rest>,<pre>/<rest>} -> <pre>/<rest>\n    // {<pre>/**/<rest>,<pre>/<rest>} -> <pre>/**/<rest>\n    //\n    // {<pre>/**/<rest>,<pre>/**/<p>/<rest>} -> <pre>/**/<rest>\n    // ^-- not valid because ** doens't follow symlinks\n    secondPhasePreProcess(globParts) {\n        for (let i = 0; i < globParts.length - 1; i++) {\n            for (let j = i + 1; j < globParts.length; j++) {\n                const matched = this.partsMatch(globParts[i], globParts[j], !this.preserveMultipleSlashes);\n                if (!matched)\n                    continue;\n                globParts[i] = matched;\n                globParts[j] = [];\n            }\n        }\n        return globParts.filter(gs => gs.length);\n    }\n    partsMatch(a, b, emptyGSMatch = false) {\n        let ai = 0;\n        let bi = 0;\n        let result = [];\n        let which = '';\n        while (ai < a.length && bi < b.length) {\n            if (a[ai] === b[bi]) {\n                result.push(which === 'b' ? b[bi] : a[ai]);\n                ai++;\n                bi++;\n            }\n            else if (emptyGSMatch && a[ai] === '**' && b[bi] === a[ai + 1]) {\n                result.push(a[ai]);\n                ai++;\n            }\n            else if (emptyGSMatch && b[bi] === '**' && a[ai] === b[bi + 1]) {\n                result.push(b[bi]);\n                bi++;\n            }\n            else if (a[ai] === '*' &&\n                b[bi] &&\n                (this.options.dot || !b[bi].startsWith('.')) &&\n                b[bi] !== '**') {\n                if (which === 'b')\n                    return false;\n                which = 'a';\n                result.push(a[ai]);\n                ai++;\n                bi++;\n            }\n            else if (b[bi] === '*' &&\n                a[ai] &&\n                (this.options.dot || !a[ai].startsWith('.')) &&\n                a[ai] !== '**') {\n                if (which === 'a')\n                    return false;\n                which = 'b';\n                result.push(b[bi]);\n                ai++;\n                bi++;\n            }\n            else {\n                return false;\n            }\n        }\n        // if we fall out of the loop, it means they two are identical\n        // as long as their lengths match\n        return a.length === b.length && result;\n    }\n    parseNegate() {\n        if (this.nonegate)\n            return;\n        const pattern = this.pattern;\n        let negate = false;\n        let negateOffset = 0;\n        for (let i = 0; i < pattern.length && pattern.charAt(i) === '!'; i++) {\n            negate = !negate;\n            negateOffset++;\n        }\n        if (negateOffset)\n            this.pattern = pattern.slice(negateOffset);\n        this.negate = negate;\n    }\n    // set partial to true to test if, for example,\n    // \"/a/b\" matches the start of \"/*/b/*/d\"\n    // Partial means, if you run out of file before you run\n    // out of pattern, then that's fine, as long as all\n    // the parts match.\n    matchOne(file, pattern, partial = false) {\n        const options = this.options;\n        // a UNC pattern like //?/c:/* can match a path like c:/x\n        // and vice versa\n        if (this.isWindows) {\n            const fileUNC = file[0] === '' &&\n                file[1] === '' &&\n                file[2] === '?' &&\n                typeof file[3] === 'string' &&\n                /^[a-z]:$/i.test(file[3]);\n            const patternUNC = pattern[0] === '' &&\n                pattern[1] === '' &&\n                pattern[2] === '?' &&\n                typeof pattern[3] === 'string' &&\n                /^[a-z]:$/i.test(pattern[3]);\n            if (fileUNC && patternUNC) {\n                const fd = file[3];\n                const pd = pattern[3];\n                if (fd.toLowerCase() === pd.toLowerCase()) {\n                    file[3] = pd;\n                }\n            }\n            else if (patternUNC && typeof file[0] === 'string') {\n                const pd = pattern[3];\n                const fd = file[0];\n                if (pd.toLowerCase() === fd.toLowerCase()) {\n                    pattern[3] = fd;\n                    pattern = pattern.slice(3);\n                }\n            }\n            else if (fileUNC && typeof pattern[0] === 'string') {\n                const fd = file[3];\n                if (fd.toLowerCase() === pattern[0].toLowerCase()) {\n                    pattern[0] = fd;\n                    file = file.slice(3);\n                }\n            }\n        }\n        // resolve and reduce . and .. portions in the file as well.\n        // dont' need to do the second phase, because it's only one string[]\n        const { optimizationLevel = 1 } = this.options;\n        if (optimizationLevel >= 2) {\n            file = this.levelTwoFileOptimize(file);\n        }\n        this.debug('matchOne', this, { file, pattern });\n        this.debug('matchOne', file.length, pattern.length);\n        for (var fi = 0, pi = 0, fl = file.length, pl = pattern.length; fi < fl && pi < pl; fi++, pi++) {\n            this.debug('matchOne loop');\n            var p = pattern[pi];\n            var f = file[fi];\n            this.debug(pattern, p, f);\n            // should be impossible.\n            // some invalid regexp stuff in the set.\n            /* c8 ignore start */\n            if (p === false) {\n                return false;\n            }\n            /* c8 ignore stop */\n            if (p === GLOBSTAR) {\n                this.debug('GLOBSTAR', [pattern, p, f]);\n                // \"**\"\n                // a/**/b/**/c would match the following:\n                // a/b/x/y/z/c\n                // a/x/y/z/b/c\n                // a/b/x/b/x/c\n                // a/b/c\n                // To do this, take the rest of the pattern after\n                // the **, and see if it would match the file remainder.\n                // If so, return success.\n                // If not, the ** \"swallows\" a segment, and try again.\n                // This is recursively awful.\n                //\n                // a/**/b/**/c matching a/b/x/y/z/c\n                // - a matches a\n                // - doublestar\n                //   - matchOne(b/x/y/z/c, b/**/c)\n                //     - b matches b\n                //     - doublestar\n                //       - matchOne(x/y/z/c, c) -> no\n                //       - matchOne(y/z/c, c) -> no\n                //       - matchOne(z/c, c) -> no\n                //       - matchOne(c, c) yes, hit\n                var fr = fi;\n                var pr = pi + 1;\n                if (pr === pl) {\n                    this.debug('** at the end');\n                    // a ** at the end will just swallow the rest.\n                    // We have found a match.\n                    // however, it will not swallow /.x, unless\n                    // options.dot is set.\n                    // . and .. are *never* matched by **, for explosively\n                    // exponential reasons.\n                    for (; fi < fl; fi++) {\n                        if (file[fi] === '.' ||\n                            file[fi] === '..' ||\n                            (!options.dot && file[fi].charAt(0) === '.'))\n                            return false;\n                    }\n                    return true;\n                }\n                // ok, let's see if we can swallow whatever we can.\n                while (fr < fl) {\n                    var swallowee = file[fr];\n                    this.debug('\\nglobstar while', file, fr, pattern, pr, swallowee);\n                    // XXX remove this slice.  Just pass the start index.\n                    if (this.matchOne(file.slice(fr), pattern.slice(pr), partial)) {\n                        this.debug('globstar found match!', fr, fl, swallowee);\n                        // found a match.\n                        return true;\n                    }\n                    else {\n                        // can't swallow \".\" or \"..\" ever.\n                        // can only swallow \".foo\" when explicitly asked.\n                        if (swallowee === '.' ||\n                            swallowee === '..' ||\n                            (!options.dot && swallowee.charAt(0) === '.')) {\n                            this.debug('dot detected!', file, fr, pattern, pr);\n                            break;\n                        }\n                        // ** swallows a segment, and continue.\n                        this.debug('globstar swallow a segment, and continue');\n                        fr++;\n                    }\n                }\n                // no match was found.\n                // However, in partial mode, we can't say this is necessarily over.\n                /* c8 ignore start */\n                if (partial) {\n                    // ran out of file\n                    this.debug('\\n>>> no match, partial?', file, fr, pattern, pr);\n                    if (fr === fl) {\n                        return true;\n                    }\n                }\n                /* c8 ignore stop */\n                return false;\n            }\n            // something other than **\n            // non-magic patterns just have to match exactly\n            // patterns with magic have been turned into regexps.\n            let hit;\n            if (typeof p === 'string') {\n                hit = f === p;\n                this.debug('string match', p, f, hit);\n            }\n            else {\n                hit = p.test(f);\n                this.debug('pattern match', p, f, hit);\n            }\n            if (!hit)\n                return false;\n        }\n        // Note: ending in / means that we'll get a final \"\"\n        // at the end of the pattern.  This can only match a\n        // corresponding \"\" at the end of the file.\n        // If the file ends in /, then it can only match a\n        // a pattern that ends in /, unless the pattern just\n        // doesn't have any more for it. But, a/b/ should *not*\n        // match \"a/b/*\", even though \"\" matches against the\n        // [^/]*? pattern, except in partial mode, where it might\n        // simply not be reached yet.\n        // However, a/b/ should still satisfy a/*\n        // now either we fell off the end of the pattern, or we're done.\n        if (fi === fl && pi === pl) {\n            // ran out of pattern and filename at the same time.\n            // an exact hit!\n            return true;\n        }\n        else if (fi === fl) {\n            // ran out of file, but still had pattern left.\n            // this is ok if we're doing the match as part of\n            // a glob fs traversal.\n            return partial;\n        }\n        else if (pi === pl) {\n            // ran out of pattern, still have file left.\n            // this is only acceptable if we're on the very last\n            // empty segment of a file with a trailing slash.\n            // a/* should match a/b/\n            return fi === fl - 1 && file[fi] === '';\n            /* c8 ignore start */\n        }\n        else {\n            // should be unreachable.\n            throw new Error('wtf?');\n        }\n        /* c8 ignore stop */\n    }\n    braceExpand() {\n        return braceExpand(this.pattern, this.options);\n    }\n    parse(pattern) {\n        assertValidPattern(pattern);\n        const options = this.options;\n        // shortcuts\n        if (pattern === '**')\n            return GLOBSTAR;\n        if (pattern === '')\n            return '';\n        // far and away, the most common glob pattern parts are\n        // *, *.*, and *.<ext>  Add a fast check method for those.\n        let m;\n        let fastTest = null;\n        if ((m = pattern.match(starRE))) {\n            fastTest = options.dot ? starTestDot : starTest;\n        }\n        else if ((m = pattern.match(starDotExtRE))) {\n            fastTest = (options.nocase\n                ? options.dot\n                    ? starDotExtTestNocaseDot\n                    : starDotExtTestNocase\n                : options.dot\n                    ? starDotExtTestDot\n                    : starDotExtTest)(m[1]);\n        }\n        else if ((m = pattern.match(qmarksRE))) {\n            fastTest = (options.nocase\n                ? options.dot\n                    ? qmarksTestNocaseDot\n                    : qmarksTestNocase\n                : options.dot\n                    ? qmarksTestDot\n                    : qmarksTest)(m);\n        }\n        else if ((m = pattern.match(starDotStarRE))) {\n            fastTest = options.dot ? starDotStarTestDot : starDotStarTest;\n        }\n        else if ((m = pattern.match(dotStarRE))) {\n            fastTest = dotStarTest;\n        }\n        let re = '';\n        let hasMagic = false;\n        let escaping = false;\n        // ? => one single character\n        const patternListStack = [];\n        const negativeLists = [];\n        let stateChar = false;\n        let uflag = false;\n        let pl;\n        // . and .. never match anything that doesn't start with .,\n        // even when options.dot is set.  However, if the pattern\n        // starts with ., then traversal patterns can match.\n        let dotTravAllowed = pattern.charAt(0) === '.';\n        let dotFileAllowed = options.dot || dotTravAllowed;\n        const patternStart = () => dotTravAllowed\n            ? ''\n            : dotFileAllowed\n                ? '(?!(?:^|\\\\/)\\\\.{1,2}(?:$|\\\\/))'\n                : '(?!\\\\.)';\n        const subPatternStart = (p) => p.charAt(0) === '.'\n            ? ''\n            : options.dot\n                ? '(?!(?:^|\\\\/)\\\\.{1,2}(?:$|\\\\/))'\n                : '(?!\\\\.)';\n        const clearStateChar = () => {\n            if (stateChar) {\n                // we had some state-tracking character\n                // that wasn't consumed by this pass.\n                switch (stateChar) {\n                    case '*':\n                        re += star;\n                        hasMagic = true;\n                        break;\n                    case '?':\n                        re += qmark;\n                        hasMagic = true;\n                        break;\n                    default:\n                        re += '\\\\' + stateChar;\n                        break;\n                }\n                this.debug('clearStateChar %j %j', stateChar, re);\n                stateChar = false;\n            }\n        };\n        for (let i = 0, c; i < pattern.length && (c = pattern.charAt(i)); i++) {\n            this.debug('%s\\t%s %s %j', pattern, i, re, c);\n            // skip over any that are escaped.\n            if (escaping) {\n                // completely not allowed, even escaped.\n                // should be impossible.\n                /* c8 ignore start */\n                if (c === '/') {\n                    return false;\n                }\n                /* c8 ignore stop */\n                if (reSpecials[c]) {\n                    re += '\\\\';\n                }\n                re += c;\n                escaping = false;\n                continue;\n            }\n            switch (c) {\n                // Should already be path-split by now.\n                /* c8 ignore start */\n                case '/': {\n                    return false;\n                }\n                /* c8 ignore stop */\n                case '\\\\':\n                    clearStateChar();\n                    escaping = true;\n                    continue;\n                // the various stateChar values\n                // for the \"extglob\" stuff.\n                case '?':\n                case '*':\n                case '+':\n                case '@':\n                case '!':\n                    this.debug('%s\\t%s %s %j <-- stateChar', pattern, i, re, c);\n                    // if we already have a stateChar, then it means\n                    // that there was something like ** or +? in there.\n                    // Handle the stateChar, then proceed with this one.\n                    this.debug('call clearStateChar %j', stateChar);\n                    clearStateChar();\n                    stateChar = c;\n                    // if extglob is disabled, then +(asdf|foo) isn't a thing.\n                    // just clear the statechar *now*, rather than even diving into\n                    // the patternList stuff.\n                    if (options.noext)\n                        clearStateChar();\n                    continue;\n                case '(': {\n                    if (!stateChar) {\n                        re += '\\\\(';\n                        continue;\n                    }\n                    const plEntry = {\n                        type: stateChar,\n                        start: i - 1,\n                        reStart: re.length,\n                        open: plTypes[stateChar].open,\n                        close: plTypes[stateChar].close,\n                    };\n                    this.debug(this.pattern, '\\t', plEntry);\n                    patternListStack.push(plEntry);\n                    // negation is (?:(?!(?:js)(?:<rest>))[^/]*)\n                    re += plEntry.open;\n                    // next entry starts with a dot maybe?\n                    if (plEntry.start === 0 && plEntry.type !== '!') {\n                        dotTravAllowed = true;\n                        re += subPatternStart(pattern.slice(i + 1));\n                    }\n                    this.debug('plType %j %j', stateChar, re);\n                    stateChar = false;\n                    continue;\n                }\n                case ')': {\n                    const plEntry = patternListStack[patternListStack.length - 1];\n                    if (!plEntry) {\n                        re += '\\\\)';\n                        continue;\n                    }\n                    patternListStack.pop();\n                    // closing an extglob\n                    clearStateChar();\n                    hasMagic = true;\n                    pl = plEntry;\n                    // negation is (?:(?!js)[^/]*)\n                    // The others are (?:<pattern>)<type>\n                    re += pl.close;\n                    if (pl.type === '!') {\n                        negativeLists.push(Object.assign(pl, { reEnd: re.length }));\n                    }\n                    continue;\n                }\n                case '|': {\n                    const plEntry = patternListStack[patternListStack.length - 1];\n                    if (!plEntry) {\n                        re += '\\\\|';\n                        continue;\n                    }\n                    clearStateChar();\n                    re += '|';\n                    // next subpattern can start with a dot?\n                    if (plEntry.start === 0 && plEntry.type !== '!') {\n                        dotTravAllowed = true;\n                        re += subPatternStart(pattern.slice(i + 1));\n                    }\n                    continue;\n                }\n                // these are mostly the same in regexp and glob\n                case '[':\n                    // swallow any state-tracking char before the [\n                    clearStateChar();\n                    const [src, needUflag, consumed, magic] = parseClass(pattern, i);\n                    if (consumed) {\n                        re += src;\n                        uflag = uflag || needUflag;\n                        i += consumed - 1;\n                        hasMagic = hasMagic || magic;\n                    }\n                    else {\n                        re += '\\\\[';\n                    }\n                    continue;\n                case ']':\n                    re += '\\\\' + c;\n                    continue;\n                default:\n                    // swallow any state char that wasn't consumed\n                    clearStateChar();\n                    re += regExpEscape(c);\n                    break;\n            } // switch\n        } // for\n        // handle the case where we had a +( thing at the *end*\n        // of the pattern.\n        // each pattern list stack adds 3 chars, and we need to go through\n        // and escape any | chars that were passed through as-is for the regexp.\n        // Go through and escape them, taking care not to double-escape any\n        // | chars that were already escaped.\n        for (pl = patternListStack.pop(); pl; pl = patternListStack.pop()) {\n            let tail;\n            tail = re.slice(pl.reStart + pl.open.length);\n            this.debug(this.pattern, 'setting tail', re, pl);\n            // maybe some even number of \\, then maybe 1 \\, followed by a |\n            tail = tail.replace(/((?:\\\\{2}){0,64})(\\\\?)\\|/g, (_, $1, $2) => {\n                if (!$2) {\n                    // the | isn't already escaped, so escape it.\n                    $2 = '\\\\';\n                    // should already be done\n                    /* c8 ignore start */\n                }\n                /* c8 ignore stop */\n                // need to escape all those slashes *again*, without escaping the\n                // one that we need for escaping the | character.  As it works out,\n                // escaping an even number of slashes can be done by simply repeating\n                // it exactly after itself.  That's why this trick works.\n                //\n                // I am sorry that you have to see this.\n                return $1 + $1 + $2 + '|';\n            });\n            this.debug('tail=%j\\n   %s', tail, tail, pl, re);\n            const t = pl.type === '*' ? star : pl.type === '?' ? qmark : '\\\\' + pl.type;\n            hasMagic = true;\n            re = re.slice(0, pl.reStart) + t + '\\\\(' + tail;\n        }\n        // handle trailing things that only matter at the very end.\n        clearStateChar();\n        if (escaping) {\n            // trailing \\\\\n            re += '\\\\\\\\';\n        }\n        // only need to apply the nodot start if the re starts with\n        // something that could conceivably capture a dot\n        const addPatternStart = addPatternStartSet[re.charAt(0)];\n        // Hack to work around lack of negative lookbehind in JS\n        // A pattern like: *.!(x).!(y|z) needs to ensure that a name\n        // like 'a.xyz.yz' doesn't match.  So, the first negative\n        // lookahead, has to look ALL the way ahead, to the end of\n        // the pattern.\n        for (let n = negativeLists.length - 1; n > -1; n--) {\n            const nl = negativeLists[n];\n            const nlBefore = re.slice(0, nl.reStart);\n            const nlFirst = re.slice(nl.reStart, nl.reEnd - 8);\n            let nlAfter = re.slice(nl.reEnd);\n            const nlLast = re.slice(nl.reEnd - 8, nl.reEnd) + nlAfter;\n            // Handle nested stuff like *(*.js|!(*.json)), where open parens\n            // mean that we should *not* include the ) in the bit that is considered\n            // \"after\" the negated section.\n            const closeParensBefore = nlBefore.split(')').length;\n            const openParensBefore = nlBefore.split('(').length - closeParensBefore;\n            let cleanAfter = nlAfter;\n            for (let i = 0; i < openParensBefore; i++) {\n                cleanAfter = cleanAfter.replace(/\\)[+*?]?/, '');\n            }\n            nlAfter = cleanAfter;\n            const dollar = nlAfter === '' ? '(?:$|\\\\/)' : '';\n            re = nlBefore + nlFirst + nlAfter + dollar + nlLast;\n        }\n        // if the re is not \"\" at this point, then we need to make sure\n        // it doesn't match against an empty path part.\n        // Otherwise a/* will match a/, which it should not.\n        if (re !== '' && hasMagic) {\n            re = '(?=.)' + re;\n        }\n        if (addPatternStart) {\n            re = patternStart() + re;\n        }\n        // if it's nocase, and the lcase/uppercase don't match, it's magic\n        if (options.nocase && !hasMagic && !options.nocaseMagicOnly) {\n            hasMagic = pattern.toUpperCase() !== pattern.toLowerCase();\n        }\n        // skip the regexp for non-magical patterns\n        // unescape anything in it, though, so that it'll be\n        // an exact match against a file etc.\n        if (!hasMagic) {\n            return globUnescape(re);\n        }\n        const flags = (options.nocase ? 'i' : '') + (uflag ? 'u' : '');\n        try {\n            const ext = fastTest\n                ? {\n                    _glob: pattern,\n                    _src: re,\n                    test: fastTest,\n                }\n                : {\n                    _glob: pattern,\n                    _src: re,\n                };\n            return Object.assign(new RegExp('^' + re + '$', flags), ext);\n            /* c8 ignore start */\n        }\n        catch (er) {\n            // should be impossible\n            // If it was an invalid regular expression, then it can't match\n            // anything.  This trick looks for a character after the end of\n            // the string, which is of course impossible, except in multi-line\n            // mode, but it's not a /m regex.\n            this.debug('invalid regexp', er);\n            return new RegExp('$.');\n        }\n        /* c8 ignore stop */\n    }\n    makeRe() {\n        if (this.regexp || this.regexp === false)\n            return this.regexp;\n        // at this point, this.set is a 2d array of partial\n        // pattern strings, or \"**\".\n        //\n        // It's better to use .match().  This function shouldn't\n        // be used, really, but it's pretty convenient sometimes,\n        // when you just want to work with a regex.\n        const set = this.set;\n        if (!set.length) {\n            this.regexp = false;\n            return this.regexp;\n        }\n        const options = this.options;\n        const twoStar = options.noglobstar\n            ? star\n            : options.dot\n                ? twoStarDot\n                : twoStarNoDot;\n        const flags = options.nocase ? 'i' : '';\n        // regexpify non-globstar patterns\n        // if ** is only item, then we just do one twoStar\n        // if ** is first, and there are more, prepend (\\/|twoStar\\/)? to next\n        // if ** is last, append (\\/twoStar|) to previous\n        // if ** is in the middle, append (\\/|\\/twoStar\\/) to previous\n        // then filter out GLOBSTAR symbols\n        let re = set\n            .map(pattern => {\n            const pp = pattern.map(p => typeof p === 'string'\n                ? regExpEscape(p)\n                : p === GLOBSTAR\n                    ? GLOBSTAR\n                    : p._src);\n            pp.forEach((p, i) => {\n                const next = pp[i + 1];\n                const prev = pp[i - 1];\n                if (p !== GLOBSTAR || prev === GLOBSTAR) {\n                    return;\n                }\n                if (prev === undefined) {\n                    if (next !== undefined && next !== GLOBSTAR) {\n                        pp[i + 1] = '(?:\\\\/|' + twoStar + '\\\\/)?' + next;\n                    }\n                    else {\n                        pp[i] = twoStar;\n                    }\n                }\n                else if (next === undefined) {\n                    pp[i - 1] = prev + '(?:\\\\/|' + twoStar + ')?';\n                }\n                else if (next !== GLOBSTAR) {\n                    pp[i - 1] = prev + '(?:\\\\/|\\\\/' + twoStar + '\\\\/)' + next;\n                    pp[i + 1] = GLOBSTAR;\n                }\n            });\n            return pp.filter(p => p !== GLOBSTAR).join('/');\n        })\n            .join('|');\n        // must match entire pattern\n        // ending in a * or ** will make it less strict.\n        re = '^(?:' + re + ')$';\n        // can match anything, as long as it's not this.\n        if (this.negate)\n            re = '^(?!' + re + ').*$';\n        try {\n            this.regexp = new RegExp(re, flags);\n            /* c8 ignore start */\n        }\n        catch (ex) {\n            // should be impossible\n            this.regexp = false;\n        }\n        /* c8 ignore stop */\n        return this.regexp;\n    }\n    slashSplit(p) {\n        // if p starts with // on windows, we preserve that\n        // so that UNC paths aren't broken.  Otherwise, any number of\n        // / characters are coalesced into one, unless\n        // preserveMultipleSlashes is set to true.\n        if (this.preserveMultipleSlashes) {\n            return p.split('/');\n        }\n        else if (this.isWindows && /^\\/\\/[^\\/]+/.test(p)) {\n            // add an extra '' for the one we lose\n            return ['', ...p.split(/\\/+/)];\n        }\n        else {\n            return p.split(/\\/+/);\n        }\n    }\n    match(f, partial = this.partial) {\n        this.debug('match', f, this.pattern);\n        // short-circuit in the case of busted things.\n        // comments, etc.\n        if (this.comment) {\n            return false;\n        }\n        if (this.empty) {\n            return f === '';\n        }\n        if (f === '/' && partial) {\n            return true;\n        }\n        const options = this.options;\n        // windows: need to use /, not \\\n        if (this.isWindows) {\n            f = f.split('\\\\').join('/');\n        }\n        // treat the test path as a set of pathparts.\n        const ff = this.slashSplit(f);\n        this.debug(this.pattern, 'split', ff);\n        // just ONE of the pattern sets in this.set needs to match\n        // in order for it to be valid.  If negating, then just one\n        // match means that we have failed.\n        // Either way, return on the first hit.\n        const set = this.set;\n        this.debug(this.pattern, 'set', set);\n        // Find the basename of the path by looking for the last non-empty segment\n        let filename = ff[ff.length - 1];\n        if (!filename) {\n            for (let i = ff.length - 2; !filename && i >= 0; i--) {\n                filename = ff[i];\n            }\n        }\n        for (let i = 0; i < set.length; i++) {\n            const pattern = set[i];\n            let file = ff;\n            if (options.matchBase && pattern.length === 1) {\n                file = [filename];\n            }\n            const hit = this.matchOne(file, pattern, partial);\n            if (hit) {\n                if (options.flipNegate) {\n                    return true;\n                }\n                return !this.negate;\n            }\n        }\n        // didn't get any hits.  this is success if it's a negative\n        // pattern, failure otherwise.\n        if (options.flipNegate) {\n            return false;\n        }\n        return this.negate;\n    }\n    static defaults(def) {\n        return minimatch.defaults(def).Minimatch;\n    }\n}\n/* c8 ignore start */\nexport { escape } from './escape.js';\nexport { unescape } from './unescape.js';\n/* c8 ignore stop */\nminimatch.Minimatch = Minimatch;\nminimatch.escape = escape;\nminimatch.unescape = unescape;\n//# sourceMappingURL=index.js.map","// Copyright 2017 The casbin Authors. All Rights Reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the 'License');\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an 'AS IS' BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\nimport { ip } from './ip';\nimport { minimatch } from 'minimatch';\n// regexMatch determines whether key1 matches the pattern of key2 in regular expression.\nfunction regexMatch(key1, key2) {\n    return new RegExp(key2).test(key1);\n}\n// keyMatch determines whether key1 matches the pattern of key2 (similar to RESTful path),\n// key2 can contain a *.\n// For example, '/foo/bar' matches '/foo/*'\nfunction keyMatch(key1, key2) {\n    const pos = key2.indexOf('*');\n    if (pos === -1) {\n        return key1 === key2;\n    }\n    if (key1.length > pos) {\n        return key1.slice(0, pos) === key2.slice(0, pos);\n    }\n    return key1 === key2.slice(0, pos);\n}\n// keyMatchFunc is the wrapper for keyMatch.\nfunction keyMatchFunc(...args) {\n    const [arg0, arg1] = args;\n    const name1 = (arg0 || '').toString();\n    const name2 = (arg1 || '').toString();\n    return keyMatch(name1, name2);\n}\n// KeyGet returns the matched part\n// For example, \"/foo/bar/foo\" matches \"/foo/*\"\n// \"bar/foo\" will been returned\nfunction keyGet(key1, key2) {\n    const pos = key2.indexOf('*');\n    if (pos === -1) {\n        return '';\n    }\n    if (key1.length > pos) {\n        if (key1.slice(0, pos) === key2.slice(0, pos)) {\n            return key1.slice(pos, key1.length);\n        }\n    }\n    return '';\n}\n// keyGetFunc is the wrapper for keyGet.\nfunction keyGetFunc(...args) {\n    const [arg0, arg1] = args;\n    const name1 = (arg0 || '').toString();\n    const name2 = (arg1 || '').toString();\n    return keyGet(name1, name2);\n}\n// keyMatch2 determines whether key1 matches the pattern of key2 (similar to RESTful path),\n// key2 can contain a *.\n// For example, '/foo/bar' matches '/foo/*', '/resource1' matches '/:resource'\nfunction keyMatch2(key1, key2) {\n    key2 = key2.replace(/\\/\\*/g, '/.*');\n    const regexp = new RegExp(/(.*):[^/]+(.*)/g);\n    for (;;) {\n        if (!key2.includes('/:')) {\n            break;\n        }\n        key2 = key2.replace(regexp, '$1[^/]+$2');\n    }\n    if (key2 === '*') {\n        key2 = '(.*)';\n    }\n    return regexMatch(key1, '^' + key2 + '$');\n}\n// keyMatch2Func is the wrapper for keyMatch2.\nfunction keyMatch2Func(...args) {\n    const [arg0, arg1] = args;\n    const name1 = (arg0 || '').toString();\n    const name2 = (arg1 || '').toString();\n    return keyMatch2(name1, name2);\n}\n// KeyGet2 returns value matched pattern\n// For example, \"/resource1\" matches \"/:resource\"\n// if the pathVar == \"resource\", then \"resource1\" will be returned\nfunction keyGet2(key1, key2, pathVar) {\n    if (keyMatch2(key1, key2)) {\n        const re = new RegExp('[^/]+', 'g');\n        const keys = key2.match(re);\n        const values = key1.match(re);\n        if (!keys || !values) {\n            return '';\n        }\n        const index = keys.indexOf(`:${pathVar}`);\n        if (index === -1) {\n            return '';\n        }\n        return values[index];\n    }\n    else {\n        return '';\n    }\n}\nfunction keyGet2Func(...args) {\n    const [arg0, arg1, arg2] = args;\n    const name1 = (arg0 || '').toString();\n    const name2 = (arg1 || '').toString();\n    const name3 = (arg2 || '').toString();\n    return keyGet2(name1, name2, name3);\n}\n// keyMatch3 determines whether key1 matches the pattern of key2 (similar to RESTful path), key2 can contain a *.\n// For example, '/foo/bar' matches '/foo/*', '/resource1' matches '/{resource}'\nfunction keyMatch3(key1, key2) {\n    key2 = key2.replace(/\\/\\*/g, '/.*');\n    const regexp = new RegExp(/(.*){[^/]+}(.*)/g);\n    for (;;) {\n        if (!key2.includes('/{')) {\n            break;\n        }\n        key2 = key2.replace(regexp, '$1[^/]+$2');\n    }\n    return regexMatch(key1, '^' + key2 + '$');\n}\n// keyMatch3Func is the wrapper for keyMatch3.\nfunction keyMatch3Func(...args) {\n    const [arg0, arg1] = args;\n    const name1 = (arg0 || '').toString();\n    const name2 = (arg1 || '').toString();\n    return keyMatch3(name1, name2);\n}\n// keyMatch4 determines whether key1 matches the pattern of key2 (similar to RESTful path), key2 can contain a *.\n// Besides what keyMatch3 does, keyMatch4 can also match repeated patterns:\n// \"/parent/123/child/123\" matches \"/parent/{id}/child/{id}\"\n// \"/parent/123/child/456\" does not match \"/parent/{id}/child/{id}\"\n// But keyMatch3 will match both.\nfunction keyMatch4(key1, key2) {\n    key2 = key2.replace(/\\/\\*/g, '/.*');\n    const tokens = [];\n    let j = -1;\n    for (let i = 0; i < key2.length; i++) {\n        const c = key2.charAt(i);\n        if (c === '{') {\n            j = i;\n        }\n        else if (c === '}') {\n            tokens.push(key2.substring(j, i + 1));\n        }\n    }\n    let regexp = new RegExp(/(.*){[^/]+}(.*)/g);\n    for (;;) {\n        if (!key2.includes('/{')) {\n            break;\n        }\n        key2 = key2.replace(regexp, '$1([^/]+)$2');\n    }\n    regexp = new RegExp('^' + key2 + '$');\n    let values = regexp.exec(key1);\n    if (!values) {\n        return false;\n    }\n    values = values.slice(1);\n    if (tokens.length !== values.length) {\n        throw new Error('KeyMatch4: number of tokens is not equal to number of values');\n    }\n    const m = new Map();\n    tokens.forEach((n, index) => {\n        const key = tokens[index];\n        let v = m.get(key);\n        if (!v) {\n            v = [];\n        }\n        if (values) {\n            v.push(values[index]);\n        }\n        m.set(key, v);\n    });\n    for (const value of m.values()) {\n        if (value.length > 1) {\n            for (let i = 1; i < values.length; i++) {\n                if (values[i] !== values[0]) {\n                    return false;\n                }\n            }\n        }\n    }\n    return true;\n}\n// keyMatch4Func is the wrapper for keyMatch4.\nfunction keyMatch4Func(...args) {\n    const [arg0, arg1] = args;\n    const name1 = (arg0 || '').toString();\n    const name2 = (arg1 || '').toString();\n    return keyMatch4(name1, name2);\n}\n// KeyMatch determines whether key1 matches the pattern of key2 and ignores the parameters in key2.\n// For example, \"/foo/bar?status=1&type=2\" matches \"/foo/bar\"\nfunction KeyMatch5(key1, key2) {\n    const i = key1.indexOf('?');\n    if (i !== -1) {\n        key1 = key1.slice(0, i);\n    }\n    key2 = key2.replace(/\\/\\*/g, '/.*');\n    const regexp = new RegExp(/(.*){[^/]+}(.*)/g);\n    for (;;) {\n        if (!key2.includes('/{')) {\n            break;\n        }\n        key2 = key2.replace(regexp, '$1[^/]+$2');\n    }\n    return regexMatch(key1, '^' + key2 + '$');\n}\n// keyMatch5Func is the wrapper for KeyMatch5.\nfunction keyMatch5Func(...args) {\n    const [arg0, arg1] = args;\n    const name1 = (arg0 || '').toString();\n    const name2 = (arg1 || '').toString();\n    return KeyMatch5(name1, name2);\n}\n// regexMatchFunc is the wrapper for regexMatch.\nfunction regexMatchFunc(...args) {\n    const [arg0, arg1] = args;\n    const name1 = (arg0 || '').toString();\n    const name2 = (arg1 || '').toString();\n    return regexMatch(name1, name2);\n}\n// ipMatch determines whether IP address ip1 matches the pattern of IP address ip2,\n// ip2 can be an IP address or a CIDR pattern.\n// For example, '192.168.2.123' matches '192.168.2.0/24'\nfunction ipMatch(ip1, ip2) {\n    // check ip1\n    if (!(ip.isV4Format(ip1) || ip.isV6Format(ip1))) {\n        throw new Error('invalid argument: ip1 in ipMatch() function is not an IP address.');\n    }\n    // check ip2\n    const cidrParts = ip2.split('/');\n    if (cidrParts.length === 2) {\n        return ip.cidrSubnet(ip2).contains(ip1);\n    }\n    else {\n        if (!(ip.isV4Format(ip2) || ip.isV6Format(ip2))) {\n            console.log(ip2);\n            throw new Error('invalid argument: ip2 in ipMatch() function is not an IP address.');\n        }\n        return ip.isEqual(ip1, ip2);\n    }\n}\n// ipMatchFunc is the wrapper for ipMatch.\nfunction ipMatchFunc(...args) {\n    const [arg0, arg1] = args;\n    const ip1 = (arg0 || '').toString();\n    const ip2 = (arg1 || '').toString();\n    return ipMatch(ip1, ip2);\n}\n/**\n * Returns true if the specified `string` matches the given glob `pattern`.\n *\n * @param string String to match\n * @param pattern Glob pattern to use for matching.\n * @returns Returns true if the string matches the glob pattern.\n *\n * @example\n * ```javascript\n * globMatch(\"abc.conf\", \"*.conf\") => true\n * ```\n */\nfunction globMatch(string, pattern) {\n    // The minimatch doesn't support the pattern starts with *\n    // See https://github.com/isaacs/minimatch/issues/195\n    if (pattern[0] === '*' && pattern[1] === '/') {\n        pattern = pattern.substring(1);\n    }\n    return minimatch(string, pattern);\n}\n// generateGFunction is the factory method of the g(_, _) function.\nfunction generateGFunction(rm) {\n    const memorized = new Map();\n    return async function (...args) {\n        const key = args.toString();\n        let value = memorized.get(key);\n        if (value) {\n            return value;\n        }\n        const [arg0, arg1] = args;\n        const name1 = (arg0 || '').toString();\n        const name2 = (arg1 || '').toString();\n        if (!rm) {\n            value = name1 === name2;\n        }\n        else if (args.length === 2) {\n            value = await rm.hasLink(name1, name2);\n        }\n        else {\n            const domain = args[2].toString();\n            value = await rm.hasLink(name1, name2, domain);\n        }\n        memorized.set(key, value);\n        return value;\n    };\n}\n// generateSyncedGFunction is the synchronous factory method of the g(_, _) function.\nfunction generateSyncedGFunction(rm) {\n    const memorized = new Map();\n    return function (...args) {\n        const key = args.toString();\n        let value = memorized.get(key);\n        if (value) {\n            return value;\n        }\n        const [arg0, arg1] = args;\n        const name1 = (arg0 || '').toString();\n        const name2 = (arg1 || '').toString();\n        if (!rm) {\n            value = name1 === name2;\n        }\n        else if (!(rm === null || rm === void 0 ? void 0 : rm.syncedHasLink)) {\n            throw new Error('RoleManager requires syncedHasLink for synchronous execution');\n        }\n        else if (args.length === 2) {\n            value = rm.syncedHasLink(name1, name2);\n        }\n        else {\n            const domain = args[2].toString();\n            value = rm.syncedHasLink(name1, name2, domain);\n        }\n        memorized.set(key, value);\n        return value;\n    };\n}\nexport { keyMatchFunc, keyGetFunc, keyMatch2Func, keyGet2Func, keyMatch3Func, regexMatchFunc, ipMatchFunc, generateSyncedGFunction, generateGFunction, keyMatch4Func, keyMatch5Func, globMatch, };\n","class CsvError extends Error {\n  constructor(code, message, options, ...contexts) {\n    if (Array.isArray(message)) message = message.join(\" \").trim();\n    super(message);\n    if (Error.captureStackTrace !== undefined) {\n      Error.captureStackTrace(this, CsvError);\n    }\n    this.code = code;\n    for (const context of contexts) {\n      for (const key in context) {\n        const value = context[key];\n        this[key] = Buffer.isBuffer(value)\n          ? value.toString(options.encoding)\n          : value == null\n            ? value\n            : JSON.parse(JSON.stringify(value));\n      }\n    }\n  }\n}\n\nexport { CsvError };\n","const is_object = function (obj) {\n  return typeof obj === \"object\" && obj !== null && !Array.isArray(obj);\n};\n\nexport { is_object };\n","import { CsvError } from \"./CsvError.js\";\nimport { is_object } from \"../utils/is_object.js\";\n\nconst normalize_columns_array = function (columns) {\n  const normalizedColumns = [];\n  for (let i = 0, l = columns.length; i < l; i++) {\n    const column = columns[i];\n    if (column === undefined || column === null || column === false) {\n      normalizedColumns[i] = { disabled: true };\n    } else if (typeof column === \"string\") {\n      normalizedColumns[i] = { name: column };\n    } else if (is_object(column)) {\n      if (typeof column.name !== \"string\") {\n        throw new CsvError(\"CSV_OPTION_COLUMNS_MISSING_NAME\", [\n          \"Option columns missing name:\",\n          `property \"name\" is required at position ${i}`,\n          \"when column is an object literal\",\n        ]);\n      }\n      normalizedColumns[i] = column;\n    } else {\n      throw new CsvError(\"CSV_INVALID_COLUMN_DEFINITION\", [\n        \"Invalid column definition:\",\n        \"expect a string or a literal object,\",\n        `got ${JSON.stringify(column)} at position ${i}`,\n      ]);\n    }\n  }\n  return normalizedColumns;\n};\n\nexport { normalize_columns_array };\n","class ResizeableBuffer {\n  constructor(size = 100) {\n    this.size = size;\n    this.length = 0;\n    this.buf = Buffer.allocUnsafe(size);\n  }\n  prepend(val) {\n    if (Buffer.isBuffer(val)) {\n      const length = this.length + val.length;\n      if (length >= this.size) {\n        this.resize();\n        if (length >= this.size) {\n          throw Error(\"INVALID_BUFFER_STATE\");\n        }\n      }\n      const buf = this.buf;\n      this.buf = Buffer.allocUnsafe(this.size);\n      val.copy(this.buf, 0);\n      buf.copy(this.buf, val.length);\n      this.length += val.length;\n    } else {\n      const length = this.length++;\n      if (length === this.size) {\n        this.resize();\n      }\n      const buf = this.clone();\n      this.buf[0] = val;\n      buf.copy(this.buf, 1, 0, length);\n    }\n  }\n  append(val) {\n    const length = this.length++;\n    if (length === this.size) {\n      this.resize();\n    }\n    this.buf[length] = val;\n  }\n  clone() {\n    return Buffer.from(this.buf.slice(0, this.length));\n  }\n  resize() {\n    const length = this.length;\n    this.size = this.size * 2;\n    const buf = Buffer.allocUnsafe(this.size);\n    this.buf.copy(buf, 0, 0, length);\n    this.buf = buf;\n  }\n  toString(encoding) {\n    if (encoding) {\n      return this.buf.slice(0, this.length).toString(encoding);\n    } else {\n      return Uint8Array.prototype.slice.call(this.buf.slice(0, this.length));\n    }\n  }\n  toJSON() {\n    return this.toString(\"utf8\");\n  }\n  reset() {\n    this.length = 0;\n  }\n}\n\nexport default ResizeableBuffer;\n","import ResizeableBuffer from \"../utils/ResizeableBuffer.js\";\n\n// white space characters\n// https://en.wikipedia.org/wiki/Whitespace_character\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_Expressions/Character_Classes#Types\n// \\f\\n\\r\\t\\v\\u00a0\\u1680\\u2000-\\u200a\\u2028\\u2029\\u202f\\u205f\\u3000\\ufeff\nconst np = 12;\nconst cr = 13; // `\\r`, carriage return, 0x0D in hexadcimal, 13 in decimal\nconst nl = 10; // `\\n`, newline, 0x0A in hexadecimal, 10 in decimal\nconst space = 32;\nconst tab = 9;\n\nconst init_state = function (options) {\n  return {\n    bomSkipped: false,\n    bufBytesStart: 0,\n    castField: options.cast_function,\n    commenting: false,\n    // Current error encountered by a record\n    error: undefined,\n    enabled: options.from_line === 1,\n    escaping: false,\n    escapeIsQuote:\n      Buffer.isBuffer(options.escape) &&\n      Buffer.isBuffer(options.quote) &&\n      Buffer.compare(options.escape, options.quote) === 0,\n    // columns can be `false`, `true`, `Array`\n    expectedRecordLength: Array.isArray(options.columns)\n      ? options.columns.length\n      : undefined,\n    field: new ResizeableBuffer(20),\n    firstLineToHeaders: options.cast_first_line_to_header,\n    needMoreDataSize: Math.max(\n      // Skip if the remaining buffer smaller than comment\n      options.comment !== null ? options.comment.length : 0,\n      // Skip if the remaining buffer can be delimiter\n      ...options.delimiter.map((delimiter) => delimiter.length),\n      // Skip if the remaining buffer can be escape sequence\n      options.quote !== null ? options.quote.length : 0,\n    ),\n    previousBuf: undefined,\n    quoting: false,\n    stop: false,\n    rawBuffer: new ResizeableBuffer(100),\n    record: [],\n    recordHasError: false,\n    record_length: 0,\n    recordDelimiterMaxLength:\n      options.record_delimiter.length === 0\n        ? 0\n        : Math.max(...options.record_delimiter.map((v) => v.length)),\n    trimChars: [\n      Buffer.from(\" \", options.encoding)[0],\n      Buffer.from(\"\\t\", options.encoding)[0],\n    ],\n    wasQuoting: false,\n    wasRowDelimiter: false,\n    timchars: [\n      Buffer.from(Buffer.from([cr], \"utf8\").toString(), options.encoding),\n      Buffer.from(Buffer.from([nl], \"utf8\").toString(), options.encoding),\n      Buffer.from(Buffer.from([np], \"utf8\").toString(), options.encoding),\n      Buffer.from(Buffer.from([space], \"utf8\").toString(), options.encoding),\n      Buffer.from(Buffer.from([tab], \"utf8\").toString(), options.encoding),\n    ],\n  };\n};\n\nexport { init_state };\n","const underscore = function (str) {\n  return str.replace(/([A-Z])/g, function (_, match) {\n    return \"_\" + match.toLowerCase();\n  });\n};\n\nexport { underscore };\n","import { normalize_columns_array } from \"./normalize_columns_array.js\";\nimport { CsvError } from \"./CsvError.js\";\nimport { underscore } from \"../utils/underscore.js\";\n\nconst normalize_options = function (opts) {\n  const options = {};\n  // Merge with user options\n  for (const opt in opts) {\n    options[underscore(opt)] = opts[opt];\n  }\n  // Normalize option `encoding`\n  // Note: defined first because other options depends on it\n  // to convert chars/strings into buffers.\n  if (options.encoding === undefined || options.encoding === true) {\n    options.encoding = \"utf8\";\n  } else if (options.encoding === null || options.encoding === false) {\n    options.encoding = null;\n  } else if (\n    typeof options.encoding !== \"string\" &&\n    options.encoding !== null\n  ) {\n    throw new CsvError(\n      \"CSV_INVALID_OPTION_ENCODING\",\n      [\n        \"Invalid option encoding:\",\n        \"encoding must be a string or null to return a buffer,\",\n        `got ${JSON.stringify(options.encoding)}`,\n      ],\n      options,\n    );\n  }\n  // Normalize option `bom`\n  if (\n    options.bom === undefined ||\n    options.bom === null ||\n    options.bom === false\n  ) {\n    options.bom = false;\n  } else if (options.bom !== true) {\n    throw new CsvError(\n      \"CSV_INVALID_OPTION_BOM\",\n      [\n        \"Invalid option bom:\",\n        \"bom must be true,\",\n        `got ${JSON.stringify(options.bom)}`,\n      ],\n      options,\n    );\n  }\n  // Normalize option `cast`\n  options.cast_function = null;\n  if (\n    options.cast === undefined ||\n    options.cast === null ||\n    options.cast === false ||\n    options.cast === \"\"\n  ) {\n    options.cast = undefined;\n  } else if (typeof options.cast === \"function\") {\n    options.cast_function = options.cast;\n    options.cast = true;\n  } else if (options.cast !== true) {\n    throw new CsvError(\n      \"CSV_INVALID_OPTION_CAST\",\n      [\n        \"Invalid option cast:\",\n        \"cast must be true or a function,\",\n        `got ${JSON.stringify(options.cast)}`,\n      ],\n      options,\n    );\n  }\n  // Normalize option `cast_date`\n  if (\n    options.cast_date === undefined ||\n    options.cast_date === null ||\n    options.cast_date === false ||\n    options.cast_date === \"\"\n  ) {\n    options.cast_date = false;\n  } else if (options.cast_date === true) {\n    options.cast_date = function (value) {\n      const date = Date.parse(value);\n      return !isNaN(date) ? new Date(date) : value;\n    };\n  } else if (typeof options.cast_date !== \"function\") {\n    throw new CsvError(\n      \"CSV_INVALID_OPTION_CAST_DATE\",\n      [\n        \"Invalid option cast_date:\",\n        \"cast_date must be true or a function,\",\n        `got ${JSON.stringify(options.cast_date)}`,\n      ],\n      options,\n    );\n  }\n  // Normalize option `columns`\n  options.cast_first_line_to_header = null;\n  if (options.columns === true) {\n    // Fields in the first line are converted as-is to columns\n    options.cast_first_line_to_header = undefined;\n  } else if (typeof options.columns === \"function\") {\n    options.cast_first_line_to_header = options.columns;\n    options.columns = true;\n  } else if (Array.isArray(options.columns)) {\n    options.columns = normalize_columns_array(options.columns);\n  } else if (\n    options.columns === undefined ||\n    options.columns === null ||\n    options.columns === false\n  ) {\n    options.columns = false;\n  } else {\n    throw new CsvError(\n      \"CSV_INVALID_OPTION_COLUMNS\",\n      [\n        \"Invalid option columns:\",\n        \"expect an array, a function or true,\",\n        `got ${JSON.stringify(options.columns)}`,\n      ],\n      options,\n    );\n  }\n  // Normalize option `group_columns_by_name`\n  if (\n    options.group_columns_by_name === undefined ||\n    options.group_columns_by_name === null ||\n    options.group_columns_by_name === false\n  ) {\n    options.group_columns_by_name = false;\n  } else if (options.group_columns_by_name !== true) {\n    throw new CsvError(\n      \"CSV_INVALID_OPTION_GROUP_COLUMNS_BY_NAME\",\n      [\n        \"Invalid option group_columns_by_name:\",\n        \"expect an boolean,\",\n        `got ${JSON.stringify(options.group_columns_by_name)}`,\n      ],\n      options,\n    );\n  } else if (options.columns === false) {\n    throw new CsvError(\n      \"CSV_INVALID_OPTION_GROUP_COLUMNS_BY_NAME\",\n      [\n        \"Invalid option group_columns_by_name:\",\n        \"the `columns` mode must be activated.\",\n      ],\n      options,\n    );\n  }\n  // Normalize option `comment`\n  if (\n    options.comment === undefined ||\n    options.comment === null ||\n    options.comment === false ||\n    options.comment === \"\"\n  ) {\n    options.comment = null;\n  } else {\n    if (typeof options.comment === \"string\") {\n      options.comment = Buffer.from(options.comment, options.encoding);\n    }\n    if (!Buffer.isBuffer(options.comment)) {\n      throw new CsvError(\n        \"CSV_INVALID_OPTION_COMMENT\",\n        [\n          \"Invalid option comment:\",\n          \"comment must be a buffer or a string,\",\n          `got ${JSON.stringify(options.comment)}`,\n        ],\n        options,\n      );\n    }\n  }\n  // Normalize option `comment_no_infix`\n  if (\n    options.comment_no_infix === undefined ||\n    options.comment_no_infix === null ||\n    options.comment_no_infix === false\n  ) {\n    options.comment_no_infix = false;\n  } else if (options.comment_no_infix !== true) {\n    throw new CsvError(\n      \"CSV_INVALID_OPTION_COMMENT\",\n      [\n        \"Invalid option comment_no_infix:\",\n        \"value must be a boolean,\",\n        `got ${JSON.stringify(options.comment_no_infix)}`,\n      ],\n      options,\n    );\n  }\n  // Normalize option `delimiter`\n  const delimiter_json = JSON.stringify(options.delimiter);\n  if (!Array.isArray(options.delimiter))\n    options.delimiter = [options.delimiter];\n  if (options.delimiter.length === 0) {\n    throw new CsvError(\n      \"CSV_INVALID_OPTION_DELIMITER\",\n      [\n        \"Invalid option delimiter:\",\n        \"delimiter must be a non empty string or buffer or array of string|buffer,\",\n        `got ${delimiter_json}`,\n      ],\n      options,\n    );\n  }\n  options.delimiter = options.delimiter.map(function (delimiter) {\n    if (delimiter === undefined || delimiter === null || delimiter === false) {\n      return Buffer.from(\",\", options.encoding);\n    }\n    if (typeof delimiter === \"string\") {\n      delimiter = Buffer.from(delimiter, options.encoding);\n    }\n    if (!Buffer.isBuffer(delimiter) || delimiter.length === 0) {\n      throw new CsvError(\n        \"CSV_INVALID_OPTION_DELIMITER\",\n        [\n          \"Invalid option delimiter:\",\n          \"delimiter must be a non empty string or buffer or array of string|buffer,\",\n          `got ${delimiter_json}`,\n        ],\n        options,\n      );\n    }\n    return delimiter;\n  });\n  // Normalize option `escape`\n  if (options.escape === undefined || options.escape === true) {\n    options.escape = Buffer.from('\"', options.encoding);\n  } else if (typeof options.escape === \"string\") {\n    options.escape = Buffer.from(options.escape, options.encoding);\n  } else if (options.escape === null || options.escape === false) {\n    options.escape = null;\n  }\n  if (options.escape !== null) {\n    if (!Buffer.isBuffer(options.escape)) {\n      throw new Error(\n        `Invalid Option: escape must be a buffer, a string or a boolean, got ${JSON.stringify(options.escape)}`,\n      );\n    }\n  }\n  // Normalize option `from`\n  if (options.from === undefined || options.from === null) {\n    options.from = 1;\n  } else {\n    if (typeof options.from === \"string\" && /\\d+/.test(options.from)) {\n      options.from = parseInt(options.from);\n    }\n    if (Number.isInteger(options.from)) {\n      if (options.from < 0) {\n        throw new Error(\n          `Invalid Option: from must be a positive integer, got ${JSON.stringify(opts.from)}`,\n        );\n      }\n    } else {\n      throw new Error(\n        `Invalid Option: from must be an integer, got ${JSON.stringify(options.from)}`,\n      );\n    }\n  }\n  // Normalize option `from_line`\n  if (options.from_line === undefined || options.from_line === null) {\n    options.from_line = 1;\n  } else {\n    if (\n      typeof options.from_line === \"string\" &&\n      /\\d+/.test(options.from_line)\n    ) {\n      options.from_line = parseInt(options.from_line);\n    }\n    if (Number.isInteger(options.from_line)) {\n      if (options.from_line <= 0) {\n        throw new Error(\n          `Invalid Option: from_line must be a positive integer greater than 0, got ${JSON.stringify(opts.from_line)}`,\n        );\n      }\n    } else {\n      throw new Error(\n        `Invalid Option: from_line must be an integer, got ${JSON.stringify(opts.from_line)}`,\n      );\n    }\n  }\n  // Normalize options `ignore_last_delimiters`\n  if (\n    options.ignore_last_delimiters === undefined ||\n    options.ignore_last_delimiters === null\n  ) {\n    options.ignore_last_delimiters = false;\n  } else if (typeof options.ignore_last_delimiters === \"number\") {\n    options.ignore_last_delimiters = Math.floor(options.ignore_last_delimiters);\n    if (options.ignore_last_delimiters === 0) {\n      options.ignore_last_delimiters = false;\n    }\n  } else if (typeof options.ignore_last_delimiters !== \"boolean\") {\n    throw new CsvError(\n      \"CSV_INVALID_OPTION_IGNORE_LAST_DELIMITERS\",\n      [\n        \"Invalid option `ignore_last_delimiters`:\",\n        \"the value must be a boolean value or an integer,\",\n        `got ${JSON.stringify(options.ignore_last_delimiters)}`,\n      ],\n      options,\n    );\n  }\n  if (options.ignore_last_delimiters === true && options.columns === false) {\n    throw new CsvError(\n      \"CSV_IGNORE_LAST_DELIMITERS_REQUIRES_COLUMNS\",\n      [\n        \"The option `ignore_last_delimiters`\",\n        \"requires the activation of the `columns` option\",\n      ],\n      options,\n    );\n  }\n  // Normalize option `info`\n  if (\n    options.info === undefined ||\n    options.info === null ||\n    options.info === false\n  ) {\n    options.info = false;\n  } else if (options.info !== true) {\n    throw new Error(\n      `Invalid Option: info must be true, got ${JSON.stringify(options.info)}`,\n    );\n  }\n  // Normalize option `max_record_size`\n  if (\n    options.max_record_size === undefined ||\n    options.max_record_size === null ||\n    options.max_record_size === false\n  ) {\n    options.max_record_size = 0;\n  } else if (\n    Number.isInteger(options.max_record_size) &&\n    options.max_record_size >= 0\n  ) {\n    // Great, nothing to do\n  } else if (\n    typeof options.max_record_size === \"string\" &&\n    /\\d+/.test(options.max_record_size)\n  ) {\n    options.max_record_size = parseInt(options.max_record_size);\n  } else {\n    throw new Error(\n      `Invalid Option: max_record_size must be a positive integer, got ${JSON.stringify(options.max_record_size)}`,\n    );\n  }\n  // Normalize option `objname`\n  if (\n    options.objname === undefined ||\n    options.objname === null ||\n    options.objname === false\n  ) {\n    options.objname = undefined;\n  } else if (Buffer.isBuffer(options.objname)) {\n    if (options.objname.length === 0) {\n      throw new Error(`Invalid Option: objname must be a non empty buffer`);\n    }\n    if (options.encoding === null) {\n      // Don't call `toString`, leave objname as a buffer\n    } else {\n      options.objname = options.objname.toString(options.encoding);\n    }\n  } else if (typeof options.objname === \"string\") {\n    if (options.objname.length === 0) {\n      throw new Error(`Invalid Option: objname must be a non empty string`);\n    }\n    // Great, nothing to do\n  } else if (typeof options.objname === \"number\") {\n    // if(options.objname.length === 0){\n    //   throw new Error(`Invalid Option: objname must be a non empty string`);\n    // }\n    // Great, nothing to do\n  } else {\n    throw new Error(\n      `Invalid Option: objname must be a string or a buffer, got ${options.objname}`,\n    );\n  }\n  if (options.objname !== undefined) {\n    if (typeof options.objname === \"number\") {\n      if (options.columns !== false) {\n        throw Error(\n          \"Invalid Option: objname index cannot be combined with columns or be defined as a field\",\n        );\n      }\n    } else {\n      // A string or a buffer\n      if (options.columns === false) {\n        throw Error(\n          \"Invalid Option: objname field must be combined with columns or be defined as an index\",\n        );\n      }\n    }\n  }\n  // Normalize option `on_record`\n  if (options.on_record === undefined || options.on_record === null) {\n    options.on_record = undefined;\n  } else if (typeof options.on_record !== \"function\") {\n    throw new CsvError(\n      \"CSV_INVALID_OPTION_ON_RECORD\",\n      [\n        \"Invalid option `on_record`:\",\n        \"expect a function,\",\n        `got ${JSON.stringify(options.on_record)}`,\n      ],\n      options,\n    );\n  }\n  // Normalize option `on_skip`\n  // options.on_skip ??= (err, chunk) => {\n  //   this.emit('skip', err, chunk);\n  // };\n  if (\n    options.on_skip !== undefined &&\n    options.on_skip !== null &&\n    typeof options.on_skip !== \"function\"\n  ) {\n    throw new Error(\n      `Invalid Option: on_skip must be a function, got ${JSON.stringify(options.on_skip)}`,\n    );\n  }\n  // Normalize option `quote`\n  if (\n    options.quote === null ||\n    options.quote === false ||\n    options.quote === \"\"\n  ) {\n    options.quote = null;\n  } else {\n    if (options.quote === undefined || options.quote === true) {\n      options.quote = Buffer.from('\"', options.encoding);\n    } else if (typeof options.quote === \"string\") {\n      options.quote = Buffer.from(options.quote, options.encoding);\n    }\n    if (!Buffer.isBuffer(options.quote)) {\n      throw new Error(\n        `Invalid Option: quote must be a buffer or a string, got ${JSON.stringify(options.quote)}`,\n      );\n    }\n  }\n  // Normalize option `raw`\n  if (\n    options.raw === undefined ||\n    options.raw === null ||\n    options.raw === false\n  ) {\n    options.raw = false;\n  } else if (options.raw !== true) {\n    throw new Error(\n      `Invalid Option: raw must be true, got ${JSON.stringify(options.raw)}`,\n    );\n  }\n  // Normalize option `record_delimiter`\n  if (options.record_delimiter === undefined) {\n    options.record_delimiter = [];\n  } else if (\n    typeof options.record_delimiter === \"string\" ||\n    Buffer.isBuffer(options.record_delimiter)\n  ) {\n    if (options.record_delimiter.length === 0) {\n      throw new CsvError(\n        \"CSV_INVALID_OPTION_RECORD_DELIMITER\",\n        [\n          \"Invalid option `record_delimiter`:\",\n          \"value must be a non empty string or buffer,\",\n          `got ${JSON.stringify(options.record_delimiter)}`,\n        ],\n        options,\n      );\n    }\n    options.record_delimiter = [options.record_delimiter];\n  } else if (!Array.isArray(options.record_delimiter)) {\n    throw new CsvError(\n      \"CSV_INVALID_OPTION_RECORD_DELIMITER\",\n      [\n        \"Invalid option `record_delimiter`:\",\n        \"value must be a string, a buffer or array of string|buffer,\",\n        `got ${JSON.stringify(options.record_delimiter)}`,\n      ],\n      options,\n    );\n  }\n  options.record_delimiter = options.record_delimiter.map(function (rd, i) {\n    if (typeof rd !== \"string\" && !Buffer.isBuffer(rd)) {\n      throw new CsvError(\n        \"CSV_INVALID_OPTION_RECORD_DELIMITER\",\n        [\n          \"Invalid option `record_delimiter`:\",\n          \"value must be a string, a buffer or array of string|buffer\",\n          `at index ${i},`,\n          `got ${JSON.stringify(rd)}`,\n        ],\n        options,\n      );\n    } else if (rd.length === 0) {\n      throw new CsvError(\n        \"CSV_INVALID_OPTION_RECORD_DELIMITER\",\n        [\n          \"Invalid option `record_delimiter`:\",\n          \"value must be a non empty string or buffer\",\n          `at index ${i},`,\n          `got ${JSON.stringify(rd)}`,\n        ],\n        options,\n      );\n    }\n    if (typeof rd === \"string\") {\n      rd = Buffer.from(rd, options.encoding);\n    }\n    return rd;\n  });\n  // Normalize option `relax_column_count`\n  if (typeof options.relax_column_count === \"boolean\") {\n    // Great, nothing to do\n  } else if (\n    options.relax_column_count === undefined ||\n    options.relax_column_count === null\n  ) {\n    options.relax_column_count = false;\n  } else {\n    throw new Error(\n      `Invalid Option: relax_column_count must be a boolean, got ${JSON.stringify(options.relax_column_count)}`,\n    );\n  }\n  if (typeof options.relax_column_count_less === \"boolean\") {\n    // Great, nothing to do\n  } else if (\n    options.relax_column_count_less === undefined ||\n    options.relax_column_count_less === null\n  ) {\n    options.relax_column_count_less = false;\n  } else {\n    throw new Error(\n      `Invalid Option: relax_column_count_less must be a boolean, got ${JSON.stringify(options.relax_column_count_less)}`,\n    );\n  }\n  if (typeof options.relax_column_count_more === \"boolean\") {\n    // Great, nothing to do\n  } else if (\n    options.relax_column_count_more === undefined ||\n    options.relax_column_count_more === null\n  ) {\n    options.relax_column_count_more = false;\n  } else {\n    throw new Error(\n      `Invalid Option: relax_column_count_more must be a boolean, got ${JSON.stringify(options.relax_column_count_more)}`,\n    );\n  }\n  // Normalize option `relax_quotes`\n  if (typeof options.relax_quotes === \"boolean\") {\n    // Great, nothing to do\n  } else if (\n    options.relax_quotes === undefined ||\n    options.relax_quotes === null\n  ) {\n    options.relax_quotes = false;\n  } else {\n    throw new Error(\n      `Invalid Option: relax_quotes must be a boolean, got ${JSON.stringify(options.relax_quotes)}`,\n    );\n  }\n  // Normalize option `skip_empty_lines`\n  if (typeof options.skip_empty_lines === \"boolean\") {\n    // Great, nothing to do\n  } else if (\n    options.skip_empty_lines === undefined ||\n    options.skip_empty_lines === null\n  ) {\n    options.skip_empty_lines = false;\n  } else {\n    throw new Error(\n      `Invalid Option: skip_empty_lines must be a boolean, got ${JSON.stringify(options.skip_empty_lines)}`,\n    );\n  }\n  // Normalize option `skip_records_with_empty_values`\n  if (typeof options.skip_records_with_empty_values === \"boolean\") {\n    // Great, nothing to do\n  } else if (\n    options.skip_records_with_empty_values === undefined ||\n    options.skip_records_with_empty_values === null\n  ) {\n    options.skip_records_with_empty_values = false;\n  } else {\n    throw new Error(\n      `Invalid Option: skip_records_with_empty_values must be a boolean, got ${JSON.stringify(options.skip_records_with_empty_values)}`,\n    );\n  }\n  // Normalize option `skip_records_with_error`\n  if (typeof options.skip_records_with_error === \"boolean\") {\n    // Great, nothing to do\n  } else if (\n    options.skip_records_with_error === undefined ||\n    options.skip_records_with_error === null\n  ) {\n    options.skip_records_with_error = false;\n  } else {\n    throw new Error(\n      `Invalid Option: skip_records_with_error must be a boolean, got ${JSON.stringify(options.skip_records_with_error)}`,\n    );\n  }\n  // Normalize option `rtrim`\n  if (\n    options.rtrim === undefined ||\n    options.rtrim === null ||\n    options.rtrim === false\n  ) {\n    options.rtrim = false;\n  } else if (options.rtrim !== true) {\n    throw new Error(\n      `Invalid Option: rtrim must be a boolean, got ${JSON.stringify(options.rtrim)}`,\n    );\n  }\n  // Normalize option `ltrim`\n  if (\n    options.ltrim === undefined ||\n    options.ltrim === null ||\n    options.ltrim === false\n  ) {\n    options.ltrim = false;\n  } else if (options.ltrim !== true) {\n    throw new Error(\n      `Invalid Option: ltrim must be a boolean, got ${JSON.stringify(options.ltrim)}`,\n    );\n  }\n  // Normalize option `trim`\n  if (\n    options.trim === undefined ||\n    options.trim === null ||\n    options.trim === false\n  ) {\n    options.trim = false;\n  } else if (options.trim !== true) {\n    throw new Error(\n      `Invalid Option: trim must be a boolean, got ${JSON.stringify(options.trim)}`,\n    );\n  }\n  // Normalize options `trim`, `ltrim` and `rtrim`\n  if (options.trim === true && opts.ltrim !== false) {\n    options.ltrim = true;\n  } else if (options.ltrim !== true) {\n    options.ltrim = false;\n  }\n  if (options.trim === true && opts.rtrim !== false) {\n    options.rtrim = true;\n  } else if (options.rtrim !== true) {\n    options.rtrim = false;\n  }\n  // Normalize option `to`\n  if (options.to === undefined || options.to === null) {\n    options.to = -1;\n  } else {\n    if (typeof options.to === \"string\" && /\\d+/.test(options.to)) {\n      options.to = parseInt(options.to);\n    }\n    if (Number.isInteger(options.to)) {\n      if (options.to <= 0) {\n        throw new Error(\n          `Invalid Option: to must be a positive integer greater than 0, got ${JSON.stringify(opts.to)}`,\n        );\n      }\n    } else {\n      throw new Error(\n        `Invalid Option: to must be an integer, got ${JSON.stringify(opts.to)}`,\n      );\n    }\n  }\n  // Normalize option `to_line`\n  if (options.to_line === undefined || options.to_line === null) {\n    options.to_line = -1;\n  } else {\n    if (typeof options.to_line === \"string\" && /\\d+/.test(options.to_line)) {\n      options.to_line = parseInt(options.to_line);\n    }\n    if (Number.isInteger(options.to_line)) {\n      if (options.to_line <= 0) {\n        throw new Error(\n          `Invalid Option: to_line must be a positive integer greater than 0, got ${JSON.stringify(opts.to_line)}`,\n        );\n      }\n    } else {\n      throw new Error(\n        `Invalid Option: to_line must be an integer, got ${JSON.stringify(opts.to_line)}`,\n      );\n    }\n  }\n  return options;\n};\n\nexport { normalize_options };\n","import { normalize_columns_array } from \"./normalize_columns_array.js\";\nimport { init_state } from \"./init_state.js\";\nimport { normalize_options } from \"./normalize_options.js\";\nimport { CsvError } from \"./CsvError.js\";\n\nconst isRecordEmpty = function (record) {\n  return record.every(\n    (field) =>\n      field == null || (field.toString && field.toString().trim() === \"\"),\n  );\n};\n\nconst cr = 13; // `\\r`, carriage return, 0x0D in hexadcimal, 13 in decimal\nconst nl = 10; // `\\n`, newline, 0x0A in hexadecimal, 10 in decimal\n\nconst boms = {\n  // Note, the following are equals:\n  // Buffer.from(\"\\ufeff\")\n  // Buffer.from([239, 187, 191])\n  // Buffer.from('EFBBBF', 'hex')\n  utf8: Buffer.from([239, 187, 191]),\n  // Note, the following are equals:\n  // Buffer.from \"\\ufeff\", 'utf16le\n  // Buffer.from([255, 254])\n  utf16le: Buffer.from([255, 254]),\n};\n\nconst transform = function (original_options = {}) {\n  const info = {\n    bytes: 0,\n    comment_lines: 0,\n    empty_lines: 0,\n    invalid_field_length: 0,\n    lines: 1,\n    records: 0,\n  };\n  const options = normalize_options(original_options);\n  return {\n    info: info,\n    original_options: original_options,\n    options: options,\n    state: init_state(options),\n    __needMoreData: function (i, bufLen, end) {\n      if (end) return false;\n      const { encoding, escape, quote } = this.options;\n      const { quoting, needMoreDataSize, recordDelimiterMaxLength } =\n        this.state;\n      const numOfCharLeft = bufLen - i - 1;\n      const requiredLength = Math.max(\n        needMoreDataSize,\n        // Skip if the remaining buffer smaller than record delimiter\n        // If \"record_delimiter\" is yet to be discovered:\n        // 1. It is equals to `[]` and \"recordDelimiterMaxLength\" equals `0`\n        // 2. We set the length to windows line ending in the current encoding\n        // Note, that encoding is known from user or bom discovery at that point\n        // recordDelimiterMaxLength,\n        recordDelimiterMaxLength === 0\n          ? Buffer.from(\"\\r\\n\", encoding).length\n          : recordDelimiterMaxLength,\n        // Skip if remaining buffer can be an escaped quote\n        quoting ? (escape === null ? 0 : escape.length) + quote.length : 0,\n        // Skip if remaining buffer can be record delimiter following the closing quote\n        quoting ? quote.length + recordDelimiterMaxLength : 0,\n      );\n      return numOfCharLeft < requiredLength;\n    },\n    // Central parser implementation\n    parse: function (nextBuf, end, push, close) {\n      const {\n        bom,\n        comment_no_infix,\n        encoding,\n        from_line,\n        ltrim,\n        max_record_size,\n        raw,\n        relax_quotes,\n        rtrim,\n        skip_empty_lines,\n        to,\n        to_line,\n      } = this.options;\n      let { comment, escape, quote, record_delimiter } = this.options;\n      const { bomSkipped, previousBuf, rawBuffer, escapeIsQuote } = this.state;\n      let buf;\n      if (previousBuf === undefined) {\n        if (nextBuf === undefined) {\n          // Handle empty string\n          close();\n          return;\n        } else {\n          buf = nextBuf;\n        }\n      } else if (previousBuf !== undefined && nextBuf === undefined) {\n        buf = previousBuf;\n      } else {\n        buf = Buffer.concat([previousBuf, nextBuf]);\n      }\n      // Handle UTF BOM\n      if (bomSkipped === false) {\n        if (bom === false) {\n          this.state.bomSkipped = true;\n        } else if (buf.length < 3) {\n          // No enough data\n          if (end === false) {\n            // Wait for more data\n            this.state.previousBuf = buf;\n            return;\n          }\n        } else {\n          for (const encoding in boms) {\n            if (boms[encoding].compare(buf, 0, boms[encoding].length) === 0) {\n              // Skip BOM\n              const bomLength = boms[encoding].length;\n              this.state.bufBytesStart += bomLength;\n              buf = buf.slice(bomLength);\n              // Renormalize original options with the new encoding\n              this.options = normalize_options({\n                ...this.original_options,\n                encoding: encoding,\n              });\n              // Options will re-evaluate the Buffer with the new encoding\n              ({ comment, escape, quote } = this.options);\n              break;\n            }\n          }\n          this.state.bomSkipped = true;\n        }\n      }\n      const bufLen = buf.length;\n      let pos;\n      for (pos = 0; pos < bufLen; pos++) {\n        // Ensure we get enough space to look ahead\n        // There should be a way to move this out of the loop\n        if (this.__needMoreData(pos, bufLen, end)) {\n          break;\n        }\n        if (this.state.wasRowDelimiter === true) {\n          this.info.lines++;\n          this.state.wasRowDelimiter = false;\n        }\n        if (to_line !== -1 && this.info.lines > to_line) {\n          this.state.stop = true;\n          close();\n          return;\n        }\n        // Auto discovery of record_delimiter, unix, mac and windows supported\n        if (this.state.quoting === false && record_delimiter.length === 0) {\n          const record_delimiterCount = this.__autoDiscoverRecordDelimiter(\n            buf,\n            pos,\n          );\n          if (record_delimiterCount) {\n            record_delimiter = this.options.record_delimiter;\n          }\n        }\n        const chr = buf[pos];\n        if (raw === true) {\n          rawBuffer.append(chr);\n        }\n        if (\n          (chr === cr || chr === nl) &&\n          this.state.wasRowDelimiter === false\n        ) {\n          this.state.wasRowDelimiter = true;\n        }\n        // Previous char was a valid escape char\n        // treat the current char as a regular char\n        if (this.state.escaping === true) {\n          this.state.escaping = false;\n        } else {\n          // Escape is only active inside quoted fields\n          // We are quoting, the char is an escape chr and there is a chr to escape\n          // if(escape !== null && this.state.quoting === true && chr === escape && pos + 1 < bufLen){\n          if (\n            escape !== null &&\n            this.state.quoting === true &&\n            this.__isEscape(buf, pos, chr) &&\n            pos + escape.length < bufLen\n          ) {\n            if (escapeIsQuote) {\n              if (this.__isQuote(buf, pos + escape.length)) {\n                this.state.escaping = true;\n                pos += escape.length - 1;\n                continue;\n              }\n            } else {\n              this.state.escaping = true;\n              pos += escape.length - 1;\n              continue;\n            }\n          }\n          // Not currently escaping and chr is a quote\n          // TODO: need to compare bytes instead of single char\n          if (this.state.commenting === false && this.__isQuote(buf, pos)) {\n            if (this.state.quoting === true) {\n              const nextChr = buf[pos + quote.length];\n              const isNextChrTrimable =\n                rtrim && this.__isCharTrimable(buf, pos + quote.length);\n              const isNextChrComment =\n                comment !== null &&\n                this.__compareBytes(comment, buf, pos + quote.length, nextChr);\n              const isNextChrDelimiter = this.__isDelimiter(\n                buf,\n                pos + quote.length,\n                nextChr,\n              );\n              const isNextChrRecordDelimiter =\n                record_delimiter.length === 0\n                  ? this.__autoDiscoverRecordDelimiter(buf, pos + quote.length)\n                  : this.__isRecordDelimiter(nextChr, buf, pos + quote.length);\n              // Escape a quote\n              // Treat next char as a regular character\n              if (\n                escape !== null &&\n                this.__isEscape(buf, pos, chr) &&\n                this.__isQuote(buf, pos + escape.length)\n              ) {\n                pos += escape.length - 1;\n              } else if (\n                !nextChr ||\n                isNextChrDelimiter ||\n                isNextChrRecordDelimiter ||\n                isNextChrComment ||\n                isNextChrTrimable\n              ) {\n                this.state.quoting = false;\n                this.state.wasQuoting = true;\n                pos += quote.length - 1;\n                continue;\n              } else if (relax_quotes === false) {\n                const err = this.__error(\n                  new CsvError(\n                    \"CSV_INVALID_CLOSING_QUOTE\",\n                    [\n                      \"Invalid Closing Quote:\",\n                      `got \"${String.fromCharCode(nextChr)}\"`,\n                      `at line ${this.info.lines}`,\n                      \"instead of delimiter, record delimiter, trimable character\",\n                      \"(if activated) or comment\",\n                    ],\n                    this.options,\n                    this.__infoField(),\n                  ),\n                );\n                if (err !== undefined) return err;\n              } else {\n                this.state.quoting = false;\n                this.state.wasQuoting = true;\n                this.state.field.prepend(quote);\n                pos += quote.length - 1;\n              }\n            } else {\n              if (this.state.field.length !== 0) {\n                // In relax_quotes mode, treat opening quote preceded by chrs as regular\n                if (relax_quotes === false) {\n                  const info = this.__infoField();\n                  const bom = Object.keys(boms)\n                    .map((b) =>\n                      boms[b].equals(this.state.field.toString()) ? b : false,\n                    )\n                    .filter(Boolean)[0];\n                  const err = this.__error(\n                    new CsvError(\n                      \"INVALID_OPENING_QUOTE\",\n                      [\n                        \"Invalid Opening Quote:\",\n                        `a quote is found on field ${JSON.stringify(info.column)} at line ${info.lines}, value is ${JSON.stringify(this.state.field.toString(encoding))}`,\n                        bom ? `(${bom} bom)` : undefined,\n                      ],\n                      this.options,\n                      info,\n                      {\n                        field: this.state.field,\n                      },\n                    ),\n                  );\n                  if (err !== undefined) return err;\n                }\n              } else {\n                this.state.quoting = true;\n                pos += quote.length - 1;\n                continue;\n              }\n            }\n          }\n          if (this.state.quoting === false) {\n            const recordDelimiterLength = this.__isRecordDelimiter(\n              chr,\n              buf,\n              pos,\n            );\n            if (recordDelimiterLength !== 0) {\n              // Do not emit comments which take a full line\n              const skipCommentLine =\n                this.state.commenting &&\n                this.state.wasQuoting === false &&\n                this.state.record.length === 0 &&\n                this.state.field.length === 0;\n              if (skipCommentLine) {\n                this.info.comment_lines++;\n                // Skip full comment line\n              } else {\n                // Activate records emition if above from_line\n                if (\n                  this.state.enabled === false &&\n                  this.info.lines +\n                    (this.state.wasRowDelimiter === true ? 1 : 0) >=\n                    from_line\n                ) {\n                  this.state.enabled = true;\n                  this.__resetField();\n                  this.__resetRecord();\n                  pos += recordDelimiterLength - 1;\n                  continue;\n                }\n                // Skip if line is empty and skip_empty_lines activated\n                if (\n                  skip_empty_lines === true &&\n                  this.state.wasQuoting === false &&\n                  this.state.record.length === 0 &&\n                  this.state.field.length === 0\n                ) {\n                  this.info.empty_lines++;\n                  pos += recordDelimiterLength - 1;\n                  continue;\n                }\n                this.info.bytes = this.state.bufBytesStart + pos;\n                const errField = this.__onField();\n                if (errField !== undefined) return errField;\n                this.info.bytes =\n                  this.state.bufBytesStart + pos + recordDelimiterLength;\n                const errRecord = this.__onRecord(push);\n                if (errRecord !== undefined) return errRecord;\n                if (to !== -1 && this.info.records >= to) {\n                  this.state.stop = true;\n                  close();\n                  return;\n                }\n              }\n              this.state.commenting = false;\n              pos += recordDelimiterLength - 1;\n              continue;\n            }\n            if (this.state.commenting) {\n              continue;\n            }\n            if (\n              comment !== null &&\n              (comment_no_infix === false ||\n                (this.state.record.length === 0 &&\n                  this.state.field.length === 0))\n            ) {\n              const commentCount = this.__compareBytes(comment, buf, pos, chr);\n              if (commentCount !== 0) {\n                this.state.commenting = true;\n                continue;\n              }\n            }\n            const delimiterLength = this.__isDelimiter(buf, pos, chr);\n            if (delimiterLength !== 0) {\n              this.info.bytes = this.state.bufBytesStart + pos;\n              const errField = this.__onField();\n              if (errField !== undefined) return errField;\n              pos += delimiterLength - 1;\n              continue;\n            }\n          }\n        }\n        if (this.state.commenting === false) {\n          if (\n            max_record_size !== 0 &&\n            this.state.record_length + this.state.field.length > max_record_size\n          ) {\n            return this.__error(\n              new CsvError(\n                \"CSV_MAX_RECORD_SIZE\",\n                [\n                  \"Max Record Size:\",\n                  \"record exceed the maximum number of tolerated bytes\",\n                  `of ${max_record_size}`,\n                  `at line ${this.info.lines}`,\n                ],\n                this.options,\n                this.__infoField(),\n              ),\n            );\n          }\n        }\n        const lappend =\n          ltrim === false ||\n          this.state.quoting === true ||\n          this.state.field.length !== 0 ||\n          !this.__isCharTrimable(buf, pos);\n        // rtrim in non quoting is handle in __onField\n        const rappend = rtrim === false || this.state.wasQuoting === false;\n        if (lappend === true && rappend === true) {\n          this.state.field.append(chr);\n        } else if (rtrim === true && !this.__isCharTrimable(buf, pos)) {\n          return this.__error(\n            new CsvError(\n              \"CSV_NON_TRIMABLE_CHAR_AFTER_CLOSING_QUOTE\",\n              [\n                \"Invalid Closing Quote:\",\n                \"found non trimable byte after quote\",\n                `at line ${this.info.lines}`,\n              ],\n              this.options,\n              this.__infoField(),\n            ),\n          );\n        } else {\n          if (lappend === false) {\n            pos += this.__isCharTrimable(buf, pos) - 1;\n          }\n          continue;\n        }\n      }\n      if (end === true) {\n        // Ensure we are not ending in a quoting state\n        if (this.state.quoting === true) {\n          const err = this.__error(\n            new CsvError(\n              \"CSV_QUOTE_NOT_CLOSED\",\n              [\n                \"Quote Not Closed:\",\n                `the parsing is finished with an opening quote at line ${this.info.lines}`,\n              ],\n              this.options,\n              this.__infoField(),\n            ),\n          );\n          if (err !== undefined) return err;\n        } else {\n          // Skip last line if it has no characters\n          if (\n            this.state.wasQuoting === true ||\n            this.state.record.length !== 0 ||\n            this.state.field.length !== 0\n          ) {\n            this.info.bytes = this.state.bufBytesStart + pos;\n            const errField = this.__onField();\n            if (errField !== undefined) return errField;\n            const errRecord = this.__onRecord(push);\n            if (errRecord !== undefined) return errRecord;\n          } else if (this.state.wasRowDelimiter === true) {\n            this.info.empty_lines++;\n          } else if (this.state.commenting === true) {\n            this.info.comment_lines++;\n          }\n        }\n      } else {\n        this.state.bufBytesStart += pos;\n        this.state.previousBuf = buf.slice(pos);\n      }\n      if (this.state.wasRowDelimiter === true) {\n        this.info.lines++;\n        this.state.wasRowDelimiter = false;\n      }\n    },\n    __onRecord: function (push) {\n      const {\n        columns,\n        group_columns_by_name,\n        encoding,\n        info,\n        from,\n        relax_column_count,\n        relax_column_count_less,\n        relax_column_count_more,\n        raw,\n        skip_records_with_empty_values,\n      } = this.options;\n      const { enabled, record } = this.state;\n      if (enabled === false) {\n        return this.__resetRecord();\n      }\n      // Convert the first line into column names\n      const recordLength = record.length;\n      if (columns === true) {\n        if (skip_records_with_empty_values === true && isRecordEmpty(record)) {\n          this.__resetRecord();\n          return;\n        }\n        return this.__firstLineToColumns(record);\n      }\n      if (columns === false && this.info.records === 0) {\n        this.state.expectedRecordLength = recordLength;\n      }\n      if (recordLength !== this.state.expectedRecordLength) {\n        const err =\n          columns === false\n            ? new CsvError(\n                \"CSV_RECORD_INCONSISTENT_FIELDS_LENGTH\",\n                [\n                  \"Invalid Record Length:\",\n                  `expect ${this.state.expectedRecordLength},`,\n                  `got ${recordLength} on line ${this.info.lines}`,\n                ],\n                this.options,\n                this.__infoField(),\n                {\n                  record: record,\n                },\n              )\n            : new CsvError(\n                \"CSV_RECORD_INCONSISTENT_COLUMNS\",\n                [\n                  \"Invalid Record Length:\",\n                  `columns length is ${columns.length},`, // rename columns\n                  `got ${recordLength} on line ${this.info.lines}`,\n                ],\n                this.options,\n                this.__infoField(),\n                {\n                  record: record,\n                },\n              );\n        if (\n          relax_column_count === true ||\n          (relax_column_count_less === true &&\n            recordLength < this.state.expectedRecordLength) ||\n          (relax_column_count_more === true &&\n            recordLength > this.state.expectedRecordLength)\n        ) {\n          this.info.invalid_field_length++;\n          this.state.error = err;\n          // Error is undefined with skip_records_with_error\n        } else {\n          const finalErr = this.__error(err);\n          if (finalErr) return finalErr;\n        }\n      }\n      if (skip_records_with_empty_values === true && isRecordEmpty(record)) {\n        this.__resetRecord();\n        return;\n      }\n      if (this.state.recordHasError === true) {\n        this.__resetRecord();\n        this.state.recordHasError = false;\n        return;\n      }\n      this.info.records++;\n      if (from === 1 || this.info.records >= from) {\n        const { objname } = this.options;\n        // With columns, records are object\n        if (columns !== false) {\n          const obj = {};\n          // Transform record array to an object\n          for (let i = 0, l = record.length; i < l; i++) {\n            if (columns[i] === undefined || columns[i].disabled) continue;\n            // Turn duplicate columns into an array\n            if (\n              group_columns_by_name === true &&\n              obj[columns[i].name] !== undefined\n            ) {\n              if (Array.isArray(obj[columns[i].name])) {\n                obj[columns[i].name] = obj[columns[i].name].concat(record[i]);\n              } else {\n                obj[columns[i].name] = [obj[columns[i].name], record[i]];\n              }\n            } else {\n              obj[columns[i].name] = record[i];\n            }\n          }\n          // Without objname (default)\n          if (raw === true || info === true) {\n            const extRecord = Object.assign(\n              { record: obj },\n              raw === true\n                ? { raw: this.state.rawBuffer.toString(encoding) }\n                : {},\n              info === true ? { info: this.__infoRecord() } : {},\n            );\n            const err = this.__push(\n              objname === undefined ? extRecord : [obj[objname], extRecord],\n              push,\n            );\n            if (err) {\n              return err;\n            }\n          } else {\n            const err = this.__push(\n              objname === undefined ? obj : [obj[objname], obj],\n              push,\n            );\n            if (err) {\n              return err;\n            }\n          }\n          // Without columns, records are array\n        } else {\n          if (raw === true || info === true) {\n            const extRecord = Object.assign(\n              { record: record },\n              raw === true\n                ? { raw: this.state.rawBuffer.toString(encoding) }\n                : {},\n              info === true ? { info: this.__infoRecord() } : {},\n            );\n            const err = this.__push(\n              objname === undefined ? extRecord : [record[objname], extRecord],\n              push,\n            );\n            if (err) {\n              return err;\n            }\n          } else {\n            const err = this.__push(\n              objname === undefined ? record : [record[objname], record],\n              push,\n            );\n            if (err) {\n              return err;\n            }\n          }\n        }\n      }\n      this.__resetRecord();\n    },\n    __firstLineToColumns: function (record) {\n      const { firstLineToHeaders } = this.state;\n      try {\n        const headers =\n          firstLineToHeaders === undefined\n            ? record\n            : firstLineToHeaders.call(null, record);\n        if (!Array.isArray(headers)) {\n          return this.__error(\n            new CsvError(\n              \"CSV_INVALID_COLUMN_MAPPING\",\n              [\n                \"Invalid Column Mapping:\",\n                \"expect an array from column function,\",\n                `got ${JSON.stringify(headers)}`,\n              ],\n              this.options,\n              this.__infoField(),\n              {\n                headers: headers,\n              },\n            ),\n          );\n        }\n        const normalizedHeaders = normalize_columns_array(headers);\n        this.state.expectedRecordLength = normalizedHeaders.length;\n        this.options.columns = normalizedHeaders;\n        this.__resetRecord();\n        return;\n      } catch (err) {\n        return err;\n      }\n    },\n    __resetRecord: function () {\n      if (this.options.raw === true) {\n        this.state.rawBuffer.reset();\n      }\n      this.state.error = undefined;\n      this.state.record = [];\n      this.state.record_length = 0;\n    },\n    __onField: function () {\n      const { cast, encoding, rtrim, max_record_size } = this.options;\n      const { enabled, wasQuoting } = this.state;\n      // Short circuit for the from_line options\n      if (enabled === false) {\n        return this.__resetField();\n      }\n      let field = this.state.field.toString(encoding);\n      if (rtrim === true && wasQuoting === false) {\n        field = field.trimRight();\n      }\n      if (cast === true) {\n        const [err, f] = this.__cast(field);\n        if (err !== undefined) return err;\n        field = f;\n      }\n      this.state.record.push(field);\n      // Increment record length if record size must not exceed a limit\n      if (max_record_size !== 0 && typeof field === \"string\") {\n        this.state.record_length += field.length;\n      }\n      this.__resetField();\n    },\n    __resetField: function () {\n      this.state.field.reset();\n      this.state.wasQuoting = false;\n    },\n    __push: function (record, push) {\n      const { on_record } = this.options;\n      if (on_record !== undefined) {\n        const info = this.__infoRecord();\n        try {\n          record = on_record.call(null, record, info);\n        } catch (err) {\n          return err;\n        }\n        if (record === undefined || record === null) {\n          return;\n        }\n      }\n      push(record);\n    },\n    // Return a tuple with the error and the casted value\n    __cast: function (field) {\n      const { columns, relax_column_count } = this.options;\n      const isColumns = Array.isArray(columns);\n      // Dont loose time calling cast\n      // because the final record is an object\n      // and this field can't be associated to a key present in columns\n      if (\n        isColumns === true &&\n        relax_column_count &&\n        this.options.columns.length <= this.state.record.length\n      ) {\n        return [undefined, undefined];\n      }\n      if (this.state.castField !== null) {\n        try {\n          const info = this.__infoField();\n          return [undefined, this.state.castField.call(null, field, info)];\n        } catch (err) {\n          return [err];\n        }\n      }\n      if (this.__isFloat(field)) {\n        return [undefined, parseFloat(field)];\n      } else if (this.options.cast_date !== false) {\n        const info = this.__infoField();\n        return [undefined, this.options.cast_date.call(null, field, info)];\n      }\n      return [undefined, field];\n    },\n    // Helper to test if a character is a space or a line delimiter\n    __isCharTrimable: function (buf, pos) {\n      const isTrim = (buf, pos) => {\n        const { timchars } = this.state;\n        loop1: for (let i = 0; i < timchars.length; i++) {\n          const timchar = timchars[i];\n          for (let j = 0; j < timchar.length; j++) {\n            if (timchar[j] !== buf[pos + j]) continue loop1;\n          }\n          return timchar.length;\n        }\n        return 0;\n      };\n      return isTrim(buf, pos);\n    },\n    // Keep it in case we implement the `cast_int` option\n    // __isInt(value){\n    //   // return Number.isInteger(parseInt(value))\n    //   // return !isNaN( parseInt( obj ) );\n    //   return /^(\\-|\\+)?[1-9][0-9]*$/.test(value)\n    // }\n    __isFloat: function (value) {\n      return value - parseFloat(value) + 1 >= 0; // Borrowed from jquery\n    },\n    __compareBytes: function (sourceBuf, targetBuf, targetPos, firstByte) {\n      if (sourceBuf[0] !== firstByte) return 0;\n      const sourceLength = sourceBuf.length;\n      for (let i = 1; i < sourceLength; i++) {\n        if (sourceBuf[i] !== targetBuf[targetPos + i]) return 0;\n      }\n      return sourceLength;\n    },\n    __isDelimiter: function (buf, pos, chr) {\n      const { delimiter, ignore_last_delimiters } = this.options;\n      if (\n        ignore_last_delimiters === true &&\n        this.state.record.length === this.options.columns.length - 1\n      ) {\n        return 0;\n      } else if (\n        ignore_last_delimiters !== false &&\n        typeof ignore_last_delimiters === \"number\" &&\n        this.state.record.length === ignore_last_delimiters - 1\n      ) {\n        return 0;\n      }\n      loop1: for (let i = 0; i < delimiter.length; i++) {\n        const del = delimiter[i];\n        if (del[0] === chr) {\n          for (let j = 1; j < del.length; j++) {\n            if (del[j] !== buf[pos + j]) continue loop1;\n          }\n          return del.length;\n        }\n      }\n      return 0;\n    },\n    __isRecordDelimiter: function (chr, buf, pos) {\n      const { record_delimiter } = this.options;\n      const recordDelimiterLength = record_delimiter.length;\n      loop1: for (let i = 0; i < recordDelimiterLength; i++) {\n        const rd = record_delimiter[i];\n        const rdLength = rd.length;\n        if (rd[0] !== chr) {\n          continue;\n        }\n        for (let j = 1; j < rdLength; j++) {\n          if (rd[j] !== buf[pos + j]) {\n            continue loop1;\n          }\n        }\n        return rd.length;\n      }\n      return 0;\n    },\n    __isEscape: function (buf, pos, chr) {\n      const { escape } = this.options;\n      if (escape === null) return false;\n      const l = escape.length;\n      if (escape[0] === chr) {\n        for (let i = 0; i < l; i++) {\n          if (escape[i] !== buf[pos + i]) {\n            return false;\n          }\n        }\n        return true;\n      }\n      return false;\n    },\n    __isQuote: function (buf, pos) {\n      const { quote } = this.options;\n      if (quote === null) return false;\n      const l = quote.length;\n      for (let i = 0; i < l; i++) {\n        if (quote[i] !== buf[pos + i]) {\n          return false;\n        }\n      }\n      return true;\n    },\n    __autoDiscoverRecordDelimiter: function (buf, pos) {\n      const { encoding } = this.options;\n      // Note, we don't need to cache this information in state,\n      // It is only called on the first line until we find out a suitable\n      // record delimiter.\n      const rds = [\n        // Important, the windows line ending must be before mac os 9\n        Buffer.from(\"\\r\\n\", encoding),\n        Buffer.from(\"\\n\", encoding),\n        Buffer.from(\"\\r\", encoding),\n      ];\n      loop: for (let i = 0; i < rds.length; i++) {\n        const l = rds[i].length;\n        for (let j = 0; j < l; j++) {\n          if (rds[i][j] !== buf[pos + j]) {\n            continue loop;\n          }\n        }\n        this.options.record_delimiter.push(rds[i]);\n        this.state.recordDelimiterMaxLength = rds[i].length;\n        return rds[i].length;\n      }\n      return 0;\n    },\n    __error: function (msg) {\n      const { encoding, raw, skip_records_with_error } = this.options;\n      const err = typeof msg === \"string\" ? new Error(msg) : msg;\n      if (skip_records_with_error) {\n        this.state.recordHasError = true;\n        if (this.options.on_skip !== undefined) {\n          this.options.on_skip(\n            err,\n            raw ? this.state.rawBuffer.toString(encoding) : undefined,\n          );\n        }\n        // this.emit('skip', err, raw ? this.state.rawBuffer.toString(encoding) : undefined);\n        return undefined;\n      } else {\n        return err;\n      }\n    },\n    __infoDataSet: function () {\n      return {\n        ...this.info,\n        columns: this.options.columns,\n      };\n    },\n    __infoRecord: function () {\n      const { columns, raw, encoding } = this.options;\n      return {\n        ...this.__infoDataSet(),\n        error: this.state.error,\n        header: columns === true,\n        index: this.state.record.length,\n        raw: raw ? this.state.rawBuffer.toString(encoding) : undefined,\n      };\n    },\n    __infoField: function () {\n      const { columns } = this.options;\n      const isColumns = Array.isArray(columns);\n      return {\n        ...this.__infoRecord(),\n        column:\n          isColumns === true\n            ? columns.length > this.state.record.length\n              ? columns[this.state.record.length].name\n              : null\n            : this.state.record.length,\n        quoting: this.state.wasQuoting,\n      };\n    },\n  };\n};\n\nexport { transform, CsvError };\n","import { CsvError, transform } from \"./api/index.js\";\n\nconst parse = function (data, opts = {}) {\n  if (typeof data === \"string\") {\n    data = Buffer.from(data);\n  }\n  const records = opts && opts.objname ? {} : [];\n  const parser = transform(opts);\n  const push = (record) => {\n    if (parser.options.objname === undefined) records.push(record);\n    else {\n      records[record[0]] = record[1];\n    }\n  };\n  const close = () => {};\n  const err1 = parser.parse(data, false, push, close);\n  if (err1 !== undefined) throw err1;\n  const err2 = parser.parse(undefined, true, push, close);\n  if (err2 !== undefined) throw err2;\n  return records;\n};\n\n// export default parse\nexport { parse };\nexport { CsvError };\n","import { parse } from 'csv-parse/sync';\nexport class BasicCsvParser {\n    parse(line) {\n        if (!line || line.trimStart().charAt(0) === '#') {\n            return null;\n        }\n        return parse(line, {\n            delimiter: ',',\n            skip_empty_lines: true,\n            trim: true,\n            relax_quotes: true,\n        });\n    }\n}\nexport class BracketAwareCsvParser {\n    constructor(baseParser = new BasicCsvParser()) {\n        this.baseParser = baseParser;\n    }\n    parse(line) {\n        const rawTokens = this.baseParser.parse(line);\n        if (!rawTokens || !rawTokens[0]) {\n            return null;\n        }\n        const tokens = rawTokens[0];\n        const processedTokens = [];\n        let currentToken = '';\n        let bracketCount = 0;\n        for (const token of tokens) {\n            for (const char of token) {\n                if (char === '(')\n                    bracketCount++;\n                else if (char === ')')\n                    bracketCount--;\n            }\n            currentToken += (currentToken ? ',' : '') + token;\n            if (bracketCount === 0) {\n                processedTokens.push(currentToken);\n                currentToken = '';\n            }\n        }\n        if (bracketCount !== 0) {\n            throw new Error(`Unmatched brackets in policy line: ${line}`);\n        }\n        return processedTokens.length > 0 ? [processedTokens] : null;\n    }\n}\nexport class PolicyLoader {\n    constructor(parser = new BracketAwareCsvParser()) {\n        this.parser = parser;\n    }\n    loadPolicyLine(line, model) {\n        const tokens = this.parser.parse(line);\n        if (!tokens || !tokens[0]) {\n            return;\n        }\n        let key = tokens[0][0].trim();\n        if (key.startsWith('\"') && key.endsWith('\"')) {\n            key = key.slice(1, -1);\n        }\n        const sec = key.substring(0, 1);\n        const item = model.model.get(sec);\n        if (!item) {\n            return;\n        }\n        const policy = item.get(key);\n        if (!policy) {\n            return;\n        }\n        const values = tokens[0].slice(1).map((v) => {\n            if (v.startsWith('\"') && v.endsWith('\"')) {\n                v = v.slice(1, -1);\n            }\n            return v.replace(/\"\"/g, '\"').trim();\n        });\n        policy.policy.push(values);\n    }\n}\nexport class Helper {\n    static loadPolicyLine(line, model) {\n        Helper.policyLoader.loadPolicyLine(line, model);\n    }\n}\nHelper.policyLoader = new PolicyLoader();\n","let defaultFileSystem = undefined;\nconst ErrorNoFileSystem = new Error('please set the default FileSystem by call the setDefaultFileSystem');\nexport const setDefaultFileSystem = (fs) => {\n    defaultFileSystem = fs;\n};\nexport const getDefaultFileSystem = () => defaultFileSystem;\nexport const mustGetDefaultFileSystem = () => {\n    if (defaultFileSystem) {\n        return defaultFileSystem;\n    }\n    throw ErrorNoFileSystem;\n};\n","import { Helper } from './helper';\nimport { arrayToString } from '../util';\nimport { mustGetDefaultFileSystem } from './fileSystem';\n/**\n * FileAdapter is the file adapter for Casbin.\n * It can load policy from file or save policy to file.\n */\nexport class FileAdapter {\n    /**\n     * FileAdapter is the constructor for FileAdapter.\n     *\n     * @param filePath filePath the path of the policy file.\n     * @param fs {@link FileSystem}\n     */\n    constructor(filePath, fs) {\n        this.filePath = filePath;\n        this.fs = fs;\n    }\n    async loadPolicy(model) {\n        if (!this.filePath) {\n            // throw new Error('invalid file path, file path cannot be empty');\n            return;\n        }\n        await this.loadPolicyFile(model, Helper.loadPolicyLine);\n    }\n    async loadPolicyFile(model, handler) {\n        const bodyBuf = await (this.fs ? this.fs : mustGetDefaultFileSystem()).readFileSync(this.filePath);\n        const lines = bodyBuf.toString().split('\\n');\n        lines.forEach((line) => {\n            if (!line || line.trim().startsWith('#')) {\n                return;\n            }\n            handler(line, model);\n        });\n    }\n    /**\n     * savePolicy saves all policy rules to the storage.\n     */\n    async savePolicy(model) {\n        if (!this.filePath) {\n            // throw new Error('invalid file path, file path cannot be empty');\n            return false;\n        }\n        let result = '';\n        const pList = model.model.get('p');\n        if (!pList) {\n            return false;\n        }\n        pList.forEach((n) => {\n            n.policy.forEach((m) => {\n                result += n.key + ', ';\n                result += arrayToString(m);\n                result += '\\n';\n            });\n        });\n        const gList = model.model.get('g');\n        if (!gList) {\n            return false;\n        }\n        gList.forEach((n) => {\n            n.policy.forEach((m) => {\n                result += n.key + ', ';\n                result += arrayToString(m.map((element) => this.escapeCsv(element)));\n                result += '\\n';\n            });\n        });\n        await this.savePolicyFile(result.trim());\n        return true;\n    }\n    escapeCsv(value) {\n        // If the value contains a comma, wrap it in double quotes and escape any existing double quotes\n        if (value.includes(',')) {\n            return `\"${value.replace(/\"/g, '\"\"')}\"`;\n        }\n        return value;\n    }\n    async savePolicyFile(text) {\n        (this.fs ? this.fs : mustGetDefaultFileSystem()).writeFileSync(this.filePath, text);\n    }\n    /**\n     * addPolicy adds a policy rule to the storage.\n     */\n    async addPolicy(sec, ptype, rule) {\n        throw new Error('not implemented');\n    }\n    /**\n     * addPolicies adds policy rules to the storage.\n     This is part of the Auto-Save feature.\n     */\n    async addPolicies(sec, ptype, rules) {\n        throw new Error('not implemented');\n    }\n    /**\n     * UpdatePolicy updates a policy rule from storage.\n     * This is part of the Auto-Save feature.\n     */\n    updatePolicy(sec, ptype, oldRule, newRule) {\n        throw new Error('not implemented');\n    }\n    /**\n     * removePolicy removes a policy rule from the storage.\n     */\n    async removePolicy(sec, ptype, rule) {\n        throw new Error('not implemented');\n    }\n    /**\n     * removePolicies removes policy rules from the storage.\n     * This is part of the Auto-Save feature.\n     */\n    async removePolicies(sec, ptype, rules) {\n        throw new Error('not implemented');\n    }\n    /**\n     * removeFilteredPolicy removes policy rules that match the filter from the storage.\n     */\n    async removeFilteredPolicy(sec, ptype, fieldIndex, ...fieldValues) {\n        throw new Error('not implemented');\n    }\n}\n","import { Helper } from './helper';\n/**\n * StringAdapter is the string adapter for Casbin.\n * It can load policy from a string.\n */\nexport class StringAdapter {\n    /**\n     * StringAdapter is the constructor for StringAdapter.\n     * @param {string} policy policy formatted as a CSV string.\n     */\n    constructor(policy) {\n        this.policy = policy;\n    }\n    async loadPolicy(model) {\n        if (!this.policy) {\n            throw new Error('Invalid policy, policy document cannot be false-y');\n        }\n        await this.loadRules(model, Helper.loadPolicyLine);\n    }\n    async loadRules(model, handler) {\n        const rules = this.policy.split('\\n');\n        rules.forEach((n, index) => {\n            if (!n) {\n                return;\n            }\n            handler(n, model);\n        });\n    }\n    /**\n     * savePolicy saves all policy rules to the storage.\n     */\n    async savePolicy(model) {\n        throw new Error('not implemented');\n    }\n    /**\n     * addPolicy adds a policy rule to the storage.\n     */\n    async addPolicy(sec, ptype, rule) {\n        throw new Error('not implemented');\n    }\n    /**\n     * removePolicy removes a policy rule from the storage.\n     */\n    async removePolicy(sec, ptype, rule) {\n        throw new Error('not implemented');\n    }\n    /**\n     * removeFilteredPolicy removes policy rules that match the filter from the storage.\n     */\n    async removeFilteredPolicy(sec, ptype, fieldIndex, ...fieldValues) {\n        throw new Error('not implemented');\n    }\n}\n","// Copyright 2017 The casbin Authors. All Rights Reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the 'License');\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an 'AS IS' BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n// escapeAssertion escapes the dots in the assertion,\n// because the expression evaluation doesn't support such variable names.\nimport { mustGetDefaultFileSystem } from '../persist';\nconst escapeAssertionReg = new RegExp(/([()\\s|&,=!><+\\-*/]|^)((r|p)[0-9]*)\\./g);\nfunction escapeAssertion(s) {\n    s = s.replace(escapeAssertionReg, (match) => {\n        // Replace only the last dot with underscore (preserve the prefix character)\n        const lastDotIdx = match.lastIndexOf('.');\n        if (lastDotIdx > 0) {\n            return match.substring(0, lastDotIdx) + '_';\n        }\n        return match;\n    });\n    return s;\n}\n// removeComments removes the comments starting with # in the text.\nfunction removeComments(s) {\n    const pos = s.indexOf('#');\n    return pos > -1 ? s.slice(0, pos).trim() : s;\n}\n// arrayEquals determines whether two string arrays are identical.\nfunction arrayEquals(a = [], b = []) {\n    const aLen = a.length;\n    const bLen = b.length;\n    if (aLen !== bLen) {\n        return false;\n    }\n    for (let i = 0; i < aLen; i++) {\n        if (a[i] !== b[i]) {\n            return false;\n        }\n    }\n    return true;\n}\n// array2DEquals determines whether two 2-dimensional string arrays are identical.\nfunction array2DEquals(a = [], b = []) {\n    const aLen = a.length;\n    const bLen = a.length;\n    if (aLen !== bLen) {\n        return false;\n    }\n    for (let i = 0; i < aLen; i++) {\n        if (!arrayEquals(a[i], b[i])) {\n            return false;\n        }\n    }\n    return true;\n}\n// arrayRemoveDuplicates removes any duplicated elements in a string array.\nfunction arrayRemoveDuplicates(s) {\n    return [...new Set(s)];\n}\n// arrayToString gets a printable string for a string array.\nfunction arrayToString(a) {\n    return a.join(', ');\n}\n// paramsToString gets a printable string for variable number of parameters.\nfunction paramsToString(...v) {\n    return v.join(', ');\n}\n// setEquals determines whether two string sets are identical.\nfunction setEquals(a, b) {\n    return arrayEquals(a.sort(), b.sort());\n}\n// readFile return a promise for readFile.\nfunction readFile(path, encoding) {\n    const fs = mustGetDefaultFileSystem();\n    return new Promise((resolve, reject) => {\n        try {\n            fs.readFileSync(path, encoding || 'utf8');\n            resolve();\n        }\n        catch (e) {\n            reject(e);\n        }\n    });\n}\n// writeFile return a promise for writeFile.\nfunction writeFile(path, file, encoding) {\n    const fs = mustGetDefaultFileSystem();\n    return new Promise((resolve, reject) => {\n        try {\n            fs.writeFileSync(path, file, encoding || 'utf-8');\n            resolve();\n        }\n        catch (e) {\n            reject(e);\n        }\n    });\n}\nconst evalRegG = new RegExp(/\\beval\\(([^),]*)\\)/g);\nconst evalReg = new RegExp(/\\beval\\(([^),]*)\\)/);\n// hasEval determine whether matcher contains function eval\nfunction hasEval(s) {\n    return evalReg.test(s);\n}\n// replaceEval replace function eval with the value of its parameters\nfunction replaceEval(s, ruleName, rule) {\n    return s.replace(`eval(${ruleName})`, '(' + rule + ')');\n}\n// getEvalValue returns the parameters of function eval\nfunction getEvalValue(s) {\n    const subMatch = s.match(evalRegG);\n    const rules = [];\n    if (!subMatch) {\n        return [];\n    }\n    for (const rule of subMatch) {\n        const index = rule.indexOf('(');\n        rules.push(rule.slice(index + 1, -1));\n    }\n    return rules;\n}\n// generatorRunSync handle generator function in Sync model and return value which is not Promise\nfunction generatorRunSync(iterator) {\n    let { value, done } = iterator.next();\n    while (true) {\n        if (value instanceof Promise) {\n            throw new Error('cannot handle Promise in generatorRunSync, Please use generatorRunAsync');\n        }\n        if (!done) {\n            const temp = value;\n            ({ value, done } = iterator.next(temp));\n        }\n        else {\n            return value;\n        }\n    }\n}\n// generatorRunAsync handle generator function in Async model and return Promise\nasync function generatorRunAsync(iterator) {\n    let { value, done } = iterator.next();\n    while (true) {\n        if (!done) {\n            const temp = await value;\n            ({ value, done } = iterator.next(temp));\n        }\n        else {\n            return value;\n        }\n    }\n}\nfunction deepCopy(obj) {\n    if (typeof obj !== 'object')\n        return;\n    const newObj = obj instanceof Array ? [] : {};\n    for (const key in obj) {\n        if (obj.hasOwnProperty(key)) {\n            newObj[key] = typeof obj[key] === 'object' ? deepCopy(obj[key]) : obj[key];\n        }\n    }\n    return newObj;\n}\nfunction customIn(a, b) {\n    if (b instanceof Array) {\n        return b.includes(a);\n    }\n    return (a in b);\n}\nfunction bracketCompatible(exp) {\n    // TODO: This function didn't support nested bracket.\n    if (!(exp.includes(' in ') && exp.includes(' ('))) {\n        return exp;\n    }\n    const re = / \\([^)]*\\)/g;\n    const array = exp.split('');\n    let reResult;\n    while ((reResult = re.exec(exp)) !== null) {\n        if (!reResult[0].includes(',')) {\n            continue;\n        }\n        array[reResult.index + 1] = '[';\n        array[re.lastIndex - 1] = ']';\n    }\n    exp = array.join('');\n    return exp;\n}\nexport { escapeAssertion, removeComments, arrayEquals, array2DEquals, arrayRemoveDuplicates, arrayToString, paramsToString, setEquals, readFile, writeFile, hasEval, replaceEval, getEvalValue, generatorRunSync, generatorRunAsync, deepCopy, customIn, bracketCompatible, };\n","// Copyright 2018 The Casbin Authors. All Rights Reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\nimport { mustGetDefaultFileSystem } from './persist';\nexport class Config {\n    constructor(fs) {\n        this.data = new Map();\n        if (fs) {\n            this.fs = fs;\n        }\n    }\n    /**\n     * newConfig create an empty configuration representation from file.\n     *\n     * @param confName the path of the model file.\n     * @return the constructor of Config.\n     * @deprecated use {@link newConfigFromFile} instead.\n     */\n    static newConfig(confName) {\n        return this.newConfigFromFile(confName);\n    }\n    /**\n     * newConfigFromFile create an empty configuration representation from file.\n     * @param path the path of the model file.\n     * @param fs {@link FileSystem}\n     */\n    static newConfigFromFile(path, fs) {\n        const config = new Config(fs);\n        config.parse(path);\n        return config;\n    }\n    /**\n     * newConfigFromText create an empty configuration representation from text.\n     *\n     * @param text the model text.\n     * @return the constructor of Config.\n     */\n    static newConfigFromText(text) {\n        const config = new Config();\n        config.parseBuffer(Buffer.from(text));\n        return config;\n    }\n    /**\n     * addConfig adds a new section->key:value to the configuration.\n     */\n    addConfig(section, option, value) {\n        if (section === '') {\n            section = Config.DEFAULT_SECTION;\n        }\n        const hasKey = this.data.has(section);\n        if (!hasKey) {\n            this.data.set(section, new Map());\n        }\n        const item = this.data.get(section);\n        if (item) {\n            item.set(option, value);\n            return item.has(option);\n        }\n        else {\n            return false;\n        }\n    }\n    parse(path) {\n        const body = (this.fs ? this.fs : mustGetDefaultFileSystem()).readFileSync(path);\n        this.parseBuffer(Buffer.isBuffer(body) ? body : Buffer.from(body));\n    }\n    parseBuffer(buf) {\n        const lines = buf\n            .toString()\n            .split('\\n')\n            .filter((v) => v);\n        const linesCount = lines.length;\n        let section = '';\n        let currentLine = '';\n        const seenSections = new Set();\n        lines.forEach((n, index) => {\n            let commentPos = n.indexOf(Config.DEFAULT_COMMENT);\n            if (commentPos > -1) {\n                n = n.slice(0, commentPos);\n            }\n            commentPos = n.indexOf(Config.DEFAULT_COMMENT_SEM);\n            if (commentPos > -1) {\n                n = n.slice(0, commentPos);\n            }\n            const line = n.trim();\n            if (!line) {\n                return;\n            }\n            const lineNumber = index + 1;\n            if (line.startsWith('[') && line.endsWith(']')) {\n                if (currentLine.length !== 0) {\n                    this.write(section, lineNumber - 1, currentLine);\n                    currentLine = '';\n                }\n                section = line.substring(1, line.length - 1);\n                if (seenSections.has(section)) {\n                    throw new Error(`Duplicated section: ${section} at line ${lineNumber}`);\n                }\n                seenSections.add(section);\n            }\n            else {\n                let shouldWrite = false;\n                if (line.endsWith(Config.DEFAULT_MULTI_LINE_SEPARATOR)) {\n                    currentLine += line.substring(0, line.length - 1).trim();\n                }\n                else {\n                    currentLine += line;\n                    shouldWrite = true;\n                }\n                if (shouldWrite || lineNumber === linesCount) {\n                    this.write(section, lineNumber, currentLine);\n                    currentLine = '';\n                }\n            }\n        });\n    }\n    write(section, lineNum, line) {\n        const equalIndex = line.indexOf('=');\n        if (equalIndex === -1) {\n            throw new Error(`parse the content error : line ${lineNum}`);\n        }\n        const key = line.substring(0, equalIndex);\n        const value = line.substring(equalIndex + 1);\n        this.addConfig(section, key.trim(), value.trim());\n    }\n    getBool(key) {\n        return !!this.get(key);\n    }\n    getInt(key) {\n        return Number.parseInt(this.get(key), 10);\n    }\n    getFloat(key) {\n        return Number.parseFloat(this.get(key));\n    }\n    getString(key) {\n        return this.get(key);\n    }\n    getStrings(key) {\n        const v = this.get(key);\n        return v.split(',');\n    }\n    set(key, value) {\n        if (!key) {\n            throw new Error('key is empty');\n        }\n        let section = '';\n        let option;\n        const keys = key.toLowerCase().split('::');\n        if (keys.length >= 2) {\n            section = keys[0];\n            option = keys[1];\n        }\n        else {\n            option = keys[0];\n        }\n        this.addConfig(section, option, value);\n    }\n    get(key) {\n        let section;\n        let option;\n        const keys = key.toLowerCase().split('::');\n        if (keys.length >= 2) {\n            section = keys[0];\n            option = keys[1];\n        }\n        else {\n            section = Config.DEFAULT_SECTION;\n            option = keys[0];\n        }\n        const item = this.data.get(section);\n        const itemChild = item && item.get(option);\n        return itemChild ? itemChild : '';\n    }\n}\nConfig.DEFAULT_SECTION = 'default';\nConfig.DEFAULT_COMMENT = '#';\nConfig.DEFAULT_COMMENT_SEM = ';';\nConfig.DEFAULT_MULTI_LINE_SEPARATOR = '\\\\';\n","//     JavaScript Expression Parser (JSEP) 0.3.5\n//     JSEP may be freely distributed under the MIT License\n//     https://ericsmekens.github.io/jsep/\n\n/*global module: true, exports: true, console: true */\n(function (root) {\n\t'use strict';\n\t// Node Types\n\t// ----------\n\n\t// This is the full set of types that any JSEP node can be.\n\t// Store them here to save space when minified\n\tvar COMPOUND = 'Compound',\n\t\tIDENTIFIER = 'Identifier',\n\t\tMEMBER_EXP = 'MemberExpression',\n\t\tLITERAL = 'Literal',\n\t\tTHIS_EXP = 'ThisExpression',\n\t\tCALL_EXP = 'CallExpression',\n\t\tUNARY_EXP = 'UnaryExpression',\n\t\tBINARY_EXP = 'BinaryExpression',\n\t\tLOGICAL_EXP = 'LogicalExpression',\n\t\tCONDITIONAL_EXP = 'ConditionalExpression',\n\t\tARRAY_EXP = 'ArrayExpression',\n\n\t\tPERIOD_CODE = 46, // '.'\n\t\tCOMMA_CODE  = 44, // ','\n\t\tSQUOTE_CODE = 39, // single quote\n\t\tDQUOTE_CODE = 34, // double quotes\n\t\tOPAREN_CODE = 40, // (\n\t\tCPAREN_CODE = 41, // )\n\t\tOBRACK_CODE = 91, // [\n\t\tCBRACK_CODE = 93, // ]\n\t\tQUMARK_CODE = 63, // ?\n\t\tSEMCOL_CODE = 59, // ;\n\t\tCOLON_CODE  = 58, // :\n\n\t\tthrowError = function(message, index) {\n\t\t\tvar error = new Error(message + ' at character ' + index);\n\t\t\terror.index = index;\n\t\t\terror.description = message;\n\t\t\tthrow error;\n\t\t},\n\n\t// Operations\n\t// ----------\n\n\t// Set `t` to `true` to save space (when minified, not gzipped)\n\t\tt = true,\n\t// Use a quickly-accessible map to store all of the unary operators\n\t// Values are set to `true` (it really doesn't matter)\n\t\tunary_ops = {'-': t, '!': t, '~': t, '+': t},\n\t// Also use a map for the binary operations but set their values to their\n\t// binary precedence for quick reference:\n\t// see [Order of operations](http://en.wikipedia.org/wiki/Order_of_operations#Programming_language)\n\t\tbinary_ops = {\n\t\t\t'||': 1, '&&': 2, '|': 3,  '^': 4,  '&': 5,\n\t\t\t'==': 6, '!=': 6, '===': 6, '!==': 6,\n\t\t\t'<': 7,  '>': 7,  '<=': 7,  '>=': 7,\n\t\t\t'<<':8,  '>>': 8, '>>>': 8,\n\t\t\t'+': 9, '-': 9,\n\t\t\t'*': 10, '/': 10, '%': 10\n\t\t},\n\t// Get return the longest key length of any object\n\t\tgetMaxKeyLen = function(obj) {\n\t\t\tvar max_len = 0, len;\n\t\t\tfor(var key in obj) {\n\t\t\t\tif((len = key.length) > max_len && obj.hasOwnProperty(key)) {\n\t\t\t\t\tmax_len = len;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn max_len;\n\t\t},\n\t\tmax_unop_len = getMaxKeyLen(unary_ops),\n\t\tmax_binop_len = getMaxKeyLen(binary_ops),\n\t// Literals\n\t// ----------\n\t// Store the values to return for the various literals we may encounter\n\t\tliterals = {\n\t\t\t'true': true,\n\t\t\t'false': false,\n\t\t\t'null': null\n\t\t},\n\t// Except for `this`, which is special. This could be changed to something like `'self'` as well\n\t\tthis_str = 'this',\n\t// Returns the precedence of a binary operator or `0` if it isn't a binary operator\n\t\tbinaryPrecedence = function(op_val) {\n\t\t\treturn binary_ops[op_val] || 0;\n\t\t},\n\t// Utility function (gets called from multiple places)\n\t// Also note that `a && b` and `a || b` are *logical* expressions, not binary expressions\n\t\tcreateBinaryExpression = function (operator, left, right) {\n\t\t\tvar type = (operator === '||' || operator === '&&') ? LOGICAL_EXP : BINARY_EXP;\n\t\t\treturn {\n\t\t\t\ttype: type,\n\t\t\t\toperator: operator,\n\t\t\t\tleft: left,\n\t\t\t\tright: right\n\t\t\t};\n\t\t},\n\t\t// `ch` is a character code in the next three functions\n\t\tisDecimalDigit = function(ch) {\n\t\t\treturn (ch >= 48 && ch <= 57); // 0...9\n\t\t},\n\t\tisIdentifierStart = function(ch) {\n\t\t\treturn (ch === 36) || (ch === 95) || // `$` and `_`\n\t\t\t\t\t(ch >= 65 && ch <= 90) || // A...Z\n\t\t\t\t\t(ch >= 97 && ch <= 122) || // a...z\n                    (ch >= 128 && !binary_ops[String.fromCharCode(ch)]); // any non-ASCII that is not an operator\n\t\t},\n\t\tisIdentifierPart = function(ch) {\n\t\t\treturn (ch === 36) || (ch === 95) || // `$` and `_`\n\t\t\t\t\t(ch >= 65 && ch <= 90) || // A...Z\n\t\t\t\t\t(ch >= 97 && ch <= 122) || // a...z\n\t\t\t\t\t(ch >= 48 && ch <= 57) || // 0...9\n                    (ch >= 128 && !binary_ops[String.fromCharCode(ch)]); // any non-ASCII that is not an operator\n\t\t},\n\n\t\t// Parsing\n\t\t// -------\n\t\t// `expr` is a string with the passed in expression\n\t\tjsep = function(expr) {\n\t\t\t// `index` stores the character number we are currently at while `length` is a constant\n\t\t\t// All of the gobbles below will modify `index` as we move along\n\t\t\tvar index = 0,\n\t\t\t\tcharAtFunc = expr.charAt,\n\t\t\t\tcharCodeAtFunc = expr.charCodeAt,\n\t\t\t\texprI = function(i) { return charAtFunc.call(expr, i); },\n\t\t\t\texprICode = function(i) { return charCodeAtFunc.call(expr, i); },\n\t\t\t\tlength = expr.length,\n\n\t\t\t\t// Push `index` up to the next non-space character\n\t\t\t\tgobbleSpaces = function() {\n\t\t\t\t\tvar ch = exprICode(index);\n\t\t\t\t\t// space or tab\n\t\t\t\t\twhile(ch === 32 || ch === 9 || ch === 10 || ch === 13) {\n\t\t\t\t\t\tch = exprICode(++index);\n\t\t\t\t\t}\n\t\t\t\t},\n\n\t\t\t\t// The main parsing function. Much of this code is dedicated to ternary expressions\n\t\t\t\tgobbleExpression = function() {\n\t\t\t\t\tvar test = gobbleBinaryExpression(),\n\t\t\t\t\t\tconsequent, alternate;\n\t\t\t\t\tgobbleSpaces();\n\t\t\t\t\tif(exprICode(index) === QUMARK_CODE) {\n\t\t\t\t\t\t// Ternary expression: test ? consequent : alternate\n\t\t\t\t\t\tindex++;\n\t\t\t\t\t\tconsequent = gobbleExpression();\n\t\t\t\t\t\tif(!consequent) {\n\t\t\t\t\t\t\tthrowError('Expected expression', index);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tgobbleSpaces();\n\t\t\t\t\t\tif(exprICode(index) === COLON_CODE) {\n\t\t\t\t\t\t\tindex++;\n\t\t\t\t\t\t\talternate = gobbleExpression();\n\t\t\t\t\t\t\tif(!alternate) {\n\t\t\t\t\t\t\t\tthrowError('Expected expression', index);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\ttype: CONDITIONAL_EXP,\n\t\t\t\t\t\t\t\ttest: test,\n\t\t\t\t\t\t\t\tconsequent: consequent,\n\t\t\t\t\t\t\t\talternate: alternate\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthrowError('Expected :', index);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn test;\n\t\t\t\t\t}\n\t\t\t\t},\n\n\t\t\t\t// Search for the operation portion of the string (e.g. `+`, `===`)\n\t\t\t\t// Start by taking the longest possible binary operations (3 characters: `===`, `!==`, `>>>`)\n\t\t\t\t// and move down from 3 to 2 to 1 character until a matching binary operation is found\n\t\t\t\t// then, return that binary operation\n\t\t\t\tgobbleBinaryOp = function() {\n\t\t\t\t\tgobbleSpaces();\n\t\t\t\t\tvar biop, to_check = expr.substr(index, max_binop_len), tc_len = to_check.length;\n\t\t\t\t\twhile(tc_len > 0) {\n\t\t\t\t\t\t// Don't accept a binary op when it is an identifier.\n\t\t\t\t\t\t// Binary ops that start with a identifier-valid character must be followed\n\t\t\t\t\t\t// by a non identifier-part valid character\n\t\t\t\t\t\tif(binary_ops.hasOwnProperty(to_check) && (\n\t\t\t\t\t\t\t!isIdentifierStart(exprICode(index)) ||\n\t\t\t\t\t\t\t(index+to_check.length< expr.length && !isIdentifierPart(exprICode(index+to_check.length)))\n\t\t\t\t\t\t)) {\n\t\t\t\t\t\t\tindex += tc_len;\n\t\t\t\t\t\t\treturn to_check;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tto_check = to_check.substr(0, --tc_len);\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t},\n\n\t\t\t\t// This function is responsible for gobbling an individual expression,\n\t\t\t\t// e.g. `1`, `1+2`, `a+(b*2)-Math.sqrt(2)`\n\t\t\t\tgobbleBinaryExpression = function() {\n\t\t\t\t\tvar ch_i, node, biop, prec, stack, biop_info, left, right, i, cur_biop;\n\n\t\t\t\t\t// First, try to get the leftmost thing\n\t\t\t\t\t// Then, check to see if there's a binary operator operating on that leftmost thing\n\t\t\t\t\tleft = gobbleToken();\n\t\t\t\t\tbiop = gobbleBinaryOp();\n\n\t\t\t\t\t// If there wasn't a binary operator, just return the leftmost node\n\t\t\t\t\tif(!biop) {\n\t\t\t\t\t\treturn left;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Otherwise, we need to start a stack to properly place the binary operations in their\n\t\t\t\t\t// precedence structure\n\t\t\t\t\tbiop_info = { value: biop, prec: binaryPrecedence(biop)};\n\n\t\t\t\t\tright = gobbleToken();\n\t\t\t\t\tif(!right) {\n\t\t\t\t\t\tthrowError(\"Expected expression after \" + biop, index);\n\t\t\t\t\t}\n\t\t\t\t\tstack = [left, biop_info, right];\n\n\t\t\t\t\t// Properly deal with precedence using [recursive descent](http://www.engr.mun.ca/~theo/Misc/exp_parsing.htm)\n\t\t\t\t\twhile((biop = gobbleBinaryOp())) {\n\t\t\t\t\t\tprec = binaryPrecedence(biop);\n\n\t\t\t\t\t\tif(prec === 0) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbiop_info = { value: biop, prec: prec };\n\n\t\t\t\t\t\tcur_biop = biop;\n\t\t\t\t\t\t// Reduce: make a binary expression from the three topmost entries.\n\t\t\t\t\t\twhile ((stack.length > 2) && (prec <= stack[stack.length - 2].prec)) {\n\t\t\t\t\t\t\tright = stack.pop();\n\t\t\t\t\t\t\tbiop = stack.pop().value;\n\t\t\t\t\t\t\tleft = stack.pop();\n\t\t\t\t\t\t\tnode = createBinaryExpression(biop, left, right);\n\t\t\t\t\t\t\tstack.push(node);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tnode = gobbleToken();\n\t\t\t\t\t\tif(!node) {\n\t\t\t\t\t\t\tthrowError(\"Expected expression after \" + cur_biop, index);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tstack.push(biop_info, node);\n\t\t\t\t\t}\n\n\t\t\t\t\ti = stack.length - 1;\n\t\t\t\t\tnode = stack[i];\n\t\t\t\t\twhile(i > 1) {\n\t\t\t\t\t\tnode = createBinaryExpression(stack[i - 1].value, stack[i - 2], node);\n\t\t\t\t\t\ti -= 2;\n\t\t\t\t\t}\n\t\t\t\t\treturn node;\n\t\t\t\t},\n\n\t\t\t\t// An individual part of a binary expression:\n\t\t\t\t// e.g. `foo.bar(baz)`, `1`, `\"abc\"`, `(a % 2)` (because it's in parenthesis)\n\t\t\t\tgobbleToken = function() {\n\t\t\t\t\tvar ch, to_check, tc_len;\n\n\t\t\t\t\tgobbleSpaces();\n\t\t\t\t\tch = exprICode(index);\n\n\t\t\t\t\tif(isDecimalDigit(ch) || ch === PERIOD_CODE) {\n\t\t\t\t\t\t// Char code 46 is a dot `.` which can start off a numeric literal\n\t\t\t\t\t\treturn gobbleNumericLiteral();\n\t\t\t\t\t} else if(ch === SQUOTE_CODE || ch === DQUOTE_CODE) {\n\t\t\t\t\t\t// Single or double quotes\n\t\t\t\t\t\treturn gobbleStringLiteral();\n\t\t\t\t\t} else if (ch === OBRACK_CODE) {\n\t\t\t\t\t\treturn gobbleArray();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tto_check = expr.substr(index, max_unop_len);\n\t\t\t\t\t\ttc_len = to_check.length;\n\t\t\t\t\t\twhile(tc_len > 0) {\n\t\t\t\t\t\t// Don't accept an unary op when it is an identifier.\n\t\t\t\t\t\t// Unary ops that start with a identifier-valid character must be followed\n\t\t\t\t\t\t// by a non identifier-part valid character\n\t\t\t\t\t\t\tif(unary_ops.hasOwnProperty(to_check) && (\n\t\t\t\t\t\t\t\t!isIdentifierStart(exprICode(index)) ||\n\t\t\t\t\t\t\t\t(index+to_check.length < expr.length && !isIdentifierPart(exprICode(index+to_check.length)))\n\t\t\t\t\t\t\t)) {\n\t\t\t\t\t\t\t\tindex += tc_len;\n\t\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t\ttype: UNARY_EXP,\n\t\t\t\t\t\t\t\t\toperator: to_check,\n\t\t\t\t\t\t\t\t\targument: gobbleToken(),\n\t\t\t\t\t\t\t\t\tprefix: true\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tto_check = to_check.substr(0, --tc_len);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (isIdentifierStart(ch) || ch === OPAREN_CODE) { // open parenthesis\n\t\t\t\t\t\t\t// `foo`, `bar.baz`\n\t\t\t\t\t\t\treturn gobbleVariable();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\treturn false;\n\t\t\t\t},\n\t\t\t\t// Parse simple numeric literals: `12`, `3.4`, `.5`. Do this by using a string to\n\t\t\t\t// keep track of everything in the numeric literal and then calling `parseFloat` on that string\n\t\t\t\tgobbleNumericLiteral = function() {\n\t\t\t\t\tvar number = '', ch, chCode;\n\t\t\t\t\twhile(isDecimalDigit(exprICode(index))) {\n\t\t\t\t\t\tnumber += exprI(index++);\n\t\t\t\t\t}\n\n\t\t\t\t\tif(exprICode(index) === PERIOD_CODE) { // can start with a decimal marker\n\t\t\t\t\t\tnumber += exprI(index++);\n\n\t\t\t\t\t\twhile(isDecimalDigit(exprICode(index))) {\n\t\t\t\t\t\t\tnumber += exprI(index++);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tch = exprI(index);\n\t\t\t\t\tif(ch === 'e' || ch === 'E') { // exponent marker\n\t\t\t\t\t\tnumber += exprI(index++);\n\t\t\t\t\t\tch = exprI(index);\n\t\t\t\t\t\tif(ch === '+' || ch === '-') { // exponent sign\n\t\t\t\t\t\t\tnumber += exprI(index++);\n\t\t\t\t\t\t}\n\t\t\t\t\t\twhile(isDecimalDigit(exprICode(index))) { //exponent itself\n\t\t\t\t\t\t\tnumber += exprI(index++);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(!isDecimalDigit(exprICode(index-1)) ) {\n\t\t\t\t\t\t\tthrowError('Expected exponent (' + number + exprI(index) + ')', index);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\n\t\t\t\t\tchCode = exprICode(index);\n\t\t\t\t\t// Check to make sure this isn't a variable name that start with a number (123abc)\n\t\t\t\t\tif(isIdentifierStart(chCode)) {\n\t\t\t\t\t\tthrowError('Variable names cannot start with a number (' +\n\t\t\t\t\t\t\t\t\tnumber + exprI(index) + ')', index);\n\t\t\t\t\t} else if(chCode === PERIOD_CODE) {\n\t\t\t\t\t\tthrowError('Unexpected period', index);\n\t\t\t\t\t}\n\n\t\t\t\t\treturn {\n\t\t\t\t\t\ttype: LITERAL,\n\t\t\t\t\t\tvalue: parseFloat(number),\n\t\t\t\t\t\traw: number\n\t\t\t\t\t};\n\t\t\t\t},\n\n\t\t\t\t// Parses a string literal, staring with single or double quotes with basic support for escape codes\n\t\t\t\t// e.g. `\"hello world\"`, `'this is\\nJSEP'`\n\t\t\t\tgobbleStringLiteral = function() {\n\t\t\t\t\tvar str = '', quote = exprI(index++), closed = false, ch;\n\n\t\t\t\t\twhile(index < length) {\n\t\t\t\t\t\tch = exprI(index++);\n\t\t\t\t\t\tif(ch === quote) {\n\t\t\t\t\t\t\tclosed = true;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t} else if(ch === '\\\\') {\n\t\t\t\t\t\t\t// Check for all of the common escape codes\n\t\t\t\t\t\t\tch = exprI(index++);\n\t\t\t\t\t\t\tswitch(ch) {\n\t\t\t\t\t\t\t\tcase 'n': str += '\\n'; break;\n\t\t\t\t\t\t\t\tcase 'r': str += '\\r'; break;\n\t\t\t\t\t\t\t\tcase 't': str += '\\t'; break;\n\t\t\t\t\t\t\t\tcase 'b': str += '\\b'; break;\n\t\t\t\t\t\t\t\tcase 'f': str += '\\f'; break;\n\t\t\t\t\t\t\t\tcase 'v': str += '\\x0B'; break;\n\t\t\t\t\t\t\t\tdefault : str += ch;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tstr += ch;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif(!closed) {\n\t\t\t\t\t\tthrowError('Unclosed quote after \"'+str+'\"', index);\n\t\t\t\t\t}\n\n\t\t\t\t\treturn {\n\t\t\t\t\t\ttype: LITERAL,\n\t\t\t\t\t\tvalue: str,\n\t\t\t\t\t\traw: quote + str + quote\n\t\t\t\t\t};\n\t\t\t\t},\n\n\t\t\t\t// Gobbles only identifiers\n\t\t\t\t// e.g.: `foo`, `_value`, `$x1`\n\t\t\t\t// Also, this function checks if that identifier is a literal:\n\t\t\t\t// (e.g. `true`, `false`, `null`) or `this`\n\t\t\t\tgobbleIdentifier = function() {\n\t\t\t\t\tvar ch = exprICode(index), start = index, identifier;\n\n\t\t\t\t\tif(isIdentifierStart(ch)) {\n\t\t\t\t\t\tindex++;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthrowError('Unexpected ' + exprI(index), index);\n\t\t\t\t\t}\n\n\t\t\t\t\twhile(index < length) {\n\t\t\t\t\t\tch = exprICode(index);\n\t\t\t\t\t\tif(isIdentifierPart(ch)) {\n\t\t\t\t\t\t\tindex++;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tidentifier = expr.slice(start, index);\n\n\t\t\t\t\tif(literals.hasOwnProperty(identifier)) {\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\ttype: LITERAL,\n\t\t\t\t\t\t\tvalue: literals[identifier],\n\t\t\t\t\t\t\traw: identifier\n\t\t\t\t\t\t};\n\t\t\t\t\t} else if(identifier === this_str) {\n\t\t\t\t\t\treturn { type: THIS_EXP };\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\ttype: IDENTIFIER,\n\t\t\t\t\t\t\tname: identifier\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t},\n\n\t\t\t\t// Gobbles a list of arguments within the context of a function call\n\t\t\t\t// or array literal. This function also assumes that the opening character\n\t\t\t\t// `(` or `[` has already been gobbled, and gobbles expressions and commas\n\t\t\t\t// until the terminator character `)` or `]` is encountered.\n\t\t\t\t// e.g. `foo(bar, baz)`, `my_func()`, or `[bar, baz]`\n\t\t\t\tgobbleArguments = function(termination) {\n\t\t\t\t\tvar ch_i, args = [], node, closed = false;\n\t\t\t\t\tvar separator_count = 0;\n\t\t\t\t\twhile(index < length) {\n\t\t\t\t\t\tgobbleSpaces();\n\t\t\t\t\t\tch_i = exprICode(index);\n\t\t\t\t\t\tif(ch_i === termination) { // done parsing\n\t\t\t\t\t\t\tclosed = true;\n\t\t\t\t\t\t\tindex++;\n\t\t\t\t\t\t\tif(termination === CPAREN_CODE && separator_count && separator_count >= args.length){\n\t\t\t\t\t\t\t\tthrowError('Unexpected token ' + String.fromCharCode(termination), index);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t} else if (ch_i === COMMA_CODE) { // between expressions\n\t\t\t\t\t\t\tindex++;\n\t\t\t\t\t\t\tseparator_count++;\n\t\t\t\t\t\t\tif(separator_count !== args.length) { // missing argument\n\t\t\t\t\t\t\t\tif(termination === CPAREN_CODE) {\n\t\t\t\t\t\t\t\t\tthrowError('Unexpected token ,', index);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse if(termination === CBRACK_CODE) {\n\t\t\t\t\t\t\t\t\tfor(var arg = args.length; arg< separator_count; arg++) {\n\t\t\t\t\t\t\t\t\t\targs.push(null);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tnode = gobbleExpression();\n\t\t\t\t\t\t\tif(!node || node.type === COMPOUND) {\n\t\t\t\t\t\t\t\tthrowError('Expected comma', index);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\targs.push(node);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (!closed) {\n\t\t\t\t\t\tthrowError('Expected ' + String.fromCharCode(termination), index);\n\t\t\t\t\t}\n\t\t\t\t\treturn args;\n\t\t\t\t},\n\n\t\t\t\t// Gobble a non-literal variable name. This variable name may include properties\n\t\t\t\t// e.g. `foo`, `bar.baz`, `foo['bar'].baz`\n\t\t\t\t// It also gobbles function calls:\n\t\t\t\t// e.g. `Math.acos(obj.angle)`\n\t\t\t\tgobbleVariable = function() {\n\t\t\t\t\tvar ch_i, node;\n\t\t\t\t\tch_i = exprICode(index);\n\n\t\t\t\t\tif(ch_i === OPAREN_CODE) {\n\t\t\t\t\t\tnode = gobbleGroup();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tnode = gobbleIdentifier();\n\t\t\t\t\t}\n\t\t\t\t\tgobbleSpaces();\n\t\t\t\t\tch_i = exprICode(index);\n\t\t\t\t\twhile(ch_i === PERIOD_CODE || ch_i === OBRACK_CODE || ch_i === OPAREN_CODE) {\n\t\t\t\t\t\tindex++;\n\t\t\t\t\t\tif(ch_i === PERIOD_CODE) {\n\t\t\t\t\t\t\tgobbleSpaces();\n\t\t\t\t\t\t\tnode = {\n\t\t\t\t\t\t\t\ttype: MEMBER_EXP,\n\t\t\t\t\t\t\t\tcomputed: false,\n\t\t\t\t\t\t\t\tobject: node,\n\t\t\t\t\t\t\t\tproperty: gobbleIdentifier()\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t} else if(ch_i === OBRACK_CODE) {\n\t\t\t\t\t\t\tnode = {\n\t\t\t\t\t\t\t\ttype: MEMBER_EXP,\n\t\t\t\t\t\t\t\tcomputed: true,\n\t\t\t\t\t\t\t\tobject: node,\n\t\t\t\t\t\t\t\tproperty: gobbleExpression()\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tgobbleSpaces();\n\t\t\t\t\t\t\tch_i = exprICode(index);\n\t\t\t\t\t\t\tif(ch_i !== CBRACK_CODE) {\n\t\t\t\t\t\t\t\tthrowError('Unclosed [', index);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tindex++;\n\t\t\t\t\t\t} else if(ch_i === OPAREN_CODE) {\n\t\t\t\t\t\t\t// A function call is being made; gobble all the arguments\n\t\t\t\t\t\t\tnode = {\n\t\t\t\t\t\t\t\ttype: CALL_EXP,\n\t\t\t\t\t\t\t\t'arguments': gobbleArguments(CPAREN_CODE),\n\t\t\t\t\t\t\t\tcallee: node\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}\n\t\t\t\t\t\tgobbleSpaces();\n\t\t\t\t\t\tch_i = exprICode(index);\n\t\t\t\t\t}\n\t\t\t\t\treturn node;\n\t\t\t\t},\n\n\t\t\t\t// Responsible for parsing a group of things within parentheses `()`\n\t\t\t\t// This function assumes that it needs to gobble the opening parenthesis\n\t\t\t\t// and then tries to gobble everything within that parenthesis, assuming\n\t\t\t\t// that the next thing it should see is the close parenthesis. If not,\n\t\t\t\t// then the expression probably doesn't have a `)`\n\t\t\t\tgobbleGroup = function() {\n\t\t\t\t\tindex++;\n\t\t\t\t\tvar node = gobbleExpression();\n\t\t\t\t\tgobbleSpaces();\n\t\t\t\t\tif(exprICode(index) === CPAREN_CODE) {\n\t\t\t\t\t\tindex++;\n\t\t\t\t\t\treturn node;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthrowError('Unclosed (', index);\n\t\t\t\t\t}\n\t\t\t\t},\n\n\t\t\t\t// Responsible for parsing Array literals `[1, 2, 3]`\n\t\t\t\t// This function assumes that it needs to gobble the opening bracket\n\t\t\t\t// and then tries to gobble the expressions as arguments.\n\t\t\t\tgobbleArray = function() {\n\t\t\t\t\tindex++;\n\t\t\t\t\treturn {\n\t\t\t\t\t\ttype: ARRAY_EXP,\n\t\t\t\t\t\telements: gobbleArguments(CBRACK_CODE)\n\t\t\t\t\t};\n\t\t\t\t},\n\n\t\t\t\tnodes = [], ch_i, node;\n\n\t\t\twhile(index < length) {\n\t\t\t\tch_i = exprICode(index);\n\n\t\t\t\t// Expressions can be separated by semicolons, commas, or just inferred without any\n\t\t\t\t// separators\n\t\t\t\tif(ch_i === SEMCOL_CODE || ch_i === COMMA_CODE) {\n\t\t\t\t\tindex++; // ignore separators\n\t\t\t\t} else {\n\t\t\t\t\t// Try to gobble each expression individually\n\t\t\t\t\tif((node = gobbleExpression())) {\n\t\t\t\t\t\tnodes.push(node);\n\t\t\t\t\t// If we weren't able to find a binary expression and are out of room, then\n\t\t\t\t\t// the expression passed in probably has too much\n\t\t\t\t\t} else if(index < length) {\n\t\t\t\t\t\tthrowError('Unexpected \"' + exprI(index) + '\"', index);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// If there's only one expression just try returning the expression\n\t\t\tif(nodes.length === 1) {\n\t\t\t\treturn nodes[0];\n\t\t\t} else {\n\t\t\t\treturn {\n\t\t\t\t\ttype: COMPOUND,\n\t\t\t\t\tbody: nodes\n\t\t\t\t};\n\t\t\t}\n\t\t};\n\n\t// To be filled in by the template\n\tjsep.version = '0.3.5';\n\tjsep.toString = function() { return 'JavaScript Expression Parser (JSEP) v' + jsep.version; };\n\n\t/**\n\t * @method jsep.addUnaryOp\n\t * @param {string} op_name The name of the unary op to add\n\t * @return jsep\n\t */\n\tjsep.addUnaryOp = function(op_name) {\n\t\tmax_unop_len = Math.max(op_name.length, max_unop_len);\n\t\tunary_ops[op_name] = t; return this;\n\t};\n\n\t/**\n\t * @method jsep.addBinaryOp\n\t * @param {string} op_name The name of the binary op to add\n\t * @param {number} precedence The precedence of the binary op (can be a float)\n\t * @return jsep\n\t */\n\tjsep.addBinaryOp = function(op_name, precedence) {\n\t\tmax_binop_len = Math.max(op_name.length, max_binop_len);\n\t\tbinary_ops[op_name] = precedence;\n\t\treturn this;\n\t};\n\n\t/**\n\t * @method jsep.addLiteral\n\t * @param {string} literal_name The name of the literal to add\n\t * @param {*} literal_value The value of the literal\n\t * @return jsep\n\t */\n\tjsep.addLiteral = function(literal_name, literal_value) {\n\t\tliterals[literal_name] = literal_value;\n\t\treturn this;\n\t};\n\n\t/**\n\t * @method jsep.removeUnaryOp\n\t * @param {string} op_name The name of the unary op to remove\n\t * @return jsep\n\t */\n\tjsep.removeUnaryOp = function(op_name) {\n\t\tdelete unary_ops[op_name];\n\t\tif(op_name.length === max_unop_len) {\n\t\t\tmax_unop_len = getMaxKeyLen(unary_ops);\n\t\t}\n\t\treturn this;\n\t};\n\n\t/**\n\t * @method jsep.removeAllUnaryOps\n\t * @return jsep\n\t */\n\tjsep.removeAllUnaryOps = function() {\n\t\tunary_ops = {};\n\t\tmax_unop_len = 0;\n\n\t\treturn this;\n\t};\n\n\t/**\n\t * @method jsep.removeBinaryOp\n\t * @param {string} op_name The name of the binary op to remove\n\t * @return jsep\n\t */\n\tjsep.removeBinaryOp = function(op_name) {\n\t\tdelete binary_ops[op_name];\n\t\tif(op_name.length === max_binop_len) {\n\t\t\tmax_binop_len = getMaxKeyLen(binary_ops);\n\t\t}\n\t\treturn this;\n\t};\n\n\t/**\n\t * @method jsep.removeAllBinaryOps\n\t * @return jsep\n\t */\n\tjsep.removeAllBinaryOps = function() {\n\t\tbinary_ops = {};\n\t\tmax_binop_len = 0;\n\n\t\treturn this;\n\t};\n\n\t/**\n\t * @method jsep.removeLiteral\n\t * @param {string} literal_name The name of the literal to remove\n\t * @return jsep\n\t */\n\tjsep.removeLiteral = function(literal_name) {\n\t\tdelete literals[literal_name];\n\t\treturn this;\n\t};\n\n\t/**\n\t * @method jsep.removeAllLiterals\n\t * @return jsep\n\t */\n\tjsep.removeAllLiterals = function() {\n\t\tliterals = {};\n\n\t\treturn this;\n\t};\n\n\t// In desktop environments, have a way to restore the old value for `jsep`\n\tif (typeof exports === 'undefined') {\n\t\tvar old_jsep = root.jsep;\n\t\t// The star of the show! It's a function!\n\t\troot.jsep = jsep;\n\t\t// And a courteous function willing to move out of the way for other similarly-named objects!\n\t\tjsep.noConflict = function() {\n\t\t\tif(root.jsep === jsep) {\n\t\t\t\troot.jsep = old_jsep;\n\t\t\t}\n\t\t\treturn jsep;\n\t\t};\n\t} else {\n\t\t// In Node.JS environments\n\t\tif (typeof module !== 'undefined' && module.exports) {\n\t\t\texports = module.exports = jsep;\n\t\t} else {\n\t\t\texports.parse = jsep;\n\t\t}\n\t}\n}(this));\n","import r from\"jsep\";export{default as parse}from\"jsep\";var e=function(r,o){try{var s,c=r;switch(c.type){case\"ArrayExpression\":return Promise.resolve(t(c.elements,o));case\"BinaryExpression\":return Promise.resolve(Promise.all([e(c.left,o),e(c.right,o)])).then(function(r){return u[c.operator](r[0],r[1])});case\"CallExpression\":var a,l,f,p=function(){if(\"function\"==typeof l){var r=l,e=r.apply,n=a;return Promise.resolve(t(c.arguments,o)).then(function(t){return Promise.resolve(e.call(r,n,t))})}},m=\"MemberExpression\"===c.callee.type?Promise.resolve(n(c.callee,o)).then(function(r){a=(f=r)[0],l=f[1]}):Promise.resolve(e(c.callee,o)).then(function(r){l=r});return Promise.resolve(m&&m.then?m.then(p):p());case\"ConditionalExpression\":return Promise.resolve(e(c.test,o)).then(function(r){return Promise.resolve(e(r?c.consequent:c.alternate,o))});case\"Identifier\":return Promise.resolve(o[c.name]);case\"Literal\":return Promise.resolve(c.value);case\"LogicalExpression\":var v=function(r){return s?r:Promise.resolve(Promise.all([e(c.left,o),e(c.right,o)])).then(function(r){return u[c.operator](r[0],r[1])})},h=\"||\"===c.operator?Promise.resolve(e(c.left,o)).then(function(r){return r?(s=1,r):Promise.resolve(e(c.right,o)).then(function(r){return s=1,r})}):function(){if(\"&&\"===c.operator)return Promise.resolve(e(c.left,o)).then(function(r){return r?Promise.resolve(e(c.right,o)).then(function(r){return s=1,r}):(s=1,r)})}();return Promise.resolve(h&&h.then?h.then(v):v(h));case\"MemberExpression\":return Promise.resolve(n(c,o)).then(function(r){return r[1]});case\"ThisExpression\":return Promise.resolve(o);case\"UnaryExpression\":var P=i[c.operator];return Promise.resolve(e(c.argument,o)).then(function(r){return P.call(i,r)});default:return Promise.resolve(void 0)}}catch(r){return Promise.reject(r)}},n=function(r,n){try{return Promise.resolve(e(r.object,n)).then(function(t){function o(){if(/^__proto__|prototype|constructor$/.test(u))throw Error('Access to member \"'+u+'\" disallowed.');return[t,t[u]]}var u,i=function(){if(r.computed)return Promise.resolve(e(r.property,n)).then(function(r){u=r});u=r.property.name}();return i&&i.then?i.then(o):o()})}catch(r){return Promise.reject(r)}},t=function(r,n){try{return Promise.resolve(Promise.all(r.map(function(r){return e(r,n)})))}catch(r){return Promise.reject(r)}},o={\"||\":1,\"&&\":2,\"|\":3,\"^\":4,\"&\":5,\"==\":6,\"!=\":6,\"===\":6,\"!==\":6,\"<\":7,\">\":7,\"<=\":7,\">=\":7,\"<<\":8,\">>\":8,\">>>\":8,\"+\":9,\"-\":9,\"*\":10,\"/\":10,\"%\":10},u={\"||\":function(r,e){return r||e},\"&&\":function(r,e){return r&&e},\"|\":function(r,e){return r|e},\"^\":function(r,e){return r^e},\"&\":function(r,e){return r&e},\"==\":function(r,e){return r==e},\"!=\":function(r,e){return r!=e},\"===\":function(r,e){return r===e},\"!==\":function(r,e){return r!==e},\"<\":function(r,e){return r<e},\">\":function(r,e){return r>e},\"<=\":function(r,e){return r<=e},\">=\":function(r,e){return r>=e},\"<<\":function(r,e){return r<<e},\">>\":function(r,e){return r>>e},\">>>\":function(r,e){return r>>>e},\"+\":function(r,e){return r+e},\"-\":function(r,e){return r-e},\"*\":function(r,e){return r*e},\"/\":function(r,e){return r/e},\"%\":function(r,e){return r%e}},i={\"-\":function(r){return-r},\"+\":function(r){return+r},\"~\":function(r){return~r},\"!\":function(r){return!r}};function s(r,e){return r.map(function(r){return a(r,e)})}function c(r,e){var n,t=a(r.object,e);if(n=r.computed?a(r.property,e):r.property.name,/^__proto__|prototype|constructor$/.test(n))throw Error('Access to member \"'+n+'\" disallowed.');return[t,t[n]]}function a(r,e){var n=r;switch(n.type){case\"ArrayExpression\":return s(n.elements,e);case\"BinaryExpression\":return u[n.operator](a(n.left,e),a(n.right,e));case\"CallExpression\":var t,o,l;if(\"MemberExpression\"===n.callee.type?(t=(l=c(n.callee,e))[0],o=l[1]):o=a(n.callee,e),\"function\"!=typeof o)return;return o.apply(t,s(n.arguments,e));case\"ConditionalExpression\":return a(n.test,e)?a(n.consequent,e):a(n.alternate,e);case\"Identifier\":return e[n.name];case\"Literal\":return n.value;case\"LogicalExpression\":var f=a(n.left,e);return\"||\"===n.operator&&f?f:\"&&\"!==n.operator||f?u[n.operator](f,a(n.right,e)):f;case\"MemberExpression\":return c(n,e)[1];case\"ThisExpression\":return e;case\"UnaryExpression\":return i[n.operator](a(n.argument,e));default:return}}function l(e){return a.bind(null,r(e))}function f(n){return e.bind(null,r(n))}function p(e,n){r.addUnaryOp(e),i[e]=n}function m(e,n,t){t?(r.addBinaryOp(e,n),u[e]=t):(r.addBinaryOp(e,o[e]||1),u[e]=n)}export{m as addBinaryOp,p as addUnaryOp,l as compile,f as compileAsync,a as eval,e as evalAsync};\n//# sourceMappingURL=expression-eval.module.js.map\n","// Copyright 2018 The Casbin Authors. All Rights Reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\nexport var Effect;\n(function (Effect) {\n    Effect[Effect[\"Allow\"] = 1] = \"Allow\";\n    Effect[Effect[\"Indeterminate\"] = 2] = \"Indeterminate\";\n    Effect[Effect[\"Deny\"] = 3] = \"Deny\";\n})(Effect || (Effect = {}));\n","// Copyright 2020 The Casbin Authors. All Rights Reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\nimport { Effect } from './effector';\n/**\n * DefaultEffectorStream is the default implementation of EffectorStream.\n */\nexport class DefaultEffectorStream {\n    constructor(expr) {\n        this.done = false;\n        this.res = false;\n        this.rec = false;\n        this.expr = expr;\n    }\n    current() {\n        return this.res;\n    }\n    pushEffect(eft) {\n        switch (this.expr) {\n            case \"some(where (p_eft == allow))\" /* ALLOW */:\n                if (eft === Effect.Allow) {\n                    this.res = true;\n                    this.done = true;\n                    this.rec = true;\n                }\n                break;\n            case \"!some(where (p_eft == deny))\" /* DENY */:\n                this.res = true;\n                if (eft === Effect.Deny) {\n                    this.res = false;\n                    this.done = true;\n                    this.rec = true;\n                }\n                break;\n            case \"some(where (p_eft == allow)) && !some(where (p_eft == deny))\" /* ALLOW_AND_DENY */:\n                if (eft === Effect.Allow) {\n                    this.res = true;\n                    this.rec = true;\n                }\n                else if (eft === Effect.Deny) {\n                    this.res = false;\n                    this.done = true;\n                    this.rec = true;\n                }\n                else {\n                    this.rec = false;\n                }\n                break;\n            case \"priority(p_eft) || deny\" /* PRIORITY */:\n            case \"subjectPriority(p_eft) || deny\" /* SUBJECT_PRIORITY */:\n                if (eft !== Effect.Indeterminate) {\n                    this.res = eft === Effect.Allow;\n                    this.done = true;\n                    this.rec = true;\n                }\n                break;\n            default:\n                throw new Error('unsupported effect');\n        }\n        return [this.res, this.rec, this.done];\n    }\n}\n","// Copyright 2018 The Casbin Authors. All Rights Reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\nimport { DefaultEffectorStream } from './defaultEffectorStream';\n/**\n * DefaultEffector is default effector for Casbin.\n */\nexport class DefaultEffector {\n    newStream(expr) {\n        return new DefaultEffectorStream(expr);\n    }\n}\n","// Copyright 2019 The Casbin Authors. All Rights Reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n// DefaultLogger is the implementation for a Logger\nexport class DefaultLogger {\n    constructor() {\n        this.enable = false;\n    }\n    enableLog(enable) {\n        this.enable = enable;\n    }\n    isEnable() {\n        return this.enable;\n    }\n    print(...v) {\n        if (this.enable) {\n            console.log(...v);\n        }\n    }\n    printf(format, ...v) {\n        if (this.enable) {\n            console.log(format, ...v);\n        }\n    }\n}\n","// Copyright 2019 The Casbin Authors. All Rights Reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\nimport { DefaultLogger } from './defaultLogger';\nlet logger = new DefaultLogger();\n// setLogger sets the current logger.\nfunction setLogger(l) {\n    logger = l;\n}\n// getLogger returns the current logger.\nfunction getLogger() {\n    return logger;\n}\n// logPrint prints the log.\nfunction logPrint(...v) {\n    logger.print(...v);\n}\n// logPrintf prints the log with the format.\nfunction logPrintf(format, ...v) {\n    logger.printf(format, ...v);\n}\nexport { setLogger, getLogger, logPrint, logPrintf };\n","// Copyright 2018 The Casbin Authors. All Rights Reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\nimport { getLogger, logPrint } from '../log';\n// DEFAULT_DOMAIN defines the default domain space.\nconst DEFAULT_DOMAIN = 'casbin::default';\n// loadOrDefault returns the existing value for the key if present.\n// Otherwise, it stores and returns the given value.\nfunction loadOrDefault(map, key, value) {\n    const read = map.get(key);\n    if (read === undefined) {\n        map.set(key, value);\n        return value;\n    }\n    return read;\n}\n/**\n * Role represents the data structure for a role in RBAC.\n */\nclass Role {\n    constructor(name) {\n        this.name = name;\n        this.roles = [];\n    }\n    addRole(role) {\n        if (this.roles.some((n) => n.name === role.name)) {\n            return;\n        }\n        this.roles.push(role);\n    }\n    deleteRole(role) {\n        this.roles = this.roles.filter((n) => n.name !== role.name);\n    }\n    hasRole(name, hierarchyLevel) {\n        if (this.name === name) {\n            return true;\n        }\n        if (hierarchyLevel <= 0) {\n            return false;\n        }\n        for (const role of this.roles) {\n            if (role.hasRole(name, hierarchyLevel - 1)) {\n                return true;\n            }\n        }\n        return false;\n    }\n    hasDirectRole(name) {\n        return this.roles.some((n) => n.name === name);\n    }\n    toString() {\n        return this.name + this.roles.join(', ');\n    }\n    getRoles() {\n        return this.roles.map((n) => n.name);\n    }\n}\nclass Roles extends Map {\n    constructor() {\n        super();\n    }\n    hasRole(name, matchingFunc) {\n        let ok = false;\n        if (matchingFunc) {\n            this.forEach((value, key) => {\n                if (matchingFunc(name, key)) {\n                    ok = true;\n                }\n            });\n        }\n        else {\n            return this.has(name);\n        }\n        return ok;\n    }\n    createRole(name, matchingFunc) {\n        const role = loadOrDefault(this, name, new Role(name));\n        if (matchingFunc) {\n            this.forEach((value, key) => {\n                if (matchingFunc(name, key) && name !== key) {\n                    // Add new role to matching role\n                    const role1 = loadOrDefault(this, key, new Role(key));\n                    role.addRole(role1);\n                }\n            });\n        }\n        return role;\n    }\n}\n// RoleManager provides a default implementation for the RoleManager interface\nexport class DefaultRoleManager {\n    /**\n     * DefaultRoleManager is the constructor for creating an instance of the\n     * default RoleManager implementation.\n     *\n     * @param maxHierarchyLevel the maximized allowed RBAC hierarchy level.\n     */\n    constructor(maxHierarchyLevel) {\n        this.hasPattern = false;\n        this.hasDomainPattern = false;\n        this.hasDomainHierarchy = false;\n        this.allDomains = new Map();\n        this.allDomains.set(DEFAULT_DOMAIN, new Roles());\n        this.maxHierarchyLevel = maxHierarchyLevel;\n    }\n    /**\n     * addMatchingFunc support use pattern in g\n     * @param name name\n     * @param fn matching function\n     * @deprecated\n     */\n    async addMatchingFunc(name, fn) {\n        this.hasPattern = true;\n        if (typeof name === 'string' && fn) {\n            this.matchingFunc = fn;\n        }\n        else if (typeof name === 'function') {\n            this.matchingFunc = name;\n        }\n        else {\n            throw new Error('error: domain should be 1 parameter');\n        }\n    }\n    /**\n     * addDomainMatchingFunc support use domain pattern in g\n     * @param fn domain matching function\n     * ```\n     */\n    async addDomainMatchingFunc(fn) {\n        this.hasDomainPattern = true;\n        this.domainMatchingFunc = fn;\n    }\n    /**\n     * addDomainHierarchy sets a rolemanager to define role inheritance between domains\n     * @param rm RoleManager to define domain hierarchy\n     */\n    async addDomainHierarchy(rm) {\n        if (!(rm === null || rm === void 0 ? void 0 : rm.syncedHasLink))\n            throw Error('Domain hierarchy must be syncronous.');\n        this.hasDomainHierarchy = true;\n        this.domainHierarchyManager = rm;\n    }\n    generateTempRoles(domain) {\n        if (!this.hasPattern && !this.hasDomainPattern && !this.hasDomainHierarchy) {\n            return loadOrDefault(this.allDomains, domain, new Roles());\n        }\n        const extraDomain = new Set([domain]);\n        if (this.hasDomainPattern || this.hasDomainHierarchy) {\n            this.allDomains.forEach((value, key) => {\n                var _a;\n                if ((this.hasDomainPattern && this.domainMatchingFunc(domain, key)) ||\n                    (((_a = this.domainHierarchyManager) === null || _a === void 0 ? void 0 : _a.syncedHasLink) && this.domainHierarchyManager.syncedHasLink(key, domain))) {\n                    extraDomain.add(key);\n                }\n            });\n        }\n        const allRoles = new Roles();\n        extraDomain.forEach((dom) => {\n            loadOrDefault(this.allDomains, dom, new Roles()).forEach((value, key) => {\n                const role1 = allRoles.createRole(value.name, this.matchingFunc);\n                value.getRoles().forEach((n) => {\n                    role1.addRole(allRoles.createRole(n, this.matchingFunc));\n                });\n            });\n        });\n        return allRoles;\n    }\n    /**\n     * addLink adds the inheritance link between role: name1 and role: name2.\n     * aka role: name1 inherits role: name2.\n     * domain is a prefix to the roles.\n     */\n    async addLink(name1, name2, ...domain) {\n        if (domain.length === 0) {\n            domain = [DEFAULT_DOMAIN];\n        }\n        else if (domain.length > 1) {\n            throw new Error('error: domain should be 1 parameter');\n        }\n        const allRoles = loadOrDefault(this.allDomains, domain[0], new Roles());\n        const role1 = loadOrDefault(allRoles, name1, new Role(name1));\n        const role2 = loadOrDefault(allRoles, name2, new Role(name2));\n        role1.addRole(role2);\n    }\n    /**\n     * clear clears all stored data and resets the role manager to the initial state.\n     */\n    async clear() {\n        this.allDomains = new Map();\n        this.allDomains.set(DEFAULT_DOMAIN, new Roles());\n    }\n    /**\n     * deleteLink deletes the inheritance link between role: name1 and role: name2.\n     * aka role: name1 does not inherit role: name2 any more.\n     * domain is a prefix to the roles.\n     */\n    async deleteLink(name1, name2, ...domain) {\n        if (domain.length === 0) {\n            domain = [DEFAULT_DOMAIN];\n        }\n        else if (domain.length > 1) {\n            throw new Error('error: domain should be 1 parameter');\n        }\n        const allRoles = loadOrDefault(this.allDomains, domain[0], new Roles());\n        if (!allRoles.has(name1) || !allRoles.has(name2)) {\n            return;\n        }\n        const role1 = loadOrDefault(allRoles, name1, new Role(name1));\n        const role2 = loadOrDefault(allRoles, name2, new Role(name2));\n        role1.deleteRole(role2);\n    }\n    /**\n     * hasLink determines whether role: name1 inherits role: name2.\n     * domain is a prefix to the roles.\n     */\n    syncedHasLink(name1, name2, ...domain) {\n        if (domain.length === 0) {\n            domain = [DEFAULT_DOMAIN];\n        }\n        else if (domain.length > 1) {\n            throw new Error('error: domain should be 1 parameter');\n        }\n        if (name1 === name2) {\n            return true;\n        }\n        const allRoles = this.generateTempRoles(domain[0]);\n        if (!allRoles.hasRole(name1, this.matchingFunc) || !allRoles.hasRole(name2, this.matchingFunc)) {\n            return false;\n        }\n        const role1 = allRoles.createRole(name1, this.matchingFunc);\n        return role1.hasRole(name2, this.maxHierarchyLevel);\n    }\n    async hasLink(name1, name2, ...domain) {\n        return new Promise((resolve) => resolve(this.syncedHasLink(name1, name2, ...domain)));\n    }\n    /**\n     * getRoles gets the roles that a subject inherits.\n     * domain is a prefix to the roles.\n     */\n    async getRoles(name, ...domain) {\n        if (domain.length === 0) {\n            domain = [DEFAULT_DOMAIN];\n        }\n        else if (domain.length > 1) {\n            throw new Error('error: domain should be 1 parameter');\n        }\n        const allRoles = this.generateTempRoles(domain[0]);\n        if (!allRoles.hasRole(name, this.matchingFunc)) {\n            return [];\n        }\n        return allRoles.createRole(name, this.matchingFunc).getRoles();\n    }\n    /**\n     * getUsers gets the users that inherits a subject.\n     * domain is an unreferenced parameter here, may be used in other implementations.\n     */\n    async getUsers(name, ...domain) {\n        if (domain.length === 0) {\n            domain = [DEFAULT_DOMAIN];\n        }\n        else if (domain.length > 1) {\n            throw new Error('error: domain should be 1 parameter');\n        }\n        const allRoles = this.generateTempRoles(domain[0]);\n        if (!allRoles.hasRole(name, this.matchingFunc)) {\n            return [];\n        }\n        const users = [];\n        for (const user of allRoles.values()) {\n            if (user.hasDirectRole(name))\n                users.push(user.name);\n        }\n        return users;\n    }\n    /**\n     * printRoles prints all the roles to log.\n     */\n    async printRoles() {\n        if (getLogger().isEnable()) {\n            [...this.allDomains.values()].forEach((n) => {\n                logPrint(n.toString());\n            });\n        }\n    }\n    /**\n     * getDomains gets domains that a user has.\n     */\n    async getDomains(name) {\n        const domains = [];\n        this.allDomains.forEach((roles, domain) => {\n            // Skip the default domain if there are other domains\n            if (domain === DEFAULT_DOMAIN && this.allDomains.size > 1) {\n                return;\n            }\n            const role = roles.get(name);\n            if (role) {\n                // Check if role has any roles it inherits OR if any other role inherits from it\n                const hasRoles = role.getRoles().length > 0;\n                const hasUsers = this.hasUserForRole(roles, name);\n                if (hasRoles || hasUsers) {\n                    domains.push(domain);\n                }\n            }\n        });\n        return domains;\n    }\n    /**\n     * getAllDomains gets all domains.\n     */\n    async getAllDomains() {\n        const domains = Array.from(this.allDomains.keys());\n        // Filter out the default domain if there are other domains\n        if (domains.length > 1) {\n            return domains.filter((d) => d !== DEFAULT_DOMAIN);\n        }\n        return domains;\n    }\n    hasUserForRole(roles, name) {\n        for (const role of roles.values()) {\n            if (role.hasDirectRole(name)) {\n                return true;\n            }\n        }\n        return false;\n    }\n}\n","// Copyright 2018 The Casbin Authors. All Rights Reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\nimport * as util from '../util';\nimport { Config } from '../config';\nimport { Assertion } from './assertion';\nimport { getLogger, logPrint } from '../log';\nimport { DefaultRoleManager } from '../rbac';\nconst defaultDomain = '';\nconst defaultSeparator = '::';\nexport const sectionNameMap = {\n    r: 'request_definition',\n    p: 'policy_definition',\n    g: 'role_definition',\n    e: 'policy_effect',\n    m: 'matchers',\n};\nexport var PolicyOp;\n(function (PolicyOp) {\n    PolicyOp[PolicyOp[\"PolicyAdd\"] = 0] = \"PolicyAdd\";\n    PolicyOp[PolicyOp[\"PolicyRemove\"] = 1] = \"PolicyRemove\";\n})(PolicyOp || (PolicyOp = {}));\nexport const requiredSections = ['r', 'p', 'e', 'm'];\nexport class Model {\n    /**\n     * constructor is the constructor for Model.\n     */\n    constructor() {\n        this.model = new Map();\n    }\n    loadAssertion(cfg, sec, key) {\n        const secName = sectionNameMap[sec];\n        const value = cfg.getString(`${secName}::${key}`);\n        return this.addDef(sec, key, value);\n    }\n    getKeySuffix(i) {\n        if (i === 1) {\n            return '';\n        }\n        return i.toString();\n    }\n    loadSection(cfg, sec) {\n        let i = 1;\n        for (;;) {\n            if (!this.loadAssertion(cfg, sec, sec + this.getKeySuffix(i))) {\n                break;\n            }\n            else {\n                i++;\n            }\n        }\n    }\n    // addDef adds an assertion to the model.\n    addDef(sec, key, value) {\n        if (value === '') {\n            return false;\n        }\n        const ast = new Assertion();\n        ast.key = key;\n        ast.value = value;\n        ast.fieldIndexMap = new Map();\n        if (sec === 'r' || sec === 'p') {\n            const tokens = value.split(',').map((n) => n.trim());\n            for (let i = 0; i < tokens.length; i++) {\n                tokens[i] = key + '_' + tokens[i];\n            }\n            ast.tokens = tokens;\n        }\n        else if (sec === 'm') {\n            const stringArguments = value.match(/\\\"(.*?)\\\"/g) || [];\n            stringArguments.forEach((n, index) => {\n                value = value.replace(n, `$<${index}>`);\n            });\n            value = util.escapeAssertion(value);\n            stringArguments.forEach((n, index) => {\n                value = value.replace(`$<${index}>`, n);\n            });\n            const invalidOperators = /(?<![&|])&(?!&)|(?<![&|])\\|(?!\\|)|&{3,}|\\|{3,}/g;\n            if (invalidOperators.test(value)) {\n                throw new Error(`Invalid operator in matcher`);\n            }\n            ast.value = value;\n        }\n        else {\n            ast.value = util.escapeAssertion(value);\n        }\n        const nodeMap = this.model.get(sec);\n        if (nodeMap) {\n            nodeMap.set(key, ast);\n        }\n        else {\n            const assertionMap = new Map();\n            assertionMap.set(key, ast);\n            this.model.set(sec, assertionMap);\n        }\n        return true;\n    }\n    /**\n     * loadModel loads the model from model CONF file.\n     * @param path the model file path\n     * @param fs {@link FileSystem}\n     * @deprecated {@link loadModelFromFile}\n     */\n    loadModel(path, fs) {\n        this.loadModelFromFile(path, fs);\n    }\n    /**\n     * loadModelFromFile loads the model from model CONF file.\n     * @param path the model file path\n     * @param fs {@link FileSystem}\n     */\n    loadModelFromFile(path, fs) {\n        const cfg = Config.newConfigFromFile(path, fs);\n        this.loadModelFromConfig(cfg);\n    }\n    // loadModelFromText loads the model from the text.\n    loadModelFromText(text) {\n        const cfg = Config.newConfigFromText(text);\n        this.loadModelFromConfig(cfg);\n    }\n    loadModelFromConfig(cfg) {\n        for (const s in sectionNameMap) {\n            this.loadSection(cfg, s);\n        }\n        const ms = [];\n        requiredSections.forEach((n) => {\n            if (!this.hasSection(n)) {\n                ms.push(sectionNameMap[n]);\n            }\n        });\n        if (ms.length > 0) {\n            throw new Error(`missing required sections: ${ms.join(',')}`);\n        }\n    }\n    hasSection(sec) {\n        return this.model.get(sec) !== undefined;\n    }\n    // printModel prints the model to the log.\n    printModel() {\n        logPrint('Model:');\n        this.model.forEach((value, key) => {\n            value.forEach((ast, astKey) => {\n                logPrint(`${key}.${astKey}: ${ast.value}`);\n            });\n        });\n    }\n    // buildIncrementalRoleLinks provides incremental build the role inheritance relations.\n    async buildIncrementalRoleLinks(rm, op, sec, ptype, rules) {\n        var _a, _b;\n        if (sec === 'g') {\n            await ((_b = (_a = this.model.get(sec)) === null || _a === void 0 ? void 0 : _a.get(ptype)) === null || _b === void 0 ? void 0 : _b.buildIncrementalRoleLinks(rm, op, rules));\n        }\n    }\n    // buildRoleLinks initializes the roles in RBAC.\n    async buildRoleLinks(rmMap) {\n        const astMap = this.model.get('g');\n        if (!astMap) {\n            return;\n        }\n        for (const key of astMap.keys()) {\n            const ast = astMap.get(key);\n            let rm = rmMap.get(key);\n            if (!rm) {\n                rm = new DefaultRoleManager(10);\n                rmMap.set(key, rm);\n            }\n            await (ast === null || ast === void 0 ? void 0 : ast.buildRoleLinks(rm));\n        }\n    }\n    // clearPolicy clears all current policy.\n    clearPolicy() {\n        this.model.forEach((value, key) => {\n            if (key === 'p' || key === 'g') {\n                value.forEach((ast) => {\n                    ast.policy = [];\n                });\n            }\n        });\n    }\n    // getPolicy gets all rules in a policy.\n    getPolicy(sec, key) {\n        var _a;\n        const policy = [];\n        const ast = (_a = this.model.get(sec)) === null || _a === void 0 ? void 0 : _a.get(key);\n        if (ast) {\n            policy.push(...ast.policy);\n        }\n        return policy;\n    }\n    // hasPolicy determines whether a model has the specified policy rule.\n    hasPolicy(sec, key, rule) {\n        var _a;\n        const ast = (_a = this.model.get(sec)) === null || _a === void 0 ? void 0 : _a.get(key);\n        if (!ast) {\n            return false;\n        }\n        return ast.policy.some((n) => util.arrayEquals(n, rule));\n    }\n    // addPolicy adds a policy rule to the model.\n    addPolicy(sec, key, rule) {\n        var _a;\n        if (!this.hasPolicy(sec, key, rule)) {\n            const ast = (_a = this.model.get(sec)) === null || _a === void 0 ? void 0 : _a.get(key);\n            if (!ast) {\n                return false;\n            }\n            const policy = ast.policy;\n            const tokens = ast.tokens;\n            const priorityIndex = tokens.indexOf(`${key}_priority`);\n            if (priorityIndex !== -1) {\n                const priorityRule = rule[priorityIndex];\n                const insertIndex = policy.findIndex((oneRule) => oneRule[priorityIndex] >= priorityRule);\n                if (priorityIndex === -1) {\n                    policy.push(rule);\n                }\n                else {\n                    policy.splice(insertIndex, 0, rule);\n                }\n            }\n            else {\n                policy.push(rule);\n            }\n            return true;\n        }\n        return false;\n    }\n    // addPolicies adds policy rules to the model.\n    addPolicies(sec, ptype, rules) {\n        var _a;\n        const ast = (_a = this.model.get(sec)) === null || _a === void 0 ? void 0 : _a.get(ptype);\n        if (!ast) {\n            return [false, []];\n        }\n        for (const rule of rules) {\n            if (this.hasPolicy(sec, ptype, rule)) {\n                return [false, []];\n            }\n        }\n        const priorityFlag = ast.tokens.indexOf(`${ptype}_priority`) !== -1;\n        if (priorityFlag) {\n            rules.forEach((rule) => {\n                this.addPolicy(sec, ptype, rule);\n            });\n        }\n        else {\n            ast.policy = ast.policy.concat(rules);\n        }\n        return [true, rules];\n    }\n    // updatePolicy updates a policy from the model\n    updatePolicy(sec, ptype, oldRule, newRule) {\n        var _a;\n        const ast = (_a = this.model.get(sec)) === null || _a === void 0 ? void 0 : _a.get(ptype);\n        if (!ast) {\n            return false;\n        }\n        const index = ast.policy.findIndex((r) => util.arrayEquals(r, oldRule));\n        if (index === -1) {\n            return false;\n        }\n        const priorityIndex = ast.tokens.indexOf(`${ptype}_priority`);\n        if (priorityIndex !== -1) {\n            if (oldRule[priorityIndex] === newRule[priorityIndex]) {\n                ast.policy[index] = newRule;\n            }\n            else {\n                // this.removePolicy(sec, ptype, oldRule);\n                // this.addPolicy(sec, ptype, newRule);\n                throw new Error('new rule should have the same priority with old rule.');\n            }\n        }\n        else {\n            ast.policy[index] = newRule;\n        }\n        return true;\n    }\n    // removePolicy removes a policy rule from the model.\n    removePolicy(sec, key, rule) {\n        var _a;\n        if (this.hasPolicy(sec, key, rule)) {\n            const ast = (_a = this.model.get(sec)) === null || _a === void 0 ? void 0 : _a.get(key);\n            if (!ast) {\n                return false;\n            }\n            ast.policy = ast.policy.filter((r) => !util.arrayEquals(rule, r));\n            return true;\n        }\n        return false;\n    }\n    // removePolicies removes policy rules from the model.\n    removePolicies(sec, ptype, rules) {\n        var _a;\n        const effects = [];\n        const ast = (_a = this.model.get(sec)) === null || _a === void 0 ? void 0 : _a.get(ptype);\n        if (!ast) {\n            return [false, []];\n        }\n        for (const rule of rules) {\n            if (!this.hasPolicy(sec, ptype, rule)) {\n                return [false, []];\n            }\n        }\n        for (const rule of rules) {\n            ast.policy = ast.policy.filter((r) => {\n                const equals = util.arrayEquals(rule, r);\n                if (equals) {\n                    effects.push(r);\n                }\n                return !equals;\n            });\n        }\n        return [true, effects];\n    }\n    // getFilteredPolicy gets rules based on field filters from a policy.\n    getFilteredPolicy(sec, key, fieldIndex, ...fieldValues) {\n        var _a;\n        const res = [];\n        const ast = (_a = this.model.get(sec)) === null || _a === void 0 ? void 0 : _a.get(key);\n        if (!ast) {\n            return res;\n        }\n        for (const rule of ast.policy) {\n            let matched = true;\n            for (let i = 0; i < fieldValues.length; i++) {\n                const fieldValue = fieldValues[i];\n                if (fieldValue !== '' && rule[fieldIndex + i] !== fieldValue) {\n                    matched = false;\n                    break;\n                }\n            }\n            if (matched) {\n                res.push(rule);\n            }\n        }\n        return res;\n    }\n    // removeFilteredPolicy removes policy rules based on field filters from the model.\n    removeFilteredPolicy(sec, key, fieldIndex, ...fieldValues) {\n        var _a;\n        const res = [];\n        const effects = [];\n        let bool = false;\n        if (fieldValues.length === 0) {\n            return [false, effects];\n        }\n        const ast = (_a = this.model.get(sec)) === null || _a === void 0 ? void 0 : _a.get(key);\n        if (!ast) {\n            return [false, []];\n        }\n        for (const rule of ast.policy) {\n            let matched = true;\n            for (let i = 0; i < fieldValues.length; i++) {\n                const fieldValue = fieldValues[i];\n                if (fieldValue !== '' && rule[fieldIndex + i] !== fieldValue) {\n                    matched = false;\n                    break;\n                }\n            }\n            if (matched) {\n                bool = true;\n                effects.push(rule);\n            }\n            else {\n                res.push(rule);\n            }\n        }\n        if (effects.length !== 0) {\n            ast.policy = res;\n        }\n        return [bool, effects];\n    }\n    // getValuesForFieldInPolicy gets all values for a field for all rules in a policy, duplicated values are removed.\n    getValuesForFieldInPolicy(sec, key, fieldIndex) {\n        var _a;\n        const values = [];\n        const ast = (_a = this.model.get(sec)) === null || _a === void 0 ? void 0 : _a.get(key);\n        if (!ast) {\n            return values;\n        }\n        return util.arrayRemoveDuplicates(ast.policy.map((n) => n[fieldIndex]));\n    }\n    // getValuesForFieldInPolicyAllTypes gets all values for a field for all rules in a policy of all ptypes, duplicated values are removed.\n    getValuesForFieldInPolicyAllTypes(sec, fieldIndex) {\n        const values = [];\n        const ast = this.model.get(sec);\n        if (!ast) {\n            return values;\n        }\n        for (const ptype of ast.keys()) {\n            values.push(...this.getValuesForFieldInPolicy(sec, ptype, fieldIndex));\n        }\n        return util.arrayRemoveDuplicates(values);\n    }\n    // printPolicy prints the policy to log.\n    printPolicy() {\n        if (!getLogger().isEnable()) {\n            return;\n        }\n        logPrint('Policy:');\n        this.model.forEach((map, key) => {\n            if (key === 'p' || key === 'g') {\n                map.forEach((ast) => {\n                    logPrint(`key, : ${ast.value}, : , ${ast.policy}`);\n                });\n            }\n        });\n    }\n    /**\n     * return the field index in fieldMap, if no this field in fieldMap, add it.\n     */\n    getFieldIndex(ptype, field) {\n        var _a;\n        const assertion = (_a = this.model.get('p')) === null || _a === void 0 ? void 0 : _a.get(ptype);\n        if (!assertion) {\n            return -1;\n        }\n        let index = assertion.fieldIndexMap.get(field);\n        if (index) {\n            return index;\n        }\n        const pattern = ptype + '_' + field;\n        index = -1;\n        for (let i = 0; i < assertion.tokens.length; i++) {\n            if (assertion.tokens[i] === pattern) {\n                index = i;\n                break;\n            }\n        }\n        if (index === -1) {\n            return index;\n        }\n        assertion.fieldIndexMap.set(field, index);\n        return index;\n    }\n    /**\n     * sort policies by subject hieraichy\n     */\n    sortPoliciesBySubjectHierarchy() {\n        var _a, _b, _c;\n        if (((_b = (_a = this.model.get('e')) === null || _a === void 0 ? void 0 : _a.get('e')) === null || _b === void 0 ? void 0 : _b.value) !== \"subjectPriority(p_eft) || deny\" /* SUBJECT_PRIORITY */) {\n            return;\n        }\n        (_c = this.model.get('p')) === null || _c === void 0 ? void 0 : _c.forEach((assertion, ptype) => {\n            const domainIndex = this.getFieldIndex(ptype, \"dom\" /* Domain */);\n            const subIndex = this.getFieldIndex(ptype, \"sub\" /* Subject */);\n            // eslint-disable-next-line\n            const subjectHierarchyMap = this.getSubjectHierarchyMap(this.model.get('g').get('g').policy);\n            assertion.policy.sort((policyA, policyB) => {\n                const domainA = domainIndex === -1 ? defaultDomain : policyA[domainIndex];\n                const domainB = domainIndex === -1 ? defaultDomain : policyB[domainIndex];\n                // eslint-disable-next-line\n                const priorityA = subjectHierarchyMap.get(this.getNameWithDomain(domainA, policyA[subIndex]));\n                // eslint-disable-next-line\n                const priorityB = subjectHierarchyMap.get(this.getNameWithDomain(domainB, policyB[subIndex]));\n                return priorityB - priorityA;\n            });\n        });\n    }\n    /**\n     * Calculate the priority of each policy store in Map<string, number>\n     */\n    getSubjectHierarchyMap(groupPolicies) {\n        const subjectHierarchyMap = new Map();\n        if (!groupPolicies) {\n            return subjectHierarchyMap;\n        }\n        const policyMap = new Map();\n        let domain = defaultDomain;\n        groupPolicies.forEach((policy) => {\n            if (policy.length !== 2)\n                domain = policy[this.getFieldIndex('p', \"dom\" /* Domain */)];\n            const child = this.getNameWithDomain(domain, policy[this.getFieldIndex('p', \"sub\" /* Subject */)]);\n            const parent = this.getNameWithDomain(domain, policy[this.getFieldIndex('p', \"obj\" /* Object */)]);\n            policyMap.set(child, parent);\n            if (!subjectHierarchyMap.has(child)) {\n                subjectHierarchyMap.set(child, 0);\n            }\n            if (!subjectHierarchyMap.has(parent)) {\n                subjectHierarchyMap.set(parent, 0);\n            }\n            subjectHierarchyMap.set(child, 1);\n        });\n        const set = new Set();\n        subjectHierarchyMap.forEach((_, key) => {\n            if (subjectHierarchyMap.get(key) !== 0)\n                set.add(key);\n        });\n        while (set.size !== 0) {\n            for (const child of set.values()) {\n                this.findHierarchy(policyMap, subjectHierarchyMap, set, child);\n            }\n        }\n        return subjectHierarchyMap;\n    }\n    findHierarchy(policyMap, subjectHierarchyMap, set, child) {\n        set.delete(child);\n        // eslint-disable-next-line\n        const parent = policyMap.get(child);\n        if (set.has(parent)) {\n            this.findHierarchy(policyMap, subjectHierarchyMap, set, parent);\n        }\n        // eslint-disable-next-line\n        subjectHierarchyMap.set(child, subjectHierarchyMap.get(parent) + 10);\n    }\n    /**\n     * get full name with domain\n     */\n    getNameWithDomain(domain, name) {\n        return domain + defaultSeparator + name;\n    }\n}\n/**\n * newModel creates a model.\n */\nexport function newModel(...text) {\n    const m = new Model();\n    if (text.length === 2) {\n        if (text[0] !== '') {\n            m.loadModelFromFile(text[0]);\n        }\n    }\n    else if (text.length === 1) {\n        m.loadModelFromText(text[0]);\n    }\n    else if (text.length !== 0) {\n        throw new Error('Invalid parameters for model.');\n    }\n    return m;\n}\n/**\n * newModelFromFile creates a model from a .CONF file.\n */\nexport function newModelFromFile(path, fs) {\n    const m = new Model();\n    if (path) {\n        m.loadModelFromFile(path, fs);\n    }\n    return m;\n}\n/**\n * newModelFromString creates a model from a string which contains model text.\n */\nexport function newModelFromString(text) {\n    const m = new Model();\n    m.loadModelFromText(text);\n    return m;\n}\n","// Copyright 2017 The casbin Authors. All Rights Reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\nimport * as rbac from '../rbac';\nimport { logPrint } from '../log';\nimport { PolicyOp } from './model';\n// Assertion represents an expression in a section of the model.\n// For example: r = sub, obj, act\nexport class Assertion {\n    /**\n     * constructor is the constructor for Assertion.\n     */\n    constructor() {\n        this.key = '';\n        this.value = '';\n        this.tokens = [];\n        this.policy = [];\n        this.rm = new rbac.DefaultRoleManager(10);\n        this.fieldIndexMap = new Map();\n    }\n    async buildIncrementalRoleLinks(rm, op, rules) {\n        this.rm = rm;\n        const count = (this.value.match(/_/g) || []).length;\n        if (count < 2) {\n            throw new Error('the number of \"_\" in role definition should be at least 2');\n        }\n        for (let rule of rules) {\n            if (rule.length < count) {\n                throw new Error('grouping policy elements do not meet role definition');\n            }\n            if (rule.length > count) {\n                rule = rule.slice(0, count);\n            }\n            switch (op) {\n                case PolicyOp.PolicyAdd:\n                    await this.rm.addLink(rule[0], rule[1], ...rule.slice(2));\n                    break;\n                case PolicyOp.PolicyRemove:\n                    await this.rm.deleteLink(rule[0], rule[1], ...rule.slice(2));\n                    break;\n                default:\n                    throw new Error('unsupported operation');\n            }\n        }\n    }\n    async buildRoleLinks(rm) {\n        this.rm = rm;\n        const count = (this.value.match(/_/g) || []).length;\n        if (count < 2) {\n            throw new Error('the number of \"_\" in role definition should be at least 2');\n        }\n        for (let rule of this.policy) {\n            if (rule.length > count) {\n                rule = rule.slice(0, count);\n            }\n            await this.rm.addLink(rule[0], rule[1], ...rule.slice(2));\n        }\n        logPrint(`Role links for: ${this.key}`);\n        await this.rm.printRoles();\n    }\n}\n","// Copyright 2017 The casbin Authors. All Rights Reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\nimport * as util from '../util';\n// FunctionMap represents the collection of Function.\nexport class FunctionMap {\n    /**\n     * constructor is the constructor for FunctionMap.\n     */\n    constructor() {\n        this.functions = new Map();\n    }\n    // loadFunctionMap loads an initial function map.\n    static loadFunctionMap() {\n        const fm = new FunctionMap();\n        fm.addFunction('keyMatch', util.keyMatchFunc);\n        fm.addFunction('keyGet', util.keyGetFunc);\n        fm.addFunction('keyMatch2', util.keyMatch2Func);\n        fm.addFunction('keyGet2', util.keyGet2Func);\n        fm.addFunction('keyMatch3', util.keyMatch3Func);\n        fm.addFunction('keyMatch4', util.keyMatch4Func);\n        fm.addFunction('keyMatch5', util.keyMatch5Func);\n        fm.addFunction('regexMatch', util.regexMatchFunc);\n        fm.addFunction('ipMatch', util.ipMatchFunc);\n        fm.addFunction('globMatch', util.globMatch);\n        return fm;\n    }\n    // addFunction adds an expression function.\n    addFunction(name, func) {\n        if (!this.functions.get(name)) {\n            this.functions.set(name, func);\n        }\n    }\n    // getFunctions return all functions.\n    getFunctions() {\n        return this.functions;\n    }\n}\n","// Copyright 2023 The Casbin Authors. All Rights Reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\nexport class EnforceContext {\n    constructor(rType, pType, eType, mType) {\n        this.pType = pType;\n        this.eType = eType;\n        this.mType = mType;\n        this.rType = rType;\n    }\n}\nexport const newEnforceContext = (index) => {\n    return new EnforceContext('r' + index, 'p' + index, 'e' + index, 'm' + index);\n};\n","// Copyright 2018 The Casbin Authors. All Rights Reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\nimport { compile, compileAsync, addBinaryOp } from '@casbin/expression-eval';\nimport { DefaultEffector, Effect } from './effect';\nimport { FunctionMap, newModelFromFile } from './model';\nimport { DefaultRoleManager } from './rbac';\nimport { EnforceContext } from './enforceContext';\nimport { escapeAssertion, generateGFunction, generateSyncedGFunction, getEvalValue, hasEval, replaceEval, generatorRunSync, generatorRunAsync, customIn, bracketCompatible, removeComments, } from './util';\nimport { getLogger, logPrint } from './log';\n/**\n * CoreEnforcer defines the core functionality of an enforcer.\n */\nexport class CoreEnforcer {\n    constructor() {\n        this.fm = FunctionMap.loadFunctionMap();\n        this.eft = new DefaultEffector();\n        this.matcherMap = new Map();\n        this.defaultEnforceContext = new EnforceContext('r', 'p', 'e', 'm');\n        this.watcher = null;\n        this.watcherEx = null;\n        this.enabled = true;\n        this.autoSave = true;\n        this.autoBuildRoleLinks = true;\n        this.autoNotifyWatcher = true;\n        this.acceptJsonRequest = false;\n    }\n    /**\n     * setFileSystem sets a file system to read the model file or the policy file.\n     * @param fs {@link FileSystem}\n     */\n    setFileSystem(fs) {\n        this.fs = fs;\n    }\n    /**\n     * getFileSystem gets the file system,\n     */\n    getFileSystem() {\n        return this.fs;\n    }\n    getExpression(asyncCompile, exp) {\n        const matcherKey = `${asyncCompile ? 'ASYNC[' : 'SYNC['}${exp}]`;\n        addBinaryOp('in', 1, customIn);\n        let expression = this.matcherMap.get(matcherKey);\n        if (!expression) {\n            exp = bracketCompatible(exp);\n            expression = asyncCompile ? compileAsync(exp) : compile(exp);\n            this.matcherMap.set(matcherKey, expression);\n        }\n        return expression;\n    }\n    /**\n     * loadModel reloads the model from the model CONF file.\n     * Because the policy is attached to a model,\n     * so the policy is invalidated and needs to be reloaded by calling LoadPolicy().\n     */\n    loadModel() {\n        this.model = newModelFromFile(this.modelPath, this.fs);\n        this.model.printModel();\n    }\n    /**\n     * getModel gets the current model.\n     *\n     * @return the model of the enforcer.\n     */\n    getModel() {\n        return this.model;\n    }\n    /**\n     * setModel sets the current model.\n     *\n     * @param m the model.\n     */\n    setModel(m) {\n        this.model = m;\n    }\n    /**\n     * getAdapter gets the current adapter.\n     *\n     * @return the adapter of the enforcer.\n     */\n    getAdapter() {\n        return this.adapter;\n    }\n    /**\n     * setAdapter sets the current adapter.\n     *\n     * @param adapter the adapter.\n     */\n    setAdapter(adapter) {\n        this.adapter = adapter;\n    }\n    /**\n     * setWatcher sets the current watcher.\n     *\n     * @param watcher the watcher.\n     */\n    setWatcher(watcher) {\n        this.watcher = watcher;\n        watcher.setUpdateCallback(async () => await this.loadPolicy());\n    }\n    /**\n     * setWatcherEx sets the current watcherEx.\n     *\n     * @param watcherEx the watcherEx.\n     */\n    setWatcherEx(watcherEx) {\n        this.watcherEx = watcherEx;\n    }\n    /**\n     * setRoleManager sets the current role manager.\n     *\n     * @param rm the role manager.\n     */\n    setRoleManager(rm) {\n        this.rmMap.set('g', rm);\n    }\n    /**\n     * setRoleManager sets the role manager for the named policy.\n     *\n     * @param ptype the named policy.\n     * @param rm the role manager.\n     */\n    setNamedRoleManager(ptype, rm) {\n        this.rmMap.set(ptype, rm);\n    }\n    /**\n     * getRoleManager gets the current role manager.\n     */\n    getRoleManager() {\n        return this.rmMap.get('g');\n    }\n    /**\n     * getNamedRoleManager gets role manager by name.\n     */\n    getNamedRoleManager(name) {\n        return this.rmMap.get(name);\n    }\n    /**\n     * setEffector sets the current effector.\n     *\n     * @param eft the effector.\n     */\n    setEffector(eft) {\n        this.eft = eft;\n    }\n    /**\n     * clearPolicy clears all policy.\n     */\n    clearPolicy() {\n        this.model.clearPolicy();\n    }\n    initRmMap() {\n        this.rmMap = new Map();\n        const rm = this.model.model.get('g');\n        if (rm) {\n            for (const ptype of rm.keys()) {\n                this.rmMap.set(ptype, new DefaultRoleManager(10));\n            }\n        }\n    }\n    sortPolicies() {\n        var _a;\n        (_a = this.model.model.get('p')) === null || _a === void 0 ? void 0 : _a.forEach((value, key) => {\n            const policy = value.policy;\n            const tokens = value.tokens;\n            if (policy && tokens) {\n                const priorityIndex = tokens.indexOf(`${key}_priority`);\n                if (priorityIndex !== -1) {\n                    policy.sort((a, b) => {\n                        return parseInt(a[priorityIndex], 10) - parseInt(b[priorityIndex], 10);\n                    });\n                }\n            }\n        });\n    }\n    /**\n     * loadPolicy reloads the policy from file/database.\n     */\n    async loadPolicy() {\n        this.model.clearPolicy();\n        await this.adapter.loadPolicy(this.model);\n        this.sortPolicies();\n        this.model.sortPoliciesBySubjectHierarchy();\n        if (this.autoBuildRoleLinks) {\n            await this.buildRoleLinksInternal();\n        }\n    }\n    /**\n     * loadFilteredPolicy reloads a filtered policy from file/database.\n     *\n     * @param filter the filter used to specify which type of policy should be loaded.\n     */\n    // eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\n    async loadFilteredPolicy(filter) {\n        this.model.clearPolicy();\n        this.sortPolicies();\n        this.model.sortPoliciesBySubjectHierarchy();\n        return this.loadIncrementalFilteredPolicy(filter);\n    }\n    /**\n     * LoadIncrementalFilteredPolicy append a filtered policy from file/database.\n     *\n     * @param filter the filter used to specify which type of policy should be appended.\n     */\n    // eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\n    async loadIncrementalFilteredPolicy(filter) {\n        if ('isFiltered' in this.adapter) {\n            await this.adapter.loadFilteredPolicy(this.model, filter);\n        }\n        else {\n            throw new Error('filtered policies are not supported by this adapter');\n        }\n        this.sortPolicies();\n        if (this.autoBuildRoleLinks) {\n            await this.buildRoleLinksInternal();\n        }\n        return true;\n    }\n    /**\n     * isFiltered returns true if the loaded policy has been filtered.\n     *\n     * @return if the loaded policy has been filtered.\n     */\n    isFiltered() {\n        if ('isFiltered' in this.adapter) {\n            return this.adapter.isFiltered();\n        }\n        return false;\n    }\n    /**\n     * savePolicy saves the current policy (usually after changed with\n     * Casbin API) back to file/database.\n     */\n    async savePolicy() {\n        if (this.isFiltered()) {\n            throw new Error('Cannot save a filtered policy');\n        }\n        const flag = await this.adapter.savePolicy(this.model);\n        if (!flag) {\n            return false;\n        }\n        if (this.watcherEx) {\n            return await this.watcherEx.updateForSavePolicy(this.model);\n        }\n        else if (this.watcher) {\n            return await this.watcher.update();\n        }\n        return true;\n    }\n    /**\n     * enableEnforce changes the enforcing state of Casbin, when Casbin is\n     * disabled, all access will be allowed by the enforce() function.\n     *\n     * @param enable whether to enable the enforcer.\n     */\n    enableEnforce(enable) {\n        this.enabled = enable;\n    }\n    /**\n     * enableLog changes whether to print Casbin log to the standard output.\n     *\n     * @param enable whether to enable Casbin's log.\n     */\n    enableLog(enable) {\n        getLogger().enableLog(enable);\n    }\n    /**\n     * enableAutoSave controls whether to save a policy rule automatically to\n     * the adapter when it is added or removed.\n     *\n     * @param autoSave whether to enable the AutoSave feature.\n     */\n    enableAutoSave(autoSave) {\n        this.autoSave = autoSave;\n    }\n    /**\n     * enableAutoNotifyWatcher controls whether to save a policy rule automatically notify the Watcher when it is added or removed.\n     * @param enable whether to enable the AutoNotifyWatcher feature.\n     */\n    enableAutoNotifyWatcher(enable) {\n        this.autoNotifyWatcher = enable;\n    }\n    /**\n     * enableAcceptJsonRequest determines whether to attempt parsing request args as JSON\n     *\n     * @param enable whether to attempt parsing request args as JSON\n     */\n    enableAcceptJsonRequest(enable) {\n        this.acceptJsonRequest = enable;\n    }\n    /**\n     * enableAutoBuildRoleLinks controls whether to save a policy rule\n     * automatically to the adapter when it is added or removed.\n     *\n     * @param autoBuildRoleLinks whether to automatically build the role links.\n     */\n    enableAutoBuildRoleLinks(autoBuildRoleLinks) {\n        this.autoBuildRoleLinks = autoBuildRoleLinks;\n    }\n    /**\n     * add matching function to RoleManager by ptype\n     * @param ptype g\n     * @param fn the function will be added\n     */\n    async addNamedMatchingFunc(ptype, fn) {\n        const rm = this.rmMap.get(ptype);\n        if (rm) {\n            return await rm.addMatchingFunc(fn);\n        }\n        throw Error('Target ptype not found.');\n    }\n    /**\n     * add domain matching function to RoleManager by ptype\n     * @param ptype g\n     * @param fn the function will be added\n     */\n    async addNamedDomainMatchingFunc(ptype, fn) {\n        const rm = this.rmMap.get(ptype);\n        if (rm) {\n            return await rm.addDomainMatchingFunc(fn);\n        }\n    }\n    /**\n     * buildRoleLinks manually rebuild the role inheritance relations.\n     */\n    async buildRoleLinks() {\n        return this.buildRoleLinksInternal();\n    }\n    /**\n     * buildIncrementalRoleLinks provides incremental build the role inheritance relations.\n     * @param op policy operation\n     * @param ptype g\n     * @param rules policies\n     */\n    async buildIncrementalRoleLinks(op, ptype, rules) {\n        let rm = this.rmMap.get(ptype);\n        if (!rm) {\n            rm = new DefaultRoleManager(10);\n            this.rmMap.set(ptype, rm);\n        }\n        await this.model.buildIncrementalRoleLinks(rm, op, 'g', ptype, rules);\n    }\n    async buildRoleLinksInternal() {\n        for (const rm of this.rmMap.values()) {\n            await rm.clear();\n            await this.model.buildRoleLinks(this.rmMap);\n        }\n    }\n    *privateEnforce(asyncCompile = true, explain = false, matcher, enforceContext = new EnforceContext('r', 'p', 'e', 'm'), ...rvals) {\n        var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k;\n        if (!this.enabled) {\n            return true;\n        }\n        let explainIndex = -1;\n        const functions = {};\n        this.fm.getFunctions().forEach((value, key) => {\n            functions[key] = value;\n        });\n        const astMap = this.model.model.get('g');\n        astMap === null || astMap === void 0 ? void 0 : astMap.forEach((value, key) => {\n            const rm = value.rm;\n            functions[key] = asyncCompile ? generateGFunction(rm) : generateSyncedGFunction(rm);\n        });\n        let expString;\n        if (!matcher) {\n            expString = (_b = (_a = this.model.model.get('m')) === null || _a === void 0 ? void 0 : _a.get(enforceContext.mType)) === null || _b === void 0 ? void 0 : _b.value;\n        }\n        else {\n            expString = removeComments(escapeAssertion(matcher));\n        }\n        if (!expString) {\n            throw new Error('Unable to find matchers in model');\n        }\n        const effectExpr = (_d = (_c = this.model.model.get('e')) === null || _c === void 0 ? void 0 : _c.get(enforceContext.eType)) === null || _d === void 0 ? void 0 : _d.value;\n        if (!effectExpr) {\n            throw new Error('Unable to find policy_effect in model');\n        }\n        const HasEval = hasEval(expString);\n        let expression = undefined;\n        const p = (_e = this.model.model.get('p')) === null || _e === void 0 ? void 0 : _e.get(enforceContext.pType);\n        const policyLen = (_f = p === null || p === void 0 ? void 0 : p.policy) === null || _f === void 0 ? void 0 : _f.length;\n        const rTokens = (_h = (_g = this.model.model.get('r')) === null || _g === void 0 ? void 0 : _g.get(enforceContext.rType)) === null || _h === void 0 ? void 0 : _h.tokens;\n        const rTokensLen = rTokens === null || rTokens === void 0 ? void 0 : rTokens.length;\n        const effectStream = this.eft.newStream(effectExpr);\n        if (policyLen && policyLen !== 0 && expString.includes(`${enforceContext.pType}_`)) {\n            for (let i = 0; i < policyLen; i++) {\n                const parameters = {};\n                if ((rTokens === null || rTokens === void 0 ? void 0 : rTokens.length) !== rvals.length) {\n                    throw new Error(`invalid request size: expected ${rTokensLen}, got ${rvals.length}, rvals: ${rvals}\"`);\n                }\n                if (this.acceptJsonRequest) {\n                    // Attempt to parse each request parameter as JSON; continue with string if failed\n                    rTokens.forEach((token, j) => {\n                        try {\n                            parameters[token] = JSON.parse(rvals[j]);\n                        }\n                        catch (_a) {\n                            parameters[token] = rvals[j];\n                        }\n                    });\n                }\n                else {\n                    rTokens.forEach((token, j) => {\n                        parameters[token] = rvals[j];\n                    });\n                }\n                p === null || p === void 0 ? void 0 : p.tokens.forEach((token, j) => {\n                    parameters[token] = p === null || p === void 0 ? void 0 : p.policy[i][j];\n                });\n                if (HasEval) {\n                    const ruleNames = getEvalValue(expString);\n                    let expWithRule = expString;\n                    for (const ruleName of ruleNames) {\n                        if (ruleName in parameters) {\n                            const rule = escapeAssertion(parameters[ruleName]);\n                            expWithRule = replaceEval(expWithRule, ruleName, rule);\n                        }\n                        else {\n                            throw new Error(`${ruleName} not in ${parameters}`);\n                        }\n                    }\n                    expression = this.getExpression(asyncCompile, expWithRule);\n                }\n                else {\n                    if (expression === undefined) {\n                        expression = this.getExpression(asyncCompile, expString);\n                    }\n                }\n                const context = Object.assign(Object.assign({}, parameters), functions);\n                const result = asyncCompile ? yield expression(context) : expression(context);\n                let eftRes;\n                switch (typeof result) {\n                    case 'boolean':\n                        eftRes = result ? Effect.Allow : Effect.Indeterminate;\n                        break;\n                    case 'number':\n                        if (result === 0) {\n                            eftRes = Effect.Indeterminate;\n                        }\n                        else {\n                            eftRes = result;\n                        }\n                        break;\n                    case 'string':\n                        if (result === '') {\n                            eftRes = Effect.Indeterminate;\n                        }\n                        else {\n                            eftRes = Effect.Allow;\n                        }\n                        break;\n                    default:\n                        throw new Error('matcher result should only be of type boolean, number, or string');\n                }\n                const eft = parameters[`${enforceContext.pType}_eft`];\n                if (eft && eftRes === Effect.Allow) {\n                    if (eft === 'allow') {\n                        eftRes = Effect.Allow;\n                    }\n                    else if (eft === 'deny') {\n                        eftRes = Effect.Deny;\n                    }\n                    else {\n                        eftRes = Effect.Indeterminate;\n                    }\n                }\n                const [res, rec, done] = effectStream.pushEffect(eftRes);\n                if (rec) {\n                    explainIndex = i;\n                }\n                if (done) {\n                    break;\n                }\n            }\n        }\n        else {\n            explainIndex = 0;\n            const parameters = {};\n            rTokens === null || rTokens === void 0 ? void 0 : rTokens.forEach((token, j) => {\n                parameters[token] = rvals[j];\n            });\n            (_j = p === null || p === void 0 ? void 0 : p.tokens) === null || _j === void 0 ? void 0 : _j.forEach((token) => {\n                parameters[token] = '';\n            });\n            expression = this.getExpression(asyncCompile, expString);\n            const context = Object.assign(Object.assign({}, parameters), functions);\n            const result = asyncCompile ? yield expression(context) : expression(context);\n            if (result) {\n                effectStream.pushEffect(Effect.Allow);\n            }\n            else {\n                effectStream.pushEffect(Effect.Indeterminate);\n            }\n        }\n        const res = effectStream.current();\n        // only generate the request --> result string if the message\n        // is going to be logged.\n        if (getLogger().isEnable()) {\n            let reqStr = 'Request: ';\n            for (let i = 0; i < rvals.length; i++) {\n                if (i !== rvals.length - 1) {\n                    reqStr += `${rvals[i]}, `;\n                }\n                else {\n                    reqStr += rvals[i];\n                }\n            }\n            reqStr += ` ---> ${res}`;\n            logPrint(reqStr);\n        }\n        if (explain) {\n            if (explainIndex === -1) {\n                return [res, []];\n            }\n            return [res, ((_k = p === null || p === void 0 ? void 0 : p.policy) === null || _k === void 0 ? void 0 : _k[explainIndex]) || []];\n        }\n        return res;\n    }\n    /**\n     * If the matchers does not contain an asynchronous method, call it faster.\n     *\n     * enforceSync decides whether a \"subject\" can access a \"object\" with\n     * the operation \"action\", input parameters are usually: (sub, obj, act).\n     *\n     * @param rvals the request needs to be mediated, usually an array\n     *              of strings, can be class instances if ABAC is used.\n     * @return whether to allow the request.\n     */\n    enforceSync(...rvals) {\n        if (rvals[0] instanceof EnforceContext) {\n            const enforceContext = rvals.shift();\n            return generatorRunSync(this.privateEnforce(false, false, '', enforceContext, ...rvals));\n        }\n        return generatorRunSync(this.privateEnforce(false, false, '', this.defaultEnforceContext, ...rvals));\n    }\n    /**\n     * If the matchers does not contain an asynchronous method, call it faster.\n     *\n     * enforceSync decides whether a \"subject\" can access a \"object\" with\n     * the operation \"action\", input parameters are usually: (sub, obj, act).\n     *\n     * @param rvals the request needs to be mediated, usually an array\n     *              of strings, can be class instances if ABAC is used.\n     * @return whether to allow the request and the reason rule.\n     */\n    enforceExSync(...rvals) {\n        if (rvals[0] instanceof EnforceContext) {\n            const enforceContext = rvals.shift();\n            return generatorRunSync(this.privateEnforce(false, true, '', enforceContext, ...rvals));\n        }\n        return generatorRunSync(this.privateEnforce(false, true, '', this.defaultEnforceContext, ...rvals));\n    }\n    /**\n     * Same as enforceSync. To be removed.\n     */\n    enforceWithSyncCompile(...rvals) {\n        return this.enforceSync(...rvals);\n    }\n    /**\n     * enforce decides whether a \"subject\" can access a \"object\" with\n     * the operation \"action\", input parameters are usually: (sub, obj, act).\n     *\n     * @param rvals the request needs to be mediated, usually an array\n     *              of strings, can be class instances if ABAC is used.\n     * @return whether to allow the request.\n     */\n    async enforce(...rvals) {\n        if (rvals[0] instanceof EnforceContext) {\n            const enforceContext = rvals.shift();\n            return generatorRunAsync(this.privateEnforce(true, false, '', enforceContext, ...rvals));\n        }\n        return generatorRunAsync(this.privateEnforce(true, false, '', this.defaultEnforceContext, ...rvals));\n    }\n    /**\n     * enforceWithMatcher decides whether a \"subject\" can access a \"object\" with\n     * the operation \"action\" but with the matcher passed,\n     * input parameters are usually: (matcher, sub, obj, act).\n     *\n     * @param matcher matcher string.\n     * @param rvals the request needs to be mediated, usually an array\n     *              of strings, can be class instances if ABAC is used.\n     * @return whether to allow the request.\n     */\n    async enforceWithMatcher(matcher, ...rvals) {\n        if (rvals[0] instanceof EnforceContext) {\n            const enforceContext = rvals.shift();\n            return generatorRunAsync(this.privateEnforce(true, false, matcher, enforceContext, ...rvals));\n        }\n        return generatorRunAsync(this.privateEnforce(true, false, matcher, this.defaultEnforceContext, ...rvals));\n    }\n    /**\n     * enforce decides whether a \"subject\" can access a \"object\" with\n     * the operation \"action\", input parameters are usually: (sub, obj, act).\n     *\n     * @param rvals the request needs to be mediated, usually an array\n     *              of strings, can be class instances if ABAC is used.\n     * @return whether to allow the request and the reason rule.\n     */\n    async enforceEx(...rvals) {\n        if (rvals[0] instanceof EnforceContext) {\n            const enforceContext = rvals.shift();\n            return generatorRunAsync(this.privateEnforce(true, true, '', enforceContext, ...rvals));\n        }\n        return generatorRunAsync(this.privateEnforce(true, true, '', this.defaultEnforceContext, ...rvals));\n    }\n    /**\n     * enforceExWithMatcher decides whether a \"subject\" can access a \"object\" with\n     * the operation \"action\" but with the matcher passed,\n     *  input parameters are usually: (matcher, sub, obj, act).\n     *\n     * @param matcher matcher string.\n     * @param rvals the request needs to be mediated, usually an array\n     *              of strings, can be class instances if ABAC is used.\n     * @return whether to allow the request and the reason rule.\n     */\n    async enforceExWithMatcher(matcher, ...rvals) {\n        if (rvals[0] instanceof EnforceContext) {\n            const enforceContext = rvals.shift();\n            return generatorRunAsync(this.privateEnforce(true, true, matcher, enforceContext, ...rvals));\n        }\n        return generatorRunAsync(this.privateEnforce(true, true, matcher, this.defaultEnforceContext, ...rvals));\n    }\n    /**\n     * batchEnforce enforces each request and returns result in a bool array.\n     * @param rvals the request need to be mediated, usually an array\n     *              of array of strings, can be class instances if ABAC is used.\n     * @returns whether to allow the requests.\n     */\n    async batchEnforce(rvals) {\n        return await Promise.all(rvals.map((rval) => this.enforce(...rval)));\n    }\n}\n","// Copyright 2018 The Casbin Authors. All Rights Reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\nimport { CoreEnforcer } from './coreEnforcer';\nimport { PolicyOp } from './model';\n/**\n * InternalEnforcer = CoreEnforcer + Internal API.\n */\nexport class InternalEnforcer extends CoreEnforcer {\n    /**\n     * addPolicyInternal adds a rule to the current policy.\n     */\n    async addPolicyInternal(sec, ptype, rule, useWatcher) {\n        if (this.model.hasPolicy(sec, ptype, rule)) {\n            return false;\n        }\n        // Persist when an adapter is configured and autoSave is enabled.\n        if (this.adapter && this.autoSave) {\n            try {\n                await this.adapter.addPolicy(sec, ptype, rule);\n            }\n            catch (e) {\n                if (e.message !== 'not implemented') {\n                    throw e;\n                }\n            }\n        }\n        if (useWatcher) {\n            if (this.autoNotifyWatcher) {\n                // error intentionally ignored\n                if (this.watcherEx) {\n                    this.watcherEx.updateForAddPolicy(sec, ptype, ...rule);\n                }\n                else if (this.watcher) {\n                    this.watcher.update();\n                }\n            }\n        }\n        const ok = this.model.addPolicy(sec, ptype, rule);\n        if (sec === 'g' && ok) {\n            await this.buildIncrementalRoleLinks(PolicyOp.PolicyAdd, ptype, [rule]);\n        }\n        return ok;\n    }\n    // addPolicies adds rules to the current policy.\n    // removePolicies removes rules from the current policy.\n    async addPoliciesInternal(sec, ptype, rules, useWatcher) {\n        for (const rule of rules) {\n            if (this.model.hasPolicy(sec, ptype, rule)) {\n                return false;\n            }\n        }\n        // Persist when an adapter is configured and autoSave is enabled.\n        if (this.adapter && this.autoSave) {\n            if ('addPolicies' in this.adapter) {\n                try {\n                    await this.adapter.addPolicies(sec, ptype, rules);\n                }\n                catch (e) {\n                    if (e.message !== 'not implemented') {\n                        throw e;\n                    }\n                }\n            }\n            else {\n                throw new Error('cannot to save policy, the adapter does not implement the BatchAdapter');\n            }\n        }\n        if (useWatcher) {\n            if (this.autoNotifyWatcher) {\n                // error intentionally ignored\n                if (this.watcherEx) {\n                    this.watcherEx.updateForAddPolicies(sec, ptype, ...rules);\n                }\n                else if (this.watcher) {\n                    this.watcher.update();\n                }\n            }\n        }\n        const [ok, effects] = await this.model.addPolicies(sec, ptype, rules);\n        if (sec === 'g' && ok && (effects === null || effects === void 0 ? void 0 : effects.length)) {\n            await this.buildIncrementalRoleLinks(PolicyOp.PolicyAdd, ptype, effects);\n        }\n        return ok;\n    }\n    /**\n     * addPoliciesInternalEx adds rules to the current policy.\n     * Unlike addPoliciesInternal, this method will filter out rules that already exist\n     * and continue to add the remaining rules instead of returning false immediately.\n     */\n    async addPoliciesInternalEx(sec, ptype, rules, useWatcher) {\n        // Filter out existing rules\n        const newRules = rules.filter((rule) => !this.model.hasPolicy(sec, ptype, rule));\n        // If no new rules to add, return false\n        if (newRules.length === 0) {\n            return false;\n        }\n        // Persist when an adapter is configured and autoSave is enabled.\n        if (this.adapter && this.autoSave) {\n            if ('addPolicies' in this.adapter) {\n                try {\n                    await this.adapter.addPolicies(sec, ptype, newRules);\n                }\n                catch (e) {\n                    if (e.message !== 'not implemented') {\n                        throw e;\n                    }\n                }\n            }\n            else {\n                throw new Error('cannot save policy, the adapter does not implement the BatchAdapter');\n            }\n        }\n        if (useWatcher) {\n            if (this.autoNotifyWatcher) {\n                // error intentionally ignored\n                if (this.watcherEx) {\n                    this.watcherEx.updateForAddPolicies(sec, ptype, ...newRules);\n                }\n                else if (this.watcher) {\n                    this.watcher.update();\n                }\n            }\n        }\n        const [ok, effects] = await this.model.addPolicies(sec, ptype, newRules);\n        if (sec === 'g' && ok && (effects === null || effects === void 0 ? void 0 : effects.length)) {\n            await this.buildIncrementalRoleLinks(PolicyOp.PolicyAdd, ptype, effects);\n        }\n        return ok;\n    }\n    /**\n     * updatePolicyInternal updates a rule from the current policy.\n     */\n    async updatePolicyInternal(sec, ptype, oldRule, newRule, useWatcher) {\n        if (!this.model.hasPolicy(sec, ptype, oldRule)) {\n            return false;\n        }\n        // Persist when an adapter is configured and autoSave is enabled.\n        if (this.adapter && this.autoSave) {\n            if ('updatePolicy' in this.adapter) {\n                try {\n                    await this.adapter.updatePolicy(sec, ptype, oldRule, newRule);\n                }\n                catch (e) {\n                    if (e.message !== 'not implemented') {\n                        throw e;\n                    }\n                }\n            }\n            else {\n                throw new Error('cannot to update policy, the adapter does not implement the UpdatableAdapter');\n            }\n        }\n        if (useWatcher) {\n            if (this.autoNotifyWatcher) {\n                // In fact I think it should wait for the respond, but they implement add_policy() like this\n                // error intentionally ignored\n                if (this.watcher) {\n                    this.watcher.update();\n                }\n            }\n        }\n        const ok = this.model.updatePolicy(sec, ptype, oldRule, newRule);\n        if (sec === 'g' && ok) {\n            await this.buildIncrementalRoleLinks(PolicyOp.PolicyRemove, ptype, [oldRule]);\n            await this.buildIncrementalRoleLinks(PolicyOp.PolicyAdd, ptype, [newRule]);\n        }\n        return ok;\n    }\n    /**\n     * removePolicyInternal removes a rule from the current policy.\n     */\n    async removePolicyInternal(sec, ptype, rule, useWatcher) {\n        if (!this.model.hasPolicy(sec, ptype, rule)) {\n            return false;\n        }\n        // Persist when an adapter is configured and autoSave is enabled.\n        if (this.adapter && this.autoSave) {\n            try {\n                await this.adapter.removePolicy(sec, ptype, rule);\n            }\n            catch (e) {\n                if (e.message !== 'not implemented') {\n                    throw e;\n                }\n            }\n        }\n        if (useWatcher) {\n            if (this.autoNotifyWatcher) {\n                // error intentionally ignored\n                if (this.watcherEx) {\n                    this.watcherEx.updateForRemovePolicy(sec, ptype, ...rule);\n                }\n                else if (this.watcher) {\n                    this.watcher.update();\n                }\n            }\n        }\n        const ok = await this.model.removePolicy(sec, ptype, rule);\n        if (sec === 'g' && ok) {\n            await this.buildIncrementalRoleLinks(PolicyOp.PolicyRemove, ptype, [rule]);\n        }\n        return ok;\n    }\n    // removePolicies removes rules from the current policy.\n    async removePoliciesInternal(sec, ptype, rules, useWatcher) {\n        for (const rule of rules) {\n            if (!this.model.hasPolicy(sec, ptype, rule)) {\n                return false;\n            }\n        }\n        // Persist when an adapter is configured and autoSave is enabled.\n        if (this.adapter && this.autoSave) {\n            if ('removePolicies' in this.adapter) {\n                try {\n                    await this.adapter.removePolicies(sec, ptype, rules);\n                }\n                catch (e) {\n                    if (e.message !== 'not implemented') {\n                        throw e;\n                    }\n                }\n            }\n            else {\n                throw new Error('cannot to save policy, the adapter does not implement the BatchAdapter');\n            }\n        }\n        if (useWatcher) {\n            if (this.autoNotifyWatcher) {\n                // error intentionally ignored\n                if (this.watcherEx) {\n                    this.watcherEx.updateForRemovePolicies(sec, ptype, ...rules);\n                }\n                else if (this.watcher) {\n                    this.watcher.update();\n                }\n            }\n        }\n        const [ok, effects] = this.model.removePolicies(sec, ptype, rules);\n        if (sec === 'g' && ok && (effects === null || effects === void 0 ? void 0 : effects.length)) {\n            await this.buildIncrementalRoleLinks(PolicyOp.PolicyRemove, ptype, effects);\n        }\n        return ok;\n    }\n    /**\n     * removeFilteredPolicyInternal removes rules based on field filters from the current policy.\n     */\n    async removeFilteredPolicyInternal(sec, ptype, fieldIndex, fieldValues, useWatcher) {\n        // Persist when an adapter is configured and autoSave is enabled.\n        if (this.adapter && this.autoSave) {\n            try {\n                await this.adapter.removeFilteredPolicy(sec, ptype, fieldIndex, ...fieldValues);\n            }\n            catch (e) {\n                if (e.message !== 'not implemented') {\n                    throw e;\n                }\n            }\n        }\n        if (useWatcher) {\n            if (this.autoNotifyWatcher) {\n                // error intentionally ignored\n                if (this.watcherEx) {\n                    this.watcherEx.updateForRemoveFilteredPolicy(sec, ptype, fieldIndex, ...fieldValues);\n                }\n                else if (this.watcher) {\n                    this.watcher.update();\n                }\n            }\n        }\n        const [ok, effects] = this.model.removeFilteredPolicy(sec, ptype, fieldIndex, ...fieldValues);\n        if (sec === 'g' && ok && (effects === null || effects === void 0 ? void 0 : effects.length)) {\n            await this.buildIncrementalRoleLinks(PolicyOp.PolicyRemove, ptype, effects);\n        }\n        return ok;\n    }\n    /**\n     * get field index in model.fieldMap.\n     */\n    getFieldIndex(ptype, field) {\n        return this.model.getFieldIndex(ptype, field);\n    }\n    /**\n     *  set index of field\n     */\n    setFieldIndex(ptype, field, index) {\n        var _a;\n        const assertion = (_a = this.model.model.get('p')) === null || _a === void 0 ? void 0 : _a.get(ptype);\n        assertion === null || assertion === void 0 ? void 0 : assertion.fieldIndexMap.set(field, index);\n    }\n    async addPolicyWithoutNotify(sec, ptype, rule) {\n        if (this.model.hasPolicy(sec, ptype, rule)) {\n            return false;\n        }\n        const ok = this.model.addPolicy(sec, ptype, rule);\n        if (sec === 'g' && ok) {\n            await this.buildIncrementalRoleLinks(PolicyOp.PolicyAdd, ptype, [rule]);\n        }\n        return ok;\n    }\n    async addPoliciesWithoutNotify(sec, ptype, rules) {\n        for (const rule of rules) {\n            if (this.model.hasPolicy(sec, ptype, rule)) {\n                return false;\n            }\n        }\n        const [ok, effects] = await this.model.addPolicies(sec, ptype, rules);\n        if (sec === 'g' && ok && (effects === null || effects === void 0 ? void 0 : effects.length)) {\n            await this.buildIncrementalRoleLinks(PolicyOp.PolicyAdd, ptype, effects);\n        }\n        return ok;\n    }\n    async addPoliciesWithoutNotifyEx(sec, ptype, rules) {\n        const newRules = rules.filter((rule) => !this.model.hasPolicy(sec, ptype, rule));\n        if (newRules.length === 0) {\n            return false;\n        }\n        const [ok, effects] = await this.model.addPolicies(sec, ptype, newRules);\n        if (sec === 'g' && ok && (effects === null || effects === void 0 ? void 0 : effects.length)) {\n            await this.buildIncrementalRoleLinks(PolicyOp.PolicyAdd, ptype, effects);\n        }\n        return ok;\n    }\n    async updatePolicyWithoutNotify(sec, ptype, oldRule, newRule) {\n        if (!this.model.hasPolicy(sec, ptype, oldRule)) {\n            return false;\n        }\n        const ok = this.model.updatePolicy(sec, ptype, oldRule, newRule);\n        if (sec === 'g' && ok) {\n            await this.buildIncrementalRoleLinks(PolicyOp.PolicyRemove, ptype, [oldRule]);\n            await this.buildIncrementalRoleLinks(PolicyOp.PolicyAdd, ptype, [newRule]);\n        }\n        return ok;\n    }\n    async removePolicyWithoutNotify(sec, ptype, rule) {\n        if (!this.model.hasPolicy(sec, ptype, rule)) {\n            return false;\n        }\n        const ok = await this.model.removePolicy(sec, ptype, rule);\n        if (sec === 'g' && ok) {\n            await this.buildIncrementalRoleLinks(PolicyOp.PolicyRemove, ptype, [rule]);\n        }\n        return ok;\n    }\n    async removePoliciesWithoutNotify(sec, ptype, rules) {\n        for (const rule of rules) {\n            if (!this.model.hasPolicy(sec, ptype, rule)) {\n                return false;\n            }\n        }\n        const [ok, effects] = this.model.removePolicies(sec, ptype, rules);\n        if (sec === 'g' && ok && (effects === null || effects === void 0 ? void 0 : effects.length)) {\n            await this.buildIncrementalRoleLinks(PolicyOp.PolicyRemove, ptype, effects);\n        }\n        return ok;\n    }\n    async removeFilteredPolicyWithoutNotify(sec, ptype, fieldIndex, fieldValues) {\n        const [ok, effects] = this.model.removeFilteredPolicy(sec, ptype, fieldIndex, ...fieldValues);\n        if (sec === 'g' && ok && (effects === null || effects === void 0 ? void 0 : effects.length)) {\n            await this.buildIncrementalRoleLinks(PolicyOp.PolicyRemove, ptype, effects);\n        }\n        return ok;\n    }\n    async updatePoliciesWithoutNotify(sec, ptype, oldRules, newRules) {\n        // Mirror the Go updatePoliciesWithoutNotify; reuse the existing internal flow.\n        // Because updatePoliciesInternal isn't implemented yet, fall back to per-item updates.\n        if (oldRules.length !== newRules.length) {\n            throw new Error('the length of oldRules should be equal to the length of newRules');\n        }\n        for (let i = 0; i < oldRules.length; i++) {\n            const ok = await this.updatePolicyWithoutNotify(sec, ptype, oldRules[i], newRules[i]);\n            if (!ok) {\n                return false;\n            }\n        }\n        return true;\n    }\n}\n","// Copyright 2018 The Casbin Authors. All Rights Reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\nimport { InternalEnforcer } from './internalEnforcer';\n/**\n * ManagementEnforcer = InternalEnforcer + Management API.\n */\nexport class ManagementEnforcer extends InternalEnforcer {\n    /**\n     * getAllSubjects gets the list of subjects that show up in the current policy.\n     *\n     * @return all the subjects in \"p\" policy rules. It actually collects the\n     *         0-index elements of \"p\" policy rules. So make sure your subject\n     *         is the 0-index element, like (sub, obj, act). Duplicates are removed.\n     */\n    async getAllSubjects() {\n        return this.getAllNamedSubjects('p');\n    }\n    /**\n     * getAllNamedSubjects gets the list of subjects that show up in the currentnamed policy.\n     *\n     * @param ptype the policy type, can be \"p\", \"p2\", \"p3\", ..\n     * @return all the subjects in policy rules of the ptype type. It actually\n     *         collects the 0-index elements of the policy rules. So make sure\n     *         your subject is the 0-index element, like (sub, obj, act).\n     *         Duplicates are removed.\n     */\n    async getAllNamedSubjects(ptype) {\n        return this.model.getValuesForFieldInPolicy('p', ptype, 0);\n    }\n    /**\n     * getAllObjects gets the list of objects that show up in the current policy.\n     *\n     * @return all the objects in \"p\" policy rules. It actually collects the\n     *         1-index elements of \"p\" policy rules. So make sure your object\n     *         is the 1-index element, like (sub, obj, act).\n     *         Duplicates are removed.\n     */\n    async getAllObjects() {\n        return this.getAllNamedObjects('p');\n    }\n    /**\n     * getAllNamedObjects gets the list of objects that show up in the current named policy.\n     *\n     * @param ptype the policy type, can be \"p\", \"p2\", \"p3\", ..\n     * @return all the objects in policy rules of the ptype type. It actually\n     *         collects the 1-index elements of the policy rules. So make sure\n     *         your object is the 1-index element, like (sub, obj, act).\n     *         Duplicates are removed.\n     */\n    async getAllNamedObjects(ptype) {\n        return this.model.getValuesForFieldInPolicy('p', ptype, 1);\n    }\n    /**\n     * getAllActions gets the list of actions that show up in the current policy.\n     *\n     * @return all the actions in \"p\" policy rules. It actually collects\n     *         the 2-index elements of \"p\" policy rules. So make sure your action\n     *         is the 2-index element, like (sub, obj, act).\n     *         Duplicates are removed.\n     */\n    async getAllActions() {\n        return this.getAllNamedActions('p');\n    }\n    /**\n     * GetAllNamedActions gets the list of actions that show up in the current named policy.\n     *\n     * @param ptype the policy type, can be \"p\", \"p2\", \"p3\", ..\n     * @return all the actions in policy rules of the ptype type. It actually\n     *         collects the 2-index elements of the policy rules. So make sure\n     *         your action is the 2-index element, like (sub, obj, act).\n     *         Duplicates are removed.\n     */\n    async getAllNamedActions(ptype) {\n        return this.model.getValuesForFieldInPolicy('p', ptype, 2);\n    }\n    /**\n     * getAllRoles gets the list of roles that show up in the current policy.\n     *\n     * @return all the roles in \"g\" policy rules. It actually collects\n     *         the 1-index elements of \"g\" policy rules. So make sure your\n     *         role is the 1-index element, like (sub, role).\n     *         Duplicates are removed.\n     */\n    async getAllRoles() {\n        return this.getAllNamedRoles('g');\n    }\n    /**\n     * getAllNamedRoles gets the list of roles that show up in the current named policy.\n     *\n     * @param ptype the policy type, can be \"g\", \"g2\", \"g3\", ..\n     * @return all the subjects in policy rules of the ptype type. It actually\n     *         collects the 0-index elements of the policy rules. So make\n     *         sure your subject is the 0-index element, like (sub, obj, act).\n     *         Duplicates are removed.\n     */\n    async getAllNamedRoles(ptype) {\n        return this.model.getValuesForFieldInPolicy('g', ptype, 1);\n    }\n    /**\n     * getPolicy gets all the authorization rules in the policy.\n     *\n     * @return all the \"p\" policy rules.\n     */\n    async getPolicy() {\n        return this.getNamedPolicy('p');\n    }\n    /**\n     * getFilteredPolicy gets all the authorization rules in the policy, field filters can be specified.\n     *\n     * @param fieldIndex the policy rule's start index to be matched.\n     * @param fieldValues the field values to be matched, value \"\"\n     *                    means not to match this field.\n     * @return the filtered \"p\" policy rules.\n     */\n    async getFilteredPolicy(fieldIndex, ...fieldValues) {\n        return this.getFilteredNamedPolicy('p', fieldIndex, ...fieldValues);\n    }\n    /**\n     * getNamedPolicy gets all the authorization rules in the named policy.\n     *\n     * @param ptype the policy type, can be \"p\", \"p2\", \"p3\", ..\n     * @return the \"p\" policy rules of the specified ptype.\n     */\n    async getNamedPolicy(ptype) {\n        return this.model.getPolicy('p', ptype);\n    }\n    /**\n     * getFilteredNamedPolicy gets all the authorization rules in the named policy, field filters can be specified.\n     *\n     * @param ptype the policy type, can be \"p\", \"p2\", \"p3\", ..\n     * @param fieldIndex the policy rule's start index to be matched.\n     * @param fieldValues the field values to be matched, value \"\"\n     *                    means not to match this field.\n     * @return the filtered \"p\" policy rules of the specified ptype.\n     */\n    async getFilteredNamedPolicy(ptype, fieldIndex, ...fieldValues) {\n        return this.model.getFilteredPolicy('p', ptype, fieldIndex, ...fieldValues);\n    }\n    /**\n     * getGroupingPolicy gets all the role inheritance rules in the policy.\n     *\n     * @return all the \"g\" policy rules.\n     */\n    async getGroupingPolicy() {\n        return this.getNamedGroupingPolicy('g');\n    }\n    /**\n     * getFilteredGroupingPolicy gets all the role inheritance rules in the policy, field filters can be specified.\n     *\n     * @param fieldIndex the policy rule's start index to be matched.\n     * @param fieldValues the field values to be matched, value \"\" means not to match this field.\n     * @return the filtered \"g\" policy rules.\n     */\n    async getFilteredGroupingPolicy(fieldIndex, ...fieldValues) {\n        return this.getFilteredNamedGroupingPolicy('g', fieldIndex, ...fieldValues);\n    }\n    /**\n     * getNamedGroupingPolicy gets all the role inheritance rules in the policy.\n     *\n     * @param ptype the policy type, can be \"g\", \"g2\", \"g3\", ..\n     * @return the \"g\" policy rules of the specified ptype.\n     */\n    async getNamedGroupingPolicy(ptype) {\n        return this.model.getPolicy('g', ptype);\n    }\n    /**\n     * getFilteredNamedGroupingPolicy gets all the role inheritance rules in the policy, field filters can be specified.\n     *\n     * @param ptype the policy type, can be \"g\", \"g2\", \"g3\", ..\n     * @param fieldIndex the policy rule's start index to be matched.\n     * @param fieldValues the field values to be matched, value \"\"\n     *                    means not to match this field.\n     * @return the filtered \"g\" policy rules of the specified ptype.\n     */\n    async getFilteredNamedGroupingPolicy(ptype, fieldIndex, ...fieldValues) {\n        return this.model.getFilteredPolicy('g', ptype, fieldIndex, ...fieldValues);\n    }\n    /**\n     * hasPolicy determines whether an authorization rule exists.\n     *\n     * @param params the \"p\" policy rule, ptype \"p\" is implicitly used.\n     * @return whether the rule exists.\n     */\n    async hasPolicy(...params) {\n        return this.hasNamedPolicy('p', ...params);\n    }\n    /**\n     * hasNamedPolicy determines whether a named authorization rule exists.\n     *\n     * @param ptype the policy type, can be \"p\", \"p2\", \"p3\", ..\n     * @param params the \"p\" policy rule.\n     * @return whether the rule exists.\n     */\n    async hasNamedPolicy(ptype, ...params) {\n        return this.model.hasPolicy('p', ptype, params);\n    }\n    /**\n     * addPolicy adds an authorization rule to the current policy.\n     * If the rule already exists, the function returns false and the rule will not be added.\n     * Otherwise the function returns true by adding the new rule.\n     *\n     * @param params the \"p\" policy rule, ptype \"p\" is implicitly used.\n     * @return succeeds or not.\n     */\n    async addPolicy(...params) {\n        return this.addNamedPolicy('p', ...params);\n    }\n    /**\n     * addPolicies adds authorization rules to the current policy.\n     * If the rule already exists, the function returns false and the rules will not be added.\n     * Otherwise the function returns true by adding the new rules.\n     *\n     * @param rules the \"p\" policy rules, ptype \"p\" is implicitly used.\n     * @return succeeds or not.\n     */\n    async addPolicies(rules) {\n        return this.addNamedPolicies('p', rules);\n    }\n    /**\n     * addNamedPolicy adds an authorization rule to the current named policy.\n     * If the rule already exists, the function returns false and the rule will not be added.\n     * Otherwise the function returns true by adding the new rule.\n     *\n     * @param ptype the policy type, can be \"p\", \"p2\", \"p3\", ..\n     * @param params the \"p\" policy rule.\n     * @return succeeds or not.\n     */\n    async addNamedPolicy(ptype, ...params) {\n        return this.addPolicyInternal('p', ptype, params, true);\n    }\n    /**\n     * addNamedPolicies adds authorization rules to the current named policy.\n     * If the rule already exists, the function returns false and the rules will not be added.\n     * Otherwise the function returns true by adding the new rules.\n     *\n     * @param ptype the policy type, can be \"p\", \"p2\", \"p3\", ..\n     * @param rules the \"p\" policy rules.\n     * @return succeeds or not.\n     */\n    async addNamedPolicies(ptype, rules) {\n        return this.addPoliciesInternal('p', ptype, rules, true);\n    }\n    /**\n     * addPoliciesEx adds authorization rules to the current policy.\n     * If a rule already exists, the function will skip it and continue to add the remaining rules.\n     * The function returns true if at least one rule was added successfully.\n     *\n     * @param rules the \"p\" policy rules, ptype \"p\" is implicitly used.\n     * @return succeeds or not.\n     */\n    async addPoliciesEx(rules) {\n        return this.addNamedPoliciesEx('p', rules);\n    }\n    /**\n     * addNamedPoliciesEx adds authorization rules to the current named policy.\n     * If a rule already exists, the function will skip it and continue to add the remaining rules.\n     * The function returns true if at least one rule was added successfully.\n     *\n     * @param ptype the policy type, can be \"p\", \"p2\", \"p3\", ..\n     * @param rules the \"p\" policy rules.\n     * @return succeeds or not.\n     */\n    async addNamedPoliciesEx(ptype, rules) {\n        return this.addPoliciesInternalEx('p', ptype, rules, true);\n    }\n    /**\n     * updatePolicy updates an authorization rule from the current policy.\n     * If the rule not exists, the function returns false.\n     * Otherwise the function returns true by changing it to the new rule.\n     *\n     * @return succeeds or not.\n     * @param oldRule the policy will be remove\n     * @param newRule the policy will be added\n     */\n    async updatePolicy(oldRule, newRule) {\n        return this.updateNamedPolicy('p', oldRule, newRule);\n    }\n    /**\n     * updateNamedPolicy updates an authorization rule from the current named policy.\n     * If the rule not exists, the function returns false.\n     * Otherwise the function returns true by changing it to the new rule.\n     *\n     * @param ptype the policy type, can be \"p\", \"p2\", \"p3\", ..\n     * @param oldRule the policy rule will be remove\n     * @param newRule the policy rule will be added\n     * @return succeeds or not.\n     */\n    async updateNamedPolicy(ptype, oldRule, newRule) {\n        return this.updatePolicyInternal('p', ptype, oldRule, newRule, true);\n    }\n    /**\n     * removePolicy removes an authorization rule from the current policy.\n     *\n     * @param params the \"p\" policy rule, ptype \"p\" is implicitly used.\n     * @return succeeds or not.\n     */\n    async removePolicy(...params) {\n        return this.removeNamedPolicy('p', ...params);\n    }\n    /**\n     * removePolicies removes an authorization rules from the current policy.\n     *\n     * @param rules the \"p\" policy rules, ptype \"p\" is implicitly used.\n     * @return succeeds or not.\n     */\n    async removePolicies(rules) {\n        return this.removeNamedPolicies('p', rules);\n    }\n    /**\n     * removeFilteredPolicy removes an authorization rule from the current policy, field filters can be specified.\n     *\n     * @param fieldIndex the policy rule's start index to be matched.\n     * @param fieldValues the field values to be matched, value \"\"\n     *                    means not to match this field.\n     * @return succeeds or not.\n     */\n    async removeFilteredPolicy(fieldIndex, ...fieldValues) {\n        return this.removeFilteredNamedPolicy('p', fieldIndex, ...fieldValues);\n    }\n    /**\n     * removeNamedPolicy removes an authorization rule from the current named policy.\n     *\n     * @param ptype the policy type, can be \"p\", \"p2\", \"p3\", ..\n     * @param params the \"p\" policy rule.\n     * @return succeeds or not.\n     */\n    async removeNamedPolicy(ptype, ...params) {\n        return this.removePolicyInternal('p', ptype, params, true);\n    }\n    /**\n     * removeNamedPolicies removes authorization rules from the current named policy.\n     *\n     * @param ptype the policy type, can be \"p\", \"p2\", \"p3\", ..\n     * @param rules the \"p\" policy rules.\n     * @return succeeds or not.\n     */\n    async removeNamedPolicies(ptype, rules) {\n        return this.removePoliciesInternal('p', ptype, rules, true);\n    }\n    /**\n     * removeFilteredNamedPolicy removes an authorization rule from the current named policy, field filters can be specified.\n     *\n     * @param ptype the policy type, can be \"p\", \"p2\", \"p3\", ..\n     * @param fieldIndex the policy rule's start index to be matched.\n     * @param fieldValues the field values to be matched, value \"\"\n     *                    means not to match this field.\n     * @return succeeds or not.\n     */\n    async removeFilteredNamedPolicy(ptype, fieldIndex, ...fieldValues) {\n        return this.removeFilteredPolicyInternal('p', ptype, fieldIndex, fieldValues, true);\n    }\n    /**\n     * hasGroupingPolicy determines whether a role inheritance rule exists.\n     *\n     * @param params the \"g\" policy rule, ptype \"g\" is implicitly used.\n     * @return whether the rule exists.\n     */\n    async hasGroupingPolicy(...params) {\n        return this.hasNamedGroupingPolicy('g', ...params);\n    }\n    /**\n     * hasNamedGroupingPolicy determines whether a named role inheritance rule exists.\n     *\n     * @param ptype the policy type, can be \"g\", \"g2\", \"g3\", ..\n     * @param params the \"g\" policy rule.\n     * @return whether the rule exists.\n     */\n    async hasNamedGroupingPolicy(ptype, ...params) {\n        return this.model.hasPolicy('g', ptype, params);\n    }\n    /**\n     * addGroupingPolicy adds a role inheritance rule to the current policy.\n     * If the rule already exists, the function returns false and the rule will not be added.\n     * Otherwise the function returns true by adding the new rule.\n     *\n     * @param params the \"g\" policy rule, ptype \"g\" is implicitly used.\n     * @return succeeds or not.\n     */\n    async addGroupingPolicy(...params) {\n        return this.addNamedGroupingPolicy('g', ...params);\n    }\n    /**\n     * addGroupingPolicies adds a role inheritance rules to the current policy.\n     * If the rule already exists, the function returns false and the rules will not be added.\n     * Otherwise the function returns true by adding the new rules.\n     *\n     * @param rules the \"g\" policy rules, ptype \"g\" is implicitly used.\n     * @return succeeds or not.\n     */\n    async addGroupingPolicies(rules) {\n        return this.addNamedGroupingPolicies('g', rules);\n    }\n    /**\n     * addNamedGroupingPolicy adds a named role inheritance rule to the current policy.\n     * If the rule already exists, the function returns false and the rule will not be added.\n     * Otherwise the function returns true by adding the new rule.\n     *\n     * @param ptype the policy type, can be \"g\", \"g2\", \"g3\", ..\n     * @param params the \"g\" policy rule.\n     * @return succeeds or not.\n     */\n    async addNamedGroupingPolicy(ptype, ...params) {\n        return this.addPolicyInternal('g', ptype, params, true);\n    }\n    /**\n     * addNamedGroupingPolicies adds named role inheritance rules to the current policy.\n     * If the rule already exists, the function returns false and the rules will not be added.\n     * Otherwise the function returns true by adding the new rules.\n     *\n     * @param ptype the policy type, can be \"g\", \"g2\", \"g3\", ..\n     * @param rules the \"g\" policy rule.\n     * @return succeeds or not.\n     */\n    async addNamedGroupingPolicies(ptype, rules) {\n        return this.addPoliciesInternal('g', ptype, rules, true);\n    }\n    /**\n     * addGroupingPoliciesEx adds role inheritance rules to the current policy.\n     * If a rule already exists, the function will skip it and continue to add the remaining rules.\n     * The function returns true if at least one rule was added successfully.\n     *\n     * @param rules the \"g\" policy rules, ptype \"g\" is implicitly used.\n     * @return succeeds or not.\n     */\n    async addGroupingPoliciesEx(rules) {\n        return this.addNamedGroupingPoliciesEx('g', rules);\n    }\n    /**\n     * addNamedGroupingPoliciesEx adds named role inheritance rules to the current policy.\n     * If a rule already exists, the function will skip it and continue to add the remaining rules.\n     * The function returns true if at least one rule was added successfully.\n     *\n     * @param ptype the policy type, can be \"g\", \"g2\", \"g3\", ..\n     * @param rules the \"g\" policy rules.\n     * @return succeeds or not.\n     */\n    async addNamedGroupingPoliciesEx(ptype, rules) {\n        return this.addPoliciesInternalEx('g', ptype, rules, true);\n    }\n    /**\n     * removeGroupingPolicy removes a role inheritance rule from the current policy.\n     *\n     * @param params the \"g\" policy rule, ptype \"g\" is implicitly used.\n     * @return succeeds or not.\n     */\n    async removeGroupingPolicy(...params) {\n        return this.removeNamedGroupingPolicy('g', ...params);\n    }\n    /**\n     * removeGroupingPolicies removes role inheritance rules from the current policy.\n     *\n     * @param rules the \"g\" policy rules, ptype \"g\" is implicitly used.\n     * @return succeeds or not.\n     */\n    async removeGroupingPolicies(rules) {\n        return this.removeNamedGroupingPolicies('g', rules);\n    }\n    /**\n     * removeFilteredGroupingPolicy removes a role inheritance rule from the current policy, field filters can be specified.\n     *\n     * @param fieldIndex the policy rule's start index to be matched.\n     * @param fieldValues the field values to be matched, value \"\"\n     *                    means not to match this field.\n     * @return succeeds or not.\n     */\n    async removeFilteredGroupingPolicy(fieldIndex, ...fieldValues) {\n        return this.removeFilteredNamedGroupingPolicy('g', fieldIndex, ...fieldValues);\n    }\n    /**\n     * removeNamedGroupingPolicy removes a role inheritance rule from the current named policy.\n     *\n     * @param ptype the policy type, can be \"g\", \"g2\", \"g3\", ..\n     * @param params the \"g\" policy rule.\n     * @return succeeds or not.\n     */\n    async removeNamedGroupingPolicy(ptype, ...params) {\n        return this.removePolicyInternal('g', ptype, params, true);\n    }\n    /**\n     * removeNamedGroupingPolicies removes role inheritance rules from the current named policy.\n     *\n     * @param ptype the policy type, can be \"g\", \"g2\", \"g3\", ..\n     * @param rules the \"g\" policy rules.\n     * @return succeeds or not.\n     */\n    async removeNamedGroupingPolicies(ptype, rules) {\n        return this.removePoliciesInternal('g', ptype, rules, true);\n    }\n    /**\n     * removeFilteredNamedGroupingPolicy removes a role inheritance rule from the current named policy, field filters can be specified.\n     *\n     * @param ptype the policy type, can be \"g\", \"g2\", \"g3\", ..\n     * @param fieldIndex the policy rule's start index to be matched.\n     * @param fieldValues the field values to be matched, value \"\"\n     *                    means not to match this field.\n     * @return succeeds or not.\n     */\n    async removeFilteredNamedGroupingPolicy(ptype, fieldIndex, ...fieldValues) {\n        return this.removeFilteredPolicyInternal('g', ptype, fieldIndex, fieldValues, true);\n    }\n    /**\n     * UpdateGroupingPolicy updates an rule to the current named policy.\n     *\n     * @param oldRule the old rule.\n     * @param newRule the new rule.\n     * @return succeeds or not.\n     */\n    async updateGroupingPolicy(oldRule, newRule) {\n        return this.updateNamedGroupingPolicy('g', oldRule, newRule);\n    }\n    /**\n     * updateNamedGroupingPolicy updates an rule to the current named policy.\n     *\n     * @param ptype the policy type, can be \"g\", \"g2\", \"g3\", ..\n     * @param oldRule the old rule.\n     * @param newRule the new rule.\n     * @return succeeds or not.\n     */\n    async updateNamedGroupingPolicy(ptype, oldRule, newRule) {\n        return this.updatePolicyInternal('g', ptype, oldRule, newRule, true);\n    }\n    /**\n     * addFunction adds a customized function.\n     * @param name custom function name\n     * @param func function\n     */\n    async addFunction(name, func) {\n        this.fm.addFunction(name, func);\n    }\n    async selfAddPolicy(sec, ptype, rule) {\n        return this.addPolicyWithoutNotify(sec, ptype, rule);\n    }\n    async selfAddPolicies(sec, ptype, rules) {\n        return this.addPoliciesWithoutNotify(sec, ptype, rules);\n    }\n    async selfRemovePolicy(sec, ptype, rule) {\n        return this.removePolicyWithoutNotify(sec, ptype, rule);\n    }\n    async selfRemovePolicies(sec, ptype, rules) {\n        return this.removePoliciesWithoutNotify(sec, ptype, rules);\n    }\n    async selfRemoveFilteredPolicy(sec, ptype, fieldIndex, ...fieldValues) {\n        return this.removeFilteredPolicyWithoutNotify(sec, ptype, fieldIndex, fieldValues);\n    }\n    async selfUpdatePolicy(sec, ptype, oldRule, newRule) {\n        return this.updatePolicyWithoutNotify(sec, ptype, oldRule, newRule);\n    }\n    async selfUpdatePolicies(sec, ptype, oldRules, newRules) {\n        return this.updatePoliciesWithoutNotify(sec, ptype, oldRules, newRules);\n    }\n}\n","// Copyright 2018 The Casbin Authors. All Rights Reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\nimport { ManagementEnforcer } from './managementEnforcer';\nimport { newModelFromFile } from './model';\nimport { FileAdapter, getDefaultFileSystem, setDefaultFileSystem, StringAdapter } from './persist';\nimport { getLogger } from './log';\nimport { arrayRemoveDuplicates } from './util';\n/**\n * Enforcer = ManagementEnforcer + RBAC API.\n */\nexport class Enforcer extends ManagementEnforcer {\n    /**\n     * initWithFile initializes an enforcer with a model file and a policy file.\n     * @param modelPath model file path\n     * @param policyPath policy file path\n     * @param lazyLoad lazyLoad whether to load policy at initial time\n     */\n    async initWithFile(modelPath, policyPath, lazyLoad = false) {\n        const a = new FileAdapter(policyPath, this.fs);\n        await this.initWithAdapter(modelPath, a, lazyLoad);\n    }\n    /**\n     * initWithFile initializes an enforcer with a model file and a policy file.\n     * @param modelPath model file path\n     * @param policyString policy CSV string\n     * @param lazyLoad whether to load policy at initial time\n     */\n    async initWithString(modelPath, policyString, lazyLoad = false) {\n        const a = new StringAdapter(policyString);\n        await this.initWithAdapter(modelPath, a, lazyLoad);\n    }\n    /**\n     * initWithAdapter initializes an enforcer with a database adapter.\n     * @param modelPath model file path\n     * @param adapter current adapter instance\n     * @param lazyLoad whether to load policy at initial time\n     */\n    async initWithAdapter(modelPath, adapter, lazyLoad = false) {\n        const m = newModelFromFile(modelPath, this.fs);\n        await this.initWithModelAndAdapter(m, adapter, lazyLoad);\n        this.modelPath = modelPath;\n    }\n    /**\n     * initWithModelAndAdapter initializes an enforcer with a model and a database adapter.\n     * @param m model instance\n     * @param adapter current adapter instance\n     * @param lazyLoad whether to load policy at initial time\n     */\n    async initWithModelAndAdapter(m, adapter, lazyLoad = false) {\n        if (adapter) {\n            this.adapter = adapter;\n        }\n        this.model = m;\n        this.model.printModel();\n        this.initRmMap();\n        if (!lazyLoad && this.adapter) {\n            await this.loadPolicy();\n        }\n    }\n    /**\n     * getRolesForUser gets the roles that a user has.\n     *\n     * @param name the user.\n     * @param domain the domain.\n     * @return the roles that the user has.\n     */\n    async getRolesForUser(name, domain) {\n        const rm = this.rmMap.get('g');\n        if (rm) {\n            if (domain === undefined) {\n                return rm.getRoles(name);\n            }\n            else {\n                return rm.getRoles(name, domain);\n            }\n        }\n        throw new Error(\"RoleManager didn't exist.\");\n    }\n    /**\n     * getUsersForRole gets the users that has a role.\n     *\n     * @param name the role.\n     * @param domain the domain.\n     * @return the users that has the role.\n     */\n    async getUsersForRole(name, domain) {\n        const rm = this.rmMap.get('g');\n        if (rm) {\n            if (domain === undefined) {\n                return rm.getUsers(name);\n            }\n            else {\n                return rm.getUsers(name, domain);\n            }\n        }\n        throw new Error(\"RoleManager didn't exist.\");\n    }\n    /**\n     * hasRoleForUser determines whether a user has a role.\n     *\n     * @param name the user.\n     * @param role the role.\n     * @param domain the domain.\n     * @return whether the user has the role.\n     */\n    async hasRoleForUser(name, role, domain) {\n        const roles = await this.getRolesForUser(name, domain);\n        let hasRole = false;\n        for (const r of roles) {\n            if (r === role) {\n                hasRole = true;\n                break;\n            }\n        }\n        return hasRole;\n    }\n    /**\n     * addRoleForUser adds a role for a user.\n     * Returns false if the user already has the role (aka not affected).\n     *\n     * @param user the user.\n     * @param role the role.\n     * @param domain the domain.\n     * @return succeeds or not.\n     */\n    async addRoleForUser(user, role, domain) {\n        if (domain === undefined) {\n            return this.addGroupingPolicy(user, role);\n        }\n        else {\n            return this.addGroupingPolicy(user, role, domain);\n        }\n    }\n    /**\n     * deleteRoleForUser deletes a role for a user.\n     * Returns false if the user does not have the role (aka not affected).\n     *\n     * @param user the user.\n     * @param role the role.\n     * @param domain the domain.\n     * @return succeeds or not.\n     */\n    async deleteRoleForUser(user, role, domain) {\n        if (!user) {\n            throw new Error('user must not be empty');\n        }\n        if (!role) {\n            throw new Error('role must not be empty');\n        }\n        if (domain === undefined) {\n            return this.removeGroupingPolicy(user, role);\n        }\n        else {\n            return this.removeGroupingPolicy(user, role, domain);\n        }\n    }\n    /**\n     * deleteRolesForUser deletes all roles for a user.\n     * Returns false if the user does not have any roles (aka not affected).\n     *\n     * @param user the user.\n     * @param domain the domain.\n     * @return succeeds or not.\n     */\n    async deleteRolesForUser(user, domain) {\n        if (!user) {\n            throw new Error('user must not be empty');\n        }\n        if (domain === undefined) {\n            const subIndex = this.getFieldIndex('p', \"sub\" /* Subject */);\n            return this.removeFilteredGroupingPolicy(subIndex, user);\n        }\n        else {\n            return this.removeFilteredGroupingPolicy(0, user, '', domain);\n        }\n    }\n    /**\n     * deleteUser deletes a user.\n     * Returns false if the user does not exist (aka not affected).\n     *\n     * @param user the user.\n     * @return succeeds or not.\n     */\n    async deleteUser(user) {\n        if (!user) {\n            throw new Error('user must not be empty');\n        }\n        const subIndex = this.getFieldIndex('p', \"sub\" /* Subject */);\n        const res1 = await this.removeFilteredGroupingPolicy(subIndex, user);\n        const res2 = await this.removeFilteredPolicy(subIndex, user);\n        return res1 || res2;\n    }\n    /**\n     * deleteRole deletes a role.\n     * Returns false if the role does not exist (aka not affected).\n     *\n     * @param role the role.\n     * @return succeeds or not.\n     */\n    async deleteRole(role) {\n        if (!role) {\n            throw new Error('role must not be empty');\n        }\n        const subIndex = this.getFieldIndex('p', \"sub\" /* Subject */);\n        const res1 = await this.removeFilteredGroupingPolicy(subIndex, role);\n        const res2 = await this.removeFilteredPolicy(subIndex, role);\n        return res1 || res2;\n    }\n    /**\n     * deletePermission deletes a permission.\n     * Returns false if the permission does not exist (aka not affected).\n     *\n     * @param permission the permission, usually be (obj, act). It is actually the rule without the subject.\n     * @return succeeds or not.\n     */\n    async deletePermission(...permission) {\n        if (permission.length === 0) {\n            throw new Error('permission must not be empty');\n        }\n        return this.removeFilteredPolicy(1, ...permission);\n    }\n    /**\n     * addPermissionForUser adds a permission for a user or role.\n     * Returns false if the user or role already has the permission (aka not affected).\n     *\n     * @param user the user.\n     * @param permission the permission, usually be (obj, act). It is actually the rule without the subject.\n     * @return succeeds or not.\n     */\n    async addPermissionForUser(user, ...permission) {\n        permission.unshift(user);\n        return this.addPolicy(...permission);\n    }\n    /**\n     * deletePermissionForUser deletes a permission for a user or role.\n     * Returns false if the user or role does not have the permission (aka not affected).\n     *\n     * @param user the user.\n     * @param permission the permission, usually be (obj, act). It is actually the rule without the subject.\n     * @return succeeds or not.\n     */\n    async deletePermissionForUser(user, ...permission) {\n        if (!user) {\n            throw new Error('user must not be empty');\n        }\n        permission.unshift(user);\n        return this.removePolicy(...permission);\n    }\n    /**\n     * deletePermissionsForUser deletes permissions for a user or role.\n     * Returns false if the user or role does not have any permissions (aka not affected).\n     *\n     * @param user the user.\n     * @return succeeds or not.\n     */\n    async deletePermissionsForUser(user) {\n        if (!user) {\n            throw new Error('user must not be empty');\n        }\n        const subIndex = this.getFieldIndex('p', \"sub\" /* Subject */);\n        return this.removeFilteredPolicy(subIndex, user);\n    }\n    /**\n     * getPermissionsForUser gets permissions for a user or role.\n     *\n     * @param user the user.\n     * @return the permissions, a permission is usually like (obj, act). It is actually the rule without the subject.\n     */\n    async getPermissionsForUser(user) {\n        const subIndex = this.getFieldIndex('p', \"sub\" /* Subject */);\n        return this.getFilteredPolicy(subIndex, user);\n    }\n    /**\n     * hasPermissionForUser determines whether a user has a permission.\n     *\n     * @param user the user.\n     * @param permission the permission, usually be (obj, act). It is actually the rule without the subject.\n     * @return whether the user has the permission.\n     */\n    async hasPermissionForUser(user, ...permission) {\n        permission.unshift(user);\n        return this.hasPolicy(...permission);\n    }\n    /**\n     * getImplicitRolesForUser gets implicit roles that a user has.\n     * Compared to getRolesForUser(), this function retrieves indirect roles besides direct roles.\n     * For example:\n     * g, alice, role:admin\n     * g, role:admin, role:user\n     *\n     * getRolesForUser(\"alice\") can only get: [\"role:admin\"].\n     * But getImplicitRolesForUser(\"alice\") will get: [\"role:admin\", \"role:user\"].\n     */\n    async getImplicitRolesForUser(name, ...domain) {\n        const res = new Set();\n        const q = [name];\n        let n;\n        while ((n = q.shift()) !== undefined) {\n            for (const rm of this.rmMap.values()) {\n                const role = await rm.getRoles(n, ...domain);\n                role.forEach((r) => {\n                    if (!res.has(r)) {\n                        res.add(r);\n                        q.push(r);\n                    }\n                });\n            }\n        }\n        return Array.from(res);\n    }\n    /**\n     * getImplicitPermissionsForUser gets implicit permissions for a user or role.\n     * Compared to getPermissionsForUser(), this function retrieves permissions for inherited roles.\n     * For example:\n     * p, admin, data1, read\n     * p, alice, data2, read\n     * g, alice, admin\n     *\n     * getPermissionsForUser(\"alice\") can only get: [[\"alice\", \"data2\", \"read\"]].\n     * But getImplicitPermissionsForUser(\"alice\") will get: [[\"admin\", \"data1\", \"read\"], [\"alice\", \"data2\", \"read\"]].\n     */\n    async getImplicitPermissionsForUser(user, ...domain) {\n        const roles = await this.getImplicitRolesForUser(user, ...domain);\n        roles.unshift(user);\n        const res = [];\n        const withDomain = domain && domain.length !== 0;\n        for (const n of roles) {\n            if (withDomain) {\n                const p = await this.getFilteredPolicy(0, n, ...domain);\n                res.push(...p);\n            }\n            else {\n                const p = await this.getPermissionsForUser(n);\n                res.push(...p);\n            }\n        }\n        return res;\n    }\n    /**\n     * getImplicitResourcesForUser returns all policies that user obtaining in domain.\n     */\n    async getImplicitResourcesForUser(user, ...domain) {\n        const permissions = await this.getImplicitPermissionsForUser(user, ...domain);\n        const res = [];\n        for (const permission of permissions) {\n            if (permission[0] === user) {\n                res.push(permission);\n                continue;\n            }\n            let resLocal = [[user]];\n            const tokensLength = permission.length;\n            const t = [];\n            for (const token of permission) {\n                if (token === permission[0]) {\n                    continue;\n                }\n                const tokens = await this.getImplicitUsersForRole(token, ...domain);\n                tokens.push(token);\n                t.push(tokens);\n            }\n            for (let i = 0; i < tokensLength - 1; i++) {\n                const n = [];\n                for (const tokens of t[i]) {\n                    for (const policy of resLocal) {\n                        const t = [...policy];\n                        t.push(tokens);\n                        n.push(t);\n                    }\n                }\n                resLocal = n;\n            }\n            res.push(...resLocal);\n        }\n        return res;\n    }\n    /**\n     * getImplicitUsersForRole gets implicit users that a role has.\n     * Compared to getUsersForRole(), this function retrieves indirect users besides direct users.\n     * For example:\n     * g, alice, role:admin\n     * g, role:admin, role:user\n     *\n     * getUsersForRole(\"user\") can only get: [\"role:admin\"].\n     * But getImplicitUsersForRole(\"user\") will get: [\"role:admin\", \"alice\"].\n     */\n    async getImplicitUsersForRole(role, ...domain) {\n        const res = new Set();\n        const q = [role];\n        let n;\n        while ((n = q.shift()) !== undefined) {\n            for (const rm of this.rmMap.values()) {\n                const user = await rm.getUsers(n, ...domain);\n                user.forEach((u) => {\n                    if (!res.has(u)) {\n                        res.add(u);\n                        q.push(u);\n                    }\n                });\n            }\n        }\n        return Array.from(res);\n    }\n    /**\n     * getRolesForUserInDomain gets the roles that a user has inside a domain\n     * An alias for getRolesForUser with the domain params.\n     *\n     * @param name the user.\n     * @param domain the domain.\n     * @return the roles that the user has.\n     */\n    async getRolesForUserInDomain(name, domain) {\n        return this.getRolesForUser(name, domain);\n    }\n    /**\n     * getUsersForRoleInFomain gets the users that has a role inside a domain\n     * An alias for getUsesForRole with the domain params.\n     *\n     * @param name the role.\n     * @param domain the domain.\n     * @return the users that has the role.\n     */\n    async getUsersForRoleInDomain(name, domain) {\n        return this.getUsersForRole(name, domain);\n    }\n    /**\n     * getImplicitUsersForPermission gets implicit users for a permission.\n     * For example:\n     * p, admin, data1, read\n     * p, bob, data1, read\n     * g, alice, admin\n     *\n     * getImplicitUsersForPermission(\"data1\", \"read\") will get: [\"alice\", \"bob\"].\n     * Note: only users will be returned, roles (2nd arg in \"g\") will be excluded.\n     */\n    async getImplicitUsersForPermission(...permission) {\n        const res = [];\n        const policySubjects = await this.getAllSubjects();\n        const subjects = arrayRemoveDuplicates([...policySubjects, ...this.model.getValuesForFieldInPolicyAllTypes('g', 0)]);\n        const inherits = this.model.getValuesForFieldInPolicyAllTypes('g', 1);\n        for (const user of subjects) {\n            const allowed = await this.enforce(user, ...permission);\n            if (allowed) {\n                res.push(user);\n            }\n        }\n        return res.filter((n) => !inherits.some((m) => n === m));\n    }\n    /**\n     * getDomainsForUser gets all domains that a user has.\n     */\n    async getDomainsForUser(user) {\n        const domains = [];\n        for (const rm of this.rmMap.values()) {\n            const domain = await rm.getDomains(user);\n            domains.push(...domain);\n        }\n        return domains;\n    }\n    /**\n     * getAllDomains gets all domains.\n     */\n    async getAllDomains() {\n        const domains = [];\n        for (const rm of this.rmMap.values()) {\n            const domain = await rm.getAllDomains();\n            domains.push(...domain);\n        }\n        return arrayRemoveDuplicates(domains);\n    }\n}\nexport async function newEnforcerWithClass(enforcer, ...params) {\n    var _a;\n    // inject the FS\n    if (!getDefaultFileSystem()) {\n        try {\n            if (typeof process !== 'undefined' && ((_a = process === null || process === void 0 ? void 0 : process.versions) === null || _a === void 0 ? void 0 : _a.node)) {\n                const fs = await import('fs');\n                const defaultFileSystem = {\n                    readFileSync(path, encoding) {\n                        return fs.readFileSync(path, { encoding });\n                    },\n                    writeFileSync(path, text, encoding) {\n                        return fs.writeFileSync(path, text, encoding);\n                    },\n                };\n                setDefaultFileSystem(defaultFileSystem);\n            }\n        }\n        catch (ignored) { }\n    }\n    const e = new enforcer();\n    let parsedParamLen = 0;\n    if (params.length >= 1) {\n        const enableLog = params[params.length - 1];\n        if (typeof enableLog === 'boolean') {\n            getLogger().enableLog(enableLog);\n            parsedParamLen++;\n        }\n    }\n    if (params.length - parsedParamLen === 2) {\n        if (typeof params[0] === 'string') {\n            if (typeof params[1] === 'string') {\n                await e.initWithFile(params[0].toString(), params[1].toString());\n            }\n            else {\n                await e.initWithAdapter(params[0].toString(), params[1], params[2] === true);\n            }\n        }\n        else {\n            if (typeof params[1] === 'string') {\n                throw new Error('Invalid parameters for enforcer.');\n            }\n            else {\n                await e.initWithModelAndAdapter(params[0], params[1]);\n            }\n        }\n    }\n    else if (params.length - parsedParamLen === 1) {\n        if (typeof params[0] === 'string') {\n            await e.initWithFile(params[0], '');\n        }\n        else {\n            await e.initWithModelAndAdapter(params[0]);\n        }\n    }\n    else if (params.length === parsedParamLen) {\n        await e.initWithFile('', '');\n    }\n    else {\n        throw new Error('Invalid parameters for enforcer.');\n    }\n    return e;\n}\n/**\n * newEnforcer creates an enforcer via file or DB.\n *\n * File:\n * ```js\n * const e = new Enforcer('path/to/basic_model.conf', 'path/to/basic_policy.csv');\n * ```\n *\n * MySQL DB:\n * ```js\n * const a = new MySQLAdapter('mysql', 'mysql_username:mysql_password@tcp(127.0.0.1:3306)/');\n * const e = new Enforcer('path/to/basic_model.conf', a);\n * ```\n *\n * @param params\n */\nexport async function newEnforcer(...params) {\n    return newEnforcerWithClass(Enforcer, ...params);\n}\n","\"use strict\";\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, state, kind, f) {\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n};\nvar __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, state, value, kind, f) {\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n};\nvar _AwaitLock_acquired, _AwaitLock_waitingResolvers;\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * A mutex lock for coordination across async functions\n */\nclass AwaitLock {\n    constructor() {\n        _AwaitLock_acquired.set(this, false);\n        _AwaitLock_waitingResolvers.set(this, new Set());\n    }\n    /**\n     * Whether the lock is currently acquired or not. Accessing this property does not affect the\n     * status of the lock.\n     */\n    get acquired() {\n        return __classPrivateFieldGet(this, _AwaitLock_acquired, \"f\");\n    }\n    /**\n     * Acquires the lock, waiting if necessary for it to become free if it is already locked. The\n     * returned promise is fulfilled once the lock is acquired.\n     *\n     * A timeout (in milliseconds) may be optionally provided. If the lock cannot be acquired before\n     * the timeout elapses, the returned promise is rejected with an error. The behavior of invalid\n     * timeout values depends on how `setTimeout` handles those values.\n     *\n     * After acquiring the lock, you **must** call `release` when you are done with it.\n     */\n    acquireAsync({ timeout } = {}) {\n        if (!__classPrivateFieldGet(this, _AwaitLock_acquired, \"f\")) {\n            __classPrivateFieldSet(this, _AwaitLock_acquired, true, \"f\");\n            return Promise.resolve();\n        }\n        if (timeout == null) {\n            return new Promise((resolve) => {\n                __classPrivateFieldGet(this, _AwaitLock_waitingResolvers, \"f\").add(resolve);\n            });\n        }\n        let resolver;\n        let timer;\n        return Promise.race([\n            new Promise((resolve) => {\n                resolver = () => {\n                    clearTimeout(timer);\n                    resolve();\n                };\n                __classPrivateFieldGet(this, _AwaitLock_waitingResolvers, \"f\").add(resolver);\n            }),\n            new Promise((_, reject) => {\n                timer = setTimeout(() => {\n                    __classPrivateFieldGet(this, _AwaitLock_waitingResolvers, \"f\").delete(resolver);\n                    reject(new Error(`Timed out waiting for lock`));\n                }, timeout);\n            }),\n        ]);\n    }\n    /**\n     * Acquires the lock if it is free and otherwise returns immediately without waiting. Returns\n     * `true` if the lock was free and is now acquired, and `false` otherwise.\n     *\n     * This method differs from calling `acquireAsync` with a zero-millisecond timeout in that it runs\n     * synchronously without waiting for the JavaScript task queue.\n     */\n    tryAcquire() {\n        if (!__classPrivateFieldGet(this, _AwaitLock_acquired, \"f\")) {\n            __classPrivateFieldSet(this, _AwaitLock_acquired, true, \"f\");\n            return true;\n        }\n        return false;\n    }\n    /**\n     * Releases the lock and gives it to the next waiting acquirer, if there is one. Each acquirer\n     * must release the lock exactly once.\n     */\n    release() {\n        if (!__classPrivateFieldGet(this, _AwaitLock_acquired, \"f\")) {\n            throw new Error(`Cannot release an unacquired lock`);\n        }\n        if (__classPrivateFieldGet(this, _AwaitLock_waitingResolvers, \"f\").size > 0) {\n            // Sets preserve insertion order like a queue\n            const [resolve] = __classPrivateFieldGet(this, _AwaitLock_waitingResolvers, \"f\");\n            __classPrivateFieldGet(this, _AwaitLock_waitingResolvers, \"f\").delete(resolve);\n            resolve();\n        }\n        else {\n            __classPrivateFieldSet(this, _AwaitLock_acquired, false, \"f\");\n        }\n    }\n}\nexports.default = AwaitLock;\n_AwaitLock_acquired = new WeakMap(), _AwaitLock_waitingResolvers = new WeakMap();\n//# sourceMappingURL=AwaitLock.js.map"],"file":"casbin-vendor-NoWOyWiA.js"}