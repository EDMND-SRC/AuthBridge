{
  "AWSTemplateFormatVersion": "2010-09-09",
  "Description": "The AWS CloudFormation template for this Serverless application",
  "Resources": {
    "ServerlessDeploymentBucket": {
      "Type": "AWS::S3::Bucket",
      "Properties": {
        "BucketEncryption": {
          "ServerSideEncryptionConfiguration": [
            {
              "ServerSideEncryptionByDefault": {
                "SSEAlgorithm": "AES256"
              }
            }
          ]
        }
      }
    },
    "ServerlessDeploymentBucketPolicy": {
      "Type": "AWS::S3::BucketPolicy",
      "Properties": {
        "Bucket": {
          "Ref": "ServerlessDeploymentBucket"
        },
        "PolicyDocument": {
          "Statement": [
            {
              "Action": "s3:*",
              "Effect": "Deny",
              "Principal": "*",
              "Resource": [
                {
                  "Fn::Join": [
                    "",
                    [
                      "arn:",
                      {
                        "Ref": "AWS::Partition"
                      },
                      ":s3:::",
                      {
                        "Ref": "ServerlessDeploymentBucket"
                      },
                      "/*"
                    ]
                  ]
                },
                {
                  "Fn::Join": [
                    "",
                    [
                      "arn:",
                      {
                        "Ref": "AWS::Partition"
                      },
                      ":s3:::",
                      {
                        "Ref": "ServerlessDeploymentBucket"
                      }
                    ]
                  ]
                }
              ],
              "Condition": {
                "Bool": {
                  "aws:SecureTransport": false
                }
              }
            }
          ]
        }
      }
    },
    "ListCasesLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/authbridge-verification-production-listCases"
      }
    },
    "GetCaseLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/authbridge-verification-production-getCase"
      }
    },
    "ApproveCaseLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/authbridge-verification-production-approveCase"
      }
    },
    "RejectCaseLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/authbridge-verification-production-rejectCase"
      }
    },
    "SendWebhookLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/authbridge-verification-production-sendWebhook"
      }
    },
    "ConfigureWebhookLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/authbridge-verification-production-configureWebhook"
      }
    },
    "TestWebhookLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/authbridge-verification-production-testWebhook"
      }
    },
    "AddNoteLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/authbridge-verification-production-addNote"
      }
    },
    "GetNotesLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/authbridge-verification-production-getNotes"
      }
    },
    "BulkApproveLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/authbridge-verification-production-bulkApprove"
      }
    },
    "BulkRejectLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/authbridge-verification-production-bulkReject"
      }
    },
    "CreateVerificationLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/authbridge-verification-production-createVerification"
      }
    },
    "GetVerificationStatusLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/authbridge-verification-production-getVerificationStatus"
      }
    },
    "UploadDocumentLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/authbridge-verification-production-uploadDocument"
      }
    },
    "RefreshDocumentUrlLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/authbridge-verification-production-refreshDocumentUrl"
      }
    },
    "ProcessOCRLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/authbridge-verification-production-processOCR"
      }
    },
    "ProcessBiometricLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/authbridge-verification-production-processBiometric"
      }
    },
    "IamRoleLambdaExecution": {
      "Type": "AWS::IAM::Role",
      "Properties": {
        "AssumeRolePolicyDocument": {
          "Version": "2012-10-17",
          "Statement": [
            {
              "Effect": "Allow",
              "Principal": {
                "Service": [
                  "lambda.amazonaws.com"
                ]
              },
              "Action": [
                "sts:AssumeRole"
              ]
            }
          ]
        },
        "Policies": [
          {
            "PolicyName": {
              "Fn::Join": [
                "-",
                [
                  "authbridge-verification",
                  "production",
                  "lambda"
                ]
              ]
            },
            "PolicyDocument": {
              "Version": "2012-10-17",
              "Statement": [
                {
                  "Effect": "Allow",
                  "Action": [
                    "logs:CreateLogStream",
                    "logs:CreateLogGroup",
                    "logs:TagResource"
                  ],
                  "Resource": [
                    {
                      "Fn::Sub": "arn:${AWS::Partition}:logs:${AWS::Region}:${AWS::AccountId}:log-group:/aws/lambda/authbridge-verification-production*:*"
                    }
                  ]
                },
                {
                  "Effect": "Allow",
                  "Action": [
                    "logs:PutLogEvents"
                  ],
                  "Resource": [
                    {
                      "Fn::Sub": "arn:${AWS::Partition}:logs:${AWS::Region}:${AWS::AccountId}:log-group:/aws/lambda/authbridge-verification-production*:*:*"
                    }
                  ]
                },
                {
                  "Effect": "Allow",
                  "Action": [
                    "dynamodb:GetItem",
                    "dynamodb:PutItem",
                    "dynamodb:UpdateItem",
                    "dynamodb:Query"
                  ],
                  "Resource": [
                    "arn:aws:dynamodb:af-south-1:*:table/AuthBridgeTable",
                    "arn:aws:dynamodb:af-south-1:*:table/AuthBridgeTable/index/*"
                  ]
                },
                {
                  "Effect": "Allow",
                  "Action": [
                    "s3:PutObject",
                    "s3:GetObject",
                    "s3:DeleteObject"
                  ],
                  "Resource": "arn:aws:s3:::authbridge-documents-production/*"
                },
                {
                  "Effect": "Allow",
                  "Action": [
                    "textract:DetectDocumentText"
                  ],
                  "Resource": "*"
                },
                {
                  "Effect": "Allow",
                  "Action": [
                    "rekognition:CompareFaces",
                    "rekognition:DetectFaces",
                    "rekognition:GetFaceLivenessSessionResults"
                  ],
                  "Resource": "*"
                },
                {
                  "Effect": "Allow",
                  "Action": [
                    "cloudwatch:PutMetricData"
                  ],
                  "Resource": "*"
                },
                {
                  "Effect": "Allow",
                  "Action": [
                    "sqs:SendMessage",
                    "sqs:GetQueueUrl"
                  ],
                  "Resource": [
                    {
                      "Fn::GetAtt": [
                        "OcrQueue",
                        "Arn"
                      ]
                    },
                    {
                      "Fn::GetAtt": [
                        "BiometricQueue",
                        "Arn"
                      ]
                    },
                    {
                      "Fn::GetAtt": [
                        "WebhookQueue",
                        "Arn"
                      ]
                    }
                  ]
                },
                {
                  "Effect": "Allow",
                  "Action": [
                    "sns:Publish"
                  ],
                  "Resource": [
                    {
                      "Ref": "OcrAlertTopic"
                    }
                  ]
                },
                {
                  "Effect": "Allow",
                  "Action": [
                    "logs:CreateLogGroup",
                    "logs:CreateLogStream",
                    "logs:PutLogEvents"
                  ],
                  "Resource": "arn:aws:logs:af-south-1:*:*"
                },
                {
                  "Effect": "Allow",
                  "Action": [
                    "kms:Encrypt",
                    "kms:Decrypt",
                    "kms:GenerateDataKey",
                    "kms:GenerateDataKeyWithoutPlaintext",
                    "kms:DescribeKey"
                  ],
                  "Resource": "arn:aws:kms:af-south-1:979237821231:key/fd60e26f-69e2-4a05-a5c1-0bf22c2acf49"
                },
                {
                  "Effect": "Allow",
                  "Action": [
                    "sqs:ReceiveMessage",
                    "sqs:DeleteMessage",
                    "sqs:GetQueueAttributes"
                  ],
                  "Resource": [
                    {
                      "Fn::GetAtt": [
                        "WebhookQueue",
                        "Arn"
                      ]
                    },
                    {
                      "Fn::GetAtt": [
                        "OcrQueue",
                        "Arn"
                      ]
                    },
                    {
                      "Fn::GetAtt": [
                        "BiometricQueue",
                        "Arn"
                      ]
                    }
                  ]
                }
              ]
            }
          }
        ],
        "Path": "/",
        "RoleName": {
          "Fn::Join": [
            "-",
            [
              "authbridge-verification",
              "production",
              {
                "Ref": "AWS::Region"
              },
              "lambdaRole"
            ]
          ]
        }
      }
    },
    "ListCasesLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/authbridge-verification/production/1768665837931-2026-01-17T16:03:57.931Z/authbridge-verification.zip"
        },
        "Handler": "dist/handlers/list-cases.handler",
        "Runtime": "nodejs20.x",
        "FunctionName": "authbridge-verification-production-listCases",
        "MemorySize": 512,
        "Timeout": 30,
        "Description": "List verification cases with filtering and pagination",
        "Environment": {
          "Variables": {
            "AWS_NODEJS_CONNECTION_REUSE_ENABLED": "1",
            "NODE_OPTIONS": "--enable-source-maps",
            "TABLE_NAME": "AuthBridgeTable",
            "BUCKET_NAME": "authbridge-documents-production",
            "DATA_ENCRYPTION_KEY_ID": "fd60e26f-69e2-4a05-a5c1-0bf22c2acf49",
            "DATA_ENCRYPTION_KEY_ARN": "arn:aws:kms:af-south-1:979237821231:key/fd60e26f-69e2-4a05-a5c1-0bf22c2acf49"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "ListCasesLogGroup"
      ]
    },
    "GetCaseLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/authbridge-verification/production/1768665837931-2026-01-17T16:03:57.931Z/authbridge-verification.zip"
        },
        "Handler": "dist/handlers/get-case.handler",
        "Runtime": "nodejs20.x",
        "FunctionName": "authbridge-verification-production-getCase",
        "MemorySize": 512,
        "Timeout": 30,
        "Description": "Get case detail by ID",
        "Environment": {
          "Variables": {
            "AWS_NODEJS_CONNECTION_REUSE_ENABLED": "1",
            "NODE_OPTIONS": "--enable-source-maps",
            "TABLE_NAME": "AuthBridgeTable",
            "BUCKET_NAME": "authbridge-documents-production",
            "DATA_ENCRYPTION_KEY_ID": "fd60e26f-69e2-4a05-a5c1-0bf22c2acf49",
            "DATA_ENCRYPTION_KEY_ARN": "arn:aws:kms:af-south-1:979237821231:key/fd60e26f-69e2-4a05-a5c1-0bf22c2acf49"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "GetCaseLogGroup"
      ]
    },
    "ApproveCaseLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/authbridge-verification/production/1768665837931-2026-01-17T16:03:57.931Z/authbridge-verification.zip"
        },
        "Handler": "dist/handlers/approve-case.handler",
        "Runtime": "nodejs20.x",
        "FunctionName": "authbridge-verification-production-approveCase",
        "MemorySize": 512,
        "Timeout": 30,
        "Description": "Approve a verification case",
        "Environment": {
          "Variables": {
            "AWS_NODEJS_CONNECTION_REUSE_ENABLED": "1",
            "NODE_OPTIONS": "--enable-source-maps",
            "TABLE_NAME": "AuthBridgeTable",
            "BUCKET_NAME": "authbridge-documents-production",
            "DATA_ENCRYPTION_KEY_ID": "fd60e26f-69e2-4a05-a5c1-0bf22c2acf49",
            "DATA_ENCRYPTION_KEY_ARN": "arn:aws:kms:af-south-1:979237821231:key/fd60e26f-69e2-4a05-a5c1-0bf22c2acf49",
            "WEBHOOK_QUEUE_URL": {
              "Ref": "WebhookQueue"
            }
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "ApproveCaseLogGroup"
      ]
    },
    "RejectCaseLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/authbridge-verification/production/1768665837931-2026-01-17T16:03:57.931Z/authbridge-verification.zip"
        },
        "Handler": "dist/handlers/reject-case.handler",
        "Runtime": "nodejs20.x",
        "FunctionName": "authbridge-verification-production-rejectCase",
        "MemorySize": 512,
        "Timeout": 30,
        "Description": "Reject a verification case with reason",
        "Environment": {
          "Variables": {
            "AWS_NODEJS_CONNECTION_REUSE_ENABLED": "1",
            "NODE_OPTIONS": "--enable-source-maps",
            "TABLE_NAME": "AuthBridgeTable",
            "BUCKET_NAME": "authbridge-documents-production",
            "DATA_ENCRYPTION_KEY_ID": "fd60e26f-69e2-4a05-a5c1-0bf22c2acf49",
            "DATA_ENCRYPTION_KEY_ARN": "arn:aws:kms:af-south-1:979237821231:key/fd60e26f-69e2-4a05-a5c1-0bf22c2acf49",
            "WEBHOOK_QUEUE_URL": {
              "Ref": "WebhookQueue"
            }
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "RejectCaseLogGroup"
      ]
    },
    "SendWebhookLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/authbridge-verification/production/1768665837931-2026-01-17T16:03:57.931Z/authbridge-verification.zip"
        },
        "Handler": "dist/handlers/send-webhook.handler",
        "Runtime": "nodejs20.x",
        "FunctionName": "authbridge-verification-production-sendWebhook",
        "MemorySize": 256,
        "Timeout": 30,
        "Description": "Send webhook notifications for case decisions",
        "Environment": {
          "Variables": {
            "AWS_NODEJS_CONNECTION_REUSE_ENABLED": "1",
            "NODE_OPTIONS": "--enable-source-maps",
            "TABLE_NAME": "AuthBridgeTable",
            "BUCKET_NAME": "authbridge-documents-production",
            "DATA_ENCRYPTION_KEY_ID": "fd60e26f-69e2-4a05-a5c1-0bf22c2acf49",
            "DATA_ENCRYPTION_KEY_ARN": "arn:aws:kms:af-south-1:979237821231:key/fd60e26f-69e2-4a05-a5c1-0bf22c2acf49",
            "WEBHOOK_QUEUE_URL": {
              "Ref": "WebhookQueue"
            }
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "SendWebhookLogGroup"
      ]
    },
    "ConfigureWebhookLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/authbridge-verification/production/1768665837931-2026-01-17T16:03:57.931Z/authbridge-verification.zip"
        },
        "Handler": "dist/handlers/configure-webhook.handler",
        "Runtime": "nodejs20.x",
        "FunctionName": "authbridge-verification-production-configureWebhook",
        "MemorySize": 256,
        "Timeout": 10,
        "Description": "Configure webhook URL and settings for client",
        "Environment": {
          "Variables": {
            "AWS_NODEJS_CONNECTION_REUSE_ENABLED": "1",
            "NODE_OPTIONS": "--enable-source-maps",
            "TABLE_NAME": "AuthBridgeTable",
            "BUCKET_NAME": "authbridge-documents-production",
            "DATA_ENCRYPTION_KEY_ID": "fd60e26f-69e2-4a05-a5c1-0bf22c2acf49",
            "DATA_ENCRYPTION_KEY_ARN": "arn:aws:kms:af-south-1:979237821231:key/fd60e26f-69e2-4a05-a5c1-0bf22c2acf49"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "ConfigureWebhookLogGroup"
      ]
    },
    "TestWebhookLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/authbridge-verification/production/1768665837931-2026-01-17T16:03:57.931Z/authbridge-verification.zip"
        },
        "Handler": "dist/handlers/test-webhook.handler",
        "Runtime": "nodejs20.x",
        "FunctionName": "authbridge-verification-production-testWebhook",
        "MemorySize": 256,
        "Timeout": 30,
        "Description": "Send test webhook notification to verify configuration",
        "Environment": {
          "Variables": {
            "AWS_NODEJS_CONNECTION_REUSE_ENABLED": "1",
            "NODE_OPTIONS": "--enable-source-maps",
            "TABLE_NAME": "AuthBridgeTable",
            "BUCKET_NAME": "authbridge-documents-production",
            "DATA_ENCRYPTION_KEY_ID": "fd60e26f-69e2-4a05-a5c1-0bf22c2acf49",
            "DATA_ENCRYPTION_KEY_ARN": "arn:aws:kms:af-south-1:979237821231:key/fd60e26f-69e2-4a05-a5c1-0bf22c2acf49"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "TestWebhookLogGroup"
      ]
    },
    "AddNoteLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/authbridge-verification/production/1768665837931-2026-01-17T16:03:57.931Z/authbridge-verification.zip"
        },
        "Handler": "dist/handlers/add-note.handler",
        "Runtime": "nodejs20.x",
        "FunctionName": "authbridge-verification-production-addNote",
        "MemorySize": 512,
        "Timeout": 30,
        "Description": "Add note to case",
        "Environment": {
          "Variables": {
            "AWS_NODEJS_CONNECTION_REUSE_ENABLED": "1",
            "NODE_OPTIONS": "--enable-source-maps",
            "TABLE_NAME": "AuthBridgeTable",
            "BUCKET_NAME": "authbridge-documents-production",
            "DATA_ENCRYPTION_KEY_ID": "fd60e26f-69e2-4a05-a5c1-0bf22c2acf49",
            "DATA_ENCRYPTION_KEY_ARN": "arn:aws:kms:af-south-1:979237821231:key/fd60e26f-69e2-4a05-a5c1-0bf22c2acf49"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "AddNoteLogGroup"
      ]
    },
    "GetNotesLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/authbridge-verification/production/1768665837931-2026-01-17T16:03:57.931Z/authbridge-verification.zip"
        },
        "Handler": "dist/handlers/get-notes.handler",
        "Runtime": "nodejs20.x",
        "FunctionName": "authbridge-verification-production-getNotes",
        "MemorySize": 512,
        "Timeout": 30,
        "Description": "Get all notes for a case",
        "Environment": {
          "Variables": {
            "AWS_NODEJS_CONNECTION_REUSE_ENABLED": "1",
            "NODE_OPTIONS": "--enable-source-maps",
            "TABLE_NAME": "AuthBridgeTable",
            "BUCKET_NAME": "authbridge-documents-production",
            "DATA_ENCRYPTION_KEY_ID": "fd60e26f-69e2-4a05-a5c1-0bf22c2acf49",
            "DATA_ENCRYPTION_KEY_ARN": "arn:aws:kms:af-south-1:979237821231:key/fd60e26f-69e2-4a05-a5c1-0bf22c2acf49"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "GetNotesLogGroup"
      ]
    },
    "BulkApproveLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/authbridge-verification/production/1768665837931-2026-01-17T16:03:57.931Z/authbridge-verification.zip"
        },
        "Handler": "dist/handlers/bulk-approve.handler",
        "Runtime": "nodejs20.x",
        "FunctionName": "authbridge-verification-production-bulkApprove",
        "MemorySize": 512,
        "Timeout": 30,
        "Description": "Bulk approve multiple verification cases",
        "Environment": {
          "Variables": {
            "AWS_NODEJS_CONNECTION_REUSE_ENABLED": "1",
            "NODE_OPTIONS": "--enable-source-maps",
            "TABLE_NAME": "AuthBridgeTable",
            "BUCKET_NAME": "authbridge-documents-production",
            "DATA_ENCRYPTION_KEY_ID": "fd60e26f-69e2-4a05-a5c1-0bf22c2acf49",
            "DATA_ENCRYPTION_KEY_ARN": "arn:aws:kms:af-south-1:979237821231:key/fd60e26f-69e2-4a05-a5c1-0bf22c2acf49",
            "WEBHOOK_QUEUE_URL": {
              "Ref": "WebhookQueue"
            }
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "BulkApproveLogGroup"
      ]
    },
    "BulkRejectLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/authbridge-verification/production/1768665837931-2026-01-17T16:03:57.931Z/authbridge-verification.zip"
        },
        "Handler": "dist/handlers/bulk-reject.handler",
        "Runtime": "nodejs20.x",
        "FunctionName": "authbridge-verification-production-bulkReject",
        "MemorySize": 512,
        "Timeout": 30,
        "Description": "Bulk reject multiple verification cases with reason",
        "Environment": {
          "Variables": {
            "AWS_NODEJS_CONNECTION_REUSE_ENABLED": "1",
            "NODE_OPTIONS": "--enable-source-maps",
            "TABLE_NAME": "AuthBridgeTable",
            "BUCKET_NAME": "authbridge-documents-production",
            "DATA_ENCRYPTION_KEY_ID": "fd60e26f-69e2-4a05-a5c1-0bf22c2acf49",
            "DATA_ENCRYPTION_KEY_ARN": "arn:aws:kms:af-south-1:979237821231:key/fd60e26f-69e2-4a05-a5c1-0bf22c2acf49",
            "WEBHOOK_QUEUE_URL": {
              "Ref": "WebhookQueue"
            }
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "BulkRejectLogGroup"
      ]
    },
    "CreateVerificationLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/authbridge-verification/production/1768665837931-2026-01-17T16:03:57.931Z/authbridge-verification.zip"
        },
        "Handler": "dist/handlers/create-verification.handler",
        "Runtime": "nodejs20.x",
        "FunctionName": "authbridge-verification-production-createVerification",
        "MemorySize": 512,
        "Timeout": 30,
        "Description": "Create new verification case",
        "Environment": {
          "Variables": {
            "AWS_NODEJS_CONNECTION_REUSE_ENABLED": "1",
            "NODE_OPTIONS": "--enable-source-maps",
            "TABLE_NAME": "AuthBridgeTable",
            "BUCKET_NAME": "authbridge-documents-production",
            "DATA_ENCRYPTION_KEY_ID": "fd60e26f-69e2-4a05-a5c1-0bf22c2acf49",
            "DATA_ENCRYPTION_KEY_ARN": "arn:aws:kms:af-south-1:979237821231:key/fd60e26f-69e2-4a05-a5c1-0bf22c2acf49",
            "JWT_SECRET": "staging-jwt-secret-change-in-production",
            "JWT_ISSUER": "authbridge",
            "SESSION_TOKEN_EXPIRY_HOURS": "0.5",
            "SDK_BASE_URL": "https://sdk.authbridge.io"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "CreateVerificationLogGroup"
      ]
    },
    "GetVerificationStatusLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/authbridge-verification/production/1768665837931-2026-01-17T16:03:57.931Z/authbridge-verification.zip"
        },
        "Handler": "dist/handlers/get-verification-status.handler",
        "Runtime": "nodejs20.x",
        "FunctionName": "authbridge-verification-production-getVerificationStatus",
        "MemorySize": 512,
        "Timeout": 10,
        "Description": "Get verification status and details",
        "Environment": {
          "Variables": {
            "AWS_NODEJS_CONNECTION_REUSE_ENABLED": "1",
            "NODE_OPTIONS": "--enable-source-maps",
            "TABLE_NAME": "AuthBridgeTable",
            "BUCKET_NAME": "authbridge-documents-production",
            "DATA_ENCRYPTION_KEY_ID": "fd60e26f-69e2-4a05-a5c1-0bf22c2acf49",
            "DATA_ENCRYPTION_KEY_ARN": "arn:aws:kms:af-south-1:979237821231:key/fd60e26f-69e2-4a05-a5c1-0bf22c2acf49"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "GetVerificationStatusLogGroup"
      ]
    },
    "UploadDocumentLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/authbridge-verification/production/1768665837931-2026-01-17T16:03:57.931Z/authbridge-verification.zip"
        },
        "Handler": "dist/handlers/upload-document.handler",
        "Runtime": "nodejs20.x",
        "FunctionName": "authbridge-verification-production-uploadDocument",
        "MemorySize": 1024,
        "Timeout": 30,
        "Description": "Upload document to verification case",
        "Environment": {
          "Variables": {
            "AWS_NODEJS_CONNECTION_REUSE_ENABLED": "1",
            "NODE_OPTIONS": "--enable-source-maps",
            "TABLE_NAME": "AuthBridgeTable",
            "BUCKET_NAME": "authbridge-documents-production",
            "DATA_ENCRYPTION_KEY_ID": "fd60e26f-69e2-4a05-a5c1-0bf22c2acf49",
            "DATA_ENCRYPTION_KEY_ARN": "arn:aws:kms:af-south-1:979237821231:key/fd60e26f-69e2-4a05-a5c1-0bf22c2acf49",
            "OCR_QUEUE_URL": {
              "Ref": "OcrQueue"
            }
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "UploadDocumentLogGroup"
      ]
    },
    "RefreshDocumentUrlLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/authbridge-verification/production/1768665837931-2026-01-17T16:03:57.931Z/authbridge-verification.zip"
        },
        "Handler": "dist/handlers/refresh-document-url.handler",
        "Runtime": "nodejs20.x",
        "FunctionName": "authbridge-verification-production-refreshDocumentUrl",
        "MemorySize": 512,
        "Timeout": 30,
        "Description": "Refresh presigned URL for document access",
        "Environment": {
          "Variables": {
            "AWS_NODEJS_CONNECTION_REUSE_ENABLED": "1",
            "NODE_OPTIONS": "--enable-source-maps",
            "TABLE_NAME": "AuthBridgeTable",
            "BUCKET_NAME": "authbridge-documents-production",
            "DATA_ENCRYPTION_KEY_ID": "fd60e26f-69e2-4a05-a5c1-0bf22c2acf49",
            "DATA_ENCRYPTION_KEY_ARN": "arn:aws:kms:af-south-1:979237821231:key/fd60e26f-69e2-4a05-a5c1-0bf22c2acf49"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "RefreshDocumentUrlLogGroup"
      ]
    },
    "ProcessOCRLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/authbridge-verification/production/1768665837931-2026-01-17T16:03:57.931Z/authbridge-verification.zip"
        },
        "Handler": "dist/handlers/process-ocr.handler",
        "Runtime": "nodejs20.x",
        "FunctionName": "authbridge-verification-production-processOCR",
        "MemorySize": 512,
        "Timeout": 60,
        "Description": "Process OCR extraction from document images",
        "Environment": {
          "Variables": {
            "AWS_NODEJS_CONNECTION_REUSE_ENABLED": "1",
            "NODE_OPTIONS": "--enable-source-maps",
            "TABLE_NAME": "AuthBridgeTable",
            "BUCKET_NAME": "authbridge-documents-production",
            "DATA_ENCRYPTION_KEY_ID": "fd60e26f-69e2-4a05-a5c1-0bf22c2acf49",
            "DATA_ENCRYPTION_KEY_ARN": "arn:aws:kms:af-south-1:979237821231:key/fd60e26f-69e2-4a05-a5c1-0bf22c2acf49",
            "OCR_ALERT_TOPIC_ARN": {
              "Ref": "OcrAlertTopic"
            },
            "BIOMETRIC_QUEUE_URL": {
              "Ref": "BiometricQueue"
            }
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "ProcessOCRLogGroup"
      ]
    },
    "ProcessBiometricLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/authbridge-verification/production/1768665837931-2026-01-17T16:03:57.931Z/authbridge-verification.zip"
        },
        "Handler": "dist/handlers/process-biometric.handler",
        "Runtime": "nodejs20.x",
        "FunctionName": "authbridge-verification-production-processBiometric",
        "MemorySize": 1024,
        "Timeout": 60,
        "Description": "Process biometric face matching (liveness + comparison)",
        "Environment": {
          "Variables": {
            "AWS_NODEJS_CONNECTION_REUSE_ENABLED": "1",
            "NODE_OPTIONS": "--enable-source-maps",
            "TABLE_NAME": "AuthBridgeTable",
            "BUCKET_NAME": "authbridge-documents-production",
            "DATA_ENCRYPTION_KEY_ID": "fd60e26f-69e2-4a05-a5c1-0bf22c2acf49",
            "DATA_ENCRYPTION_KEY_ARN": "arn:aws:kms:af-south-1:979237821231:key/fd60e26f-69e2-4a05-a5c1-0bf22c2acf49",
            "BIOMETRIC_QUEUE_URL": {
              "Ref": "BiometricQueue"
            }
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "ProcessBiometricLogGroup"
      ]
    },
    "ListCasesLambdaVersiond3uGDEFUjKSjB19sLBUZVHFH37zmquAsoddwq99eBG8": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "ListCasesLambdaFunction"
        },
        "CodeSha256": "B038XVn4xIB4X4/X1G45jIicF3OxPoyQlgoeGd9nN30=",
        "Description": "List verification cases with filtering and pagination"
      }
    },
    "GetCaseLambdaVersionmx4vIQWGycOzQnLxToc6QFy6RTk2l2d0b5KBmsp1gY": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "GetCaseLambdaFunction"
        },
        "CodeSha256": "B038XVn4xIB4X4/X1G45jIicF3OxPoyQlgoeGd9nN30=",
        "Description": "Get case detail by ID"
      }
    },
    "ApproveCaseLambdaVersionwu4I7Eapk8XS6ZsmUWpOlJWrxROTDi4egGRz81uGpEs": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "ApproveCaseLambdaFunction"
        },
        "CodeSha256": "B038XVn4xIB4X4/X1G45jIicF3OxPoyQlgoeGd9nN30=",
        "Description": "Approve a verification case"
      }
    },
    "RejectCaseLambdaVersion7bu8wkJgNyW82zhIGhAB2oreg9SI5BT6OZMRccZ9WzI": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "RejectCaseLambdaFunction"
        },
        "CodeSha256": "B038XVn4xIB4X4/X1G45jIicF3OxPoyQlgoeGd9nN30=",
        "Description": "Reject a verification case with reason"
      }
    },
    "SendWebhookLambdaVersionCWF5GuDC7DnoLx2H9bsEaYbyty3vyuJQCnEWGiKU": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "SendWebhookLambdaFunction"
        },
        "CodeSha256": "B038XVn4xIB4X4/X1G45jIicF3OxPoyQlgoeGd9nN30=",
        "Description": "Send webhook notifications for case decisions"
      }
    },
    "ConfigureWebhookLambdaVersion4U8ooYXDYGQVwz51CLe0rucr0fbEQ1DwaDgI4ReaS4": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "ConfigureWebhookLambdaFunction"
        },
        "CodeSha256": "B038XVn4xIB4X4/X1G45jIicF3OxPoyQlgoeGd9nN30=",
        "Description": "Configure webhook URL and settings for client"
      }
    },
    "TestWebhookLambdaVersionq60dtxkaqNk8xQVLMrq0gz3eahSGgVo2Fzy2Gz9A": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "TestWebhookLambdaFunction"
        },
        "CodeSha256": "B038XVn4xIB4X4/X1G45jIicF3OxPoyQlgoeGd9nN30=",
        "Description": "Send test webhook notification to verify configuration"
      }
    },
    "AddNoteLambdaVersionJ9VPOWXYpQGHPMJlLG045xV1XTXt07Lww5xRT0PbA": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "AddNoteLambdaFunction"
        },
        "CodeSha256": "B038XVn4xIB4X4/X1G45jIicF3OxPoyQlgoeGd9nN30=",
        "Description": "Add note to case"
      }
    },
    "GetNotesLambdaVersionMjfaUzfnL34zOFAPaOO518TvE1xYSDOJ5pfQsSTZPAY": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "GetNotesLambdaFunction"
        },
        "CodeSha256": "B038XVn4xIB4X4/X1G45jIicF3OxPoyQlgoeGd9nN30=",
        "Description": "Get all notes for a case"
      }
    },
    "BulkApproveLambdaVersionCxMBa1EC0EvIDkcFbVDCD3Xorms1U25bpe9FwlpBPg": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "BulkApproveLambdaFunction"
        },
        "CodeSha256": "B038XVn4xIB4X4/X1G45jIicF3OxPoyQlgoeGd9nN30=",
        "Description": "Bulk approve multiple verification cases"
      }
    },
    "BulkRejectLambdaVersionkFY5TRY89sFiJOZT02COVUcusuuANGD9DHEFg8w": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "BulkRejectLambdaFunction"
        },
        "CodeSha256": "B038XVn4xIB4X4/X1G45jIicF3OxPoyQlgoeGd9nN30=",
        "Description": "Bulk reject multiple verification cases with reason"
      }
    },
    "CreateVerificationLambdaVersionHw285t3aGyIp1YjSwQxUrO15SIMxtliZhdPOXYg": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "CreateVerificationLambdaFunction"
        },
        "CodeSha256": "B038XVn4xIB4X4/X1G45jIicF3OxPoyQlgoeGd9nN30=",
        "Description": "Create new verification case"
      }
    },
    "GetVerificationStatusLambdaVersionpcJYD8Q6QkTr3BlvfbjTEFjyOvAbuZ2otfrIJHOLcY": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "GetVerificationStatusLambdaFunction"
        },
        "CodeSha256": "B038XVn4xIB4X4/X1G45jIicF3OxPoyQlgoeGd9nN30=",
        "Description": "Get verification status and details"
      }
    },
    "UploadDocumentLambdaVersionrheps03X2sssX2ucHC2lltYBAGUEVPZXZyWjNam7g": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "UploadDocumentLambdaFunction"
        },
        "CodeSha256": "B038XVn4xIB4X4/X1G45jIicF3OxPoyQlgoeGd9nN30=",
        "Description": "Upload document to verification case"
      }
    },
    "RefreshDocumentUrlLambdaVersionMhScQcW3s1A49LXfqJpyFRW3t5hsf2jBd3vmNsA": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "RefreshDocumentUrlLambdaFunction"
        },
        "CodeSha256": "B038XVn4xIB4X4/X1G45jIicF3OxPoyQlgoeGd9nN30=",
        "Description": "Refresh presigned URL for document access"
      }
    },
    "ProcessOCRLambdaVersion8CrbsvxKNJS11xNwLgU2iLEJ7ERMn938UtmQQuQRks": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "ProcessOCRLambdaFunction"
        },
        "CodeSha256": "B038XVn4xIB4X4/X1G45jIicF3OxPoyQlgoeGd9nN30=",
        "Description": "Process OCR extraction from document images"
      }
    },
    "ProcessBiometricLambdaVersion0TX2pl0aK1ywiZbtujNOnClPHyFUNZZdaSRBjus": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "ProcessBiometricLambdaFunction"
        },
        "CodeSha256": "B038XVn4xIB4X4/X1G45jIicF3OxPoyQlgoeGd9nN30=",
        "Description": "Process biometric face matching (liveness + comparison)"
      }
    },
    "ApiGatewayRestApi": {
      "Type": "AWS::ApiGateway::RestApi",
      "Properties": {
        "Name": "authbridge-verification-production",
        "EndpointConfiguration": {
          "Types": [
            "REGIONAL"
          ]
        },
        "Policy": "",
        "MinimumCompressionSize": 1024
      }
    },
    "ApiGatewayResourceApi": {
      "Type": "AWS::ApiGateway::Resource",
      "Properties": {
        "ParentId": {
          "Fn::GetAtt": [
            "ApiGatewayRestApi",
            "RootResourceId"
          ]
        },
        "PathPart": "api",
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayResourceApiV1": {
      "Type": "AWS::ApiGateway::Resource",
      "Properties": {
        "ParentId": {
          "Ref": "ApiGatewayResourceApi"
        },
        "PathPart": "v1",
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayResourceApiV1Cases": {
      "Type": "AWS::ApiGateway::Resource",
      "Properties": {
        "ParentId": {
          "Ref": "ApiGatewayResourceApiV1"
        },
        "PathPart": "cases",
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayResourceApiV1CasesIdVar": {
      "Type": "AWS::ApiGateway::Resource",
      "Properties": {
        "ParentId": {
          "Ref": "ApiGatewayResourceApiV1Cases"
        },
        "PathPart": "{id}",
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayResourceApiV1CasesIdVarApprove": {
      "Type": "AWS::ApiGateway::Resource",
      "Properties": {
        "ParentId": {
          "Ref": "ApiGatewayResourceApiV1CasesIdVar"
        },
        "PathPart": "approve",
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayResourceApiV1CasesIdVarReject": {
      "Type": "AWS::ApiGateway::Resource",
      "Properties": {
        "ParentId": {
          "Ref": "ApiGatewayResourceApiV1CasesIdVar"
        },
        "PathPart": "reject",
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayResourceApiV1CasesIdVarNotes": {
      "Type": "AWS::ApiGateway::Resource",
      "Properties": {
        "ParentId": {
          "Ref": "ApiGatewayResourceApiV1CasesIdVar"
        },
        "PathPart": "notes",
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayResourceApiV1CasesBulkDashapprove": {
      "Type": "AWS::ApiGateway::Resource",
      "Properties": {
        "ParentId": {
          "Ref": "ApiGatewayResourceApiV1Cases"
        },
        "PathPart": "bulk-approve",
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayResourceApiV1CasesBulkDashreject": {
      "Type": "AWS::ApiGateway::Resource",
      "Properties": {
        "ParentId": {
          "Ref": "ApiGatewayResourceApiV1Cases"
        },
        "PathPart": "bulk-reject",
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayResourceApiV1Webhooks": {
      "Type": "AWS::ApiGateway::Resource",
      "Properties": {
        "ParentId": {
          "Ref": "ApiGatewayResourceApiV1"
        },
        "PathPart": "webhooks",
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayResourceApiV1WebhooksConfigure": {
      "Type": "AWS::ApiGateway::Resource",
      "Properties": {
        "ParentId": {
          "Ref": "ApiGatewayResourceApiV1Webhooks"
        },
        "PathPart": "configure",
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayResourceApiV1WebhooksTest": {
      "Type": "AWS::ApiGateway::Resource",
      "Properties": {
        "ParentId": {
          "Ref": "ApiGatewayResourceApiV1Webhooks"
        },
        "PathPart": "test",
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayResourceApiV1Verifications": {
      "Type": "AWS::ApiGateway::Resource",
      "Properties": {
        "ParentId": {
          "Ref": "ApiGatewayResourceApiV1"
        },
        "PathPart": "verifications",
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayResourceApiV1VerificationsVerificationidVar": {
      "Type": "AWS::ApiGateway::Resource",
      "Properties": {
        "ParentId": {
          "Ref": "ApiGatewayResourceApiV1Verifications"
        },
        "PathPart": "{verificationId}",
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayResourceApiV1VerificationsVerificationidVarDocuments": {
      "Type": "AWS::ApiGateway::Resource",
      "Properties": {
        "ParentId": {
          "Ref": "ApiGatewayResourceApiV1VerificationsVerificationidVar"
        },
        "PathPart": "documents",
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayResourceApiV1VerificationsVerificationidVarDocumentsDocumentidVar": {
      "Type": "AWS::ApiGateway::Resource",
      "Properties": {
        "ParentId": {
          "Ref": "ApiGatewayResourceApiV1VerificationsVerificationidVarDocuments"
        },
        "PathPart": "{documentId}",
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayResourceApiV1VerificationsVerificationidVarDocumentsDocumentidVarUrl": {
      "Type": "AWS::ApiGateway::Resource",
      "Properties": {
        "ParentId": {
          "Ref": "ApiGatewayResourceApiV1VerificationsVerificationidVarDocumentsDocumentidVar"
        },
        "PathPart": "url",
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayMethodApiV1CasesOptions": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "AuthorizationType": "NONE",
        "HttpMethod": "OPTIONS",
        "MethodResponses": [
          {
            "StatusCode": "200",
            "ResponseParameters": {
              "method.response.header.Access-Control-Allow-Origin": true,
              "method.response.header.Access-Control-Allow-Headers": true,
              "method.response.header.Access-Control-Allow-Methods": true
            },
            "ResponseModels": {}
          }
        ],
        "RequestParameters": {},
        "Integration": {
          "Type": "MOCK",
          "RequestTemplates": {
            "application/json": "{statusCode:200}"
          },
          "ContentHandling": "CONVERT_TO_TEXT",
          "IntegrationResponses": [
            {
              "StatusCode": "200",
              "ResponseParameters": {
                "method.response.header.Access-Control-Allow-Origin": "'*'",
                "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent,X-Amzn-Trace-Id'",
                "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET'"
              },
              "ResponseTemplates": {
                "application/json": ""
              }
            }
          ]
        },
        "ResourceId": {
          "Ref": "ApiGatewayResourceApiV1Cases"
        },
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayMethodApiV1CasesIdVarOptions": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "AuthorizationType": "NONE",
        "HttpMethod": "OPTIONS",
        "MethodResponses": [
          {
            "StatusCode": "200",
            "ResponseParameters": {
              "method.response.header.Access-Control-Allow-Origin": true,
              "method.response.header.Access-Control-Allow-Headers": true,
              "method.response.header.Access-Control-Allow-Methods": true
            },
            "ResponseModels": {}
          }
        ],
        "RequestParameters": {},
        "Integration": {
          "Type": "MOCK",
          "RequestTemplates": {
            "application/json": "{statusCode:200}"
          },
          "ContentHandling": "CONVERT_TO_TEXT",
          "IntegrationResponses": [
            {
              "StatusCode": "200",
              "ResponseParameters": {
                "method.response.header.Access-Control-Allow-Origin": "'*'",
                "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent,X-Amzn-Trace-Id'",
                "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET'"
              },
              "ResponseTemplates": {
                "application/json": ""
              }
            }
          ]
        },
        "ResourceId": {
          "Ref": "ApiGatewayResourceApiV1CasesIdVar"
        },
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayMethodApiV1CasesIdVarApproveOptions": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "AuthorizationType": "NONE",
        "HttpMethod": "OPTIONS",
        "MethodResponses": [
          {
            "StatusCode": "200",
            "ResponseParameters": {
              "method.response.header.Access-Control-Allow-Origin": true,
              "method.response.header.Access-Control-Allow-Headers": true,
              "method.response.header.Access-Control-Allow-Methods": true
            },
            "ResponseModels": {}
          }
        ],
        "RequestParameters": {},
        "Integration": {
          "Type": "MOCK",
          "RequestTemplates": {
            "application/json": "{statusCode:200}"
          },
          "ContentHandling": "CONVERT_TO_TEXT",
          "IntegrationResponses": [
            {
              "StatusCode": "200",
              "ResponseParameters": {
                "method.response.header.Access-Control-Allow-Origin": "'*'",
                "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent,X-Amzn-Trace-Id'",
                "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,POST'"
              },
              "ResponseTemplates": {
                "application/json": ""
              }
            }
          ]
        },
        "ResourceId": {
          "Ref": "ApiGatewayResourceApiV1CasesIdVarApprove"
        },
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayMethodApiV1CasesIdVarRejectOptions": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "AuthorizationType": "NONE",
        "HttpMethod": "OPTIONS",
        "MethodResponses": [
          {
            "StatusCode": "200",
            "ResponseParameters": {
              "method.response.header.Access-Control-Allow-Origin": true,
              "method.response.header.Access-Control-Allow-Headers": true,
              "method.response.header.Access-Control-Allow-Methods": true
            },
            "ResponseModels": {}
          }
        ],
        "RequestParameters": {},
        "Integration": {
          "Type": "MOCK",
          "RequestTemplates": {
            "application/json": "{statusCode:200}"
          },
          "ContentHandling": "CONVERT_TO_TEXT",
          "IntegrationResponses": [
            {
              "StatusCode": "200",
              "ResponseParameters": {
                "method.response.header.Access-Control-Allow-Origin": "'*'",
                "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent,X-Amzn-Trace-Id'",
                "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,POST'"
              },
              "ResponseTemplates": {
                "application/json": ""
              }
            }
          ]
        },
        "ResourceId": {
          "Ref": "ApiGatewayResourceApiV1CasesIdVarReject"
        },
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayMethodApiV1WebhooksConfigureOptions": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "AuthorizationType": "NONE",
        "HttpMethod": "OPTIONS",
        "MethodResponses": [
          {
            "StatusCode": "200",
            "ResponseParameters": {
              "method.response.header.Access-Control-Allow-Origin": true,
              "method.response.header.Access-Control-Allow-Headers": true,
              "method.response.header.Access-Control-Allow-Methods": true
            },
            "ResponseModels": {}
          }
        ],
        "RequestParameters": {},
        "Integration": {
          "Type": "MOCK",
          "RequestTemplates": {
            "application/json": "{statusCode:200}"
          },
          "ContentHandling": "CONVERT_TO_TEXT",
          "IntegrationResponses": [
            {
              "StatusCode": "200",
              "ResponseParameters": {
                "method.response.header.Access-Control-Allow-Origin": "'*'",
                "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent,X-Amzn-Trace-Id'",
                "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,POST'"
              },
              "ResponseTemplates": {
                "application/json": ""
              }
            }
          ]
        },
        "ResourceId": {
          "Ref": "ApiGatewayResourceApiV1WebhooksConfigure"
        },
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayMethodApiV1WebhooksTestOptions": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "AuthorizationType": "NONE",
        "HttpMethod": "OPTIONS",
        "MethodResponses": [
          {
            "StatusCode": "200",
            "ResponseParameters": {
              "method.response.header.Access-Control-Allow-Origin": true,
              "method.response.header.Access-Control-Allow-Headers": true,
              "method.response.header.Access-Control-Allow-Methods": true
            },
            "ResponseModels": {}
          }
        ],
        "RequestParameters": {},
        "Integration": {
          "Type": "MOCK",
          "RequestTemplates": {
            "application/json": "{statusCode:200}"
          },
          "ContentHandling": "CONVERT_TO_TEXT",
          "IntegrationResponses": [
            {
              "StatusCode": "200",
              "ResponseParameters": {
                "method.response.header.Access-Control-Allow-Origin": "'*'",
                "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent,X-Amzn-Trace-Id'",
                "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,POST'"
              },
              "ResponseTemplates": {
                "application/json": ""
              }
            }
          ]
        },
        "ResourceId": {
          "Ref": "ApiGatewayResourceApiV1WebhooksTest"
        },
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayMethodApiV1CasesIdVarNotesOptions": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "AuthorizationType": "NONE",
        "HttpMethod": "OPTIONS",
        "MethodResponses": [
          {
            "StatusCode": "200",
            "ResponseParameters": {
              "method.response.header.Access-Control-Allow-Origin": true,
              "method.response.header.Access-Control-Allow-Headers": true,
              "method.response.header.Access-Control-Allow-Methods": true
            },
            "ResponseModels": {}
          }
        ],
        "RequestParameters": {},
        "Integration": {
          "Type": "MOCK",
          "RequestTemplates": {
            "application/json": "{statusCode:200}"
          },
          "ContentHandling": "CONVERT_TO_TEXT",
          "IntegrationResponses": [
            {
              "StatusCode": "200",
              "ResponseParameters": {
                "method.response.header.Access-Control-Allow-Origin": "'*'",
                "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent,X-Amzn-Trace-Id'",
                "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,POST'"
              },
              "ResponseTemplates": {
                "application/json": ""
              }
            }
          ]
        },
        "ResourceId": {
          "Ref": "ApiGatewayResourceApiV1CasesIdVarNotes"
        },
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayMethodApiV1CasesBulkDashapproveOptions": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "AuthorizationType": "NONE",
        "HttpMethod": "OPTIONS",
        "MethodResponses": [
          {
            "StatusCode": "200",
            "ResponseParameters": {
              "method.response.header.Access-Control-Allow-Origin": true,
              "method.response.header.Access-Control-Allow-Headers": true,
              "method.response.header.Access-Control-Allow-Methods": true
            },
            "ResponseModels": {}
          }
        ],
        "RequestParameters": {},
        "Integration": {
          "Type": "MOCK",
          "RequestTemplates": {
            "application/json": "{statusCode:200}"
          },
          "ContentHandling": "CONVERT_TO_TEXT",
          "IntegrationResponses": [
            {
              "StatusCode": "200",
              "ResponseParameters": {
                "method.response.header.Access-Control-Allow-Origin": "'*'",
                "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent,X-Amzn-Trace-Id'",
                "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,POST'"
              },
              "ResponseTemplates": {
                "application/json": ""
              }
            }
          ]
        },
        "ResourceId": {
          "Ref": "ApiGatewayResourceApiV1CasesBulkDashapprove"
        },
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayMethodApiV1CasesBulkDashrejectOptions": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "AuthorizationType": "NONE",
        "HttpMethod": "OPTIONS",
        "MethodResponses": [
          {
            "StatusCode": "200",
            "ResponseParameters": {
              "method.response.header.Access-Control-Allow-Origin": true,
              "method.response.header.Access-Control-Allow-Headers": true,
              "method.response.header.Access-Control-Allow-Methods": true
            },
            "ResponseModels": {}
          }
        ],
        "RequestParameters": {},
        "Integration": {
          "Type": "MOCK",
          "RequestTemplates": {
            "application/json": "{statusCode:200}"
          },
          "ContentHandling": "CONVERT_TO_TEXT",
          "IntegrationResponses": [
            {
              "StatusCode": "200",
              "ResponseParameters": {
                "method.response.header.Access-Control-Allow-Origin": "'*'",
                "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent,X-Amzn-Trace-Id'",
                "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,POST'"
              },
              "ResponseTemplates": {
                "application/json": ""
              }
            }
          ]
        },
        "ResourceId": {
          "Ref": "ApiGatewayResourceApiV1CasesBulkDashreject"
        },
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayMethodApiV1VerificationsOptions": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "AuthorizationType": "NONE",
        "HttpMethod": "OPTIONS",
        "MethodResponses": [
          {
            "StatusCode": "200",
            "ResponseParameters": {
              "method.response.header.Access-Control-Allow-Origin": true,
              "method.response.header.Access-Control-Allow-Headers": true,
              "method.response.header.Access-Control-Allow-Methods": true
            },
            "ResponseModels": {}
          }
        ],
        "RequestParameters": {},
        "Integration": {
          "Type": "MOCK",
          "RequestTemplates": {
            "application/json": "{statusCode:200}"
          },
          "ContentHandling": "CONVERT_TO_TEXT",
          "IntegrationResponses": [
            {
              "StatusCode": "200",
              "ResponseParameters": {
                "method.response.header.Access-Control-Allow-Origin": "'*'",
                "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent,X-Amzn-Trace-Id'",
                "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,POST'"
              },
              "ResponseTemplates": {
                "application/json": ""
              }
            }
          ]
        },
        "ResourceId": {
          "Ref": "ApiGatewayResourceApiV1Verifications"
        },
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayMethodApiV1VerificationsVerificationidVarOptions": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "AuthorizationType": "NONE",
        "HttpMethod": "OPTIONS",
        "MethodResponses": [
          {
            "StatusCode": "200",
            "ResponseParameters": {
              "method.response.header.Access-Control-Allow-Origin": true,
              "method.response.header.Access-Control-Allow-Headers": true,
              "method.response.header.Access-Control-Allow-Methods": true
            },
            "ResponseModels": {}
          }
        ],
        "RequestParameters": {},
        "Integration": {
          "Type": "MOCK",
          "RequestTemplates": {
            "application/json": "{statusCode:200}"
          },
          "ContentHandling": "CONVERT_TO_TEXT",
          "IntegrationResponses": [
            {
              "StatusCode": "200",
              "ResponseParameters": {
                "method.response.header.Access-Control-Allow-Origin": "'*'",
                "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent,X-Amzn-Trace-Id'",
                "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET'"
              },
              "ResponseTemplates": {
                "application/json": ""
              }
            }
          ]
        },
        "ResourceId": {
          "Ref": "ApiGatewayResourceApiV1VerificationsVerificationidVar"
        },
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayMethodApiV1VerificationsVerificationidVarDocumentsOptions": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "AuthorizationType": "NONE",
        "HttpMethod": "OPTIONS",
        "MethodResponses": [
          {
            "StatusCode": "200",
            "ResponseParameters": {
              "method.response.header.Access-Control-Allow-Origin": true,
              "method.response.header.Access-Control-Allow-Headers": true,
              "method.response.header.Access-Control-Allow-Methods": true
            },
            "ResponseModels": {}
          }
        ],
        "RequestParameters": {},
        "Integration": {
          "Type": "MOCK",
          "RequestTemplates": {
            "application/json": "{statusCode:200}"
          },
          "ContentHandling": "CONVERT_TO_TEXT",
          "IntegrationResponses": [
            {
              "StatusCode": "200",
              "ResponseParameters": {
                "method.response.header.Access-Control-Allow-Origin": "'*'",
                "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent,X-Amzn-Trace-Id'",
                "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,POST'"
              },
              "ResponseTemplates": {
                "application/json": ""
              }
            }
          ]
        },
        "ResourceId": {
          "Ref": "ApiGatewayResourceApiV1VerificationsVerificationidVarDocuments"
        },
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayMethodApiV1VerificationsVerificationidVarDocumentsDocumentidVarUrlOptions": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "AuthorizationType": "NONE",
        "HttpMethod": "OPTIONS",
        "MethodResponses": [
          {
            "StatusCode": "200",
            "ResponseParameters": {
              "method.response.header.Access-Control-Allow-Origin": true,
              "method.response.header.Access-Control-Allow-Headers": true,
              "method.response.header.Access-Control-Allow-Methods": true
            },
            "ResponseModels": {}
          }
        ],
        "RequestParameters": {},
        "Integration": {
          "Type": "MOCK",
          "RequestTemplates": {
            "application/json": "{statusCode:200}"
          },
          "ContentHandling": "CONVERT_TO_TEXT",
          "IntegrationResponses": [
            {
              "StatusCode": "200",
              "ResponseParameters": {
                "method.response.header.Access-Control-Allow-Origin": "'*'",
                "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent,X-Amzn-Trace-Id'",
                "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,POST'"
              },
              "ResponseTemplates": {
                "application/json": ""
              }
            }
          ]
        },
        "ResourceId": {
          "Ref": "ApiGatewayResourceApiV1VerificationsVerificationidVarDocumentsDocumentidVarUrl"
        },
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayMethodApiV1CasesGet": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "HttpMethod": "GET",
        "RequestParameters": {},
        "ResourceId": {
          "Ref": "ApiGatewayResourceApiV1Cases"
        },
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        },
        "ApiKeyRequired": false,
        "AuthorizationType": "NONE",
        "Integration": {
          "IntegrationHttpMethod": "POST",
          "Type": "AWS_PROXY",
          "Uri": {
            "Fn::Join": [
              "",
              [
                "arn:",
                {
                  "Ref": "AWS::Partition"
                },
                ":apigateway:",
                {
                  "Ref": "AWS::Region"
                },
                ":lambda:path/2015-03-31/functions/",
                {
                  "Fn::GetAtt": [
                    "ListCasesLambdaFunction",
                    "Arn"
                  ]
                },
                "/invocations"
              ]
            ]
          }
        },
        "MethodResponses": []
      },
      "DependsOn": [
        "ListCasesLambdaPermissionApiGateway"
      ]
    },
    "ApiGatewayMethodApiV1CasesIdVarGet": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "HttpMethod": "GET",
        "RequestParameters": {},
        "ResourceId": {
          "Ref": "ApiGatewayResourceApiV1CasesIdVar"
        },
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        },
        "ApiKeyRequired": false,
        "AuthorizationType": "NONE",
        "Integration": {
          "IntegrationHttpMethod": "POST",
          "Type": "AWS_PROXY",
          "Uri": {
            "Fn::Join": [
              "",
              [
                "arn:",
                {
                  "Ref": "AWS::Partition"
                },
                ":apigateway:",
                {
                  "Ref": "AWS::Region"
                },
                ":lambda:path/2015-03-31/functions/",
                {
                  "Fn::GetAtt": [
                    "GetCaseLambdaFunction",
                    "Arn"
                  ]
                },
                "/invocations"
              ]
            ]
          }
        },
        "MethodResponses": []
      },
      "DependsOn": [
        "GetCaseLambdaPermissionApiGateway"
      ]
    },
    "ApiGatewayMethodApiV1CasesIdVarApprovePost": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "HttpMethod": "POST",
        "RequestParameters": {},
        "ResourceId": {
          "Ref": "ApiGatewayResourceApiV1CasesIdVarApprove"
        },
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        },
        "ApiKeyRequired": false,
        "AuthorizationType": "NONE",
        "Integration": {
          "IntegrationHttpMethod": "POST",
          "Type": "AWS_PROXY",
          "Uri": {
            "Fn::Join": [
              "",
              [
                "arn:",
                {
                  "Ref": "AWS::Partition"
                },
                ":apigateway:",
                {
                  "Ref": "AWS::Region"
                },
                ":lambda:path/2015-03-31/functions/",
                {
                  "Fn::GetAtt": [
                    "ApproveCaseLambdaFunction",
                    "Arn"
                  ]
                },
                "/invocations"
              ]
            ]
          }
        },
        "MethodResponses": []
      },
      "DependsOn": [
        "ApproveCaseLambdaPermissionApiGateway"
      ]
    },
    "ApiGatewayMethodApiV1CasesIdVarRejectPost": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "HttpMethod": "POST",
        "RequestParameters": {},
        "ResourceId": {
          "Ref": "ApiGatewayResourceApiV1CasesIdVarReject"
        },
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        },
        "ApiKeyRequired": false,
        "AuthorizationType": "NONE",
        "Integration": {
          "IntegrationHttpMethod": "POST",
          "Type": "AWS_PROXY",
          "Uri": {
            "Fn::Join": [
              "",
              [
                "arn:",
                {
                  "Ref": "AWS::Partition"
                },
                ":apigateway:",
                {
                  "Ref": "AWS::Region"
                },
                ":lambda:path/2015-03-31/functions/",
                {
                  "Fn::GetAtt": [
                    "RejectCaseLambdaFunction",
                    "Arn"
                  ]
                },
                "/invocations"
              ]
            ]
          }
        },
        "MethodResponses": []
      },
      "DependsOn": [
        "RejectCaseLambdaPermissionApiGateway"
      ]
    },
    "ApiGatewayMethodApiV1WebhooksConfigurePost": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "HttpMethod": "POST",
        "RequestParameters": {},
        "ResourceId": {
          "Ref": "ApiGatewayResourceApiV1WebhooksConfigure"
        },
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        },
        "ApiKeyRequired": false,
        "AuthorizationType": "CUSTOM",
        "AuthorizerId": {
          "Ref": "ApiKeyAuthorizerApiGatewayAuthorizer"
        },
        "Integration": {
          "IntegrationHttpMethod": "POST",
          "Type": "AWS_PROXY",
          "Uri": {
            "Fn::Join": [
              "",
              [
                "arn:",
                {
                  "Ref": "AWS::Partition"
                },
                ":apigateway:",
                {
                  "Ref": "AWS::Region"
                },
                ":lambda:path/2015-03-31/functions/",
                {
                  "Fn::GetAtt": [
                    "ConfigureWebhookLambdaFunction",
                    "Arn"
                  ]
                },
                "/invocations"
              ]
            ]
          }
        },
        "MethodResponses": []
      },
      "DependsOn": [
        "ApiKeyAuthorizerApiGatewayAuthorizer"
      ]
    },
    "ApiGatewayMethodApiV1WebhooksTestPost": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "HttpMethod": "POST",
        "RequestParameters": {},
        "ResourceId": {
          "Ref": "ApiGatewayResourceApiV1WebhooksTest"
        },
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        },
        "ApiKeyRequired": false,
        "AuthorizationType": "CUSTOM",
        "AuthorizerId": {
          "Ref": "ApiKeyAuthorizerApiGatewayAuthorizer"
        },
        "Integration": {
          "IntegrationHttpMethod": "POST",
          "Type": "AWS_PROXY",
          "Uri": {
            "Fn::Join": [
              "",
              [
                "arn:",
                {
                  "Ref": "AWS::Partition"
                },
                ":apigateway:",
                {
                  "Ref": "AWS::Region"
                },
                ":lambda:path/2015-03-31/functions/",
                {
                  "Fn::GetAtt": [
                    "TestWebhookLambdaFunction",
                    "Arn"
                  ]
                },
                "/invocations"
              ]
            ]
          }
        },
        "MethodResponses": []
      },
      "DependsOn": [
        "ApiKeyAuthorizerApiGatewayAuthorizer"
      ]
    },
    "ApiGatewayMethodApiV1CasesIdVarNotesPost": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "HttpMethod": "POST",
        "RequestParameters": {},
        "ResourceId": {
          "Ref": "ApiGatewayResourceApiV1CasesIdVarNotes"
        },
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        },
        "ApiKeyRequired": false,
        "AuthorizationType": "NONE",
        "Integration": {
          "IntegrationHttpMethod": "POST",
          "Type": "AWS_PROXY",
          "Uri": {
            "Fn::Join": [
              "",
              [
                "arn:",
                {
                  "Ref": "AWS::Partition"
                },
                ":apigateway:",
                {
                  "Ref": "AWS::Region"
                },
                ":lambda:path/2015-03-31/functions/",
                {
                  "Fn::GetAtt": [
                    "AddNoteLambdaFunction",
                    "Arn"
                  ]
                },
                "/invocations"
              ]
            ]
          }
        },
        "MethodResponses": []
      },
      "DependsOn": [
        "AddNoteLambdaPermissionApiGateway"
      ]
    },
    "ApiGatewayMethodApiV1CasesIdVarNotesGet": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "HttpMethod": "GET",
        "RequestParameters": {},
        "ResourceId": {
          "Ref": "ApiGatewayResourceApiV1CasesIdVarNotes"
        },
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        },
        "ApiKeyRequired": false,
        "AuthorizationType": "NONE",
        "Integration": {
          "IntegrationHttpMethod": "POST",
          "Type": "AWS_PROXY",
          "Uri": {
            "Fn::Join": [
              "",
              [
                "arn:",
                {
                  "Ref": "AWS::Partition"
                },
                ":apigateway:",
                {
                  "Ref": "AWS::Region"
                },
                ":lambda:path/2015-03-31/functions/",
                {
                  "Fn::GetAtt": [
                    "GetNotesLambdaFunction",
                    "Arn"
                  ]
                },
                "/invocations"
              ]
            ]
          }
        },
        "MethodResponses": []
      },
      "DependsOn": [
        "GetNotesLambdaPermissionApiGateway"
      ]
    },
    "ApiGatewayMethodApiV1CasesBulkDashapprovePost": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "HttpMethod": "POST",
        "RequestParameters": {},
        "ResourceId": {
          "Ref": "ApiGatewayResourceApiV1CasesBulkDashapprove"
        },
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        },
        "ApiKeyRequired": false,
        "AuthorizationType": "NONE",
        "Integration": {
          "IntegrationHttpMethod": "POST",
          "Type": "AWS_PROXY",
          "Uri": {
            "Fn::Join": [
              "",
              [
                "arn:",
                {
                  "Ref": "AWS::Partition"
                },
                ":apigateway:",
                {
                  "Ref": "AWS::Region"
                },
                ":lambda:path/2015-03-31/functions/",
                {
                  "Fn::GetAtt": [
                    "BulkApproveLambdaFunction",
                    "Arn"
                  ]
                },
                "/invocations"
              ]
            ]
          }
        },
        "MethodResponses": []
      },
      "DependsOn": [
        "BulkApproveLambdaPermissionApiGateway"
      ]
    },
    "ApiGatewayMethodApiV1CasesBulkDashrejectPost": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "HttpMethod": "POST",
        "RequestParameters": {},
        "ResourceId": {
          "Ref": "ApiGatewayResourceApiV1CasesBulkDashreject"
        },
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        },
        "ApiKeyRequired": false,
        "AuthorizationType": "NONE",
        "Integration": {
          "IntegrationHttpMethod": "POST",
          "Type": "AWS_PROXY",
          "Uri": {
            "Fn::Join": [
              "",
              [
                "arn:",
                {
                  "Ref": "AWS::Partition"
                },
                ":apigateway:",
                {
                  "Ref": "AWS::Region"
                },
                ":lambda:path/2015-03-31/functions/",
                {
                  "Fn::GetAtt": [
                    "BulkRejectLambdaFunction",
                    "Arn"
                  ]
                },
                "/invocations"
              ]
            ]
          }
        },
        "MethodResponses": []
      },
      "DependsOn": [
        "BulkRejectLambdaPermissionApiGateway"
      ]
    },
    "ApiGatewayMethodApiV1VerificationsPost": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "HttpMethod": "POST",
        "RequestParameters": {},
        "ResourceId": {
          "Ref": "ApiGatewayResourceApiV1Verifications"
        },
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        },
        "ApiKeyRequired": false,
        "AuthorizationType": "CUSTOM",
        "AuthorizerId": {
          "Ref": "ApiKeyAuthorizerApiGatewayAuthorizer"
        },
        "Integration": {
          "IntegrationHttpMethod": "POST",
          "Type": "AWS_PROXY",
          "Uri": {
            "Fn::Join": [
              "",
              [
                "arn:",
                {
                  "Ref": "AWS::Partition"
                },
                ":apigateway:",
                {
                  "Ref": "AWS::Region"
                },
                ":lambda:path/2015-03-31/functions/",
                {
                  "Fn::GetAtt": [
                    "CreateVerificationLambdaFunction",
                    "Arn"
                  ]
                },
                "/invocations"
              ]
            ]
          }
        },
        "MethodResponses": []
      },
      "DependsOn": [
        "ApiKeyAuthorizerApiGatewayAuthorizer"
      ]
    },
    "ApiGatewayMethodApiV1VerificationsVerificationidVarGet": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "HttpMethod": "GET",
        "RequestParameters": {},
        "ResourceId": {
          "Ref": "ApiGatewayResourceApiV1VerificationsVerificationidVar"
        },
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        },
        "ApiKeyRequired": false,
        "AuthorizationType": "CUSTOM",
        "AuthorizerId": {
          "Ref": "ApiKeyAuthorizerApiGatewayAuthorizer"
        },
        "Integration": {
          "IntegrationHttpMethod": "POST",
          "Type": "AWS_PROXY",
          "Uri": {
            "Fn::Join": [
              "",
              [
                "arn:",
                {
                  "Ref": "AWS::Partition"
                },
                ":apigateway:",
                {
                  "Ref": "AWS::Region"
                },
                ":lambda:path/2015-03-31/functions/",
                {
                  "Fn::GetAtt": [
                    "GetVerificationStatusLambdaFunction",
                    "Arn"
                  ]
                },
                "/invocations"
              ]
            ]
          }
        },
        "MethodResponses": []
      },
      "DependsOn": [
        "ApiKeyAuthorizerApiGatewayAuthorizer"
      ]
    },
    "ApiGatewayMethodApiV1VerificationsVerificationidVarDocumentsPost": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "HttpMethod": "POST",
        "RequestParameters": {},
        "ResourceId": {
          "Ref": "ApiGatewayResourceApiV1VerificationsVerificationidVarDocuments"
        },
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        },
        "ApiKeyRequired": false,
        "AuthorizationType": "CUSTOM",
        "AuthorizerId": {
          "Ref": "ApiKeyAuthorizerApiGatewayAuthorizer"
        },
        "Integration": {
          "IntegrationHttpMethod": "POST",
          "Type": "AWS_PROXY",
          "Uri": {
            "Fn::Join": [
              "",
              [
                "arn:",
                {
                  "Ref": "AWS::Partition"
                },
                ":apigateway:",
                {
                  "Ref": "AWS::Region"
                },
                ":lambda:path/2015-03-31/functions/",
                {
                  "Fn::GetAtt": [
                    "UploadDocumentLambdaFunction",
                    "Arn"
                  ]
                },
                "/invocations"
              ]
            ]
          }
        },
        "MethodResponses": []
      },
      "DependsOn": [
        "ApiKeyAuthorizerApiGatewayAuthorizer"
      ]
    },
    "ApiGatewayMethodApiV1VerificationsVerificationidVarDocumentsDocumentidVarUrlPost": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "HttpMethod": "POST",
        "RequestParameters": {},
        "ResourceId": {
          "Ref": "ApiGatewayResourceApiV1VerificationsVerificationidVarDocumentsDocumentidVarUrl"
        },
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        },
        "ApiKeyRequired": false,
        "AuthorizationType": "NONE",
        "Integration": {
          "IntegrationHttpMethod": "POST",
          "Type": "AWS_PROXY",
          "Uri": {
            "Fn::Join": [
              "",
              [
                "arn:",
                {
                  "Ref": "AWS::Partition"
                },
                ":apigateway:",
                {
                  "Ref": "AWS::Region"
                },
                ":lambda:path/2015-03-31/functions/",
                {
                  "Fn::GetAtt": [
                    "RefreshDocumentUrlLambdaFunction",
                    "Arn"
                  ]
                },
                "/invocations"
              ]
            ]
          }
        },
        "MethodResponses": []
      },
      "DependsOn": [
        "RefreshDocumentUrlLambdaPermissionApiGateway"
      ]
    },
    "ApiKeyAuthorizerApiGatewayAuthorizer": {
      "Type": "AWS::ApiGateway::Authorizer",
      "Properties": {
        "AuthorizerResultTtlInSeconds": 300,
        "IdentitySource": "method.request.header.Authorization",
        "Name": "apiKeyAuthorizer",
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        },
        "AuthorizerUri": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":apigateway:",
              {
                "Ref": "AWS::Region"
              },
              ":lambda:path/2015-03-31/functions/",
              "arn:aws:lambda:af-south-1:979237821231:function:authbridge-auth-production-apiKeyAuthorizer",
              "/invocations"
            ]
          ]
        },
        "Type": "REQUEST"
      }
    },
    "ApiGatewayDeployment1768665441299": {
      "Type": "AWS::ApiGateway::Deployment",
      "Properties": {
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        },
        "StageName": "production"
      },
      "DependsOn": [
        "ApiGatewayMethodApiV1CasesOptions",
        "ApiGatewayMethodApiV1CasesIdVarOptions",
        "ApiGatewayMethodApiV1CasesIdVarApproveOptions",
        "ApiGatewayMethodApiV1CasesIdVarRejectOptions",
        "ApiGatewayMethodApiV1WebhooksConfigureOptions",
        "ApiGatewayMethodApiV1WebhooksTestOptions",
        "ApiGatewayMethodApiV1CasesIdVarNotesOptions",
        "ApiGatewayMethodApiV1CasesBulkDashapproveOptions",
        "ApiGatewayMethodApiV1CasesBulkDashrejectOptions",
        "ApiGatewayMethodApiV1VerificationsOptions",
        "ApiGatewayMethodApiV1VerificationsVerificationidVarOptions",
        "ApiGatewayMethodApiV1VerificationsVerificationidVarDocumentsOptions",
        "ApiGatewayMethodApiV1VerificationsVerificationidVarDocumentsDocumentidVarUrlOptions",
        "ApiGatewayMethodApiV1CasesGet",
        "ApiGatewayMethodApiV1CasesIdVarGet",
        "ApiGatewayMethodApiV1CasesIdVarApprovePost",
        "ApiGatewayMethodApiV1CasesIdVarRejectPost",
        "ApiGatewayMethodApiV1WebhooksConfigurePost",
        "ApiGatewayMethodApiV1WebhooksTestPost",
        "ApiGatewayMethodApiV1CasesIdVarNotesPost",
        "ApiGatewayMethodApiV1CasesIdVarNotesGet",
        "ApiGatewayMethodApiV1CasesBulkDashapprovePost",
        "ApiGatewayMethodApiV1CasesBulkDashrejectPost",
        "ApiGatewayMethodApiV1VerificationsPost",
        "ApiGatewayMethodApiV1VerificationsVerificationidVarGet",
        "ApiGatewayMethodApiV1VerificationsVerificationidVarDocumentsPost",
        "ApiGatewayMethodApiV1VerificationsVerificationidVarDocumentsDocumentidVarUrlPost"
      ]
    },
    "ListCasesLambdaPermissionApiGateway": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "ListCasesLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "ApiGatewayRestApi"
              },
              "/*/*"
            ]
          ]
        }
      }
    },
    "GetCaseLambdaPermissionApiGateway": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "GetCaseLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "ApiGatewayRestApi"
              },
              "/*/*"
            ]
          ]
        }
      }
    },
    "ApproveCaseLambdaPermissionApiGateway": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "ApproveCaseLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "ApiGatewayRestApi"
              },
              "/*/*"
            ]
          ]
        }
      }
    },
    "RejectCaseLambdaPermissionApiGateway": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "RejectCaseLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "ApiGatewayRestApi"
              },
              "/*/*"
            ]
          ]
        }
      }
    },
    "ConfigureWebhookLambdaPermissionApiGateway": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "ConfigureWebhookLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "ApiGatewayRestApi"
              },
              "/*/*"
            ]
          ]
        }
      }
    },
    "ApiKeyAuthorizerLambdaPermissionApiGateway": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": "arn:aws:lambda:af-south-1:979237821231:function:authbridge-auth-production-apiKeyAuthorizer",
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "ApiGatewayRestApi"
              },
              "/*/*"
            ]
          ]
        }
      }
    },
    "TestWebhookLambdaPermissionApiGateway": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "TestWebhookLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "ApiGatewayRestApi"
              },
              "/*/*"
            ]
          ]
        }
      }
    },
    "AddNoteLambdaPermissionApiGateway": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "AddNoteLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "ApiGatewayRestApi"
              },
              "/*/*"
            ]
          ]
        }
      }
    },
    "GetNotesLambdaPermissionApiGateway": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "GetNotesLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "ApiGatewayRestApi"
              },
              "/*/*"
            ]
          ]
        }
      }
    },
    "BulkApproveLambdaPermissionApiGateway": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "BulkApproveLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "ApiGatewayRestApi"
              },
              "/*/*"
            ]
          ]
        }
      }
    },
    "BulkRejectLambdaPermissionApiGateway": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "BulkRejectLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "ApiGatewayRestApi"
              },
              "/*/*"
            ]
          ]
        }
      }
    },
    "CreateVerificationLambdaPermissionApiGateway": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "CreateVerificationLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "ApiGatewayRestApi"
              },
              "/*/*"
            ]
          ]
        }
      }
    },
    "GetVerificationStatusLambdaPermissionApiGateway": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "GetVerificationStatusLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "ApiGatewayRestApi"
              },
              "/*/*"
            ]
          ]
        }
      }
    },
    "UploadDocumentLambdaPermissionApiGateway": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "UploadDocumentLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "ApiGatewayRestApi"
              },
              "/*/*"
            ]
          ]
        }
      }
    },
    "RefreshDocumentUrlLambdaPermissionApiGateway": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "RefreshDocumentUrlLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "ApiGatewayRestApi"
              },
              "/*/*"
            ]
          ]
        }
      }
    },
    "SendWebhookEventSourceMappingSQSWebhookQueue": {
      "Type": "AWS::Lambda::EventSourceMapping",
      "DependsOn": [
        "IamRoleLambdaExecution"
      ],
      "Properties": {
        "BatchSize": 10,
        "EventSourceArn": {
          "Fn::GetAtt": [
            "WebhookQueue",
            "Arn"
          ]
        },
        "FunctionName": {
          "Fn::GetAtt": [
            "SendWebhookLambdaFunction",
            "Arn"
          ]
        },
        "Enabled": true
      }
    },
    "ProcessOCREventSourceMappingSQSOcrQueue": {
      "Type": "AWS::Lambda::EventSourceMapping",
      "DependsOn": [
        "IamRoleLambdaExecution"
      ],
      "Properties": {
        "BatchSize": 1,
        "EventSourceArn": {
          "Fn::GetAtt": [
            "OcrQueue",
            "Arn"
          ]
        },
        "FunctionName": {
          "Fn::GetAtt": [
            "ProcessOCRLambdaFunction",
            "Arn"
          ]
        },
        "Enabled": true,
        "FunctionResponseTypes": [
          "ReportBatchItemFailures"
        ]
      }
    },
    "ProcessBiometricEventSourceMappingSQSBiometricQueue": {
      "Type": "AWS::Lambda::EventSourceMapping",
      "DependsOn": [
        "IamRoleLambdaExecution"
      ],
      "Properties": {
        "BatchSize": 1,
        "EventSourceArn": {
          "Fn::GetAtt": [
            "BiometricQueue",
            "Arn"
          ]
        },
        "FunctionName": {
          "Fn::GetAtt": [
            "ProcessBiometricLambdaFunction",
            "Arn"
          ]
        },
        "Enabled": true,
        "FunctionResponseTypes": [
          "ReportBatchItemFailures"
        ]
      }
    },
    "DocumentsBucket": {
      "Type": "AWS::S3::Bucket",
      "Properties": {
        "BucketName": "authbridge-documents-production",
        "BucketEncryption": {
          "ServerSideEncryptionConfiguration": [
            {
              "ServerSideEncryptionByDefault": {
                "SSEAlgorithm": "aws:kms",
                "KMSMasterKeyID": "arn:aws:kms:af-south-1:979237821231:key/fd60e26f-69e2-4a05-a5c1-0bf22c2acf49"
              }
            }
          ]
        },
        "PublicAccessBlockConfiguration": {
          "BlockPublicAcls": true,
          "BlockPublicPolicy": true,
          "IgnorePublicAcls": true,
          "RestrictPublicBuckets": true
        }
      }
    },
    "DocumentsBucketPolicy": {
      "Type": "AWS::S3::BucketPolicy",
      "Properties": {
        "Bucket": {
          "Ref": "DocumentsBucket"
        },
        "PolicyDocument": {
          "Statement": [
            {
              "Sid": "DenyUnencryptedObjectUploads",
              "Effect": "Deny",
              "Principal": "*",
              "Action": "s3:PutObject",
              "Resource": {
                "Fn::Sub": "${DocumentsBucket.Arn}/*"
              },
              "Condition": {
                "StringNotEquals": {
                  "s3:x-amz-server-side-encryption": "aws:kms"
                }
              }
            },
            {
              "Sid": "DenyIncorrectEncryptionHeader",
              "Effect": "Deny",
              "Principal": "*",
              "Action": "s3:PutObject",
              "Resource": {
                "Fn::Sub": "${DocumentsBucket.Arn}/*"
              },
              "Condition": {
                "StringNotEqualsIfExists": {
                  "s3:x-amz-server-side-encryption-aws-kms-key-id": "arn:aws:kms:af-south-1:979237821231:key/fd60e26f-69e2-4a05-a5c1-0bf22c2acf49"
                }
              }
            }
          ]
        }
      }
    },
    "OcrQueue": {
      "Type": "AWS::SQS::Queue",
      "Properties": {
        "QueueName": "authbridge-ocr-queue-production",
        "VisibilityTimeout": 360,
        "MessageRetentionPeriod": 345600,
        "ReceiveMessageWaitTimeSeconds": 0,
        "RedrivePolicy": {
          "deadLetterTargetArn": {
            "Fn::GetAtt": [
              "OcrDLQ",
              "Arn"
            ]
          },
          "maxReceiveCount": 3
        }
      }
    },
    "OcrDLQ": {
      "Type": "AWS::SQS::Queue",
      "Properties": {
        "QueueName": "authbridge-ocr-dlq-production",
        "MessageRetentionPeriod": 1209600,
        "ReceiveMessageWaitTimeSeconds": 0
      }
    },
    "BiometricQueue": {
      "Type": "AWS::SQS::Queue",
      "Properties": {
        "QueueName": "authbridge-biometric-queue-production",
        "VisibilityTimeout": 360,
        "MessageRetentionPeriod": 345600,
        "ReceiveMessageWaitTimeSeconds": 0,
        "RedrivePolicy": {
          "deadLetterTargetArn": {
            "Fn::GetAtt": [
              "BiometricDLQ",
              "Arn"
            ]
          },
          "maxReceiveCount": 3
        }
      }
    },
    "BiometricDLQ": {
      "Type": "AWS::SQS::Queue",
      "Properties": {
        "QueueName": "authbridge-biometric-dlq-production",
        "MessageRetentionPeriod": 1209600,
        "ReceiveMessageWaitTimeSeconds": 0
      }
    },
    "WebhookQueue": {
      "Type": "AWS::SQS::Queue",
      "Properties": {
        "QueueName": "authbridge-webhook-queue-production",
        "VisibilityTimeout": 90,
        "MessageRetentionPeriod": 86400,
        "ReceiveMessageWaitTimeSeconds": 0,
        "RedrivePolicy": {
          "deadLetterTargetArn": {
            "Fn::GetAtt": [
              "WebhookDLQ",
              "Arn"
            ]
          },
          "maxReceiveCount": 3
        }
      }
    },
    "WebhookDLQ": {
      "Type": "AWS::SQS::Queue",
      "Properties": {
        "QueueName": "authbridge-webhook-dlq-production",
        "MessageRetentionPeriod": 1209600,
        "ReceiveMessageWaitTimeSeconds": 0
      }
    },
    "OcrAlertTopic": {
      "Type": "AWS::SNS::Topic",
      "Properties": {
        "TopicName": "authbridge-ocr-alerts-production",
        "DisplayName": "AuthBridge OCR Alerts"
      }
    },
    "OcrSuccessRateAlarm": {
      "Type": "AWS::CloudWatch::Alarm",
      "Properties": {
        "AlarmName": "authbridge-ocr-success-rate-production",
        "AlarmDescription": "OCR success rate below 85%",
        "MetricName": "OcrSuccess",
        "Namespace": "AuthBridge/Verification",
        "Statistic": "Sum",
        "Period": 300,
        "EvaluationPeriods": 3,
        "Threshold": 85,
        "ComparisonOperator": "LessThanThreshold",
        "TreatMissingData": "notBreaching",
        "AlarmActions": [
          {
            "Ref": "OcrAlertTopic"
          }
        ]
      }
    },
    "OcrConfidenceAlarm": {
      "Type": "AWS::CloudWatch::Alarm",
      "Properties": {
        "AlarmName": "authbridge-ocr-confidence-production",
        "AlarmDescription": "Average OCR confidence below 90%",
        "MetricName": "OcrConfidenceScore",
        "Namespace": "AuthBridge/Verification",
        "Statistic": "Average",
        "Period": 300,
        "EvaluationPeriods": 3,
        "Threshold": 90,
        "ComparisonOperator": "LessThanThreshold",
        "TreatMissingData": "notBreaching",
        "AlarmActions": [
          {
            "Ref": "OcrAlertTopic"
          }
        ]
      }
    },
    "OcrProcessingTimeAlarm": {
      "Type": "AWS::CloudWatch::Alarm",
      "Properties": {
        "AlarmName": "authbridge-ocr-processing-time-production",
        "AlarmDescription": "OCR processing time exceeds 10 seconds (p95)",
        "MetricName": "OcrProcessingTime",
        "Namespace": "AuthBridge/Verification",
        "ExtendedStatistic": "p95",
        "Period": 300,
        "EvaluationPeriods": 2,
        "Threshold": 10000,
        "ComparisonOperator": "GreaterThanThreshold",
        "TreatMissingData": "notBreaching",
        "AlarmActions": [
          {
            "Ref": "OcrAlertTopic"
          }
        ]
      }
    },
    "OcrManualReviewRateAlarm": {
      "Type": "AWS::CloudWatch::Alarm",
      "Properties": {
        "AlarmName": "authbridge-ocr-manual-review-rate-production",
        "AlarmDescription": "Manual review rate exceeds 30%",
        "MetricName": "OcrManualReviewRequired",
        "Namespace": "AuthBridge/Verification",
        "Statistic": "Sum",
        "Period": 3600,
        "EvaluationPeriods": 1,
        "Threshold": 30,
        "ComparisonOperator": "GreaterThanThreshold",
        "TreatMissingData": "notBreaching",
        "AlarmActions": [
          {
            "Ref": "OcrAlertTopic"
          }
        ]
      }
    },
    "OcrDLQAlarm": {
      "Type": "AWS::CloudWatch::Alarm",
      "Properties": {
        "AlarmName": "authbridge-ocr-dlq-messages-production",
        "AlarmDescription": "Messages in OCR Dead Letter Queue",
        "MetricName": "ApproximateNumberOfMessagesVisible",
        "Namespace": "AWS/SQS",
        "Dimensions": [
          {
            "Name": "QueueName",
            "Value": {
              "Fn::GetAtt": [
                "OcrDLQ",
                "QueueName"
              ]
            }
          }
        ],
        "Statistic": "Sum",
        "Period": 300,
        "EvaluationPeriods": 1,
        "Threshold": 1,
        "ComparisonOperator": "GreaterThanOrEqualToThreshold",
        "TreatMissingData": "notBreaching",
        "AlarmActions": [
          {
            "Ref": "OcrAlertTopic"
          }
        ]
      }
    },
    "BiometricPassRateAlarm": {
      "Type": "AWS::CloudWatch::Alarm",
      "Properties": {
        "AlarmName": "authbridge-biometric-pass-rate-production",
        "AlarmDescription": "Biometric pass rate below 70%",
        "MetricName": "BiometricPassed",
        "Namespace": "AuthBridge/Verification",
        "Statistic": "Sum",
        "Period": 3600,
        "EvaluationPeriods": 1,
        "Threshold": 70,
        "ComparisonOperator": "LessThanThreshold",
        "TreatMissingData": "notBreaching",
        "AlarmActions": [
          {
            "Ref": "OcrAlertTopic"
          }
        ]
      }
    },
    "BiometricSimilarityAlarm": {
      "Type": "AWS::CloudWatch::Alarm",
      "Properties": {
        "AlarmName": "authbridge-biometric-similarity-production",
        "AlarmDescription": "Average biometric similarity score below 85%",
        "MetricName": "BiometricSimilarityScore",
        "Namespace": "AuthBridge/Verification",
        "Statistic": "Average",
        "Period": 300,
        "EvaluationPeriods": 3,
        "Threshold": 85,
        "ComparisonOperator": "LessThanThreshold",
        "TreatMissingData": "notBreaching",
        "AlarmActions": [
          {
            "Ref": "OcrAlertTopic"
          }
        ]
      }
    },
    "BiometricProcessingTimeAlarm": {
      "Type": "AWS::CloudWatch::Alarm",
      "Properties": {
        "AlarmName": "authbridge-biometric-processing-time-production",
        "AlarmDescription": "Biometric processing time exceeds 5 seconds (p95)",
        "MetricName": "BiometricProcessingTime",
        "Namespace": "AuthBridge/Verification",
        "ExtendedStatistic": "p95",
        "Period": 300,
        "EvaluationPeriods": 2,
        "Threshold": 5000,
        "ComparisonOperator": "GreaterThanThreshold",
        "TreatMissingData": "notBreaching",
        "AlarmActions": [
          {
            "Ref": "OcrAlertTopic"
          }
        ]
      }
    },
    "BiometricManualReviewRateAlarm": {
      "Type": "AWS::CloudWatch::Alarm",
      "Properties": {
        "AlarmName": "authbridge-biometric-manual-review-rate-production",
        "AlarmDescription": "Biometric manual review rate exceeds 40%",
        "MetricName": "BiometricManualReviewRequired",
        "Namespace": "AuthBridge/Verification",
        "Statistic": "Sum",
        "Period": 3600,
        "EvaluationPeriods": 1,
        "Threshold": 40,
        "ComparisonOperator": "GreaterThanThreshold",
        "TreatMissingData": "notBreaching",
        "AlarmActions": [
          {
            "Ref": "OcrAlertTopic"
          }
        ]
      }
    },
    "BiometricFaceDetectionIssueAlarm": {
      "Type": "AWS::CloudWatch::Alarm",
      "Properties": {
        "AlarmName": "authbridge-biometric-face-detection-issues-production",
        "AlarmDescription": "Face detection issue rate exceeds 15%",
        "MetricName": "FaceDetectionIssue",
        "Namespace": "AuthBridge/Verification",
        "Statistic": "Sum",
        "Period": 3600,
        "EvaluationPeriods": 1,
        "Threshold": 15,
        "ComparisonOperator": "GreaterThanThreshold",
        "TreatMissingData": "notBreaching",
        "AlarmActions": [
          {
            "Ref": "OcrAlertTopic"
          }
        ]
      }
    },
    "BiometricDLQAlarm": {
      "Type": "AWS::CloudWatch::Alarm",
      "Properties": {
        "AlarmName": "authbridge-biometric-dlq-messages-production",
        "AlarmDescription": "Messages in Biometric Dead Letter Queue",
        "MetricName": "ApproximateNumberOfMessagesVisible",
        "Namespace": "AWS/SQS",
        "Dimensions": [
          {
            "Name": "QueueName",
            "Value": {
              "Fn::GetAtt": [
                "BiometricDLQ",
                "QueueName"
              ]
            }
          }
        ],
        "Statistic": "Sum",
        "Period": 300,
        "EvaluationPeriods": 1,
        "Threshold": 1,
        "ComparisonOperator": "GreaterThanOrEqualToThreshold",
        "TreatMissingData": "notBreaching",
        "AlarmActions": [
          {
            "Ref": "OcrAlertTopic"
          }
        ]
      }
    },
    "DuplicateCrossClientRateAlarm": {
      "Type": "AWS::CloudWatch::Alarm",
      "Properties": {
        "AlarmName": "authbridge-duplicate-cross-client-rate-production",
        "AlarmDescription": "Cross-client duplicate rate exceeds 5% over 1 hour",
        "MetricName": "Duplicate/CrossClientDuplicates",
        "Namespace": "AuthBridge/Verification",
        "Statistic": "Sum",
        "Period": 3600,
        "EvaluationPeriods": 1,
        "Threshold": 5,
        "ComparisonOperator": "GreaterThanThreshold",
        "TreatMissingData": "notBreaching",
        "AlarmActions": [
          {
            "Ref": "OcrAlertTopic"
          }
        ]
      }
    },
    "DuplicateRiskScoreAlarm": {
      "Type": "AWS::CloudWatch::Alarm",
      "Properties": {
        "AlarmName": "authbridge-duplicate-risk-score-production",
        "AlarmDescription": "Average risk score exceeds 50 over 1 hour",
        "MetricName": "Duplicate/RiskScore",
        "Namespace": "AuthBridge/Verification",
        "Statistic": "Average",
        "Period": 3600,
        "EvaluationPeriods": 1,
        "Threshold": 50,
        "ComparisonOperator": "GreaterThanThreshold",
        "TreatMissingData": "notBreaching",
        "AlarmActions": [
          {
            "Ref": "OcrAlertTopic"
          }
        ]
      }
    },
    "DuplicateCheckFailureAlarm": {
      "Type": "AWS::CloudWatch::Alarm",
      "Properties": {
        "AlarmName": "authbridge-duplicate-check-failures-production",
        "AlarmDescription": "Duplicate check failure rate exceeds 10% over 5 minutes",
        "MetricName": "Duplicate/CheckFailure",
        "Namespace": "AuthBridge/Verification",
        "Statistic": "Sum",
        "Period": 300,
        "EvaluationPeriods": 2,
        "Threshold": 10,
        "ComparisonOperator": "GreaterThanThreshold",
        "TreatMissingData": "notBreaching",
        "AlarmActions": [
          {
            "Ref": "OcrAlertTopic"
          }
        ]
      }
    },
    "DuplicateDetectionDashboard": {
      "Type": "AWS::CloudWatch::Dashboard",
      "Properties": {
        "DashboardName": "authbridge-duplicate-detection-production",
        "DashboardBody": {
          "Fn::Sub": "{\n  \"widgets\": [\n    {\n      \"type\": \"metric\",\n      \"properties\": {\n        \"metrics\": [\n          [\"AuthBridge/Verification\", \"Duplicate/ChecksPerformed\", {\"stat\": \"Sum\", \"label\": \"Total Checks\"}],\n          [\".\", \"Duplicate/DuplicatesFound\", {\"stat\": \"Sum\", \"label\": \"Duplicates Found\"}],\n          [\".\", \"Duplicate/CrossClientDuplicates\", {\"stat\": \"Sum\", \"label\": \"Cross-Client\"}]\n        ],\n        \"period\": 300,\n        \"stat\": \"Sum\",\n        \"region\": \"af-south-1\",\n        \"title\": \"Duplicate Detection Overview\",\n        \"yAxis\": {\n          \"left\": {\n            \"min\": 0\n          }\n        }\n      }\n    },\n    {\n      \"type\": \"metric\",\n      \"properties\": {\n        \"metrics\": [\n          [\"AuthBridge/Verification\", \"Duplicate/RiskLevel/low\", {\"stat\": \"Sum\", \"label\": \"Low Risk\"}],\n          [\".\", \"Duplicate/RiskLevel/medium\", {\"stat\": \"Sum\", \"label\": \"Medium Risk\"}],\n          [\".\", \"Duplicate/RiskLevel/high\", {\"stat\": \"Sum\", \"label\": \"High Risk\"}],\n          [\".\", \"Duplicate/RiskLevel/critical\", {\"stat\": \"Sum\", \"label\": \"Critical Risk\"}]\n        ],\n        \"period\": 300,\n        \"stat\": \"Sum\",\n        \"region\": \"af-south-1\",\n        \"title\": \"Risk Level Distribution\",\n        \"yAxis\": {\n          \"left\": {\n            \"min\": 0\n          }\n        }\n      }\n    },\n    {\n      \"type\": \"metric\",\n      \"properties\": {\n        \"metrics\": [\n          [\"AuthBridge/Verification\", \"Duplicate/RiskScore\", {\"stat\": \"Average\", \"label\": \"Average Risk Score\"}]\n        ],\n        \"period\": 300,\n        \"stat\": \"Average\",\n        \"region\": \"af-south-1\",\n        \"title\": \"Average Risk Score (0-100)\",\n        \"yAxis\": {\n          \"left\": {\n            \"min\": 0,\n            \"max\": 100\n          }\n        },\n        \"annotations\": {\n          \"horizontal\": [\n            {\n              \"value\": 25,\n              \"label\": \"Low/Medium Threshold\",\n              \"fill\": \"below\"\n            },\n            {\n              \"value\": 50,\n              \"label\": \"Medium/High Threshold\",\n              \"fill\": \"below\"\n            },\n            {\n              \"value\": 75,\n              \"label\": \"High/Critical Threshold\",\n              \"fill\": \"below\"\n            }\n          ]\n        }\n      }\n    },\n    {\n      \"type\": \"metric\",\n      \"properties\": {\n        \"metrics\": [\n          [\"AuthBridge/Verification\", \"Duplicate/ManualReviewTriggered\", {\"stat\": \"Sum\", \"label\": \"Manual Review Required\"}]\n        ],\n        \"period\": 300,\n        \"stat\": \"Sum\",\n        \"region\": \"af-south-1\",\n        \"title\": \"Manual Review Queue\",\n        \"yAxis\": {\n          \"left\": {\n            \"min\": 0\n          }\n        }\n      }\n    },\n    {\n      \"type\": \"metric\",\n      \"properties\": {\n        \"metrics\": [\n          [\"AuthBridge/Verification\", \"Duplicate/CheckTime\", {\"stat\": \"p50\", \"label\": \"p50\"}],\n          [\"...\", {\"stat\": \"p95\", \"label\": \"p95\"}],\n          [\"...\", {\"stat\": \"p99\", \"label\": \"p99\"}]\n        ],\n        \"period\": 300,\n        \"stat\": \"Average\",\n        \"region\": \"af-south-1\",\n        \"title\": \"Duplicate Check Latency (ms)\",\n        \"yAxis\": {\n          \"left\": {\n            \"min\": 0\n          }\n        },\n        \"annotations\": {\n          \"horizontal\": [\n            {\n              \"value\": 500,\n              \"label\": \"Target (p95 < 500ms)\",\n              \"fill\": \"above\"\n            }\n          ]\n        }\n      }\n    },\n    {\n      \"type\": \"metric\",\n      \"properties\": {\n        \"metrics\": [\n          [\"AuthBridge/Verification\", \"Duplicate/CheckSuccess\", {\"stat\": \"Sum\", \"label\": \"Success\"}],\n          [\".\", \"Duplicate/CheckFailure\", {\"stat\": \"Sum\", \"label\": \"Failure\"}]\n        ],\n        \"period\": 300,\n        \"stat\": \"Sum\",\n        \"region\": \"af-south-1\",\n        \"title\": \"Duplicate Check Success/Failure Rate\",\n        \"yAxis\": {\n          \"left\": {\n            \"min\": 0\n          }\n        }\n      }\n    }\n  ]\n}\n"
        }
      }
    }
  },
  "Outputs": {
    "ServerlessDeploymentBucketName": {
      "Value": {
        "Ref": "ServerlessDeploymentBucket"
      },
      "Export": {
        "Name": "sls-authbridge-verification-production-ServerlessDeploymentBucketName"
      }
    },
    "ListCasesLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "ListCasesLambdaVersiond3uGDEFUjKSjB19sLBUZVHFH37zmquAsoddwq99eBG8"
      },
      "Export": {
        "Name": "sls-authbridge-verification-production-ListCasesLambdaFunctionQualifiedArn"
      }
    },
    "GetCaseLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "GetCaseLambdaVersionmx4vIQWGycOzQnLxToc6QFy6RTk2l2d0b5KBmsp1gY"
      },
      "Export": {
        "Name": "sls-authbridge-verification-production-GetCaseLambdaFunctionQualifiedArn"
      }
    },
    "ApproveCaseLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "ApproveCaseLambdaVersionwu4I7Eapk8XS6ZsmUWpOlJWrxROTDi4egGRz81uGpEs"
      },
      "Export": {
        "Name": "sls-authbridge-verification-production-ApproveCaseLambdaFunctionQualifiedArn"
      }
    },
    "RejectCaseLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "RejectCaseLambdaVersion7bu8wkJgNyW82zhIGhAB2oreg9SI5BT6OZMRccZ9WzI"
      },
      "Export": {
        "Name": "sls-authbridge-verification-production-RejectCaseLambdaFunctionQualifiedArn"
      }
    },
    "SendWebhookLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "SendWebhookLambdaVersionCWF5GuDC7DnoLx2H9bsEaYbyty3vyuJQCnEWGiKU"
      },
      "Export": {
        "Name": "sls-authbridge-verification-production-SendWebhookLambdaFunctionQualifiedArn"
      }
    },
    "ConfigureWebhookLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "ConfigureWebhookLambdaVersion4U8ooYXDYGQVwz51CLe0rucr0fbEQ1DwaDgI4ReaS4"
      },
      "Export": {
        "Name": "sls-authbridge-verification-production-ConfigureWebhookLambdaFunctionQualifiedArn"
      }
    },
    "TestWebhookLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "TestWebhookLambdaVersionq60dtxkaqNk8xQVLMrq0gz3eahSGgVo2Fzy2Gz9A"
      },
      "Export": {
        "Name": "sls-authbridge-verification-production-TestWebhookLambdaFunctionQualifiedArn"
      }
    },
    "AddNoteLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "AddNoteLambdaVersionJ9VPOWXYpQGHPMJlLG045xV1XTXt07Lww5xRT0PbA"
      },
      "Export": {
        "Name": "sls-authbridge-verification-production-AddNoteLambdaFunctionQualifiedArn"
      }
    },
    "GetNotesLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "GetNotesLambdaVersionMjfaUzfnL34zOFAPaOO518TvE1xYSDOJ5pfQsSTZPAY"
      },
      "Export": {
        "Name": "sls-authbridge-verification-production-GetNotesLambdaFunctionQualifiedArn"
      }
    },
    "BulkApproveLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "BulkApproveLambdaVersionCxMBa1EC0EvIDkcFbVDCD3Xorms1U25bpe9FwlpBPg"
      },
      "Export": {
        "Name": "sls-authbridge-verification-production-BulkApproveLambdaFunctionQualifiedArn"
      }
    },
    "BulkRejectLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "BulkRejectLambdaVersionkFY5TRY89sFiJOZT02COVUcusuuANGD9DHEFg8w"
      },
      "Export": {
        "Name": "sls-authbridge-verification-production-BulkRejectLambdaFunctionQualifiedArn"
      }
    },
    "CreateVerificationLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "CreateVerificationLambdaVersionHw285t3aGyIp1YjSwQxUrO15SIMxtliZhdPOXYg"
      },
      "Export": {
        "Name": "sls-authbridge-verification-production-CreateVerificationLambdaFunctionQualifiedArn"
      }
    },
    "GetVerificationStatusLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "GetVerificationStatusLambdaVersionpcJYD8Q6QkTr3BlvfbjTEFjyOvAbuZ2otfrIJHOLcY"
      },
      "Export": {
        "Name": "sls-authbridge-verification-production-GetVerificationStatusLambdaFunctionQualifiedArn"
      }
    },
    "UploadDocumentLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "UploadDocumentLambdaVersionrheps03X2sssX2ucHC2lltYBAGUEVPZXZyWjNam7g"
      },
      "Export": {
        "Name": "sls-authbridge-verification-production-UploadDocumentLambdaFunctionQualifiedArn"
      }
    },
    "RefreshDocumentUrlLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "RefreshDocumentUrlLambdaVersionMhScQcW3s1A49LXfqJpyFRW3t5hsf2jBd3vmNsA"
      },
      "Export": {
        "Name": "sls-authbridge-verification-production-RefreshDocumentUrlLambdaFunctionQualifiedArn"
      }
    },
    "ProcessOCRLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "ProcessOCRLambdaVersion8CrbsvxKNJS11xNwLgU2iLEJ7ERMn938UtmQQuQRks"
      },
      "Export": {
        "Name": "sls-authbridge-verification-production-ProcessOCRLambdaFunctionQualifiedArn"
      }
    },
    "ProcessBiometricLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "ProcessBiometricLambdaVersion0TX2pl0aK1ywiZbtujNOnClPHyFUNZZdaSRBjus"
      },
      "Export": {
        "Name": "sls-authbridge-verification-production-ProcessBiometricLambdaFunctionQualifiedArn"
      }
    },
    "ServiceEndpoint": {
      "Description": "URL of the service endpoint",
      "Value": {
        "Fn::Join": [
          "",
          [
            "https://",
            {
              "Ref": "ApiGatewayRestApi"
            },
            ".execute-api.",
            {
              "Ref": "AWS::Region"
            },
            ".",
            {
              "Ref": "AWS::URLSuffix"
            },
            "/production"
          ]
        ]
      },
      "Export": {
        "Name": "sls-authbridge-verification-production-ServiceEndpoint"
      }
    },
    "OcrAlertTopicArn": {
      "Description": "ARN of the OCR Alert SNS Topic",
      "Value": {
        "Ref": "OcrAlertTopic"
      },
      "Export": {
        "Name": "authbridge-ocr-alert-topic-production"
      }
    }
  }
}