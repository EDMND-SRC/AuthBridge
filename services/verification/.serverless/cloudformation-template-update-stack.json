{
  "AWSTemplateFormatVersion": "2010-09-09",
  "Description": "The AWS CloudFormation template for this Serverless application",
  "Resources": {
    "ServerlessDeploymentBucket": {
      "Type": "AWS::S3::Bucket",
      "Properties": {
        "BucketEncryption": {
          "ServerSideEncryptionConfiguration": [
            {
              "ServerSideEncryptionByDefault": {
                "SSEAlgorithm": "AES256"
              }
            }
          ]
        }
      }
    },
    "ServerlessDeploymentBucketPolicy": {
      "Type": "AWS::S3::BucketPolicy",
      "Properties": {
        "Bucket": {
          "Ref": "ServerlessDeploymentBucket"
        },
        "PolicyDocument": {
          "Statement": [
            {
              "Action": "s3:*",
              "Effect": "Deny",
              "Principal": "*",
              "Resource": [
                {
                  "Fn::Join": [
                    "",
                    [
                      "arn:",
                      {
                        "Ref": "AWS::Partition"
                      },
                      ":s3:::",
                      {
                        "Ref": "ServerlessDeploymentBucket"
                      },
                      "/*"
                    ]
                  ]
                },
                {
                  "Fn::Join": [
                    "",
                    [
                      "arn:",
                      {
                        "Ref": "AWS::Partition"
                      },
                      ":s3:::",
                      {
                        "Ref": "ServerlessDeploymentBucket"
                      }
                    ]
                  ]
                }
              ],
              "Condition": {
                "Bool": {
                  "aws:SecureTransport": false
                }
              }
            }
          ]
        }
      }
    },
    "ListCasesLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/authbridge-verification-staging-listCases"
      }
    },
    "GetCaseLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/authbridge-verification-staging-getCase"
      }
    },
    "ApproveCaseLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/authbridge-verification-staging-approveCase"
      }
    },
    "RejectCaseLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/authbridge-verification-staging-rejectCase"
      }
    },
    "SendWebhookLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/authbridge-verification-staging-sendWebhook"
      }
    },
    "ConfigureWebhookLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/authbridge-verification-staging-configureWebhook"
      }
    },
    "TestWebhookLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/authbridge-verification-staging-testWebhook"
      }
    },
    "AddNoteLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/authbridge-verification-staging-addNote"
      }
    },
    "GetNotesLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/authbridge-verification-staging-getNotes"
      }
    },
    "GetAuditLogsLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/authbridge-verification-staging-getAuditLogs"
      }
    },
    "BulkApproveLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/authbridge-verification-staging-bulkApprove"
      }
    },
    "BulkRejectLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/authbridge-verification-staging-bulkReject"
      }
    },
    "CreateVerificationLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/authbridge-verification-staging-createVerification"
      }
    },
    "GetVerificationStatusLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/authbridge-verification-staging-getVerificationStatus"
      }
    },
    "UploadDocumentLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/authbridge-verification-staging-uploadDocument"
      }
    },
    "RefreshDocumentUrlLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/authbridge-verification-staging-refreshDocumentUrl"
      }
    },
    "ProcessOCRLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/authbridge-verification-staging-processOCR"
      }
    },
    "ProcessBiometricLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/authbridge-verification-staging-processBiometric"
      }
    },
    "CreateDataRequestLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/authbridge-verification-staging-createDataRequest"
      }
    },
    "GetDataRequestStatusLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/authbridge-verification-staging-getDataRequestStatus"
      }
    },
    "ProcessExportLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/authbridge-verification-staging-processExport"
      }
    },
    "ProcessDeletionLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/authbridge-verification-staging-processDeletion"
      }
    },
    "ScheduledHardDeleteLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/authbridge-verification-staging-scheduledHardDelete"
      }
    },
    "AssignRoleLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/authbridge-verification-staging-assignRole"
      }
    },
    "RemoveRoleLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/authbridge-verification-staging-removeRole"
      }
    },
    "GetUserRolesLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/authbridge-verification-staging-getUserRoles"
      }
    },
    "ListRolesLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/authbridge-verification-staging-listRoles"
      }
    },
    "IamRoleLambdaExecution": {
      "Type": "AWS::IAM::Role",
      "Properties": {
        "AssumeRolePolicyDocument": {
          "Version": "2012-10-17",
          "Statement": [
            {
              "Effect": "Allow",
              "Principal": {
                "Service": [
                  "lambda.amazonaws.com"
                ]
              },
              "Action": [
                "sts:AssumeRole"
              ]
            }
          ]
        },
        "Policies": [
          {
            "PolicyName": {
              "Fn::Join": [
                "-",
                [
                  "authbridge-verification",
                  "staging",
                  "lambda"
                ]
              ]
            },
            "PolicyDocument": {
              "Version": "2012-10-17",
              "Statement": [
                {
                  "Effect": "Allow",
                  "Action": [
                    "logs:CreateLogStream",
                    "logs:CreateLogGroup",
                    "logs:TagResource"
                  ],
                  "Resource": [
                    {
                      "Fn::Sub": "arn:${AWS::Partition}:logs:${AWS::Region}:${AWS::AccountId}:log-group:/aws/lambda/authbridge-verification-staging*:*"
                    }
                  ]
                },
                {
                  "Effect": "Allow",
                  "Action": [
                    "logs:PutLogEvents"
                  ],
                  "Resource": [
                    {
                      "Fn::Sub": "arn:${AWS::Partition}:logs:${AWS::Region}:${AWS::AccountId}:log-group:/aws/lambda/authbridge-verification-staging*:*:*"
                    }
                  ]
                },
                {
                  "Effect": "Allow",
                  "Action": [
                    "dynamodb:GetItem",
                    "dynamodb:PutItem",
                    "dynamodb:UpdateItem",
                    "dynamodb:DeleteItem",
                    "dynamodb:Query"
                  ],
                  "Resource": [
                    "arn:aws:dynamodb:af-south-1:*:table/AuthBridgeTable",
                    "arn:aws:dynamodb:af-south-1:*:table/AuthBridgeTable/index/*"
                  ]
                },
                {
                  "Effect": "Allow",
                  "Action": [
                    "dynamodb:GetItem",
                    "dynamodb:PutItem",
                    "dynamodb:UpdateItem",
                    "dynamodb:DeleteItem",
                    "dynamodb:Query",
                    "dynamodb:Scan"
                  ],
                  "Resource": [
                    "arn:aws:dynamodb:af-south-1:*:table/AuthBridgeCasbinPolicies-staging",
                    "arn:aws:dynamodb:af-south-1:*:table/AuthBridgeCasbinPolicies-staging/index/*"
                  ]
                },
                {
                  "Effect": "Allow",
                  "Action": [
                    "dynamodb:PutItem"
                  ],
                  "Resource": "arn:aws:dynamodb:af-south-1:*:table/AuthBridgeTable",
                  "Condition": {
                    "StringLike": {
                      "dynamodb:LeadingKeys": [
                        "AUDIT#*"
                      ]
                    }
                  }
                },
                {
                  "Effect": "Deny",
                  "Action": [
                    "dynamodb:UpdateItem",
                    "dynamodb:DeleteItem"
                  ],
                  "Resource": "arn:aws:dynamodb:af-south-1:*:table/AuthBridgeTable",
                  "Condition": {
                    "StringLike": {
                      "dynamodb:LeadingKeys": [
                        "AUDIT#*"
                      ]
                    }
                  }
                },
                {
                  "Effect": "Allow",
                  "Action": [
                    "s3:PutObject",
                    "s3:GetObject",
                    "s3:DeleteObject"
                  ],
                  "Resource": [
                    "arn:aws:s3:::authbridge-documents-staging/*",
                    "arn:aws:s3:::authbridge-data-exports-staging/*"
                  ]
                },
                {
                  "Effect": "Allow",
                  "Action": [
                    "textract:DetectDocumentText"
                  ],
                  "Resource": "*"
                },
                {
                  "Effect": "Allow",
                  "Action": [
                    "rekognition:CompareFaces",
                    "rekognition:DetectFaces",
                    "rekognition:GetFaceLivenessSessionResults"
                  ],
                  "Resource": "*"
                },
                {
                  "Effect": "Allow",
                  "Action": [
                    "cloudwatch:PutMetricData"
                  ],
                  "Resource": "*"
                },
                {
                  "Effect": "Allow",
                  "Action": [
                    "sqs:SendMessage",
                    "sqs:GetQueueUrl"
                  ],
                  "Resource": [
                    {
                      "Fn::GetAtt": [
                        "OcrQueue",
                        "Arn"
                      ]
                    },
                    {
                      "Fn::GetAtt": [
                        "BiometricQueue",
                        "Arn"
                      ]
                    },
                    {
                      "Fn::GetAtt": [
                        "WebhookQueue",
                        "Arn"
                      ]
                    }
                  ]
                },
                {
                  "Effect": "Allow",
                  "Action": [
                    "sns:Publish"
                  ],
                  "Resource": [
                    {
                      "Ref": "OcrAlertTopic"
                    }
                  ]
                },
                {
                  "Effect": "Allow",
                  "Action": [
                    "logs:CreateLogGroup",
                    "logs:CreateLogStream",
                    "logs:PutLogEvents"
                  ],
                  "Resource": "arn:aws:logs:af-south-1:*:*"
                },
                {
                  "Effect": "Allow",
                  "Action": [
                    "kms:Encrypt",
                    "kms:Decrypt",
                    "kms:GenerateDataKey",
                    "kms:GenerateDataKeyWithoutPlaintext",
                    "kms:DescribeKey"
                  ],
                  "Resource": "arn:aws:kms:af-south-1:979237821231:key/dd242797-bf9b-4058-a079-3588989dd79b"
                },
                {
                  "Effect": "Allow",
                  "Action": [
                    "kms:Decrypt",
                    "kms:GenerateDataKey"
                  ],
                  "Resource": "arn:aws:kms:af-south-1:979237821231:key/40b9adc5-5f4b-4c12-94d3-5e6a8f7e4fc3"
                },
                {
                  "Effect": "Allow",
                  "Action": [
                    "lambda:InvokeFunction"
                  ],
                  "Resource": [
                    "arn:aws:lambda:af-south-1:*:function:authbridge-verification-staging-processExport",
                    "arn:aws:lambda:af-south-1:*:function:authbridge-verification-staging-processDeletion"
                  ]
                },
                {
                  "Effect": "Allow",
                  "Action": [
                    "sqs:ReceiveMessage",
                    "sqs:DeleteMessage",
                    "sqs:GetQueueAttributes"
                  ],
                  "Resource": [
                    {
                      "Fn::GetAtt": [
                        "WebhookQueue",
                        "Arn"
                      ]
                    },
                    {
                      "Fn::GetAtt": [
                        "OcrQueue",
                        "Arn"
                      ]
                    },
                    {
                      "Fn::GetAtt": [
                        "BiometricQueue",
                        "Arn"
                      ]
                    }
                  ]
                }
              ]
            }
          }
        ],
        "Path": "/",
        "RoleName": {
          "Fn::Join": [
            "-",
            [
              "authbridge-verification",
              "staging",
              {
                "Ref": "AWS::Region"
              },
              "lambdaRole"
            ]
          ]
        }
      }
    },
    "ListCasesLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/authbridge-verification/staging/1768778654612-2026-01-18T23:24:14.612Z/listCases.zip"
        },
        "Handler": "src/handlers/list-cases.handler",
        "Runtime": "nodejs20.x",
        "FunctionName": "authbridge-verification-staging-listCases",
        "MemorySize": 512,
        "Timeout": 30,
        "Description": "List verification cases with filtering and pagination",
        "Environment": {
          "Variables": {
            "AWS_NODEJS_CONNECTION_REUSE_ENABLED": "1",
            "NODE_OPTIONS": "--enable-source-maps",
            "TABLE_NAME": "AuthBridgeTable",
            "CASBIN_TABLE_NAME": "AuthBridgeCasbinPolicies-staging",
            "CASBIN_MODEL_PATH": "./casbin-model.conf",
            "BUCKET_NAME": "authbridge-documents-staging",
            "DATA_ENCRYPTION_KEY_ID": "dd242797-bf9b-4058-a079-3588989dd79b",
            "DATA_ENCRYPTION_KEY_ARN": "arn:aws:kms:af-south-1:979237821231:key/dd242797-bf9b-4058-a079-3588989dd79b"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "ListCasesLogGroup"
      ]
    },
    "GetCaseLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/authbridge-verification/staging/1768778654612-2026-01-18T23:24:14.612Z/getCase.zip"
        },
        "Handler": "src/handlers/get-case.handler",
        "Runtime": "nodejs20.x",
        "FunctionName": "authbridge-verification-staging-getCase",
        "MemorySize": 512,
        "Timeout": 30,
        "Description": "Get case detail by ID",
        "Environment": {
          "Variables": {
            "AWS_NODEJS_CONNECTION_REUSE_ENABLED": "1",
            "NODE_OPTIONS": "--enable-source-maps",
            "TABLE_NAME": "AuthBridgeTable",
            "CASBIN_TABLE_NAME": "AuthBridgeCasbinPolicies-staging",
            "CASBIN_MODEL_PATH": "./casbin-model.conf",
            "BUCKET_NAME": "authbridge-documents-staging",
            "DATA_ENCRYPTION_KEY_ID": "dd242797-bf9b-4058-a079-3588989dd79b",
            "DATA_ENCRYPTION_KEY_ARN": "arn:aws:kms:af-south-1:979237821231:key/dd242797-bf9b-4058-a079-3588989dd79b"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "GetCaseLogGroup"
      ]
    },
    "ApproveCaseLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/authbridge-verification/staging/1768778654612-2026-01-18T23:24:14.612Z/approveCase.zip"
        },
        "Handler": "src/handlers/approve-case.handler",
        "Runtime": "nodejs20.x",
        "FunctionName": "authbridge-verification-staging-approveCase",
        "MemorySize": 512,
        "Timeout": 30,
        "Description": "Approve a verification case",
        "Environment": {
          "Variables": {
            "AWS_NODEJS_CONNECTION_REUSE_ENABLED": "1",
            "NODE_OPTIONS": "--enable-source-maps",
            "TABLE_NAME": "AuthBridgeTable",
            "CASBIN_TABLE_NAME": "AuthBridgeCasbinPolicies-staging",
            "CASBIN_MODEL_PATH": "./casbin-model.conf",
            "BUCKET_NAME": "authbridge-documents-staging",
            "DATA_ENCRYPTION_KEY_ID": "dd242797-bf9b-4058-a079-3588989dd79b",
            "DATA_ENCRYPTION_KEY_ARN": "arn:aws:kms:af-south-1:979237821231:key/dd242797-bf9b-4058-a079-3588989dd79b",
            "WEBHOOK_QUEUE_URL": {
              "Ref": "WebhookQueue"
            }
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "ApproveCaseLogGroup"
      ]
    },
    "RejectCaseLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/authbridge-verification/staging/1768778654612-2026-01-18T23:24:14.612Z/rejectCase.zip"
        },
        "Handler": "src/handlers/reject-case.handler",
        "Runtime": "nodejs20.x",
        "FunctionName": "authbridge-verification-staging-rejectCase",
        "MemorySize": 512,
        "Timeout": 30,
        "Description": "Reject a verification case with reason",
        "Environment": {
          "Variables": {
            "AWS_NODEJS_CONNECTION_REUSE_ENABLED": "1",
            "NODE_OPTIONS": "--enable-source-maps",
            "TABLE_NAME": "AuthBridgeTable",
            "CASBIN_TABLE_NAME": "AuthBridgeCasbinPolicies-staging",
            "CASBIN_MODEL_PATH": "./casbin-model.conf",
            "BUCKET_NAME": "authbridge-documents-staging",
            "DATA_ENCRYPTION_KEY_ID": "dd242797-bf9b-4058-a079-3588989dd79b",
            "DATA_ENCRYPTION_KEY_ARN": "arn:aws:kms:af-south-1:979237821231:key/dd242797-bf9b-4058-a079-3588989dd79b",
            "WEBHOOK_QUEUE_URL": {
              "Ref": "WebhookQueue"
            }
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "RejectCaseLogGroup"
      ]
    },
    "SendWebhookLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/authbridge-verification/staging/1768778654612-2026-01-18T23:24:14.612Z/sendWebhook.zip"
        },
        "Handler": "src/handlers/send-webhook.handler",
        "Runtime": "nodejs20.x",
        "FunctionName": "authbridge-verification-staging-sendWebhook",
        "MemorySize": 256,
        "Timeout": 30,
        "Description": "Send webhook notifications for case decisions",
        "Environment": {
          "Variables": {
            "AWS_NODEJS_CONNECTION_REUSE_ENABLED": "1",
            "NODE_OPTIONS": "--enable-source-maps",
            "TABLE_NAME": "AuthBridgeTable",
            "CASBIN_TABLE_NAME": "AuthBridgeCasbinPolicies-staging",
            "CASBIN_MODEL_PATH": "./casbin-model.conf",
            "BUCKET_NAME": "authbridge-documents-staging",
            "DATA_ENCRYPTION_KEY_ID": "dd242797-bf9b-4058-a079-3588989dd79b",
            "DATA_ENCRYPTION_KEY_ARN": "arn:aws:kms:af-south-1:979237821231:key/dd242797-bf9b-4058-a079-3588989dd79b",
            "WEBHOOK_QUEUE_URL": {
              "Ref": "WebhookQueue"
            }
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "SendWebhookLogGroup"
      ]
    },
    "ConfigureWebhookLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/authbridge-verification/staging/1768778654612-2026-01-18T23:24:14.612Z/configureWebhook.zip"
        },
        "Handler": "src/handlers/configure-webhook.handler",
        "Runtime": "nodejs20.x",
        "FunctionName": "authbridge-verification-staging-configureWebhook",
        "MemorySize": 256,
        "Timeout": 10,
        "Description": "Configure webhook URL and settings for client",
        "Environment": {
          "Variables": {
            "AWS_NODEJS_CONNECTION_REUSE_ENABLED": "1",
            "NODE_OPTIONS": "--enable-source-maps",
            "TABLE_NAME": "AuthBridgeTable",
            "CASBIN_TABLE_NAME": "AuthBridgeCasbinPolicies-staging",
            "CASBIN_MODEL_PATH": "./casbin-model.conf",
            "BUCKET_NAME": "authbridge-documents-staging",
            "DATA_ENCRYPTION_KEY_ID": "dd242797-bf9b-4058-a079-3588989dd79b",
            "DATA_ENCRYPTION_KEY_ARN": "arn:aws:kms:af-south-1:979237821231:key/dd242797-bf9b-4058-a079-3588989dd79b"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "ConfigureWebhookLogGroup"
      ]
    },
    "TestWebhookLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/authbridge-verification/staging/1768778654612-2026-01-18T23:24:14.612Z/testWebhook.zip"
        },
        "Handler": "src/handlers/test-webhook.handler",
        "Runtime": "nodejs20.x",
        "FunctionName": "authbridge-verification-staging-testWebhook",
        "MemorySize": 256,
        "Timeout": 30,
        "Description": "Send test webhook notification to verify configuration",
        "Environment": {
          "Variables": {
            "AWS_NODEJS_CONNECTION_REUSE_ENABLED": "1",
            "NODE_OPTIONS": "--enable-source-maps",
            "TABLE_NAME": "AuthBridgeTable",
            "CASBIN_TABLE_NAME": "AuthBridgeCasbinPolicies-staging",
            "CASBIN_MODEL_PATH": "./casbin-model.conf",
            "BUCKET_NAME": "authbridge-documents-staging",
            "DATA_ENCRYPTION_KEY_ID": "dd242797-bf9b-4058-a079-3588989dd79b",
            "DATA_ENCRYPTION_KEY_ARN": "arn:aws:kms:af-south-1:979237821231:key/dd242797-bf9b-4058-a079-3588989dd79b"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "TestWebhookLogGroup"
      ]
    },
    "AddNoteLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/authbridge-verification/staging/1768778654612-2026-01-18T23:24:14.612Z/addNote.zip"
        },
        "Handler": "src/handlers/add-note.handler",
        "Runtime": "nodejs20.x",
        "FunctionName": "authbridge-verification-staging-addNote",
        "MemorySize": 512,
        "Timeout": 30,
        "Description": "Add note to case",
        "Environment": {
          "Variables": {
            "AWS_NODEJS_CONNECTION_REUSE_ENABLED": "1",
            "NODE_OPTIONS": "--enable-source-maps",
            "TABLE_NAME": "AuthBridgeTable",
            "CASBIN_TABLE_NAME": "AuthBridgeCasbinPolicies-staging",
            "CASBIN_MODEL_PATH": "./casbin-model.conf",
            "BUCKET_NAME": "authbridge-documents-staging",
            "DATA_ENCRYPTION_KEY_ID": "dd242797-bf9b-4058-a079-3588989dd79b",
            "DATA_ENCRYPTION_KEY_ARN": "arn:aws:kms:af-south-1:979237821231:key/dd242797-bf9b-4058-a079-3588989dd79b"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "AddNoteLogGroup"
      ]
    },
    "GetNotesLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/authbridge-verification/staging/1768778654612-2026-01-18T23:24:14.612Z/getNotes.zip"
        },
        "Handler": "src/handlers/get-notes.handler",
        "Runtime": "nodejs20.x",
        "FunctionName": "authbridge-verification-staging-getNotes",
        "MemorySize": 512,
        "Timeout": 30,
        "Description": "Get all notes for a case",
        "Environment": {
          "Variables": {
            "AWS_NODEJS_CONNECTION_REUSE_ENABLED": "1",
            "NODE_OPTIONS": "--enable-source-maps",
            "TABLE_NAME": "AuthBridgeTable",
            "CASBIN_TABLE_NAME": "AuthBridgeCasbinPolicies-staging",
            "CASBIN_MODEL_PATH": "./casbin-model.conf",
            "BUCKET_NAME": "authbridge-documents-staging",
            "DATA_ENCRYPTION_KEY_ID": "dd242797-bf9b-4058-a079-3588989dd79b",
            "DATA_ENCRYPTION_KEY_ARN": "arn:aws:kms:af-south-1:979237821231:key/dd242797-bf9b-4058-a079-3588989dd79b"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "GetNotesLogGroup"
      ]
    },
    "GetAuditLogsLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/authbridge-verification/staging/1768778654612-2026-01-18T23:24:14.612Z/getAuditLogs.zip"
        },
        "Handler": "src/handlers/get-audit-logs.getAuditLogs",
        "Runtime": "nodejs20.x",
        "FunctionName": "authbridge-verification-staging-getAuditLogs",
        "MemorySize": 512,
        "Timeout": 30,
        "Description": "Query audit logs with filters (date, user, action, resource)",
        "Environment": {
          "Variables": {
            "AWS_NODEJS_CONNECTION_REUSE_ENABLED": "1",
            "NODE_OPTIONS": "--enable-source-maps",
            "TABLE_NAME": "AuthBridgeTable",
            "CASBIN_TABLE_NAME": "AuthBridgeCasbinPolicies-staging",
            "CASBIN_MODEL_PATH": "./casbin-model.conf",
            "BUCKET_NAME": "authbridge-documents-staging",
            "DATA_ENCRYPTION_KEY_ID": "dd242797-bf9b-4058-a079-3588989dd79b",
            "DATA_ENCRYPTION_KEY_ARN": "arn:aws:kms:af-south-1:979237821231:key/dd242797-bf9b-4058-a079-3588989dd79b"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "GetAuditLogsLogGroup"
      ]
    },
    "BulkApproveLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/authbridge-verification/staging/1768778654612-2026-01-18T23:24:14.612Z/bulkApprove.zip"
        },
        "Handler": "src/handlers/bulk-approve.handler",
        "Runtime": "nodejs20.x",
        "FunctionName": "authbridge-verification-staging-bulkApprove",
        "MemorySize": 512,
        "Timeout": 30,
        "Description": "Bulk approve multiple verification cases",
        "Environment": {
          "Variables": {
            "AWS_NODEJS_CONNECTION_REUSE_ENABLED": "1",
            "NODE_OPTIONS": "--enable-source-maps",
            "TABLE_NAME": "AuthBridgeTable",
            "CASBIN_TABLE_NAME": "AuthBridgeCasbinPolicies-staging",
            "CASBIN_MODEL_PATH": "./casbin-model.conf",
            "BUCKET_NAME": "authbridge-documents-staging",
            "DATA_ENCRYPTION_KEY_ID": "dd242797-bf9b-4058-a079-3588989dd79b",
            "DATA_ENCRYPTION_KEY_ARN": "arn:aws:kms:af-south-1:979237821231:key/dd242797-bf9b-4058-a079-3588989dd79b",
            "WEBHOOK_QUEUE_URL": {
              "Ref": "WebhookQueue"
            }
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "BulkApproveLogGroup"
      ]
    },
    "BulkRejectLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/authbridge-verification/staging/1768778654612-2026-01-18T23:24:14.612Z/bulkReject.zip"
        },
        "Handler": "src/handlers/bulk-reject.handler",
        "Runtime": "nodejs20.x",
        "FunctionName": "authbridge-verification-staging-bulkReject",
        "MemorySize": 512,
        "Timeout": 30,
        "Description": "Bulk reject multiple verification cases with reason",
        "Environment": {
          "Variables": {
            "AWS_NODEJS_CONNECTION_REUSE_ENABLED": "1",
            "NODE_OPTIONS": "--enable-source-maps",
            "TABLE_NAME": "AuthBridgeTable",
            "CASBIN_TABLE_NAME": "AuthBridgeCasbinPolicies-staging",
            "CASBIN_MODEL_PATH": "./casbin-model.conf",
            "BUCKET_NAME": "authbridge-documents-staging",
            "DATA_ENCRYPTION_KEY_ID": "dd242797-bf9b-4058-a079-3588989dd79b",
            "DATA_ENCRYPTION_KEY_ARN": "arn:aws:kms:af-south-1:979237821231:key/dd242797-bf9b-4058-a079-3588989dd79b",
            "WEBHOOK_QUEUE_URL": {
              "Ref": "WebhookQueue"
            }
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "BulkRejectLogGroup"
      ]
    },
    "CreateVerificationLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/authbridge-verification/staging/1768778654612-2026-01-18T23:24:14.612Z/createVerification.zip"
        },
        "Handler": "src/handlers/create-verification.handler",
        "Runtime": "nodejs20.x",
        "FunctionName": "authbridge-verification-staging-createVerification",
        "MemorySize": 512,
        "Timeout": 30,
        "Description": "Create new verification case",
        "Environment": {
          "Variables": {
            "AWS_NODEJS_CONNECTION_REUSE_ENABLED": "1",
            "NODE_OPTIONS": "--enable-source-maps",
            "TABLE_NAME": "AuthBridgeTable",
            "CASBIN_TABLE_NAME": "AuthBridgeCasbinPolicies-staging",
            "CASBIN_MODEL_PATH": "./casbin-model.conf",
            "BUCKET_NAME": "authbridge-documents-staging",
            "DATA_ENCRYPTION_KEY_ID": "dd242797-bf9b-4058-a079-3588989dd79b",
            "DATA_ENCRYPTION_KEY_ARN": "arn:aws:kms:af-south-1:979237821231:key/dd242797-bf9b-4058-a079-3588989dd79b",
            "JWT_SECRET": "staging-jwt-secret-change-in-production",
            "JWT_ISSUER": "authbridge",
            "SESSION_TOKEN_EXPIRY_HOURS": "0.5",
            "SDK_BASE_URL": "https://sdk.authbridge.io"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "CreateVerificationLogGroup"
      ]
    },
    "GetVerificationStatusLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/authbridge-verification/staging/1768778654612-2026-01-18T23:24:14.612Z/getVerificationStatus.zip"
        },
        "Handler": "src/handlers/get-verification-status.handler",
        "Runtime": "nodejs20.x",
        "FunctionName": "authbridge-verification-staging-getVerificationStatus",
        "MemorySize": 512,
        "Timeout": 10,
        "Description": "Get verification status and details",
        "Environment": {
          "Variables": {
            "AWS_NODEJS_CONNECTION_REUSE_ENABLED": "1",
            "NODE_OPTIONS": "--enable-source-maps",
            "TABLE_NAME": "AuthBridgeTable",
            "CASBIN_TABLE_NAME": "AuthBridgeCasbinPolicies-staging",
            "CASBIN_MODEL_PATH": "./casbin-model.conf",
            "BUCKET_NAME": "authbridge-documents-staging",
            "DATA_ENCRYPTION_KEY_ID": "dd242797-bf9b-4058-a079-3588989dd79b",
            "DATA_ENCRYPTION_KEY_ARN": "arn:aws:kms:af-south-1:979237821231:key/dd242797-bf9b-4058-a079-3588989dd79b"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "GetVerificationStatusLogGroup"
      ]
    },
    "UploadDocumentLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/authbridge-verification/staging/1768778654612-2026-01-18T23:24:14.612Z/uploadDocument.zip"
        },
        "Handler": "src/handlers/upload-document.handler",
        "Runtime": "nodejs20.x",
        "FunctionName": "authbridge-verification-staging-uploadDocument",
        "MemorySize": 1024,
        "Timeout": 30,
        "Description": "Upload document to verification case",
        "Environment": {
          "Variables": {
            "AWS_NODEJS_CONNECTION_REUSE_ENABLED": "1",
            "NODE_OPTIONS": "--enable-source-maps",
            "TABLE_NAME": "AuthBridgeTable",
            "CASBIN_TABLE_NAME": "AuthBridgeCasbinPolicies-staging",
            "CASBIN_MODEL_PATH": "./casbin-model.conf",
            "BUCKET_NAME": "authbridge-documents-staging",
            "DATA_ENCRYPTION_KEY_ID": "dd242797-bf9b-4058-a079-3588989dd79b",
            "DATA_ENCRYPTION_KEY_ARN": "arn:aws:kms:af-south-1:979237821231:key/dd242797-bf9b-4058-a079-3588989dd79b",
            "OCR_QUEUE_URL": {
              "Ref": "OcrQueue"
            }
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "UploadDocumentLogGroup"
      ]
    },
    "RefreshDocumentUrlLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/authbridge-verification/staging/1768778654612-2026-01-18T23:24:14.612Z/refreshDocumentUrl.zip"
        },
        "Handler": "src/handlers/refresh-document-url.handler",
        "Runtime": "nodejs20.x",
        "FunctionName": "authbridge-verification-staging-refreshDocumentUrl",
        "MemorySize": 512,
        "Timeout": 30,
        "Description": "Refresh presigned URL for document access",
        "Environment": {
          "Variables": {
            "AWS_NODEJS_CONNECTION_REUSE_ENABLED": "1",
            "NODE_OPTIONS": "--enable-source-maps",
            "TABLE_NAME": "AuthBridgeTable",
            "CASBIN_TABLE_NAME": "AuthBridgeCasbinPolicies-staging",
            "CASBIN_MODEL_PATH": "./casbin-model.conf",
            "BUCKET_NAME": "authbridge-documents-staging",
            "DATA_ENCRYPTION_KEY_ID": "dd242797-bf9b-4058-a079-3588989dd79b",
            "DATA_ENCRYPTION_KEY_ARN": "arn:aws:kms:af-south-1:979237821231:key/dd242797-bf9b-4058-a079-3588989dd79b"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "RefreshDocumentUrlLogGroup"
      ]
    },
    "ProcessOCRLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/authbridge-verification/staging/1768778654612-2026-01-18T23:24:14.612Z/processOCR.zip"
        },
        "Handler": "src/handlers/process-ocr.handler",
        "Runtime": "nodejs20.x",
        "FunctionName": "authbridge-verification-staging-processOCR",
        "MemorySize": 512,
        "Timeout": 60,
        "Description": "Process OCR extraction from document images",
        "Environment": {
          "Variables": {
            "AWS_NODEJS_CONNECTION_REUSE_ENABLED": "1",
            "NODE_OPTIONS": "--enable-source-maps",
            "TABLE_NAME": "AuthBridgeTable",
            "CASBIN_TABLE_NAME": "AuthBridgeCasbinPolicies-staging",
            "CASBIN_MODEL_PATH": "./casbin-model.conf",
            "BUCKET_NAME": "authbridge-documents-staging",
            "DATA_ENCRYPTION_KEY_ID": "dd242797-bf9b-4058-a079-3588989dd79b",
            "DATA_ENCRYPTION_KEY_ARN": "arn:aws:kms:af-south-1:979237821231:key/dd242797-bf9b-4058-a079-3588989dd79b",
            "OCR_ALERT_TOPIC_ARN": {
              "Ref": "OcrAlertTopic"
            },
            "BIOMETRIC_QUEUE_URL": {
              "Ref": "BiometricQueue"
            }
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "ProcessOCRLogGroup"
      ]
    },
    "ProcessBiometricLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/authbridge-verification/staging/1768778654612-2026-01-18T23:24:14.612Z/processBiometric.zip"
        },
        "Handler": "src/handlers/process-biometric.handler",
        "Runtime": "nodejs20.x",
        "FunctionName": "authbridge-verification-staging-processBiometric",
        "MemorySize": 1024,
        "Timeout": 60,
        "Description": "Process biometric face matching (liveness + comparison)",
        "Environment": {
          "Variables": {
            "AWS_NODEJS_CONNECTION_REUSE_ENABLED": "1",
            "NODE_OPTIONS": "--enable-source-maps",
            "TABLE_NAME": "AuthBridgeTable",
            "CASBIN_TABLE_NAME": "AuthBridgeCasbinPolicies-staging",
            "CASBIN_MODEL_PATH": "./casbin-model.conf",
            "BUCKET_NAME": "authbridge-documents-staging",
            "DATA_ENCRYPTION_KEY_ID": "dd242797-bf9b-4058-a079-3588989dd79b",
            "DATA_ENCRYPTION_KEY_ARN": "arn:aws:kms:af-south-1:979237821231:key/dd242797-bf9b-4058-a079-3588989dd79b",
            "BIOMETRIC_QUEUE_URL": {
              "Ref": "BiometricQueue"
            }
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "ProcessBiometricLogGroup"
      ]
    },
    "CreateDataRequestLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/authbridge-verification/staging/1768778654612-2026-01-18T23:24:14.612Z/createDataRequest.zip"
        },
        "Handler": "src/handlers/create-data-request.handler",
        "Runtime": "nodejs20.x",
        "FunctionName": "authbridge-verification-staging-createDataRequest",
        "MemorySize": 256,
        "Timeout": 30,
        "Description": "Create data export or deletion request",
        "Environment": {
          "Variables": {
            "AWS_NODEJS_CONNECTION_REUSE_ENABLED": "1",
            "NODE_OPTIONS": "--enable-source-maps",
            "TABLE_NAME": "AuthBridgeTable",
            "CASBIN_TABLE_NAME": "AuthBridgeCasbinPolicies-staging",
            "CASBIN_MODEL_PATH": "./casbin-model.conf",
            "BUCKET_NAME": "authbridge-documents-staging",
            "DATA_ENCRYPTION_KEY_ID": "dd242797-bf9b-4058-a079-3588989dd79b",
            "DATA_ENCRYPTION_KEY_ARN": "arn:aws:kms:af-south-1:979237821231:key/dd242797-bf9b-4058-a079-3588989dd79b",
            "EXPORT_BUCKET": {
              "Ref": "DataExportBucket"
            },
            "STAGE": "staging"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "CreateDataRequestLogGroup"
      ]
    },
    "GetDataRequestStatusLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/authbridge-verification/staging/1768778654612-2026-01-18T23:24:14.612Z/getDataRequestStatus.zip"
        },
        "Handler": "src/handlers/get-data-request-status.handler",
        "Runtime": "nodejs20.x",
        "FunctionName": "authbridge-verification-staging-getDataRequestStatus",
        "MemorySize": 256,
        "Timeout": 10,
        "Description": "Get status of data export or deletion request",
        "Environment": {
          "Variables": {
            "AWS_NODEJS_CONNECTION_REUSE_ENABLED": "1",
            "NODE_OPTIONS": "--enable-source-maps",
            "TABLE_NAME": "AuthBridgeTable",
            "CASBIN_TABLE_NAME": "AuthBridgeCasbinPolicies-staging",
            "CASBIN_MODEL_PATH": "./casbin-model.conf",
            "BUCKET_NAME": "authbridge-documents-staging",
            "DATA_ENCRYPTION_KEY_ID": "dd242797-bf9b-4058-a079-3588989dd79b",
            "DATA_ENCRYPTION_KEY_ARN": "arn:aws:kms:af-south-1:979237821231:key/dd242797-bf9b-4058-a079-3588989dd79b"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "GetDataRequestStatusLogGroup"
      ]
    },
    "ProcessExportLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/authbridge-verification/staging/1768778654612-2026-01-18T23:24:14.612Z/processExport.zip"
        },
        "Handler": "src/handlers/process-export.handler",
        "Runtime": "nodejs20.x",
        "FunctionName": "authbridge-verification-staging-processExport",
        "MemorySize": 512,
        "Timeout": 300,
        "Description": "Background worker to generate data export",
        "Environment": {
          "Variables": {
            "AWS_NODEJS_CONNECTION_REUSE_ENABLED": "1",
            "NODE_OPTIONS": "--enable-source-maps",
            "TABLE_NAME": "AuthBridgeTable",
            "CASBIN_TABLE_NAME": "AuthBridgeCasbinPolicies-staging",
            "CASBIN_MODEL_PATH": "./casbin-model.conf",
            "BUCKET_NAME": "authbridge-documents-staging",
            "DATA_ENCRYPTION_KEY_ID": "dd242797-bf9b-4058-a079-3588989dd79b",
            "DATA_ENCRYPTION_KEY_ARN": "arn:aws:kms:af-south-1:979237821231:key/dd242797-bf9b-4058-a079-3588989dd79b",
            "EXPORT_BUCKET": {
              "Ref": "DataExportBucket"
            },
            "DOCUMENTS_BUCKET": "authbridge-documents-staging"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "ProcessExportLogGroup"
      ]
    },
    "ProcessDeletionLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/authbridge-verification/staging/1768778654612-2026-01-18T23:24:14.612Z/processDeletion.zip"
        },
        "Handler": "src/handlers/process-deletion.handler",
        "Runtime": "nodejs20.x",
        "FunctionName": "authbridge-verification-staging-processDeletion",
        "MemorySize": 512,
        "Timeout": 300,
        "Description": "Background worker to process data deletion (soft delete)",
        "Environment": {
          "Variables": {
            "AWS_NODEJS_CONNECTION_REUSE_ENABLED": "1",
            "NODE_OPTIONS": "--enable-source-maps",
            "TABLE_NAME": "AuthBridgeTable",
            "CASBIN_TABLE_NAME": "AuthBridgeCasbinPolicies-staging",
            "CASBIN_MODEL_PATH": "./casbin-model.conf",
            "BUCKET_NAME": "authbridge-documents-staging",
            "DATA_ENCRYPTION_KEY_ID": "dd242797-bf9b-4058-a079-3588989dd79b",
            "DATA_ENCRYPTION_KEY_ARN": "arn:aws:kms:af-south-1:979237821231:key/dd242797-bf9b-4058-a079-3588989dd79b",
            "DOCUMENTS_BUCKET": "authbridge-documents-staging"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "ProcessDeletionLogGroup"
      ]
    },
    "ScheduledHardDeleteLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/authbridge-verification/staging/1768778654612-2026-01-18T23:24:14.612Z/scheduledHardDelete.zip"
        },
        "Handler": "src/handlers/scheduled-hard-delete.handler",
        "Runtime": "nodejs20.x",
        "FunctionName": "authbridge-verification-staging-scheduledHardDelete",
        "MemorySize": 512,
        "Timeout": 900,
        "Description": "Scheduled job to perform hard deletion of data",
        "Environment": {
          "Variables": {
            "AWS_NODEJS_CONNECTION_REUSE_ENABLED": "1",
            "NODE_OPTIONS": "--enable-source-maps",
            "TABLE_NAME": "AuthBridgeTable",
            "CASBIN_TABLE_NAME": "AuthBridgeCasbinPolicies-staging",
            "CASBIN_MODEL_PATH": "./casbin-model.conf",
            "BUCKET_NAME": "authbridge-documents-staging",
            "DATA_ENCRYPTION_KEY_ID": "dd242797-bf9b-4058-a079-3588989dd79b",
            "DATA_ENCRYPTION_KEY_ARN": "arn:aws:kms:af-south-1:979237821231:key/dd242797-bf9b-4058-a079-3588989dd79b",
            "DOCUMENTS_BUCKET": "authbridge-documents-staging"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "ScheduledHardDeleteLogGroup"
      ]
    },
    "AssignRoleLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/authbridge-verification/staging/1768778654612-2026-01-18T23:24:14.612Z/assignRole.zip"
        },
        "Handler": "src/handlers/assign-role.handler",
        "Runtime": "nodejs20.x",
        "FunctionName": "authbridge-verification-staging-assignRole",
        "MemorySize": 256,
        "Timeout": 10,
        "Description": "Assign role to user",
        "Environment": {
          "Variables": {
            "AWS_NODEJS_CONNECTION_REUSE_ENABLED": "1",
            "NODE_OPTIONS": "--enable-source-maps",
            "TABLE_NAME": "AuthBridgeTable",
            "CASBIN_TABLE_NAME": "AuthBridgeCasbinPolicies-staging",
            "CASBIN_MODEL_PATH": "./casbin-model.conf",
            "BUCKET_NAME": "authbridge-documents-staging",
            "DATA_ENCRYPTION_KEY_ID": "dd242797-bf9b-4058-a079-3588989dd79b",
            "DATA_ENCRYPTION_KEY_ARN": "arn:aws:kms:af-south-1:979237821231:key/dd242797-bf9b-4058-a079-3588989dd79b"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "AssignRoleLogGroup"
      ]
    },
    "RemoveRoleLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/authbridge-verification/staging/1768778654612-2026-01-18T23:24:14.612Z/removeRole.zip"
        },
        "Handler": "src/handlers/remove-role.handler",
        "Runtime": "nodejs20.x",
        "FunctionName": "authbridge-verification-staging-removeRole",
        "MemorySize": 256,
        "Timeout": 10,
        "Description": "Remove role from user",
        "Environment": {
          "Variables": {
            "AWS_NODEJS_CONNECTION_REUSE_ENABLED": "1",
            "NODE_OPTIONS": "--enable-source-maps",
            "TABLE_NAME": "AuthBridgeTable",
            "CASBIN_TABLE_NAME": "AuthBridgeCasbinPolicies-staging",
            "CASBIN_MODEL_PATH": "./casbin-model.conf",
            "BUCKET_NAME": "authbridge-documents-staging",
            "DATA_ENCRYPTION_KEY_ID": "dd242797-bf9b-4058-a079-3588989dd79b",
            "DATA_ENCRYPTION_KEY_ARN": "arn:aws:kms:af-south-1:979237821231:key/dd242797-bf9b-4058-a079-3588989dd79b"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "RemoveRoleLogGroup"
      ]
    },
    "GetUserRolesLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/authbridge-verification/staging/1768778654612-2026-01-18T23:24:14.612Z/getUserRoles.zip"
        },
        "Handler": "src/handlers/get-user-roles.handler",
        "Runtime": "nodejs20.x",
        "FunctionName": "authbridge-verification-staging-getUserRoles",
        "MemorySize": 256,
        "Timeout": 10,
        "Description": "Get roles assigned to user",
        "Environment": {
          "Variables": {
            "AWS_NODEJS_CONNECTION_REUSE_ENABLED": "1",
            "NODE_OPTIONS": "--enable-source-maps",
            "TABLE_NAME": "AuthBridgeTable",
            "CASBIN_TABLE_NAME": "AuthBridgeCasbinPolicies-staging",
            "CASBIN_MODEL_PATH": "./casbin-model.conf",
            "BUCKET_NAME": "authbridge-documents-staging",
            "DATA_ENCRYPTION_KEY_ID": "dd242797-bf9b-4058-a079-3588989dd79b",
            "DATA_ENCRYPTION_KEY_ARN": "arn:aws:kms:af-south-1:979237821231:key/dd242797-bf9b-4058-a079-3588989dd79b"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "GetUserRolesLogGroup"
      ]
    },
    "ListRolesLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/authbridge-verification/staging/1768778654612-2026-01-18T23:24:14.612Z/listRoles.zip"
        },
        "Handler": "src/handlers/list-roles.handler",
        "Runtime": "nodejs20.x",
        "FunctionName": "authbridge-verification-staging-listRoles",
        "MemorySize": 256,
        "Timeout": 10,
        "Description": "List all available roles",
        "Environment": {
          "Variables": {
            "AWS_NODEJS_CONNECTION_REUSE_ENABLED": "1",
            "NODE_OPTIONS": "--enable-source-maps",
            "TABLE_NAME": "AuthBridgeTable",
            "CASBIN_TABLE_NAME": "AuthBridgeCasbinPolicies-staging",
            "CASBIN_MODEL_PATH": "./casbin-model.conf",
            "BUCKET_NAME": "authbridge-documents-staging",
            "DATA_ENCRYPTION_KEY_ID": "dd242797-bf9b-4058-a079-3588989dd79b",
            "DATA_ENCRYPTION_KEY_ARN": "arn:aws:kms:af-south-1:979237821231:key/dd242797-bf9b-4058-a079-3588989dd79b"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "ListRolesLogGroup"
      ]
    },
    "SendWebhookLambdaVersionFH1KbKYxSgjhsHeTvxzRWvioujtJxiwg7qKkDVAomQs": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "SendWebhookLambdaFunction"
        },
        "CodeSha256": "qk7I4ZCSfUBxaHi9gwtfno//5Xq1/jPdCWMm+HSjB0g=",
        "Description": "Send webhook notifications for case decisions"
      }
    },
    "GetCaseLambdaVersionX0QMrHP4Yyq2nq6UEgg8gN6RY27Ntm8sdh7AyyE38zQ": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "GetCaseLambdaFunction"
        },
        "CodeSha256": "X3v6xNGtc66encXHzUPJmshvf1bY+TjIwvdewzgengA=",
        "Description": "Get case detail by ID"
      }
    },
    "ApproveCaseLambdaVersionzkEYYSBtTr8mMbhwNmGrTkCfoWuKW6zguAR59oLPUKg": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "ApproveCaseLambdaFunction"
        },
        "CodeSha256": "Iut+ppZwavpdikwLQg8TRTn2VWrEaEKWMAs2DreE3cs=",
        "Description": "Approve a verification case"
      }
    },
    "ConfigureWebhookLambdaVersionjTI3OtCHPCs3FHn9ntO60Kb4oH39F8ylX1FisCaR4": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "ConfigureWebhookLambdaFunction"
        },
        "CodeSha256": "z75NTMdkjFm8RVsD9W7dYRLSN6A3RU2QaGJlAu0VDj4=",
        "Description": "Configure webhook URL and settings for client"
      }
    },
    "RejectCaseLambdaVersion7ZHD0YA6hZknoFVLmR6XycGuUfr06DLXuMy7AcB4": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "RejectCaseLambdaFunction"
        },
        "CodeSha256": "mfv2Bus2dDUe9Da03ZLtCJJGnLJ6tQY1ig/0Zc/sUwg=",
        "Description": "Reject a verification case with reason"
      }
    },
    "TestWebhookLambdaVersioncm5M7jQhfvVAIfBTDsZGnXdP0z3KfsoFKcXAdzn4JM": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "TestWebhookLambdaFunction"
        },
        "CodeSha256": "3k7Mwjul1rEjRrTTydPf87tg6QjNMP7BQieznvTv0Qs=",
        "Description": "Send test webhook notification to verify configuration"
      }
    },
    "AddNoteLambdaVersionf6SzhR9HIDWrS6IXudbjjhmKOxcNtA3zuo5T68LQ": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "AddNoteLambdaFunction"
        },
        "CodeSha256": "aYmVBPaM9dCYeFgP/5Czo5QduTdyh+75W0pUDzw8VbE=",
        "Description": "Add note to case"
      }
    },
    "GetNotesLambdaVersionXEcwqyTYHwH9Io2rlRiTDeQQKs8ED4DWARHQwGsQI": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "GetNotesLambdaFunction"
        },
        "CodeSha256": "qvLEyk8LQDZItX9FLmYiJlRqYwXX5fLHYyVHclbVjK4=",
        "Description": "Get all notes for a case"
      }
    },
    "GetAuditLogsLambdaVersioneBPqNbZr2XEuRYHE4sejXIZycgdrJDKzGXcofXo7u0": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "GetAuditLogsLambdaFunction"
        },
        "CodeSha256": "8+R9utKGG8QAaaDyFrYYdWmFM/Ye0W/vbXsXOkPlA/E=",
        "Description": "Query audit logs with filters (date, user, action, resource)"
      }
    },
    "BulkApproveLambdaVersionsGByqGVMG0LkhzYX7W0YDxR51Qnl5yYA3JCAhZ0J8UA": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "BulkApproveLambdaFunction"
        },
        "CodeSha256": "UQQ5Z8TqDWwZFhtuDZrl05GIp9AROeAOrrzmzmzCSFs=",
        "Description": "Bulk approve multiple verification cases"
      }
    },
    "BulkRejectLambdaVersion4n9usqXumegXiY9l64O6b8kq2rKJRxLI1B2xYk": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "BulkRejectLambdaFunction"
        },
        "CodeSha256": "iqQPVVcE+V2cJ5EXLMvm4jmiXOIeXu8UTv12hfcpjH4=",
        "Description": "Bulk reject multiple verification cases with reason"
      }
    },
    "GetVerificationStatusLambdaVersion99FkQot38abOzeY7jSZgMvBoxOjGFmpYl2Ylkwez2k": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "GetVerificationStatusLambdaFunction"
        },
        "CodeSha256": "8I3Y+lWp/yycXG7V1ZoRIYs+2X/p5c6fJMlK4WmRIek=",
        "Description": "Get verification status and details"
      }
    },
    "RefreshDocumentUrlLambdaVersion4PwyYZIxzcrE0189QchMu7Kmn5SD3YRDEa7PMI": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "RefreshDocumentUrlLambdaFunction"
        },
        "CodeSha256": "JVtIwNlrBrL2YnVhiRvJnPoA8KO3SaxKvc+5dYUhbmc=",
        "Description": "Refresh presigned URL for document access"
      }
    },
    "CreateDataRequestLambdaVersionLuJjvVqfBxMmnyOJIljbJbLk0nWELFqSEDBBHAdY": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "CreateDataRequestLambdaFunction"
        },
        "CodeSha256": "xh4mJJ81CtmPI2UEeyDW4iuSIE+ZUKHx51UZBjmho8o=",
        "Description": "Create data export or deletion request"
      }
    },
    "ProcessBiometricLambdaVersionnOrODfaSiiKKxSYx0QZ0sE1d1dfMxCOOmI3NibyWV0": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "ProcessBiometricLambdaFunction"
        },
        "CodeSha256": "qjzCFAoM1tkUzjTRKc6eS/wWpRT1eSfgqaWOv/fyk1s=",
        "Description": "Process biometric face matching (liveness + comparison)"
      }
    },
    "ProcessOCRLambdaVersion59VN2IFCAuHZPXOpfXHZu50aYrMZqL2kDHvrAmgA": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "ProcessOCRLambdaFunction"
        },
        "CodeSha256": "eZg7bSx+tgvVnnRi9wwJOJY9NLZUi7K59CBshkxZBaE=",
        "Description": "Process OCR extraction from document images"
      }
    },
    "ProcessExportLambdaVersionBfzIXLQYC2OWlsxJnzA1V6J3ClzrpMNS0SN3sv8BpGU": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "ProcessExportLambdaFunction"
        },
        "CodeSha256": "XY0NJ+cPi0mOMxBtNGqDJuyb6FxlPyWSJKWIS2jzQJ4=",
        "Description": "Background worker to generate data export"
      }
    },
    "ProcessDeletionLambdaVersionIpKrMJ7JGVXkIw6v5eePFqvjV0B5QuHoucnlEzc": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "ProcessDeletionLambdaFunction"
        },
        "CodeSha256": "60C42aR9cx1rwu7LKWRUYfGgnDmuqCy2HslgdaP1nNs=",
        "Description": "Background worker to process data deletion (soft delete)"
      }
    },
    "GetDataRequestStatusLambdaVersion0SGi3A3UmA0Z2nDOerTovxbxketPzmlhrL0jjNoQk": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "GetDataRequestStatusLambdaFunction"
        },
        "CodeSha256": "zPTJ2P8Laajb+qJmRrGhPSf3lX4tbIuTu5bK4Cah+tU=",
        "Description": "Get status of data export or deletion request"
      }
    },
    "ScheduledHardDeleteLambdaVersionW4FAqRpgEL5WukOYdtzLqEXSVAxPpTB9DgQbqfgg": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "ScheduledHardDeleteLambdaFunction"
        },
        "CodeSha256": "UA2cggg5LWIad9imtjFZtxx9jOikUTriBN8nyYB4cVU=",
        "Description": "Scheduled job to perform hard deletion of data"
      }
    },
    "AssignRoleLambdaVersion7aLsFsRfKrPuuu1iiEMQMSXcGyZIm4akKt8UUqyho": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "AssignRoleLambdaFunction"
        },
        "CodeSha256": "F2B0Cy9eT2mMR6th6zWKTqsdCZyfQ5wzO51Qw2pGt2E=",
        "Description": "Assign role to user"
      }
    },
    "RemoveRoleLambdaVersions5vfBpElorTzqwR7JqJez3f71kVBkAzGY1fDck60": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "RemoveRoleLambdaFunction"
        },
        "CodeSha256": "XzCc5Qemwrzw2asmCDQS77MdPGWy2FsWFhyGo1OQcng=",
        "Description": "Remove role from user"
      }
    },
    "ListRolesLambdaVersionAP28PkPVEBnuf4mnfUxa6Kfx36SqjOgS2VHswLFTY": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "ListRolesLambdaFunction"
        },
        "CodeSha256": "psAxZshdtz2g2TuNHU4bgukpk9f21XcG+OoifOftBH0=",
        "Description": "List all available roles"
      }
    },
    "GetUserRolesLambdaVersion2mrVlBfJxWsXu5dc1dNWvcLBWOtJ2MlUJwQ57YxIZQ": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "GetUserRolesLambdaFunction"
        },
        "CodeSha256": "Fj8haVWAQe/wQq5ghxE7TzwFoSoH/iKhYDxU4w/LpOc=",
        "Description": "Get roles assigned to user"
      }
    },
    "CreateVerificationLambdaVersion3Q2slVY6yeDWSES3Tei7vddNz5eXlyoRjZtDJmvqkxg": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "CreateVerificationLambdaFunction"
        },
        "CodeSha256": "k3QD1ZhUWwxA6psmmZh+irFF9TwhgEg/2z5Pefl7l6g=",
        "Description": "Create new verification case"
      }
    },
    "UploadDocumentLambdaVersionXdb9ot3eeoakXUYzbD5alvC4NN7AtShfVLB4lHFXXo": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "UploadDocumentLambdaFunction"
        },
        "CodeSha256": "+nwLN80lgCOLBduSaiZz/n/TK7urFe4joTMQf/NcozE=",
        "Description": "Upload document to verification case"
      }
    },
    "ListCasesLambdaVersion0VSjWnRGQZXSHWkgOmSqCZb9gETbjz5M00vt26M": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "ListCasesLambdaFunction"
        },
        "CodeSha256": "l6/RE9KcuNwTTRKI9uSbytqFewFlxc1mtl5PS/VVQoY=",
        "Description": "List verification cases with filtering and pagination"
      }
    },
    "ScheduledHardDeleteEventsRuleSchedule1": {
      "Type": "AWS::Events::Rule",
      "Properties": {
        "ScheduleExpression": "cron(0 2 * * ? *)",
        "State": "ENABLED",
        "Description": "Daily hard delete job at 2 AM UTC",
        "Targets": [
          {
            "Arn": {
              "Fn::GetAtt": [
                "ScheduledHardDeleteLambdaFunction",
                "Arn"
              ]
            },
            "Id": "scheduledHardDeleteSchedule"
          }
        ]
      }
    },
    "ScheduledHardDeleteLambdaPermissionEventsRuleSchedule1": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "ScheduledHardDeleteLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "events.amazonaws.com",
        "SourceArn": {
          "Fn::GetAtt": [
            "ScheduledHardDeleteEventsRuleSchedule1",
            "Arn"
          ]
        }
      }
    },
    "ApiGatewayRestApi": {
      "Type": "AWS::ApiGateway::RestApi",
      "Properties": {
        "Name": "authbridge-verification-staging",
        "EndpointConfiguration": {
          "Types": [
            "EDGE"
          ]
        },
        "Policy": "",
        "MinimumCompressionSize": 1024
      }
    },
    "ApiGatewayResourceApi": {
      "Type": "AWS::ApiGateway::Resource",
      "Properties": {
        "ParentId": {
          "Fn::GetAtt": [
            "ApiGatewayRestApi",
            "RootResourceId"
          ]
        },
        "PathPart": "api",
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayResourceApiV1": {
      "Type": "AWS::ApiGateway::Resource",
      "Properties": {
        "ParentId": {
          "Ref": "ApiGatewayResourceApi"
        },
        "PathPart": "v1",
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayResourceApiV1Cases": {
      "Type": "AWS::ApiGateway::Resource",
      "Properties": {
        "ParentId": {
          "Ref": "ApiGatewayResourceApiV1"
        },
        "PathPart": "cases",
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayResourceApiV1CasesIdVar": {
      "Type": "AWS::ApiGateway::Resource",
      "Properties": {
        "ParentId": {
          "Ref": "ApiGatewayResourceApiV1Cases"
        },
        "PathPart": "{id}",
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayResourceApiV1CasesIdVarApprove": {
      "Type": "AWS::ApiGateway::Resource",
      "Properties": {
        "ParentId": {
          "Ref": "ApiGatewayResourceApiV1CasesIdVar"
        },
        "PathPart": "approve",
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayResourceApiV1CasesIdVarReject": {
      "Type": "AWS::ApiGateway::Resource",
      "Properties": {
        "ParentId": {
          "Ref": "ApiGatewayResourceApiV1CasesIdVar"
        },
        "PathPart": "reject",
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayResourceApiV1CasesIdVarNotes": {
      "Type": "AWS::ApiGateway::Resource",
      "Properties": {
        "ParentId": {
          "Ref": "ApiGatewayResourceApiV1CasesIdVar"
        },
        "PathPart": "notes",
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayResourceApiV1CasesBulkDashapprove": {
      "Type": "AWS::ApiGateway::Resource",
      "Properties": {
        "ParentId": {
          "Ref": "ApiGatewayResourceApiV1Cases"
        },
        "PathPart": "bulk-approve",
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayResourceApiV1CasesBulkDashreject": {
      "Type": "AWS::ApiGateway::Resource",
      "Properties": {
        "ParentId": {
          "Ref": "ApiGatewayResourceApiV1Cases"
        },
        "PathPart": "bulk-reject",
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayResourceApiV1Webhooks": {
      "Type": "AWS::ApiGateway::Resource",
      "Properties": {
        "ParentId": {
          "Ref": "ApiGatewayResourceApiV1"
        },
        "PathPart": "webhooks",
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayResourceApiV1WebhooksConfigure": {
      "Type": "AWS::ApiGateway::Resource",
      "Properties": {
        "ParentId": {
          "Ref": "ApiGatewayResourceApiV1Webhooks"
        },
        "PathPart": "configure",
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayResourceApiV1WebhooksTest": {
      "Type": "AWS::ApiGateway::Resource",
      "Properties": {
        "ParentId": {
          "Ref": "ApiGatewayResourceApiV1Webhooks"
        },
        "PathPart": "test",
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayResourceApiV1Audit": {
      "Type": "AWS::ApiGateway::Resource",
      "Properties": {
        "ParentId": {
          "Ref": "ApiGatewayResourceApiV1"
        },
        "PathPart": "audit",
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayResourceApiV1Verifications": {
      "Type": "AWS::ApiGateway::Resource",
      "Properties": {
        "ParentId": {
          "Ref": "ApiGatewayResourceApiV1"
        },
        "PathPart": "verifications",
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayResourceApiV1VerificationsVerificationidVar": {
      "Type": "AWS::ApiGateway::Resource",
      "Properties": {
        "ParentId": {
          "Ref": "ApiGatewayResourceApiV1Verifications"
        },
        "PathPart": "{verificationId}",
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayResourceApiV1VerificationsVerificationidVarDocuments": {
      "Type": "AWS::ApiGateway::Resource",
      "Properties": {
        "ParentId": {
          "Ref": "ApiGatewayResourceApiV1VerificationsVerificationidVar"
        },
        "PathPart": "documents",
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayResourceApiV1VerificationsVerificationidVarDocumentsDocumentidVar": {
      "Type": "AWS::ApiGateway::Resource",
      "Properties": {
        "ParentId": {
          "Ref": "ApiGatewayResourceApiV1VerificationsVerificationidVarDocuments"
        },
        "PathPart": "{documentId}",
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayResourceApiV1VerificationsVerificationidVarDocumentsDocumentidVarUrl": {
      "Type": "AWS::ApiGateway::Resource",
      "Properties": {
        "ParentId": {
          "Ref": "ApiGatewayResourceApiV1VerificationsVerificationidVarDocumentsDocumentidVar"
        },
        "PathPart": "url",
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayResourceApiV1DataDashrequests": {
      "Type": "AWS::ApiGateway::Resource",
      "Properties": {
        "ParentId": {
          "Ref": "ApiGatewayResourceApiV1"
        },
        "PathPart": "data-requests",
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayResourceApiV1DataDashrequestsRequestidVar": {
      "Type": "AWS::ApiGateway::Resource",
      "Properties": {
        "ParentId": {
          "Ref": "ApiGatewayResourceApiV1DataDashrequests"
        },
        "PathPart": "{requestId}",
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayResourceApiV1Users": {
      "Type": "AWS::ApiGateway::Resource",
      "Properties": {
        "ParentId": {
          "Ref": "ApiGatewayResourceApiV1"
        },
        "PathPart": "users",
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayResourceApiV1UsersUseridVar": {
      "Type": "AWS::ApiGateway::Resource",
      "Properties": {
        "ParentId": {
          "Ref": "ApiGatewayResourceApiV1Users"
        },
        "PathPart": "{userId}",
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayResourceApiV1UsersUseridVarRoles": {
      "Type": "AWS::ApiGateway::Resource",
      "Properties": {
        "ParentId": {
          "Ref": "ApiGatewayResourceApiV1UsersUseridVar"
        },
        "PathPart": "roles",
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayResourceApiV1UsersUseridVarRolesRoleVar": {
      "Type": "AWS::ApiGateway::Resource",
      "Properties": {
        "ParentId": {
          "Ref": "ApiGatewayResourceApiV1UsersUseridVarRoles"
        },
        "PathPart": "{role}",
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayResourceApiV1Roles": {
      "Type": "AWS::ApiGateway::Resource",
      "Properties": {
        "ParentId": {
          "Ref": "ApiGatewayResourceApiV1"
        },
        "PathPart": "roles",
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayMethodApiV1CasesOptions": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "AuthorizationType": "NONE",
        "HttpMethod": "OPTIONS",
        "MethodResponses": [
          {
            "StatusCode": "200",
            "ResponseParameters": {
              "method.response.header.Access-Control-Allow-Origin": true,
              "method.response.header.Access-Control-Allow-Headers": true,
              "method.response.header.Access-Control-Allow-Methods": true
            },
            "ResponseModels": {}
          }
        ],
        "RequestParameters": {},
        "Integration": {
          "Type": "MOCK",
          "RequestTemplates": {
            "application/json": "{statusCode:200}"
          },
          "ContentHandling": "CONVERT_TO_TEXT",
          "IntegrationResponses": [
            {
              "StatusCode": "200",
              "ResponseParameters": {
                "method.response.header.Access-Control-Allow-Origin": "'*'",
                "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent,X-Amzn-Trace-Id'",
                "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET'"
              },
              "ResponseTemplates": {
                "application/json": ""
              }
            }
          ]
        },
        "ResourceId": {
          "Ref": "ApiGatewayResourceApiV1Cases"
        },
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayMethodApiV1CasesIdVarOptions": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "AuthorizationType": "NONE",
        "HttpMethod": "OPTIONS",
        "MethodResponses": [
          {
            "StatusCode": "200",
            "ResponseParameters": {
              "method.response.header.Access-Control-Allow-Origin": true,
              "method.response.header.Access-Control-Allow-Headers": true,
              "method.response.header.Access-Control-Allow-Methods": true
            },
            "ResponseModels": {}
          }
        ],
        "RequestParameters": {},
        "Integration": {
          "Type": "MOCK",
          "RequestTemplates": {
            "application/json": "{statusCode:200}"
          },
          "ContentHandling": "CONVERT_TO_TEXT",
          "IntegrationResponses": [
            {
              "StatusCode": "200",
              "ResponseParameters": {
                "method.response.header.Access-Control-Allow-Origin": "'*'",
                "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent,X-Amzn-Trace-Id'",
                "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET'"
              },
              "ResponseTemplates": {
                "application/json": ""
              }
            }
          ]
        },
        "ResourceId": {
          "Ref": "ApiGatewayResourceApiV1CasesIdVar"
        },
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayMethodApiV1CasesIdVarApproveOptions": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "AuthorizationType": "NONE",
        "HttpMethod": "OPTIONS",
        "MethodResponses": [
          {
            "StatusCode": "200",
            "ResponseParameters": {
              "method.response.header.Access-Control-Allow-Origin": true,
              "method.response.header.Access-Control-Allow-Headers": true,
              "method.response.header.Access-Control-Allow-Methods": true
            },
            "ResponseModels": {}
          }
        ],
        "RequestParameters": {},
        "Integration": {
          "Type": "MOCK",
          "RequestTemplates": {
            "application/json": "{statusCode:200}"
          },
          "ContentHandling": "CONVERT_TO_TEXT",
          "IntegrationResponses": [
            {
              "StatusCode": "200",
              "ResponseParameters": {
                "method.response.header.Access-Control-Allow-Origin": "'*'",
                "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent,X-Amzn-Trace-Id'",
                "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,POST'"
              },
              "ResponseTemplates": {
                "application/json": ""
              }
            }
          ]
        },
        "ResourceId": {
          "Ref": "ApiGatewayResourceApiV1CasesIdVarApprove"
        },
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayMethodApiV1CasesIdVarRejectOptions": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "AuthorizationType": "NONE",
        "HttpMethod": "OPTIONS",
        "MethodResponses": [
          {
            "StatusCode": "200",
            "ResponseParameters": {
              "method.response.header.Access-Control-Allow-Origin": true,
              "method.response.header.Access-Control-Allow-Headers": true,
              "method.response.header.Access-Control-Allow-Methods": true
            },
            "ResponseModels": {}
          }
        ],
        "RequestParameters": {},
        "Integration": {
          "Type": "MOCK",
          "RequestTemplates": {
            "application/json": "{statusCode:200}"
          },
          "ContentHandling": "CONVERT_TO_TEXT",
          "IntegrationResponses": [
            {
              "StatusCode": "200",
              "ResponseParameters": {
                "method.response.header.Access-Control-Allow-Origin": "'*'",
                "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent,X-Amzn-Trace-Id'",
                "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,POST'"
              },
              "ResponseTemplates": {
                "application/json": ""
              }
            }
          ]
        },
        "ResourceId": {
          "Ref": "ApiGatewayResourceApiV1CasesIdVarReject"
        },
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayMethodApiV1WebhooksConfigureOptions": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "AuthorizationType": "NONE",
        "HttpMethod": "OPTIONS",
        "MethodResponses": [
          {
            "StatusCode": "200",
            "ResponseParameters": {
              "method.response.header.Access-Control-Allow-Origin": true,
              "method.response.header.Access-Control-Allow-Headers": true,
              "method.response.header.Access-Control-Allow-Methods": true
            },
            "ResponseModels": {}
          }
        ],
        "RequestParameters": {},
        "Integration": {
          "Type": "MOCK",
          "RequestTemplates": {
            "application/json": "{statusCode:200}"
          },
          "ContentHandling": "CONVERT_TO_TEXT",
          "IntegrationResponses": [
            {
              "StatusCode": "200",
              "ResponseParameters": {
                "method.response.header.Access-Control-Allow-Origin": "'*'",
                "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent,X-Amzn-Trace-Id'",
                "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,POST'"
              },
              "ResponseTemplates": {
                "application/json": ""
              }
            }
          ]
        },
        "ResourceId": {
          "Ref": "ApiGatewayResourceApiV1WebhooksConfigure"
        },
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayMethodApiV1WebhooksTestOptions": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "AuthorizationType": "NONE",
        "HttpMethod": "OPTIONS",
        "MethodResponses": [
          {
            "StatusCode": "200",
            "ResponseParameters": {
              "method.response.header.Access-Control-Allow-Origin": true,
              "method.response.header.Access-Control-Allow-Headers": true,
              "method.response.header.Access-Control-Allow-Methods": true
            },
            "ResponseModels": {}
          }
        ],
        "RequestParameters": {},
        "Integration": {
          "Type": "MOCK",
          "RequestTemplates": {
            "application/json": "{statusCode:200}"
          },
          "ContentHandling": "CONVERT_TO_TEXT",
          "IntegrationResponses": [
            {
              "StatusCode": "200",
              "ResponseParameters": {
                "method.response.header.Access-Control-Allow-Origin": "'*'",
                "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent,X-Amzn-Trace-Id'",
                "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,POST'"
              },
              "ResponseTemplates": {
                "application/json": ""
              }
            }
          ]
        },
        "ResourceId": {
          "Ref": "ApiGatewayResourceApiV1WebhooksTest"
        },
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayMethodApiV1CasesIdVarNotesOptions": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "AuthorizationType": "NONE",
        "HttpMethod": "OPTIONS",
        "MethodResponses": [
          {
            "StatusCode": "200",
            "ResponseParameters": {
              "method.response.header.Access-Control-Allow-Origin": true,
              "method.response.header.Access-Control-Allow-Headers": true,
              "method.response.header.Access-Control-Allow-Methods": true
            },
            "ResponseModels": {}
          }
        ],
        "RequestParameters": {},
        "Integration": {
          "Type": "MOCK",
          "RequestTemplates": {
            "application/json": "{statusCode:200}"
          },
          "ContentHandling": "CONVERT_TO_TEXT",
          "IntegrationResponses": [
            {
              "StatusCode": "200",
              "ResponseParameters": {
                "method.response.header.Access-Control-Allow-Origin": "'*'",
                "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent,X-Amzn-Trace-Id'",
                "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,POST'"
              },
              "ResponseTemplates": {
                "application/json": ""
              }
            }
          ]
        },
        "ResourceId": {
          "Ref": "ApiGatewayResourceApiV1CasesIdVarNotes"
        },
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayMethodApiV1AuditOptions": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "AuthorizationType": "NONE",
        "HttpMethod": "OPTIONS",
        "MethodResponses": [
          {
            "StatusCode": "200",
            "ResponseParameters": {
              "method.response.header.Access-Control-Allow-Origin": true,
              "method.response.header.Access-Control-Allow-Headers": true,
              "method.response.header.Access-Control-Allow-Methods": true
            },
            "ResponseModels": {}
          }
        ],
        "RequestParameters": {},
        "Integration": {
          "Type": "MOCK",
          "RequestTemplates": {
            "application/json": "{statusCode:200}"
          },
          "ContentHandling": "CONVERT_TO_TEXT",
          "IntegrationResponses": [
            {
              "StatusCode": "200",
              "ResponseParameters": {
                "method.response.header.Access-Control-Allow-Origin": "'*'",
                "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent,X-Amzn-Trace-Id'",
                "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET'"
              },
              "ResponseTemplates": {
                "application/json": ""
              }
            }
          ]
        },
        "ResourceId": {
          "Ref": "ApiGatewayResourceApiV1Audit"
        },
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayMethodApiV1CasesBulkDashapproveOptions": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "AuthorizationType": "NONE",
        "HttpMethod": "OPTIONS",
        "MethodResponses": [
          {
            "StatusCode": "200",
            "ResponseParameters": {
              "method.response.header.Access-Control-Allow-Origin": true,
              "method.response.header.Access-Control-Allow-Headers": true,
              "method.response.header.Access-Control-Allow-Methods": true
            },
            "ResponseModels": {}
          }
        ],
        "RequestParameters": {},
        "Integration": {
          "Type": "MOCK",
          "RequestTemplates": {
            "application/json": "{statusCode:200}"
          },
          "ContentHandling": "CONVERT_TO_TEXT",
          "IntegrationResponses": [
            {
              "StatusCode": "200",
              "ResponseParameters": {
                "method.response.header.Access-Control-Allow-Origin": "'*'",
                "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent,X-Amzn-Trace-Id'",
                "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,POST'"
              },
              "ResponseTemplates": {
                "application/json": ""
              }
            }
          ]
        },
        "ResourceId": {
          "Ref": "ApiGatewayResourceApiV1CasesBulkDashapprove"
        },
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayMethodApiV1CasesBulkDashrejectOptions": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "AuthorizationType": "NONE",
        "HttpMethod": "OPTIONS",
        "MethodResponses": [
          {
            "StatusCode": "200",
            "ResponseParameters": {
              "method.response.header.Access-Control-Allow-Origin": true,
              "method.response.header.Access-Control-Allow-Headers": true,
              "method.response.header.Access-Control-Allow-Methods": true
            },
            "ResponseModels": {}
          }
        ],
        "RequestParameters": {},
        "Integration": {
          "Type": "MOCK",
          "RequestTemplates": {
            "application/json": "{statusCode:200}"
          },
          "ContentHandling": "CONVERT_TO_TEXT",
          "IntegrationResponses": [
            {
              "StatusCode": "200",
              "ResponseParameters": {
                "method.response.header.Access-Control-Allow-Origin": "'*'",
                "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent,X-Amzn-Trace-Id'",
                "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,POST'"
              },
              "ResponseTemplates": {
                "application/json": ""
              }
            }
          ]
        },
        "ResourceId": {
          "Ref": "ApiGatewayResourceApiV1CasesBulkDashreject"
        },
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayMethodApiV1VerificationsOptions": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "AuthorizationType": "NONE",
        "HttpMethod": "OPTIONS",
        "MethodResponses": [
          {
            "StatusCode": "200",
            "ResponseParameters": {
              "method.response.header.Access-Control-Allow-Origin": true,
              "method.response.header.Access-Control-Allow-Headers": true,
              "method.response.header.Access-Control-Allow-Methods": true
            },
            "ResponseModels": {}
          }
        ],
        "RequestParameters": {},
        "Integration": {
          "Type": "MOCK",
          "RequestTemplates": {
            "application/json": "{statusCode:200}"
          },
          "ContentHandling": "CONVERT_TO_TEXT",
          "IntegrationResponses": [
            {
              "StatusCode": "200",
              "ResponseParameters": {
                "method.response.header.Access-Control-Allow-Origin": "'*'",
                "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent,X-Amzn-Trace-Id'",
                "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,POST'"
              },
              "ResponseTemplates": {
                "application/json": ""
              }
            }
          ]
        },
        "ResourceId": {
          "Ref": "ApiGatewayResourceApiV1Verifications"
        },
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayMethodApiV1VerificationsVerificationidVarOptions": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "AuthorizationType": "NONE",
        "HttpMethod": "OPTIONS",
        "MethodResponses": [
          {
            "StatusCode": "200",
            "ResponseParameters": {
              "method.response.header.Access-Control-Allow-Origin": true,
              "method.response.header.Access-Control-Allow-Headers": true,
              "method.response.header.Access-Control-Allow-Methods": true
            },
            "ResponseModels": {}
          }
        ],
        "RequestParameters": {},
        "Integration": {
          "Type": "MOCK",
          "RequestTemplates": {
            "application/json": "{statusCode:200}"
          },
          "ContentHandling": "CONVERT_TO_TEXT",
          "IntegrationResponses": [
            {
              "StatusCode": "200",
              "ResponseParameters": {
                "method.response.header.Access-Control-Allow-Origin": "'*'",
                "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent,X-Amzn-Trace-Id'",
                "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET'"
              },
              "ResponseTemplates": {
                "application/json": ""
              }
            }
          ]
        },
        "ResourceId": {
          "Ref": "ApiGatewayResourceApiV1VerificationsVerificationidVar"
        },
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayMethodApiV1VerificationsVerificationidVarDocumentsOptions": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "AuthorizationType": "NONE",
        "HttpMethod": "OPTIONS",
        "MethodResponses": [
          {
            "StatusCode": "200",
            "ResponseParameters": {
              "method.response.header.Access-Control-Allow-Origin": true,
              "method.response.header.Access-Control-Allow-Headers": true,
              "method.response.header.Access-Control-Allow-Methods": true
            },
            "ResponseModels": {}
          }
        ],
        "RequestParameters": {},
        "Integration": {
          "Type": "MOCK",
          "RequestTemplates": {
            "application/json": "{statusCode:200}"
          },
          "ContentHandling": "CONVERT_TO_TEXT",
          "IntegrationResponses": [
            {
              "StatusCode": "200",
              "ResponseParameters": {
                "method.response.header.Access-Control-Allow-Origin": "'*'",
                "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent,X-Amzn-Trace-Id'",
                "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,POST'"
              },
              "ResponseTemplates": {
                "application/json": ""
              }
            }
          ]
        },
        "ResourceId": {
          "Ref": "ApiGatewayResourceApiV1VerificationsVerificationidVarDocuments"
        },
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayMethodApiV1VerificationsVerificationidVarDocumentsDocumentidVarUrlOptions": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "AuthorizationType": "NONE",
        "HttpMethod": "OPTIONS",
        "MethodResponses": [
          {
            "StatusCode": "200",
            "ResponseParameters": {
              "method.response.header.Access-Control-Allow-Origin": true,
              "method.response.header.Access-Control-Allow-Headers": true,
              "method.response.header.Access-Control-Allow-Methods": true
            },
            "ResponseModels": {}
          }
        ],
        "RequestParameters": {},
        "Integration": {
          "Type": "MOCK",
          "RequestTemplates": {
            "application/json": "{statusCode:200}"
          },
          "ContentHandling": "CONVERT_TO_TEXT",
          "IntegrationResponses": [
            {
              "StatusCode": "200",
              "ResponseParameters": {
                "method.response.header.Access-Control-Allow-Origin": "'*'",
                "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent,X-Amzn-Trace-Id'",
                "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,POST'"
              },
              "ResponseTemplates": {
                "application/json": ""
              }
            }
          ]
        },
        "ResourceId": {
          "Ref": "ApiGatewayResourceApiV1VerificationsVerificationidVarDocumentsDocumentidVarUrl"
        },
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayMethodApiV1DataDashrequestsOptions": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "AuthorizationType": "NONE",
        "HttpMethod": "OPTIONS",
        "MethodResponses": [
          {
            "StatusCode": "200",
            "ResponseParameters": {
              "method.response.header.Access-Control-Allow-Origin": true,
              "method.response.header.Access-Control-Allow-Headers": true,
              "method.response.header.Access-Control-Allow-Methods": true
            },
            "ResponseModels": {}
          }
        ],
        "RequestParameters": {},
        "Integration": {
          "Type": "MOCK",
          "RequestTemplates": {
            "application/json": "{statusCode:200}"
          },
          "ContentHandling": "CONVERT_TO_TEXT",
          "IntegrationResponses": [
            {
              "StatusCode": "200",
              "ResponseParameters": {
                "method.response.header.Access-Control-Allow-Origin": "'*'",
                "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent,X-Amzn-Trace-Id'",
                "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,POST'"
              },
              "ResponseTemplates": {
                "application/json": ""
              }
            }
          ]
        },
        "ResourceId": {
          "Ref": "ApiGatewayResourceApiV1DataDashrequests"
        },
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayMethodApiV1DataDashrequestsRequestidVarOptions": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "AuthorizationType": "NONE",
        "HttpMethod": "OPTIONS",
        "MethodResponses": [
          {
            "StatusCode": "200",
            "ResponseParameters": {
              "method.response.header.Access-Control-Allow-Origin": true,
              "method.response.header.Access-Control-Allow-Headers": true,
              "method.response.header.Access-Control-Allow-Methods": true
            },
            "ResponseModels": {}
          }
        ],
        "RequestParameters": {},
        "Integration": {
          "Type": "MOCK",
          "RequestTemplates": {
            "application/json": "{statusCode:200}"
          },
          "ContentHandling": "CONVERT_TO_TEXT",
          "IntegrationResponses": [
            {
              "StatusCode": "200",
              "ResponseParameters": {
                "method.response.header.Access-Control-Allow-Origin": "'*'",
                "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent,X-Amzn-Trace-Id'",
                "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET'"
              },
              "ResponseTemplates": {
                "application/json": ""
              }
            }
          ]
        },
        "ResourceId": {
          "Ref": "ApiGatewayResourceApiV1DataDashrequestsRequestidVar"
        },
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayMethodApiV1UsersUseridVarRolesOptions": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "AuthorizationType": "NONE",
        "HttpMethod": "OPTIONS",
        "MethodResponses": [
          {
            "StatusCode": "200",
            "ResponseParameters": {
              "method.response.header.Access-Control-Allow-Origin": true,
              "method.response.header.Access-Control-Allow-Headers": true,
              "method.response.header.Access-Control-Allow-Methods": true
            },
            "ResponseModels": {}
          }
        ],
        "RequestParameters": {},
        "Integration": {
          "Type": "MOCK",
          "RequestTemplates": {
            "application/json": "{statusCode:200}"
          },
          "ContentHandling": "CONVERT_TO_TEXT",
          "IntegrationResponses": [
            {
              "StatusCode": "200",
              "ResponseParameters": {
                "method.response.header.Access-Control-Allow-Origin": "'*'",
                "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent,X-Amzn-Trace-Id'",
                "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,POST'"
              },
              "ResponseTemplates": {
                "application/json": ""
              }
            }
          ]
        },
        "ResourceId": {
          "Ref": "ApiGatewayResourceApiV1UsersUseridVarRoles"
        },
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayMethodApiV1UsersUseridVarRolesRoleVarOptions": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "AuthorizationType": "NONE",
        "HttpMethod": "OPTIONS",
        "MethodResponses": [
          {
            "StatusCode": "200",
            "ResponseParameters": {
              "method.response.header.Access-Control-Allow-Origin": true,
              "method.response.header.Access-Control-Allow-Headers": true,
              "method.response.header.Access-Control-Allow-Methods": true
            },
            "ResponseModels": {}
          }
        ],
        "RequestParameters": {},
        "Integration": {
          "Type": "MOCK",
          "RequestTemplates": {
            "application/json": "{statusCode:200}"
          },
          "ContentHandling": "CONVERT_TO_TEXT",
          "IntegrationResponses": [
            {
              "StatusCode": "200",
              "ResponseParameters": {
                "method.response.header.Access-Control-Allow-Origin": "'*'",
                "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent,X-Amzn-Trace-Id'",
                "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,DELETE'"
              },
              "ResponseTemplates": {
                "application/json": ""
              }
            }
          ]
        },
        "ResourceId": {
          "Ref": "ApiGatewayResourceApiV1UsersUseridVarRolesRoleVar"
        },
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayMethodApiV1RolesOptions": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "AuthorizationType": "NONE",
        "HttpMethod": "OPTIONS",
        "MethodResponses": [
          {
            "StatusCode": "200",
            "ResponseParameters": {
              "method.response.header.Access-Control-Allow-Origin": true,
              "method.response.header.Access-Control-Allow-Headers": true,
              "method.response.header.Access-Control-Allow-Methods": true
            },
            "ResponseModels": {}
          }
        ],
        "RequestParameters": {},
        "Integration": {
          "Type": "MOCK",
          "RequestTemplates": {
            "application/json": "{statusCode:200}"
          },
          "ContentHandling": "CONVERT_TO_TEXT",
          "IntegrationResponses": [
            {
              "StatusCode": "200",
              "ResponseParameters": {
                "method.response.header.Access-Control-Allow-Origin": "'*'",
                "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent,X-Amzn-Trace-Id'",
                "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET'"
              },
              "ResponseTemplates": {
                "application/json": ""
              }
            }
          ]
        },
        "ResourceId": {
          "Ref": "ApiGatewayResourceApiV1Roles"
        },
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayMethodApiV1CasesGet": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "HttpMethod": "GET",
        "RequestParameters": {},
        "ResourceId": {
          "Ref": "ApiGatewayResourceApiV1Cases"
        },
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        },
        "ApiKeyRequired": false,
        "AuthorizationType": "NONE",
        "Integration": {
          "IntegrationHttpMethod": "POST",
          "Type": "AWS_PROXY",
          "Uri": {
            "Fn::Join": [
              "",
              [
                "arn:",
                {
                  "Ref": "AWS::Partition"
                },
                ":apigateway:",
                {
                  "Ref": "AWS::Region"
                },
                ":lambda:path/2015-03-31/functions/",
                {
                  "Fn::GetAtt": [
                    "ListCasesLambdaFunction",
                    "Arn"
                  ]
                },
                "/invocations"
              ]
            ]
          }
        },
        "MethodResponses": []
      },
      "DependsOn": [
        "ListCasesLambdaPermissionApiGateway"
      ]
    },
    "ApiGatewayMethodApiV1CasesIdVarGet": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "HttpMethod": "GET",
        "RequestParameters": {},
        "ResourceId": {
          "Ref": "ApiGatewayResourceApiV1CasesIdVar"
        },
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        },
        "ApiKeyRequired": false,
        "AuthorizationType": "NONE",
        "Integration": {
          "IntegrationHttpMethod": "POST",
          "Type": "AWS_PROXY",
          "Uri": {
            "Fn::Join": [
              "",
              [
                "arn:",
                {
                  "Ref": "AWS::Partition"
                },
                ":apigateway:",
                {
                  "Ref": "AWS::Region"
                },
                ":lambda:path/2015-03-31/functions/",
                {
                  "Fn::GetAtt": [
                    "GetCaseLambdaFunction",
                    "Arn"
                  ]
                },
                "/invocations"
              ]
            ]
          }
        },
        "MethodResponses": []
      },
      "DependsOn": [
        "GetCaseLambdaPermissionApiGateway"
      ]
    },
    "ApiGatewayMethodApiV1CasesIdVarApprovePost": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "HttpMethod": "POST",
        "RequestParameters": {},
        "ResourceId": {
          "Ref": "ApiGatewayResourceApiV1CasesIdVarApprove"
        },
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        },
        "ApiKeyRequired": false,
        "AuthorizationType": "NONE",
        "Integration": {
          "IntegrationHttpMethod": "POST",
          "Type": "AWS_PROXY",
          "Uri": {
            "Fn::Join": [
              "",
              [
                "arn:",
                {
                  "Ref": "AWS::Partition"
                },
                ":apigateway:",
                {
                  "Ref": "AWS::Region"
                },
                ":lambda:path/2015-03-31/functions/",
                {
                  "Fn::GetAtt": [
                    "ApproveCaseLambdaFunction",
                    "Arn"
                  ]
                },
                "/invocations"
              ]
            ]
          }
        },
        "MethodResponses": []
      },
      "DependsOn": [
        "ApproveCaseLambdaPermissionApiGateway"
      ]
    },
    "ApiGatewayMethodApiV1CasesIdVarRejectPost": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "HttpMethod": "POST",
        "RequestParameters": {},
        "ResourceId": {
          "Ref": "ApiGatewayResourceApiV1CasesIdVarReject"
        },
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        },
        "ApiKeyRequired": false,
        "AuthorizationType": "NONE",
        "Integration": {
          "IntegrationHttpMethod": "POST",
          "Type": "AWS_PROXY",
          "Uri": {
            "Fn::Join": [
              "",
              [
                "arn:",
                {
                  "Ref": "AWS::Partition"
                },
                ":apigateway:",
                {
                  "Ref": "AWS::Region"
                },
                ":lambda:path/2015-03-31/functions/",
                {
                  "Fn::GetAtt": [
                    "RejectCaseLambdaFunction",
                    "Arn"
                  ]
                },
                "/invocations"
              ]
            ]
          }
        },
        "MethodResponses": []
      },
      "DependsOn": [
        "RejectCaseLambdaPermissionApiGateway"
      ]
    },
    "ApiGatewayMethodApiV1WebhooksConfigurePost": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "HttpMethod": "POST",
        "RequestParameters": {},
        "ResourceId": {
          "Ref": "ApiGatewayResourceApiV1WebhooksConfigure"
        },
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        },
        "ApiKeyRequired": false,
        "AuthorizationType": "CUSTOM",
        "AuthorizerId": {
          "Ref": "ApiKeyAuthorizerApiGatewayAuthorizer"
        },
        "Integration": {
          "IntegrationHttpMethod": "POST",
          "Type": "AWS_PROXY",
          "Uri": {
            "Fn::Join": [
              "",
              [
                "arn:",
                {
                  "Ref": "AWS::Partition"
                },
                ":apigateway:",
                {
                  "Ref": "AWS::Region"
                },
                ":lambda:path/2015-03-31/functions/",
                {
                  "Fn::GetAtt": [
                    "ConfigureWebhookLambdaFunction",
                    "Arn"
                  ]
                },
                "/invocations"
              ]
            ]
          }
        },
        "MethodResponses": []
      },
      "DependsOn": [
        "ApiKeyAuthorizerApiGatewayAuthorizer"
      ]
    },
    "ApiGatewayMethodApiV1WebhooksTestPost": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "HttpMethod": "POST",
        "RequestParameters": {},
        "ResourceId": {
          "Ref": "ApiGatewayResourceApiV1WebhooksTest"
        },
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        },
        "ApiKeyRequired": false,
        "AuthorizationType": "CUSTOM",
        "AuthorizerId": {
          "Ref": "ApiKeyAuthorizerApiGatewayAuthorizer"
        },
        "Integration": {
          "IntegrationHttpMethod": "POST",
          "Type": "AWS_PROXY",
          "Uri": {
            "Fn::Join": [
              "",
              [
                "arn:",
                {
                  "Ref": "AWS::Partition"
                },
                ":apigateway:",
                {
                  "Ref": "AWS::Region"
                },
                ":lambda:path/2015-03-31/functions/",
                {
                  "Fn::GetAtt": [
                    "TestWebhookLambdaFunction",
                    "Arn"
                  ]
                },
                "/invocations"
              ]
            ]
          }
        },
        "MethodResponses": []
      },
      "DependsOn": [
        "ApiKeyAuthorizerApiGatewayAuthorizer"
      ]
    },
    "ApiGatewayMethodApiV1CasesIdVarNotesPost": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "HttpMethod": "POST",
        "RequestParameters": {},
        "ResourceId": {
          "Ref": "ApiGatewayResourceApiV1CasesIdVarNotes"
        },
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        },
        "ApiKeyRequired": false,
        "AuthorizationType": "NONE",
        "Integration": {
          "IntegrationHttpMethod": "POST",
          "Type": "AWS_PROXY",
          "Uri": {
            "Fn::Join": [
              "",
              [
                "arn:",
                {
                  "Ref": "AWS::Partition"
                },
                ":apigateway:",
                {
                  "Ref": "AWS::Region"
                },
                ":lambda:path/2015-03-31/functions/",
                {
                  "Fn::GetAtt": [
                    "AddNoteLambdaFunction",
                    "Arn"
                  ]
                },
                "/invocations"
              ]
            ]
          }
        },
        "MethodResponses": []
      },
      "DependsOn": [
        "AddNoteLambdaPermissionApiGateway"
      ]
    },
    "ApiGatewayMethodApiV1CasesIdVarNotesGet": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "HttpMethod": "GET",
        "RequestParameters": {},
        "ResourceId": {
          "Ref": "ApiGatewayResourceApiV1CasesIdVarNotes"
        },
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        },
        "ApiKeyRequired": false,
        "AuthorizationType": "NONE",
        "Integration": {
          "IntegrationHttpMethod": "POST",
          "Type": "AWS_PROXY",
          "Uri": {
            "Fn::Join": [
              "",
              [
                "arn:",
                {
                  "Ref": "AWS::Partition"
                },
                ":apigateway:",
                {
                  "Ref": "AWS::Region"
                },
                ":lambda:path/2015-03-31/functions/",
                {
                  "Fn::GetAtt": [
                    "GetNotesLambdaFunction",
                    "Arn"
                  ]
                },
                "/invocations"
              ]
            ]
          }
        },
        "MethodResponses": []
      },
      "DependsOn": [
        "GetNotesLambdaPermissionApiGateway"
      ]
    },
    "ApiGatewayMethodApiV1AuditGet": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "HttpMethod": "GET",
        "RequestParameters": {},
        "ResourceId": {
          "Ref": "ApiGatewayResourceApiV1Audit"
        },
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        },
        "ApiKeyRequired": false,
        "AuthorizationType": "NONE",
        "Integration": {
          "IntegrationHttpMethod": "POST",
          "Type": "AWS_PROXY",
          "Uri": {
            "Fn::Join": [
              "",
              [
                "arn:",
                {
                  "Ref": "AWS::Partition"
                },
                ":apigateway:",
                {
                  "Ref": "AWS::Region"
                },
                ":lambda:path/2015-03-31/functions/",
                {
                  "Fn::GetAtt": [
                    "GetAuditLogsLambdaFunction",
                    "Arn"
                  ]
                },
                "/invocations"
              ]
            ]
          }
        },
        "MethodResponses": []
      },
      "DependsOn": [
        "GetAuditLogsLambdaPermissionApiGateway"
      ]
    },
    "ApiGatewayMethodApiV1CasesBulkDashapprovePost": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "HttpMethod": "POST",
        "RequestParameters": {},
        "ResourceId": {
          "Ref": "ApiGatewayResourceApiV1CasesBulkDashapprove"
        },
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        },
        "ApiKeyRequired": false,
        "AuthorizationType": "NONE",
        "Integration": {
          "IntegrationHttpMethod": "POST",
          "Type": "AWS_PROXY",
          "Uri": {
            "Fn::Join": [
              "",
              [
                "arn:",
                {
                  "Ref": "AWS::Partition"
                },
                ":apigateway:",
                {
                  "Ref": "AWS::Region"
                },
                ":lambda:path/2015-03-31/functions/",
                {
                  "Fn::GetAtt": [
                    "BulkApproveLambdaFunction",
                    "Arn"
                  ]
                },
                "/invocations"
              ]
            ]
          }
        },
        "MethodResponses": []
      },
      "DependsOn": [
        "BulkApproveLambdaPermissionApiGateway"
      ]
    },
    "ApiGatewayMethodApiV1CasesBulkDashrejectPost": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "HttpMethod": "POST",
        "RequestParameters": {},
        "ResourceId": {
          "Ref": "ApiGatewayResourceApiV1CasesBulkDashreject"
        },
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        },
        "ApiKeyRequired": false,
        "AuthorizationType": "NONE",
        "Integration": {
          "IntegrationHttpMethod": "POST",
          "Type": "AWS_PROXY",
          "Uri": {
            "Fn::Join": [
              "",
              [
                "arn:",
                {
                  "Ref": "AWS::Partition"
                },
                ":apigateway:",
                {
                  "Ref": "AWS::Region"
                },
                ":lambda:path/2015-03-31/functions/",
                {
                  "Fn::GetAtt": [
                    "BulkRejectLambdaFunction",
                    "Arn"
                  ]
                },
                "/invocations"
              ]
            ]
          }
        },
        "MethodResponses": []
      },
      "DependsOn": [
        "BulkRejectLambdaPermissionApiGateway"
      ]
    },
    "ApiGatewayMethodApiV1VerificationsPost": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "HttpMethod": "POST",
        "RequestParameters": {},
        "ResourceId": {
          "Ref": "ApiGatewayResourceApiV1Verifications"
        },
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        },
        "ApiKeyRequired": false,
        "AuthorizationType": "CUSTOM",
        "AuthorizerId": {
          "Ref": "ApiKeyAuthorizerApiGatewayAuthorizer"
        },
        "Integration": {
          "IntegrationHttpMethod": "POST",
          "Type": "AWS_PROXY",
          "Uri": {
            "Fn::Join": [
              "",
              [
                "arn:",
                {
                  "Ref": "AWS::Partition"
                },
                ":apigateway:",
                {
                  "Ref": "AWS::Region"
                },
                ":lambda:path/2015-03-31/functions/",
                {
                  "Fn::GetAtt": [
                    "CreateVerificationLambdaFunction",
                    "Arn"
                  ]
                },
                "/invocations"
              ]
            ]
          }
        },
        "MethodResponses": []
      },
      "DependsOn": [
        "ApiKeyAuthorizerApiGatewayAuthorizer"
      ]
    },
    "ApiGatewayMethodApiV1VerificationsVerificationidVarGet": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "HttpMethod": "GET",
        "RequestParameters": {},
        "ResourceId": {
          "Ref": "ApiGatewayResourceApiV1VerificationsVerificationidVar"
        },
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        },
        "ApiKeyRequired": false,
        "AuthorizationType": "CUSTOM",
        "AuthorizerId": {
          "Ref": "ApiKeyAuthorizerApiGatewayAuthorizer"
        },
        "Integration": {
          "IntegrationHttpMethod": "POST",
          "Type": "AWS_PROXY",
          "Uri": {
            "Fn::Join": [
              "",
              [
                "arn:",
                {
                  "Ref": "AWS::Partition"
                },
                ":apigateway:",
                {
                  "Ref": "AWS::Region"
                },
                ":lambda:path/2015-03-31/functions/",
                {
                  "Fn::GetAtt": [
                    "GetVerificationStatusLambdaFunction",
                    "Arn"
                  ]
                },
                "/invocations"
              ]
            ]
          }
        },
        "MethodResponses": []
      },
      "DependsOn": [
        "ApiKeyAuthorizerApiGatewayAuthorizer"
      ]
    },
    "ApiGatewayMethodApiV1VerificationsVerificationidVarDocumentsPost": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "HttpMethod": "POST",
        "RequestParameters": {},
        "ResourceId": {
          "Ref": "ApiGatewayResourceApiV1VerificationsVerificationidVarDocuments"
        },
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        },
        "ApiKeyRequired": false,
        "AuthorizationType": "CUSTOM",
        "AuthorizerId": {
          "Ref": "ApiKeyAuthorizerApiGatewayAuthorizer"
        },
        "Integration": {
          "IntegrationHttpMethod": "POST",
          "Type": "AWS_PROXY",
          "Uri": {
            "Fn::Join": [
              "",
              [
                "arn:",
                {
                  "Ref": "AWS::Partition"
                },
                ":apigateway:",
                {
                  "Ref": "AWS::Region"
                },
                ":lambda:path/2015-03-31/functions/",
                {
                  "Fn::GetAtt": [
                    "UploadDocumentLambdaFunction",
                    "Arn"
                  ]
                },
                "/invocations"
              ]
            ]
          }
        },
        "MethodResponses": []
      },
      "DependsOn": [
        "ApiKeyAuthorizerApiGatewayAuthorizer"
      ]
    },
    "ApiGatewayMethodApiV1VerificationsVerificationidVarDocumentsDocumentidVarUrlPost": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "HttpMethod": "POST",
        "RequestParameters": {},
        "ResourceId": {
          "Ref": "ApiGatewayResourceApiV1VerificationsVerificationidVarDocumentsDocumentidVarUrl"
        },
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        },
        "ApiKeyRequired": false,
        "AuthorizationType": "NONE",
        "Integration": {
          "IntegrationHttpMethod": "POST",
          "Type": "AWS_PROXY",
          "Uri": {
            "Fn::Join": [
              "",
              [
                "arn:",
                {
                  "Ref": "AWS::Partition"
                },
                ":apigateway:",
                {
                  "Ref": "AWS::Region"
                },
                ":lambda:path/2015-03-31/functions/",
                {
                  "Fn::GetAtt": [
                    "RefreshDocumentUrlLambdaFunction",
                    "Arn"
                  ]
                },
                "/invocations"
              ]
            ]
          }
        },
        "MethodResponses": []
      },
      "DependsOn": [
        "RefreshDocumentUrlLambdaPermissionApiGateway"
      ]
    },
    "ApiGatewayMethodApiV1DataDashrequestsPost": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "HttpMethod": "POST",
        "RequestParameters": {},
        "ResourceId": {
          "Ref": "ApiGatewayResourceApiV1DataDashrequests"
        },
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        },
        "ApiKeyRequired": false,
        "AuthorizationType": "CUSTOM",
        "AuthorizerId": {
          "Ref": "ApiKeyAuthorizerApiGatewayAuthorizer"
        },
        "Integration": {
          "IntegrationHttpMethod": "POST",
          "Type": "AWS_PROXY",
          "Uri": {
            "Fn::Join": [
              "",
              [
                "arn:",
                {
                  "Ref": "AWS::Partition"
                },
                ":apigateway:",
                {
                  "Ref": "AWS::Region"
                },
                ":lambda:path/2015-03-31/functions/",
                {
                  "Fn::GetAtt": [
                    "CreateDataRequestLambdaFunction",
                    "Arn"
                  ]
                },
                "/invocations"
              ]
            ]
          }
        },
        "MethodResponses": []
      },
      "DependsOn": [
        "ApiKeyAuthorizerApiGatewayAuthorizer"
      ]
    },
    "ApiGatewayMethodApiV1DataDashrequestsRequestidVarGet": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "HttpMethod": "GET",
        "RequestParameters": {},
        "ResourceId": {
          "Ref": "ApiGatewayResourceApiV1DataDashrequestsRequestidVar"
        },
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        },
        "ApiKeyRequired": false,
        "AuthorizationType": "CUSTOM",
        "AuthorizerId": {
          "Ref": "ApiKeyAuthorizerApiGatewayAuthorizer"
        },
        "Integration": {
          "IntegrationHttpMethod": "POST",
          "Type": "AWS_PROXY",
          "Uri": {
            "Fn::Join": [
              "",
              [
                "arn:",
                {
                  "Ref": "AWS::Partition"
                },
                ":apigateway:",
                {
                  "Ref": "AWS::Region"
                },
                ":lambda:path/2015-03-31/functions/",
                {
                  "Fn::GetAtt": [
                    "GetDataRequestStatusLambdaFunction",
                    "Arn"
                  ]
                },
                "/invocations"
              ]
            ]
          }
        },
        "MethodResponses": []
      },
      "DependsOn": [
        "ApiKeyAuthorizerApiGatewayAuthorizer"
      ]
    },
    "ApiGatewayMethodApiV1UsersUseridVarRolesPost": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "HttpMethod": "POST",
        "RequestParameters": {},
        "ResourceId": {
          "Ref": "ApiGatewayResourceApiV1UsersUseridVarRoles"
        },
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        },
        "ApiKeyRequired": false,
        "AuthorizationType": "CUSTOM",
        "AuthorizerId": {
          "Ref": "ApiKeyAuthorizerApiGatewayAuthorizer"
        },
        "Integration": {
          "IntegrationHttpMethod": "POST",
          "Type": "AWS_PROXY",
          "Uri": {
            "Fn::Join": [
              "",
              [
                "arn:",
                {
                  "Ref": "AWS::Partition"
                },
                ":apigateway:",
                {
                  "Ref": "AWS::Region"
                },
                ":lambda:path/2015-03-31/functions/",
                {
                  "Fn::GetAtt": [
                    "AssignRoleLambdaFunction",
                    "Arn"
                  ]
                },
                "/invocations"
              ]
            ]
          }
        },
        "MethodResponses": []
      },
      "DependsOn": [
        "ApiKeyAuthorizerApiGatewayAuthorizer"
      ]
    },
    "ApiGatewayMethodApiV1UsersUseridVarRolesRoleVarDelete": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "HttpMethod": "DELETE",
        "RequestParameters": {},
        "ResourceId": {
          "Ref": "ApiGatewayResourceApiV1UsersUseridVarRolesRoleVar"
        },
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        },
        "ApiKeyRequired": false,
        "AuthorizationType": "CUSTOM",
        "AuthorizerId": {
          "Ref": "ApiKeyAuthorizerApiGatewayAuthorizer"
        },
        "Integration": {
          "IntegrationHttpMethod": "POST",
          "Type": "AWS_PROXY",
          "Uri": {
            "Fn::Join": [
              "",
              [
                "arn:",
                {
                  "Ref": "AWS::Partition"
                },
                ":apigateway:",
                {
                  "Ref": "AWS::Region"
                },
                ":lambda:path/2015-03-31/functions/",
                {
                  "Fn::GetAtt": [
                    "RemoveRoleLambdaFunction",
                    "Arn"
                  ]
                },
                "/invocations"
              ]
            ]
          }
        },
        "MethodResponses": []
      },
      "DependsOn": [
        "ApiKeyAuthorizerApiGatewayAuthorizer"
      ]
    },
    "ApiGatewayMethodApiV1UsersUseridVarRolesGet": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "HttpMethod": "GET",
        "RequestParameters": {},
        "ResourceId": {
          "Ref": "ApiGatewayResourceApiV1UsersUseridVarRoles"
        },
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        },
        "ApiKeyRequired": false,
        "AuthorizationType": "CUSTOM",
        "AuthorizerId": {
          "Ref": "ApiKeyAuthorizerApiGatewayAuthorizer"
        },
        "Integration": {
          "IntegrationHttpMethod": "POST",
          "Type": "AWS_PROXY",
          "Uri": {
            "Fn::Join": [
              "",
              [
                "arn:",
                {
                  "Ref": "AWS::Partition"
                },
                ":apigateway:",
                {
                  "Ref": "AWS::Region"
                },
                ":lambda:path/2015-03-31/functions/",
                {
                  "Fn::GetAtt": [
                    "GetUserRolesLambdaFunction",
                    "Arn"
                  ]
                },
                "/invocations"
              ]
            ]
          }
        },
        "MethodResponses": []
      },
      "DependsOn": [
        "ApiKeyAuthorizerApiGatewayAuthorizer"
      ]
    },
    "ApiGatewayMethodApiV1RolesGet": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "HttpMethod": "GET",
        "RequestParameters": {},
        "ResourceId": {
          "Ref": "ApiGatewayResourceApiV1Roles"
        },
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        },
        "ApiKeyRequired": false,
        "AuthorizationType": "CUSTOM",
        "AuthorizerId": {
          "Ref": "ApiKeyAuthorizerApiGatewayAuthorizer"
        },
        "Integration": {
          "IntegrationHttpMethod": "POST",
          "Type": "AWS_PROXY",
          "Uri": {
            "Fn::Join": [
              "",
              [
                "arn:",
                {
                  "Ref": "AWS::Partition"
                },
                ":apigateway:",
                {
                  "Ref": "AWS::Region"
                },
                ":lambda:path/2015-03-31/functions/",
                {
                  "Fn::GetAtt": [
                    "ListRolesLambdaFunction",
                    "Arn"
                  ]
                },
                "/invocations"
              ]
            ]
          }
        },
        "MethodResponses": []
      },
      "DependsOn": [
        "ApiKeyAuthorizerApiGatewayAuthorizer"
      ]
    },
    "ApiKeyAuthorizerApiGatewayAuthorizer": {
      "Type": "AWS::ApiGateway::Authorizer",
      "Properties": {
        "AuthorizerResultTtlInSeconds": 300,
        "IdentitySource": "method.request.header.Authorization",
        "Name": "apiKeyAuthorizer",
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        },
        "AuthorizerUri": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":apigateway:",
              {
                "Ref": "AWS::Region"
              },
              ":lambda:path/2015-03-31/functions/",
              "arn:aws:lambda:af-south-1:979237821231:function:authbridge-auth-staging-apiKeyAuthorizer",
              "/invocations"
            ]
          ]
        },
        "Type": "REQUEST"
      }
    },
    "ApiGatewayDeployment1768778632767": {
      "Type": "AWS::ApiGateway::Deployment",
      "Properties": {
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        },
        "StageName": "staging"
      },
      "DependsOn": [
        "ApiGatewayMethodApiV1CasesOptions",
        "ApiGatewayMethodApiV1CasesIdVarOptions",
        "ApiGatewayMethodApiV1CasesIdVarApproveOptions",
        "ApiGatewayMethodApiV1CasesIdVarRejectOptions",
        "ApiGatewayMethodApiV1WebhooksConfigureOptions",
        "ApiGatewayMethodApiV1WebhooksTestOptions",
        "ApiGatewayMethodApiV1CasesIdVarNotesOptions",
        "ApiGatewayMethodApiV1AuditOptions",
        "ApiGatewayMethodApiV1CasesBulkDashapproveOptions",
        "ApiGatewayMethodApiV1CasesBulkDashrejectOptions",
        "ApiGatewayMethodApiV1VerificationsOptions",
        "ApiGatewayMethodApiV1VerificationsVerificationidVarOptions",
        "ApiGatewayMethodApiV1VerificationsVerificationidVarDocumentsOptions",
        "ApiGatewayMethodApiV1VerificationsVerificationidVarDocumentsDocumentidVarUrlOptions",
        "ApiGatewayMethodApiV1DataDashrequestsOptions",
        "ApiGatewayMethodApiV1DataDashrequestsRequestidVarOptions",
        "ApiGatewayMethodApiV1UsersUseridVarRolesOptions",
        "ApiGatewayMethodApiV1UsersUseridVarRolesRoleVarOptions",
        "ApiGatewayMethodApiV1RolesOptions",
        "ApiGatewayMethodApiV1CasesGet",
        "ApiGatewayMethodApiV1CasesIdVarGet",
        "ApiGatewayMethodApiV1CasesIdVarApprovePost",
        "ApiGatewayMethodApiV1CasesIdVarRejectPost",
        "ApiGatewayMethodApiV1WebhooksConfigurePost",
        "ApiGatewayMethodApiV1WebhooksTestPost",
        "ApiGatewayMethodApiV1CasesIdVarNotesPost",
        "ApiGatewayMethodApiV1CasesIdVarNotesGet",
        "ApiGatewayMethodApiV1AuditGet",
        "ApiGatewayMethodApiV1CasesBulkDashapprovePost",
        "ApiGatewayMethodApiV1CasesBulkDashrejectPost",
        "ApiGatewayMethodApiV1VerificationsPost",
        "ApiGatewayMethodApiV1VerificationsVerificationidVarGet",
        "ApiGatewayMethodApiV1VerificationsVerificationidVarDocumentsPost",
        "ApiGatewayMethodApiV1VerificationsVerificationidVarDocumentsDocumentidVarUrlPost",
        "ApiGatewayMethodApiV1DataDashrequestsPost",
        "ApiGatewayMethodApiV1DataDashrequestsRequestidVarGet",
        "ApiGatewayMethodApiV1UsersUseridVarRolesPost",
        "ApiGatewayMethodApiV1UsersUseridVarRolesRoleVarDelete",
        "ApiGatewayMethodApiV1UsersUseridVarRolesGet",
        "ApiGatewayMethodApiV1RolesGet"
      ]
    },
    "ListCasesLambdaPermissionApiGateway": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "ListCasesLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "ApiGatewayRestApi"
              },
              "/*/*"
            ]
          ]
        }
      }
    },
    "GetCaseLambdaPermissionApiGateway": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "GetCaseLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "ApiGatewayRestApi"
              },
              "/*/*"
            ]
          ]
        }
      }
    },
    "ApproveCaseLambdaPermissionApiGateway": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "ApproveCaseLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "ApiGatewayRestApi"
              },
              "/*/*"
            ]
          ]
        }
      }
    },
    "RejectCaseLambdaPermissionApiGateway": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "RejectCaseLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "ApiGatewayRestApi"
              },
              "/*/*"
            ]
          ]
        }
      }
    },
    "ConfigureWebhookLambdaPermissionApiGateway": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "ConfigureWebhookLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "ApiGatewayRestApi"
              },
              "/*/*"
            ]
          ]
        }
      }
    },
    "ApiKeyAuthorizerLambdaPermissionApiGateway": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": "arn:aws:lambda:af-south-1:979237821231:function:authbridge-auth-staging-apiKeyAuthorizer",
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "ApiGatewayRestApi"
              },
              "/*/*"
            ]
          ]
        }
      }
    },
    "TestWebhookLambdaPermissionApiGateway": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "TestWebhookLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "ApiGatewayRestApi"
              },
              "/*/*"
            ]
          ]
        }
      }
    },
    "AddNoteLambdaPermissionApiGateway": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "AddNoteLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "ApiGatewayRestApi"
              },
              "/*/*"
            ]
          ]
        }
      }
    },
    "GetNotesLambdaPermissionApiGateway": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "GetNotesLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "ApiGatewayRestApi"
              },
              "/*/*"
            ]
          ]
        }
      }
    },
    "GetAuditLogsLambdaPermissionApiGateway": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "GetAuditLogsLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "ApiGatewayRestApi"
              },
              "/*/*"
            ]
          ]
        }
      }
    },
    "BulkApproveLambdaPermissionApiGateway": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "BulkApproveLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "ApiGatewayRestApi"
              },
              "/*/*"
            ]
          ]
        }
      }
    },
    "BulkRejectLambdaPermissionApiGateway": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "BulkRejectLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "ApiGatewayRestApi"
              },
              "/*/*"
            ]
          ]
        }
      }
    },
    "CreateVerificationLambdaPermissionApiGateway": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "CreateVerificationLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "ApiGatewayRestApi"
              },
              "/*/*"
            ]
          ]
        }
      }
    },
    "GetVerificationStatusLambdaPermissionApiGateway": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "GetVerificationStatusLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "ApiGatewayRestApi"
              },
              "/*/*"
            ]
          ]
        }
      }
    },
    "UploadDocumentLambdaPermissionApiGateway": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "UploadDocumentLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "ApiGatewayRestApi"
              },
              "/*/*"
            ]
          ]
        }
      }
    },
    "RefreshDocumentUrlLambdaPermissionApiGateway": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "RefreshDocumentUrlLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "ApiGatewayRestApi"
              },
              "/*/*"
            ]
          ]
        }
      }
    },
    "CreateDataRequestLambdaPermissionApiGateway": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "CreateDataRequestLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "ApiGatewayRestApi"
              },
              "/*/*"
            ]
          ]
        }
      }
    },
    "GetDataRequestStatusLambdaPermissionApiGateway": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "GetDataRequestStatusLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "ApiGatewayRestApi"
              },
              "/*/*"
            ]
          ]
        }
      }
    },
    "AssignRoleLambdaPermissionApiGateway": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "AssignRoleLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "ApiGatewayRestApi"
              },
              "/*/*"
            ]
          ]
        }
      }
    },
    "RemoveRoleLambdaPermissionApiGateway": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "RemoveRoleLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "ApiGatewayRestApi"
              },
              "/*/*"
            ]
          ]
        }
      }
    },
    "GetUserRolesLambdaPermissionApiGateway": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "GetUserRolesLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "ApiGatewayRestApi"
              },
              "/*/*"
            ]
          ]
        }
      }
    },
    "ListRolesLambdaPermissionApiGateway": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "ListRolesLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "ApiGatewayRestApi"
              },
              "/*/*"
            ]
          ]
        }
      }
    },
    "SendWebhookEventSourceMappingSQSWebhookQueue": {
      "Type": "AWS::Lambda::EventSourceMapping",
      "DependsOn": [
        "IamRoleLambdaExecution"
      ],
      "Properties": {
        "BatchSize": 10,
        "EventSourceArn": {
          "Fn::GetAtt": [
            "WebhookQueue",
            "Arn"
          ]
        },
        "FunctionName": {
          "Fn::GetAtt": [
            "SendWebhookLambdaFunction",
            "Arn"
          ]
        },
        "Enabled": true
      }
    },
    "ProcessOCREventSourceMappingSQSOcrQueue": {
      "Type": "AWS::Lambda::EventSourceMapping",
      "DependsOn": [
        "IamRoleLambdaExecution"
      ],
      "Properties": {
        "BatchSize": 1,
        "EventSourceArn": {
          "Fn::GetAtt": [
            "OcrQueue",
            "Arn"
          ]
        },
        "FunctionName": {
          "Fn::GetAtt": [
            "ProcessOCRLambdaFunction",
            "Arn"
          ]
        },
        "Enabled": true,
        "FunctionResponseTypes": [
          "ReportBatchItemFailures"
        ]
      }
    },
    "ProcessBiometricEventSourceMappingSQSBiometricQueue": {
      "Type": "AWS::Lambda::EventSourceMapping",
      "DependsOn": [
        "IamRoleLambdaExecution"
      ],
      "Properties": {
        "BatchSize": 1,
        "EventSourceArn": {
          "Fn::GetAtt": [
            "BiometricQueue",
            "Arn"
          ]
        },
        "FunctionName": {
          "Fn::GetAtt": [
            "ProcessBiometricLambdaFunction",
            "Arn"
          ]
        },
        "Enabled": true,
        "FunctionResponseTypes": [
          "ReportBatchItemFailures"
        ]
      }
    },
    "DocumentsBucket": {
      "Type": "AWS::S3::Bucket",
      "Properties": {
        "BucketName": "authbridge-documents-staging",
        "BucketEncryption": {
          "ServerSideEncryptionConfiguration": [
            {
              "ServerSideEncryptionByDefault": {
                "SSEAlgorithm": "aws:kms",
                "KMSMasterKeyID": "arn:aws:kms:af-south-1:979237821231:key/dd242797-bf9b-4058-a079-3588989dd79b"
              }
            }
          ]
        },
        "PublicAccessBlockConfiguration": {
          "BlockPublicAcls": true,
          "BlockPublicPolicy": true,
          "IgnorePublicAcls": true,
          "RestrictPublicBuckets": true
        }
      }
    },
    "DocumentsBucketPolicy": {
      "Type": "AWS::S3::BucketPolicy",
      "Properties": {
        "Bucket": {
          "Ref": "DocumentsBucket"
        },
        "PolicyDocument": {
          "Statement": [
            {
              "Sid": "DenyUnencryptedObjectUploads",
              "Effect": "Deny",
              "Principal": "*",
              "Action": "s3:PutObject",
              "Resource": {
                "Fn::Sub": "${DocumentsBucket.Arn}/*"
              },
              "Condition": {
                "StringNotEquals": {
                  "s3:x-amz-server-side-encryption": "aws:kms"
                }
              }
            },
            {
              "Sid": "DenyIncorrectEncryptionHeader",
              "Effect": "Deny",
              "Principal": "*",
              "Action": "s3:PutObject",
              "Resource": {
                "Fn::Sub": "${DocumentsBucket.Arn}/*"
              },
              "Condition": {
                "StringNotEqualsIfExists": {
                  "s3:x-amz-server-side-encryption-aws-kms-key-id": "arn:aws:kms:af-south-1:979237821231:key/dd242797-bf9b-4058-a079-3588989dd79b"
                }
              }
            }
          ]
        }
      }
    },
    "DataExportBucket": {
      "Type": "AWS::S3::Bucket",
      "Properties": {
        "BucketName": "authbridge-data-exports-staging",
        "BucketEncryption": {
          "ServerSideEncryptionConfiguration": [
            {
              "ServerSideEncryptionByDefault": {
                "SSEAlgorithm": "aws:kms",
                "KMSMasterKeyID": "dd242797-bf9b-4058-a079-3588989dd79b"
              }
            }
          ]
        },
        "VersioningConfiguration": {
          "Status": "Enabled"
        },
        "LifecycleConfiguration": {
          "Rules": [
            {
              "Id": "DeleteExportsAfter7Days",
              "Status": "Enabled",
              "ExpirationInDays": 7
            }
          ]
        },
        "CorsConfiguration": {
          "CorsRules": [
            {
              "AllowedOrigins": [
                "https://app.authbridge.io",
                "https://backoffice.authbridge.io",
                "https://*.authbridge.io"
              ],
              "AllowedMethods": [
                "GET"
              ],
              "AllowedHeaders": [
                "*"
              ],
              "MaxAge": 3600
            }
          ]
        },
        "PublicAccessBlockConfiguration": {
          "BlockPublicAcls": true,
          "BlockPublicPolicy": true,
          "IgnorePublicAcls": true,
          "RestrictPublicBuckets": true
        }
      }
    },
    "OcrQueue": {
      "Type": "AWS::SQS::Queue",
      "Properties": {
        "QueueName": "authbridge-ocr-queue-staging",
        "VisibilityTimeout": 360,
        "MessageRetentionPeriod": 345600,
        "ReceiveMessageWaitTimeSeconds": 0,
        "RedrivePolicy": {
          "deadLetterTargetArn": {
            "Fn::GetAtt": [
              "OcrDLQ",
              "Arn"
            ]
          },
          "maxReceiveCount": 3
        }
      }
    },
    "OcrDLQ": {
      "Type": "AWS::SQS::Queue",
      "Properties": {
        "QueueName": "authbridge-ocr-dlq-staging",
        "MessageRetentionPeriod": 1209600,
        "ReceiveMessageWaitTimeSeconds": 0
      }
    },
    "BiometricQueue": {
      "Type": "AWS::SQS::Queue",
      "Properties": {
        "QueueName": "authbridge-biometric-queue-staging",
        "VisibilityTimeout": 360,
        "MessageRetentionPeriod": 345600,
        "ReceiveMessageWaitTimeSeconds": 0,
        "RedrivePolicy": {
          "deadLetterTargetArn": {
            "Fn::GetAtt": [
              "BiometricDLQ",
              "Arn"
            ]
          },
          "maxReceiveCount": 3
        }
      }
    },
    "BiometricDLQ": {
      "Type": "AWS::SQS::Queue",
      "Properties": {
        "QueueName": "authbridge-biometric-dlq-staging",
        "MessageRetentionPeriod": 1209600,
        "ReceiveMessageWaitTimeSeconds": 0
      }
    },
    "WebhookQueue": {
      "Type": "AWS::SQS::Queue",
      "Properties": {
        "QueueName": "authbridge-webhook-queue-staging",
        "VisibilityTimeout": 90,
        "MessageRetentionPeriod": 86400,
        "ReceiveMessageWaitTimeSeconds": 0,
        "RedrivePolicy": {
          "deadLetterTargetArn": {
            "Fn::GetAtt": [
              "WebhookDLQ",
              "Arn"
            ]
          },
          "maxReceiveCount": 3
        }
      }
    },
    "WebhookDLQ": {
      "Type": "AWS::SQS::Queue",
      "Properties": {
        "QueueName": "authbridge-webhook-dlq-staging",
        "MessageRetentionPeriod": 1209600,
        "ReceiveMessageWaitTimeSeconds": 0
      }
    },
    "OcrAlertTopic": {
      "Type": "AWS::SNS::Topic",
      "Properties": {
        "TopicName": "authbridge-ocr-alerts-staging",
        "DisplayName": "AuthBridge OCR Alerts"
      }
    },
    "AuditLogWriteFailureAlarm": {
      "Type": "AWS::CloudWatch::Alarm",
      "Properties": {
        "AlarmName": "authbridge-audit-write-failure-staging",
        "AlarmDescription": "Audit log write failures detected",
        "MetricName": "AuditWriteFailures",
        "Namespace": "AuthBridge/Audit",
        "Statistic": "Sum",
        "Period": 300,
        "EvaluationPeriods": 1,
        "Threshold": 10,
        "ComparisonOperator": "GreaterThanThreshold",
        "TreatMissingData": "notBreaching",
        "AlarmActions": [
          {
            "Ref": "OcrAlertTopic"
          }
        ]
      }
    },
    "AuditLogVolumeAlarm": {
      "Type": "AWS::CloudWatch::Alarm",
      "Properties": {
        "AlarmName": "authbridge-audit-volume-spike-staging",
        "AlarmDescription": "Audit log volume spike detected (potential attack or system issue)",
        "MetricName": "AuditLogEntries",
        "Namespace": "AuthBridge/Audit",
        "Statistic": "Sum",
        "Period": 300,
        "EvaluationPeriods": 2,
        "Threshold": 10000,
        "ComparisonOperator": "GreaterThanThreshold",
        "TreatMissingData": "notBreaching",
        "AlarmActions": [
          {
            "Ref": "OcrAlertTopic"
          }
        ]
      }
    },
    "RbacPermissionDeniedAlarm": {
      "Type": "AWS::CloudWatch::Alarm",
      "Properties": {
        "AlarmName": "authbridge-rbac-permission-denied-staging",
        "AlarmDescription": "RBAC permission denied spike detected (potential unauthorized access attempts)",
        "MetricName": "PermissionDenied",
        "Namespace": "AuthBridge/RBAC",
        "Statistic": "Sum",
        "Period": 300,
        "EvaluationPeriods": 1,
        "Threshold": 50,
        "ComparisonOperator": "GreaterThanThreshold",
        "TreatMissingData": "notBreaching",
        "AlarmActions": [
          {
            "Ref": "OcrAlertTopic"
          }
        ]
      }
    },
    "OcrSuccessRateAlarm": {
      "Type": "AWS::CloudWatch::Alarm",
      "Properties": {
        "AlarmName": "authbridge-ocr-success-rate-staging",
        "AlarmDescription": "OCR success rate below 85%",
        "MetricName": "OcrSuccess",
        "Namespace": "AuthBridge/Verification",
        "Statistic": "Sum",
        "Period": 300,
        "EvaluationPeriods": 3,
        "Threshold": 85,
        "ComparisonOperator": "LessThanThreshold",
        "TreatMissingData": "notBreaching",
        "AlarmActions": [
          {
            "Ref": "OcrAlertTopic"
          }
        ]
      }
    },
    "OcrConfidenceAlarm": {
      "Type": "AWS::CloudWatch::Alarm",
      "Properties": {
        "AlarmName": "authbridge-ocr-confidence-staging",
        "AlarmDescription": "Average OCR confidence below 90%",
        "MetricName": "OcrConfidenceScore",
        "Namespace": "AuthBridge/Verification",
        "Statistic": "Average",
        "Period": 300,
        "EvaluationPeriods": 3,
        "Threshold": 90,
        "ComparisonOperator": "LessThanThreshold",
        "TreatMissingData": "notBreaching",
        "AlarmActions": [
          {
            "Ref": "OcrAlertTopic"
          }
        ]
      }
    },
    "OcrProcessingTimeAlarm": {
      "Type": "AWS::CloudWatch::Alarm",
      "Properties": {
        "AlarmName": "authbridge-ocr-processing-time-staging",
        "AlarmDescription": "OCR processing time exceeds 10 seconds (p95)",
        "MetricName": "OcrProcessingTime",
        "Namespace": "AuthBridge/Verification",
        "ExtendedStatistic": "p95",
        "Period": 300,
        "EvaluationPeriods": 2,
        "Threshold": 10000,
        "ComparisonOperator": "GreaterThanThreshold",
        "TreatMissingData": "notBreaching",
        "AlarmActions": [
          {
            "Ref": "OcrAlertTopic"
          }
        ]
      }
    },
    "OcrDLQAlarm": {
      "Type": "AWS::CloudWatch::Alarm",
      "Properties": {
        "AlarmName": "authbridge-ocr-dlq-messages-staging",
        "AlarmDescription": "Messages in OCR Dead Letter Queue",
        "MetricName": "ApproximateNumberOfMessagesVisible",
        "Namespace": "AWS/SQS",
        "Dimensions": [
          {
            "Name": "QueueName",
            "Value": {
              "Fn::GetAtt": [
                "OcrDLQ",
                "QueueName"
              ]
            }
          }
        ],
        "Statistic": "Sum",
        "Period": 300,
        "EvaluationPeriods": 1,
        "Threshold": 1,
        "ComparisonOperator": "GreaterThanOrEqualToThreshold",
        "TreatMissingData": "notBreaching",
        "AlarmActions": [
          {
            "Ref": "OcrAlertTopic"
          }
        ]
      }
    },
    "BiometricPassRateAlarm": {
      "Type": "AWS::CloudWatch::Alarm",
      "Properties": {
        "AlarmName": "authbridge-biometric-pass-rate-staging",
        "AlarmDescription": "Biometric pass rate below 70%",
        "MetricName": "BiometricPassed",
        "Namespace": "AuthBridge/Verification",
        "Statistic": "Sum",
        "Period": 3600,
        "EvaluationPeriods": 1,
        "Threshold": 70,
        "ComparisonOperator": "LessThanThreshold",
        "TreatMissingData": "notBreaching",
        "AlarmActions": [
          {
            "Ref": "OcrAlertTopic"
          }
        ]
      }
    },
    "BiometricDLQAlarm": {
      "Type": "AWS::CloudWatch::Alarm",
      "Properties": {
        "AlarmName": "authbridge-biometric-dlq-messages-staging",
        "AlarmDescription": "Messages in Biometric Dead Letter Queue",
        "MetricName": "ApproximateNumberOfMessagesVisible",
        "Namespace": "AWS/SQS",
        "Dimensions": [
          {
            "Name": "QueueName",
            "Value": {
              "Fn::GetAtt": [
                "BiometricDLQ",
                "QueueName"
              ]
            }
          }
        ],
        "Statistic": "Sum",
        "Period": 300,
        "EvaluationPeriods": 1,
        "Threshold": 1,
        "ComparisonOperator": "GreaterThanOrEqualToThreshold",
        "TreatMissingData": "notBreaching",
        "AlarmActions": [
          {
            "Ref": "OcrAlertTopic"
          }
        ]
      }
    }
  },
  "Outputs": {
    "ServerlessDeploymentBucketName": {
      "Value": {
        "Ref": "ServerlessDeploymentBucket"
      },
      "Export": {
        "Name": "sls-authbridge-verification-staging-ServerlessDeploymentBucketName"
      }
    },
    "SendWebhookLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "SendWebhookLambdaVersionFH1KbKYxSgjhsHeTvxzRWvioujtJxiwg7qKkDVAomQs"
      },
      "Export": {
        "Name": "sls-authbridge-verification-staging-SendWebhookLambdaFunctionQualifiedArn"
      }
    },
    "GetCaseLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "GetCaseLambdaVersionX0QMrHP4Yyq2nq6UEgg8gN6RY27Ntm8sdh7AyyE38zQ"
      },
      "Export": {
        "Name": "sls-authbridge-verification-staging-GetCaseLambdaFunctionQualifiedArn"
      }
    },
    "ApproveCaseLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "ApproveCaseLambdaVersionzkEYYSBtTr8mMbhwNmGrTkCfoWuKW6zguAR59oLPUKg"
      },
      "Export": {
        "Name": "sls-authbridge-verification-staging-ApproveCaseLambdaFunctionQualifiedArn"
      }
    },
    "ConfigureWebhookLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "ConfigureWebhookLambdaVersionjTI3OtCHPCs3FHn9ntO60Kb4oH39F8ylX1FisCaR4"
      },
      "Export": {
        "Name": "sls-authbridge-verification-staging-ConfigureWebhookLambdaFunctionQualifiedArn"
      }
    },
    "RejectCaseLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "RejectCaseLambdaVersion7ZHD0YA6hZknoFVLmR6XycGuUfr06DLXuMy7AcB4"
      },
      "Export": {
        "Name": "sls-authbridge-verification-staging-RejectCaseLambdaFunctionQualifiedArn"
      }
    },
    "TestWebhookLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "TestWebhookLambdaVersioncm5M7jQhfvVAIfBTDsZGnXdP0z3KfsoFKcXAdzn4JM"
      },
      "Export": {
        "Name": "sls-authbridge-verification-staging-TestWebhookLambdaFunctionQualifiedArn"
      }
    },
    "AddNoteLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "AddNoteLambdaVersionf6SzhR9HIDWrS6IXudbjjhmKOxcNtA3zuo5T68LQ"
      },
      "Export": {
        "Name": "sls-authbridge-verification-staging-AddNoteLambdaFunctionQualifiedArn"
      }
    },
    "GetNotesLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "GetNotesLambdaVersionXEcwqyTYHwH9Io2rlRiTDeQQKs8ED4DWARHQwGsQI"
      },
      "Export": {
        "Name": "sls-authbridge-verification-staging-GetNotesLambdaFunctionQualifiedArn"
      }
    },
    "GetAuditLogsLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "GetAuditLogsLambdaVersioneBPqNbZr2XEuRYHE4sejXIZycgdrJDKzGXcofXo7u0"
      },
      "Export": {
        "Name": "sls-authbridge-verification-staging-GetAuditLogsLambdaFunctionQualifiedArn"
      }
    },
    "BulkApproveLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "BulkApproveLambdaVersionsGByqGVMG0LkhzYX7W0YDxR51Qnl5yYA3JCAhZ0J8UA"
      },
      "Export": {
        "Name": "sls-authbridge-verification-staging-BulkApproveLambdaFunctionQualifiedArn"
      }
    },
    "BulkRejectLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "BulkRejectLambdaVersion4n9usqXumegXiY9l64O6b8kq2rKJRxLI1B2xYk"
      },
      "Export": {
        "Name": "sls-authbridge-verification-staging-BulkRejectLambdaFunctionQualifiedArn"
      }
    },
    "GetVerificationStatusLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "GetVerificationStatusLambdaVersion99FkQot38abOzeY7jSZgMvBoxOjGFmpYl2Ylkwez2k"
      },
      "Export": {
        "Name": "sls-authbridge-verification-staging-GetVerificationStatusLambdaFunctionQualifiedArn"
      }
    },
    "RefreshDocumentUrlLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "RefreshDocumentUrlLambdaVersion4PwyYZIxzcrE0189QchMu7Kmn5SD3YRDEa7PMI"
      },
      "Export": {
        "Name": "sls-authbridge-verification-staging-RefreshDocumentUrlLambdaFunctionQualifiedArn"
      }
    },
    "CreateDataRequestLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "CreateDataRequestLambdaVersionLuJjvVqfBxMmnyOJIljbJbLk0nWELFqSEDBBHAdY"
      },
      "Export": {
        "Name": "sls-authbridge-verification-staging-CreateDataRequestLambdaFunctionQualifiedArn"
      }
    },
    "ProcessBiometricLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "ProcessBiometricLambdaVersionnOrODfaSiiKKxSYx0QZ0sE1d1dfMxCOOmI3NibyWV0"
      },
      "Export": {
        "Name": "sls-authbridge-verification-staging-ProcessBiometricLambdaFunctionQualifiedArn"
      }
    },
    "ProcessOCRLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "ProcessOCRLambdaVersion59VN2IFCAuHZPXOpfXHZu50aYrMZqL2kDHvrAmgA"
      },
      "Export": {
        "Name": "sls-authbridge-verification-staging-ProcessOCRLambdaFunctionQualifiedArn"
      }
    },
    "ProcessExportLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "ProcessExportLambdaVersionBfzIXLQYC2OWlsxJnzA1V6J3ClzrpMNS0SN3sv8BpGU"
      },
      "Export": {
        "Name": "sls-authbridge-verification-staging-ProcessExportLambdaFunctionQualifiedArn"
      }
    },
    "ProcessDeletionLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "ProcessDeletionLambdaVersionIpKrMJ7JGVXkIw6v5eePFqvjV0B5QuHoucnlEzc"
      },
      "Export": {
        "Name": "sls-authbridge-verification-staging-ProcessDeletionLambdaFunctionQualifiedArn"
      }
    },
    "GetDataRequestStatusLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "GetDataRequestStatusLambdaVersion0SGi3A3UmA0Z2nDOerTovxbxketPzmlhrL0jjNoQk"
      },
      "Export": {
        "Name": "sls-authbridge-verification-staging-GetDataRequestStatusLambdaFunctionQualifiedArn"
      }
    },
    "ScheduledHardDeleteLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "ScheduledHardDeleteLambdaVersionW4FAqRpgEL5WukOYdtzLqEXSVAxPpTB9DgQbqfgg"
      },
      "Export": {
        "Name": "sls-authbridge-verification-staging-ScheduledHardDeleteLambdaFunctionQualifiedArn"
      }
    },
    "AssignRoleLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "AssignRoleLambdaVersion7aLsFsRfKrPuuu1iiEMQMSXcGyZIm4akKt8UUqyho"
      },
      "Export": {
        "Name": "sls-authbridge-verification-staging-AssignRoleLambdaFunctionQualifiedArn"
      }
    },
    "RemoveRoleLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "RemoveRoleLambdaVersions5vfBpElorTzqwR7JqJez3f71kVBkAzGY1fDck60"
      },
      "Export": {
        "Name": "sls-authbridge-verification-staging-RemoveRoleLambdaFunctionQualifiedArn"
      }
    },
    "ListRolesLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "ListRolesLambdaVersionAP28PkPVEBnuf4mnfUxa6Kfx36SqjOgS2VHswLFTY"
      },
      "Export": {
        "Name": "sls-authbridge-verification-staging-ListRolesLambdaFunctionQualifiedArn"
      }
    },
    "GetUserRolesLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "GetUserRolesLambdaVersion2mrVlBfJxWsXu5dc1dNWvcLBWOtJ2MlUJwQ57YxIZQ"
      },
      "Export": {
        "Name": "sls-authbridge-verification-staging-GetUserRolesLambdaFunctionQualifiedArn"
      }
    },
    "CreateVerificationLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "CreateVerificationLambdaVersion3Q2slVY6yeDWSES3Tei7vddNz5eXlyoRjZtDJmvqkxg"
      },
      "Export": {
        "Name": "sls-authbridge-verification-staging-CreateVerificationLambdaFunctionQualifiedArn"
      }
    },
    "UploadDocumentLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "UploadDocumentLambdaVersionXdb9ot3eeoakXUYzbD5alvC4NN7AtShfVLB4lHFXXo"
      },
      "Export": {
        "Name": "sls-authbridge-verification-staging-UploadDocumentLambdaFunctionQualifiedArn"
      }
    },
    "ListCasesLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "ListCasesLambdaVersion0VSjWnRGQZXSHWkgOmSqCZb9gETbjz5M00vt26M"
      },
      "Export": {
        "Name": "sls-authbridge-verification-staging-ListCasesLambdaFunctionQualifiedArn"
      }
    },
    "ServiceEndpoint": {
      "Description": "URL of the service endpoint",
      "Value": {
        "Fn::Join": [
          "",
          [
            "https://",
            {
              "Ref": "ApiGatewayRestApi"
            },
            ".execute-api.",
            {
              "Ref": "AWS::Region"
            },
            ".",
            {
              "Ref": "AWS::URLSuffix"
            },
            "/staging"
          ]
        ]
      },
      "Export": {
        "Name": "sls-authbridge-verification-staging-ServiceEndpoint"
      }
    },
    "OcrAlertTopicArn": {
      "Description": "ARN of the OCR Alert SNS Topic",
      "Value": {
        "Ref": "OcrAlertTopic"
      },
      "Export": {
        "Name": "authbridge-ocr-alert-topic-staging"
      }
    }
  }
}