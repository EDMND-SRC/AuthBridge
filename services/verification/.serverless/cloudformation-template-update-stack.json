{
  "AWSTemplateFormatVersion": "2010-09-09",
  "Description": "The AWS CloudFormation template for this Serverless application",
  "Resources": {
    "ServerlessDeploymentBucket": {
      "Type": "AWS::S3::Bucket",
      "Properties": {
        "BucketEncryption": {
          "ServerSideEncryptionConfiguration": [
            {
              "ServerSideEncryptionByDefault": {
                "SSEAlgorithm": "AES256"
              }
            }
          ]
        }
      }
    },
    "ServerlessDeploymentBucketPolicy": {
      "Type": "AWS::S3::BucketPolicy",
      "Properties": {
        "Bucket": {
          "Ref": "ServerlessDeploymentBucket"
        },
        "PolicyDocument": {
          "Statement": [
            {
              "Action": "s3:*",
              "Effect": "Deny",
              "Principal": "*",
              "Resource": [
                {
                  "Fn::Join": [
                    "",
                    [
                      "arn:",
                      {
                        "Ref": "AWS::Partition"
                      },
                      ":s3:::",
                      {
                        "Ref": "ServerlessDeploymentBucket"
                      },
                      "/*"
                    ]
                  ]
                },
                {
                  "Fn::Join": [
                    "",
                    [
                      "arn:",
                      {
                        "Ref": "AWS::Partition"
                      },
                      ":s3:::",
                      {
                        "Ref": "ServerlessDeploymentBucket"
                      }
                    ]
                  ]
                }
              ],
              "Condition": {
                "Bool": {
                  "aws:SecureTransport": false
                }
              }
            }
          ]
        }
      }
    },
    "ListCasesLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/authbridge-verification-staging-listCases"
      }
    },
    "GetCaseLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/authbridge-verification-staging-getCase"
      }
    },
    "ApproveCaseLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/authbridge-verification-staging-approveCase"
      }
    },
    "RejectCaseLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/authbridge-verification-staging-rejectCase"
      }
    },
    "SendWebhookLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/authbridge-verification-staging-sendWebhook"
      }
    },
    "ConfigureWebhookLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/authbridge-verification-staging-configureWebhook"
      }
    },
    "TestWebhookLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/authbridge-verification-staging-testWebhook"
      }
    },
    "AddNoteLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/authbridge-verification-staging-addNote"
      }
    },
    "GetNotesLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/authbridge-verification-staging-getNotes"
      }
    },
    "GetAuditLogsLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/authbridge-verification-staging-getAuditLogs"
      }
    },
    "BulkApproveLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/authbridge-verification-staging-bulkApprove"
      }
    },
    "BulkRejectLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/authbridge-verification-staging-bulkReject"
      }
    },
    "CreateVerificationLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/authbridge-verification-staging-createVerification"
      }
    },
    "GetVerificationStatusLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/authbridge-verification-staging-getVerificationStatus"
      }
    },
    "UploadDocumentLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/authbridge-verification-staging-uploadDocument"
      }
    },
    "RefreshDocumentUrlLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/authbridge-verification-staging-refreshDocumentUrl"
      }
    },
    "ProcessOCRLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/authbridge-verification-staging-processOCR"
      }
    },
    "ProcessBiometricLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/authbridge-verification-staging-processBiometric"
      }
    },
    "IamRoleLambdaExecution": {
      "Type": "AWS::IAM::Role",
      "Properties": {
        "AssumeRolePolicyDocument": {
          "Version": "2012-10-17",
          "Statement": [
            {
              "Effect": "Allow",
              "Principal": {
                "Service": [
                  "lambda.amazonaws.com"
                ]
              },
              "Action": [
                "sts:AssumeRole"
              ]
            }
          ]
        },
        "Policies": [
          {
            "PolicyName": {
              "Fn::Join": [
                "-",
                [
                  "authbridge-verification",
                  "staging",
                  "lambda"
                ]
              ]
            },
            "PolicyDocument": {
              "Version": "2012-10-17",
              "Statement": [
                {
                  "Effect": "Allow",
                  "Action": [
                    "logs:CreateLogStream",
                    "logs:CreateLogGroup",
                    "logs:TagResource"
                  ],
                  "Resource": [
                    {
                      "Fn::Sub": "arn:${AWS::Partition}:logs:${AWS::Region}:${AWS::AccountId}:log-group:/aws/lambda/authbridge-verification-staging*:*"
                    }
                  ]
                },
                {
                  "Effect": "Allow",
                  "Action": [
                    "logs:PutLogEvents"
                  ],
                  "Resource": [
                    {
                      "Fn::Sub": "arn:${AWS::Partition}:logs:${AWS::Region}:${AWS::AccountId}:log-group:/aws/lambda/authbridge-verification-staging*:*:*"
                    }
                  ]
                },
                {
                  "Effect": "Allow",
                  "Action": [
                    "dynamodb:GetItem",
                    "dynamodb:PutItem",
                    "dynamodb:UpdateItem",
                    "dynamodb:Query"
                  ],
                  "Resource": [
                    "arn:aws:dynamodb:af-south-1:*:table/AuthBridgeTable",
                    "arn:aws:dynamodb:af-south-1:*:table/AuthBridgeTable/index/*"
                  ]
                },
                {
                  "Effect": "Allow",
                  "Action": [
                    "dynamodb:PutItem"
                  ],
                  "Resource": "arn:aws:dynamodb:af-south-1:*:table/AuthBridgeTable",
                  "Condition": {
                    "StringLike": {
                      "dynamodb:LeadingKeys": [
                        "AUDIT#*"
                      ]
                    }
                  }
                },
                {
                  "Effect": "Deny",
                  "Action": [
                    "dynamodb:UpdateItem",
                    "dynamodb:DeleteItem"
                  ],
                  "Resource": "arn:aws:dynamodb:af-south-1:*:table/AuthBridgeTable",
                  "Condition": {
                    "StringLike": {
                      "dynamodb:LeadingKeys": [
                        "AUDIT#*"
                      ]
                    }
                  }
                },
                {
                  "Effect": "Allow",
                  "Action": [
                    "s3:PutObject",
                    "s3:GetObject",
                    "s3:DeleteObject"
                  ],
                  "Resource": "arn:aws:s3:::authbridge-documents-staging/*"
                },
                {
                  "Effect": "Allow",
                  "Action": [
                    "textract:DetectDocumentText"
                  ],
                  "Resource": "*"
                },
                {
                  "Effect": "Allow",
                  "Action": [
                    "rekognition:CompareFaces",
                    "rekognition:DetectFaces",
                    "rekognition:GetFaceLivenessSessionResults"
                  ],
                  "Resource": "*"
                },
                {
                  "Effect": "Allow",
                  "Action": [
                    "cloudwatch:PutMetricData"
                  ],
                  "Resource": "*"
                },
                {
                  "Effect": "Allow",
                  "Action": [
                    "sqs:SendMessage",
                    "sqs:GetQueueUrl"
                  ],
                  "Resource": [
                    {
                      "Fn::GetAtt": [
                        "OcrQueue",
                        "Arn"
                      ]
                    },
                    {
                      "Fn::GetAtt": [
                        "BiometricQueue",
                        "Arn"
                      ]
                    },
                    {
                      "Fn::GetAtt": [
                        "WebhookQueue",
                        "Arn"
                      ]
                    }
                  ]
                },
                {
                  "Effect": "Allow",
                  "Action": [
                    "sns:Publish"
                  ],
                  "Resource": [
                    {
                      "Ref": "OcrAlertTopic"
                    }
                  ]
                },
                {
                  "Effect": "Allow",
                  "Action": [
                    "logs:CreateLogGroup",
                    "logs:CreateLogStream",
                    "logs:PutLogEvents"
                  ],
                  "Resource": "arn:aws:logs:af-south-1:*:*"
                },
                {
                  "Effect": "Allow",
                  "Action": [
                    "kms:Encrypt",
                    "kms:Decrypt",
                    "kms:GenerateDataKey",
                    "kms:GenerateDataKeyWithoutPlaintext",
                    "kms:DescribeKey"
                  ],
                  "Resource": "arn:aws:kms:af-south-1:979237821231:key/dd242797-bf9b-4058-a079-3588989dd79b"
                },
                {
                  "Effect": "Allow",
                  "Action": [
                    "kms:Decrypt",
                    "kms:GenerateDataKey"
                  ],
                  "Resource": "arn:aws:kms:af-south-1:979237821231:key/40b9adc5-5f4b-4c12-94d3-5e6a8f7e4fc3"
                },
                {
                  "Effect": "Allow",
                  "Action": [
                    "sqs:ReceiveMessage",
                    "sqs:DeleteMessage",
                    "sqs:GetQueueAttributes"
                  ],
                  "Resource": [
                    {
                      "Fn::GetAtt": [
                        "WebhookQueue",
                        "Arn"
                      ]
                    },
                    {
                      "Fn::GetAtt": [
                        "OcrQueue",
                        "Arn"
                      ]
                    },
                    {
                      "Fn::GetAtt": [
                        "BiometricQueue",
                        "Arn"
                      ]
                    }
                  ]
                }
              ]
            }
          }
        ],
        "Path": "/",
        "RoleName": {
          "Fn::Join": [
            "-",
            [
              "authbridge-verification",
              "staging",
              {
                "Ref": "AWS::Region"
              },
              "lambdaRole"
            ]
          ]
        }
      }
    },
    "ListCasesLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/authbridge-verification/staging/1768682328055-2026-01-17T20:38:48.055Z/listCases.zip"
        },
        "Handler": "src/handlers/list-cases.handler",
        "Runtime": "nodejs20.x",
        "FunctionName": "authbridge-verification-staging-listCases",
        "MemorySize": 512,
        "Timeout": 30,
        "Description": "List verification cases with filtering and pagination",
        "Environment": {
          "Variables": {
            "AWS_NODEJS_CONNECTION_REUSE_ENABLED": "1",
            "NODE_OPTIONS": "--enable-source-maps",
            "TABLE_NAME": "AuthBridgeTable",
            "BUCKET_NAME": "authbridge-documents-staging",
            "DATA_ENCRYPTION_KEY_ID": "dd242797-bf9b-4058-a079-3588989dd79b",
            "DATA_ENCRYPTION_KEY_ARN": "arn:aws:kms:af-south-1:979237821231:key/dd242797-bf9b-4058-a079-3588989dd79b"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "ListCasesLogGroup"
      ]
    },
    "GetCaseLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/authbridge-verification/staging/1768682328055-2026-01-17T20:38:48.055Z/getCase.zip"
        },
        "Handler": "src/handlers/get-case.handler",
        "Runtime": "nodejs20.x",
        "FunctionName": "authbridge-verification-staging-getCase",
        "MemorySize": 512,
        "Timeout": 30,
        "Description": "Get case detail by ID",
        "Environment": {
          "Variables": {
            "AWS_NODEJS_CONNECTION_REUSE_ENABLED": "1",
            "NODE_OPTIONS": "--enable-source-maps",
            "TABLE_NAME": "AuthBridgeTable",
            "BUCKET_NAME": "authbridge-documents-staging",
            "DATA_ENCRYPTION_KEY_ID": "dd242797-bf9b-4058-a079-3588989dd79b",
            "DATA_ENCRYPTION_KEY_ARN": "arn:aws:kms:af-south-1:979237821231:key/dd242797-bf9b-4058-a079-3588989dd79b"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "GetCaseLogGroup"
      ]
    },
    "ApproveCaseLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/authbridge-verification/staging/1768682328055-2026-01-17T20:38:48.055Z/approveCase.zip"
        },
        "Handler": "src/handlers/approve-case.handler",
        "Runtime": "nodejs20.x",
        "FunctionName": "authbridge-verification-staging-approveCase",
        "MemorySize": 512,
        "Timeout": 30,
        "Description": "Approve a verification case",
        "Environment": {
          "Variables": {
            "AWS_NODEJS_CONNECTION_REUSE_ENABLED": "1",
            "NODE_OPTIONS": "--enable-source-maps",
            "TABLE_NAME": "AuthBridgeTable",
            "BUCKET_NAME": "authbridge-documents-staging",
            "DATA_ENCRYPTION_KEY_ID": "dd242797-bf9b-4058-a079-3588989dd79b",
            "DATA_ENCRYPTION_KEY_ARN": "arn:aws:kms:af-south-1:979237821231:key/dd242797-bf9b-4058-a079-3588989dd79b",
            "WEBHOOK_QUEUE_URL": {
              "Ref": "WebhookQueue"
            }
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "ApproveCaseLogGroup"
      ]
    },
    "RejectCaseLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/authbridge-verification/staging/1768682328055-2026-01-17T20:38:48.055Z/rejectCase.zip"
        },
        "Handler": "src/handlers/reject-case.handler",
        "Runtime": "nodejs20.x",
        "FunctionName": "authbridge-verification-staging-rejectCase",
        "MemorySize": 512,
        "Timeout": 30,
        "Description": "Reject a verification case with reason",
        "Environment": {
          "Variables": {
            "AWS_NODEJS_CONNECTION_REUSE_ENABLED": "1",
            "NODE_OPTIONS": "--enable-source-maps",
            "TABLE_NAME": "AuthBridgeTable",
            "BUCKET_NAME": "authbridge-documents-staging",
            "DATA_ENCRYPTION_KEY_ID": "dd242797-bf9b-4058-a079-3588989dd79b",
            "DATA_ENCRYPTION_KEY_ARN": "arn:aws:kms:af-south-1:979237821231:key/dd242797-bf9b-4058-a079-3588989dd79b",
            "WEBHOOK_QUEUE_URL": {
              "Ref": "WebhookQueue"
            }
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "RejectCaseLogGroup"
      ]
    },
    "SendWebhookLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/authbridge-verification/staging/1768682328055-2026-01-17T20:38:48.055Z/sendWebhook.zip"
        },
        "Handler": "src/handlers/send-webhook.handler",
        "Runtime": "nodejs20.x",
        "FunctionName": "authbridge-verification-staging-sendWebhook",
        "MemorySize": 256,
        "Timeout": 30,
        "Description": "Send webhook notifications for case decisions",
        "Environment": {
          "Variables": {
            "AWS_NODEJS_CONNECTION_REUSE_ENABLED": "1",
            "NODE_OPTIONS": "--enable-source-maps",
            "TABLE_NAME": "AuthBridgeTable",
            "BUCKET_NAME": "authbridge-documents-staging",
            "DATA_ENCRYPTION_KEY_ID": "dd242797-bf9b-4058-a079-3588989dd79b",
            "DATA_ENCRYPTION_KEY_ARN": "arn:aws:kms:af-south-1:979237821231:key/dd242797-bf9b-4058-a079-3588989dd79b",
            "WEBHOOK_QUEUE_URL": {
              "Ref": "WebhookQueue"
            }
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "SendWebhookLogGroup"
      ]
    },
    "ConfigureWebhookLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/authbridge-verification/staging/1768682328055-2026-01-17T20:38:48.055Z/configureWebhook.zip"
        },
        "Handler": "src/handlers/configure-webhook.handler",
        "Runtime": "nodejs20.x",
        "FunctionName": "authbridge-verification-staging-configureWebhook",
        "MemorySize": 256,
        "Timeout": 10,
        "Description": "Configure webhook URL and settings for client",
        "Environment": {
          "Variables": {
            "AWS_NODEJS_CONNECTION_REUSE_ENABLED": "1",
            "NODE_OPTIONS": "--enable-source-maps",
            "TABLE_NAME": "AuthBridgeTable",
            "BUCKET_NAME": "authbridge-documents-staging",
            "DATA_ENCRYPTION_KEY_ID": "dd242797-bf9b-4058-a079-3588989dd79b",
            "DATA_ENCRYPTION_KEY_ARN": "arn:aws:kms:af-south-1:979237821231:key/dd242797-bf9b-4058-a079-3588989dd79b"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "ConfigureWebhookLogGroup"
      ]
    },
    "TestWebhookLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/authbridge-verification/staging/1768682328055-2026-01-17T20:38:48.055Z/testWebhook.zip"
        },
        "Handler": "src/handlers/test-webhook.handler",
        "Runtime": "nodejs20.x",
        "FunctionName": "authbridge-verification-staging-testWebhook",
        "MemorySize": 256,
        "Timeout": 30,
        "Description": "Send test webhook notification to verify configuration",
        "Environment": {
          "Variables": {
            "AWS_NODEJS_CONNECTION_REUSE_ENABLED": "1",
            "NODE_OPTIONS": "--enable-source-maps",
            "TABLE_NAME": "AuthBridgeTable",
            "BUCKET_NAME": "authbridge-documents-staging",
            "DATA_ENCRYPTION_KEY_ID": "dd242797-bf9b-4058-a079-3588989dd79b",
            "DATA_ENCRYPTION_KEY_ARN": "arn:aws:kms:af-south-1:979237821231:key/dd242797-bf9b-4058-a079-3588989dd79b"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "TestWebhookLogGroup"
      ]
    },
    "AddNoteLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/authbridge-verification/staging/1768682328055-2026-01-17T20:38:48.055Z/addNote.zip"
        },
        "Handler": "src/handlers/add-note.handler",
        "Runtime": "nodejs20.x",
        "FunctionName": "authbridge-verification-staging-addNote",
        "MemorySize": 512,
        "Timeout": 30,
        "Description": "Add note to case",
        "Environment": {
          "Variables": {
            "AWS_NODEJS_CONNECTION_REUSE_ENABLED": "1",
            "NODE_OPTIONS": "--enable-source-maps",
            "TABLE_NAME": "AuthBridgeTable",
            "BUCKET_NAME": "authbridge-documents-staging",
            "DATA_ENCRYPTION_KEY_ID": "dd242797-bf9b-4058-a079-3588989dd79b",
            "DATA_ENCRYPTION_KEY_ARN": "arn:aws:kms:af-south-1:979237821231:key/dd242797-bf9b-4058-a079-3588989dd79b"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "AddNoteLogGroup"
      ]
    },
    "GetNotesLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/authbridge-verification/staging/1768682328055-2026-01-17T20:38:48.055Z/getNotes.zip"
        },
        "Handler": "src/handlers/get-notes.handler",
        "Runtime": "nodejs20.x",
        "FunctionName": "authbridge-verification-staging-getNotes",
        "MemorySize": 512,
        "Timeout": 30,
        "Description": "Get all notes for a case",
        "Environment": {
          "Variables": {
            "AWS_NODEJS_CONNECTION_REUSE_ENABLED": "1",
            "NODE_OPTIONS": "--enable-source-maps",
            "TABLE_NAME": "AuthBridgeTable",
            "BUCKET_NAME": "authbridge-documents-staging",
            "DATA_ENCRYPTION_KEY_ID": "dd242797-bf9b-4058-a079-3588989dd79b",
            "DATA_ENCRYPTION_KEY_ARN": "arn:aws:kms:af-south-1:979237821231:key/dd242797-bf9b-4058-a079-3588989dd79b"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "GetNotesLogGroup"
      ]
    },
    "GetAuditLogsLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/authbridge-verification/staging/1768682328055-2026-01-17T20:38:48.055Z/getAuditLogs.zip"
        },
        "Handler": "src/handlers/get-audit-logs.getAuditLogs",
        "Runtime": "nodejs20.x",
        "FunctionName": "authbridge-verification-staging-getAuditLogs",
        "MemorySize": 512,
        "Timeout": 30,
        "Description": "Query audit logs with filters (date, user, action, resource)",
        "Environment": {
          "Variables": {
            "AWS_NODEJS_CONNECTION_REUSE_ENABLED": "1",
            "NODE_OPTIONS": "--enable-source-maps",
            "TABLE_NAME": "AuthBridgeTable",
            "BUCKET_NAME": "authbridge-documents-staging",
            "DATA_ENCRYPTION_KEY_ID": "dd242797-bf9b-4058-a079-3588989dd79b",
            "DATA_ENCRYPTION_KEY_ARN": "arn:aws:kms:af-south-1:979237821231:key/dd242797-bf9b-4058-a079-3588989dd79b"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "GetAuditLogsLogGroup"
      ]
    },
    "BulkApproveLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/authbridge-verification/staging/1768682328055-2026-01-17T20:38:48.055Z/bulkApprove.zip"
        },
        "Handler": "src/handlers/bulk-approve.handler",
        "Runtime": "nodejs20.x",
        "FunctionName": "authbridge-verification-staging-bulkApprove",
        "MemorySize": 512,
        "Timeout": 30,
        "Description": "Bulk approve multiple verification cases",
        "Environment": {
          "Variables": {
            "AWS_NODEJS_CONNECTION_REUSE_ENABLED": "1",
            "NODE_OPTIONS": "--enable-source-maps",
            "TABLE_NAME": "AuthBridgeTable",
            "BUCKET_NAME": "authbridge-documents-staging",
            "DATA_ENCRYPTION_KEY_ID": "dd242797-bf9b-4058-a079-3588989dd79b",
            "DATA_ENCRYPTION_KEY_ARN": "arn:aws:kms:af-south-1:979237821231:key/dd242797-bf9b-4058-a079-3588989dd79b",
            "WEBHOOK_QUEUE_URL": {
              "Ref": "WebhookQueue"
            }
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "BulkApproveLogGroup"
      ]
    },
    "BulkRejectLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/authbridge-verification/staging/1768682328055-2026-01-17T20:38:48.055Z/bulkReject.zip"
        },
        "Handler": "src/handlers/bulk-reject.handler",
        "Runtime": "nodejs20.x",
        "FunctionName": "authbridge-verification-staging-bulkReject",
        "MemorySize": 512,
        "Timeout": 30,
        "Description": "Bulk reject multiple verification cases with reason",
        "Environment": {
          "Variables": {
            "AWS_NODEJS_CONNECTION_REUSE_ENABLED": "1",
            "NODE_OPTIONS": "--enable-source-maps",
            "TABLE_NAME": "AuthBridgeTable",
            "BUCKET_NAME": "authbridge-documents-staging",
            "DATA_ENCRYPTION_KEY_ID": "dd242797-bf9b-4058-a079-3588989dd79b",
            "DATA_ENCRYPTION_KEY_ARN": "arn:aws:kms:af-south-1:979237821231:key/dd242797-bf9b-4058-a079-3588989dd79b",
            "WEBHOOK_QUEUE_URL": {
              "Ref": "WebhookQueue"
            }
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "BulkRejectLogGroup"
      ]
    },
    "CreateVerificationLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/authbridge-verification/staging/1768682328055-2026-01-17T20:38:48.055Z/createVerification.zip"
        },
        "Handler": "src/handlers/create-verification.handler",
        "Runtime": "nodejs20.x",
        "FunctionName": "authbridge-verification-staging-createVerification",
        "MemorySize": 512,
        "Timeout": 30,
        "Description": "Create new verification case",
        "Environment": {
          "Variables": {
            "AWS_NODEJS_CONNECTION_REUSE_ENABLED": "1",
            "NODE_OPTIONS": "--enable-source-maps",
            "TABLE_NAME": "AuthBridgeTable",
            "BUCKET_NAME": "authbridge-documents-staging",
            "DATA_ENCRYPTION_KEY_ID": "dd242797-bf9b-4058-a079-3588989dd79b",
            "DATA_ENCRYPTION_KEY_ARN": "arn:aws:kms:af-south-1:979237821231:key/dd242797-bf9b-4058-a079-3588989dd79b",
            "JWT_SECRET": "staging-jwt-secret-change-in-production",
            "JWT_ISSUER": "authbridge",
            "SESSION_TOKEN_EXPIRY_HOURS": "0.5",
            "SDK_BASE_URL": "https://sdk.authbridge.io"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "CreateVerificationLogGroup"
      ]
    },
    "GetVerificationStatusLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/authbridge-verification/staging/1768682328055-2026-01-17T20:38:48.055Z/getVerificationStatus.zip"
        },
        "Handler": "src/handlers/get-verification-status.handler",
        "Runtime": "nodejs20.x",
        "FunctionName": "authbridge-verification-staging-getVerificationStatus",
        "MemorySize": 512,
        "Timeout": 10,
        "Description": "Get verification status and details",
        "Environment": {
          "Variables": {
            "AWS_NODEJS_CONNECTION_REUSE_ENABLED": "1",
            "NODE_OPTIONS": "--enable-source-maps",
            "TABLE_NAME": "AuthBridgeTable",
            "BUCKET_NAME": "authbridge-documents-staging",
            "DATA_ENCRYPTION_KEY_ID": "dd242797-bf9b-4058-a079-3588989dd79b",
            "DATA_ENCRYPTION_KEY_ARN": "arn:aws:kms:af-south-1:979237821231:key/dd242797-bf9b-4058-a079-3588989dd79b"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "GetVerificationStatusLogGroup"
      ]
    },
    "UploadDocumentLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/authbridge-verification/staging/1768682328055-2026-01-17T20:38:48.055Z/uploadDocument.zip"
        },
        "Handler": "src/handlers/upload-document.handler",
        "Runtime": "nodejs20.x",
        "FunctionName": "authbridge-verification-staging-uploadDocument",
        "MemorySize": 1024,
        "Timeout": 30,
        "Description": "Upload document to verification case",
        "Environment": {
          "Variables": {
            "AWS_NODEJS_CONNECTION_REUSE_ENABLED": "1",
            "NODE_OPTIONS": "--enable-source-maps",
            "TABLE_NAME": "AuthBridgeTable",
            "BUCKET_NAME": "authbridge-documents-staging",
            "DATA_ENCRYPTION_KEY_ID": "dd242797-bf9b-4058-a079-3588989dd79b",
            "DATA_ENCRYPTION_KEY_ARN": "arn:aws:kms:af-south-1:979237821231:key/dd242797-bf9b-4058-a079-3588989dd79b",
            "OCR_QUEUE_URL": {
              "Ref": "OcrQueue"
            }
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "UploadDocumentLogGroup"
      ]
    },
    "RefreshDocumentUrlLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/authbridge-verification/staging/1768682328055-2026-01-17T20:38:48.055Z/refreshDocumentUrl.zip"
        },
        "Handler": "src/handlers/refresh-document-url.handler",
        "Runtime": "nodejs20.x",
        "FunctionName": "authbridge-verification-staging-refreshDocumentUrl",
        "MemorySize": 512,
        "Timeout": 30,
        "Description": "Refresh presigned URL for document access",
        "Environment": {
          "Variables": {
            "AWS_NODEJS_CONNECTION_REUSE_ENABLED": "1",
            "NODE_OPTIONS": "--enable-source-maps",
            "TABLE_NAME": "AuthBridgeTable",
            "BUCKET_NAME": "authbridge-documents-staging",
            "DATA_ENCRYPTION_KEY_ID": "dd242797-bf9b-4058-a079-3588989dd79b",
            "DATA_ENCRYPTION_KEY_ARN": "arn:aws:kms:af-south-1:979237821231:key/dd242797-bf9b-4058-a079-3588989dd79b"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "RefreshDocumentUrlLogGroup"
      ]
    },
    "ProcessOCRLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/authbridge-verification/staging/1768682328055-2026-01-17T20:38:48.055Z/processOCR.zip"
        },
        "Handler": "src/handlers/process-ocr.handler",
        "Runtime": "nodejs20.x",
        "FunctionName": "authbridge-verification-staging-processOCR",
        "MemorySize": 512,
        "Timeout": 60,
        "Description": "Process OCR extraction from document images",
        "Environment": {
          "Variables": {
            "AWS_NODEJS_CONNECTION_REUSE_ENABLED": "1",
            "NODE_OPTIONS": "--enable-source-maps",
            "TABLE_NAME": "AuthBridgeTable",
            "BUCKET_NAME": "authbridge-documents-staging",
            "DATA_ENCRYPTION_KEY_ID": "dd242797-bf9b-4058-a079-3588989dd79b",
            "DATA_ENCRYPTION_KEY_ARN": "arn:aws:kms:af-south-1:979237821231:key/dd242797-bf9b-4058-a079-3588989dd79b",
            "OCR_ALERT_TOPIC_ARN": {
              "Ref": "OcrAlertTopic"
            },
            "BIOMETRIC_QUEUE_URL": {
              "Ref": "BiometricQueue"
            }
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "ProcessOCRLogGroup"
      ]
    },
    "ProcessBiometricLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/authbridge-verification/staging/1768682328055-2026-01-17T20:38:48.055Z/processBiometric.zip"
        },
        "Handler": "src/handlers/process-biometric.handler",
        "Runtime": "nodejs20.x",
        "FunctionName": "authbridge-verification-staging-processBiometric",
        "MemorySize": 1024,
        "Timeout": 60,
        "Description": "Process biometric face matching (liveness + comparison)",
        "Environment": {
          "Variables": {
            "AWS_NODEJS_CONNECTION_REUSE_ENABLED": "1",
            "NODE_OPTIONS": "--enable-source-maps",
            "TABLE_NAME": "AuthBridgeTable",
            "BUCKET_NAME": "authbridge-documents-staging",
            "DATA_ENCRYPTION_KEY_ID": "dd242797-bf9b-4058-a079-3588989dd79b",
            "DATA_ENCRYPTION_KEY_ARN": "arn:aws:kms:af-south-1:979237821231:key/dd242797-bf9b-4058-a079-3588989dd79b",
            "BIOMETRIC_QUEUE_URL": {
              "Ref": "BiometricQueue"
            }
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "ProcessBiometricLogGroup"
      ]
    },
    "ListCasesLambdaVersionlFeNsnM8AIa1aZbJFm3We0dR4YAQvykUrw10": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "ListCasesLambdaFunction"
        },
        "CodeSha256": "9eZyF+z42shjMVG1/KvW//nFhvORyaQQNi37/Xuib0I=",
        "Description": "List verification cases with filtering and pagination"
      }
    },
    "GetCaseLambdaVersionbG6SPKwWHzq6PyGkrQb1KPyaWm73VNqGAZGZj1FMY": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "GetCaseLambdaFunction"
        },
        "CodeSha256": "z8i/ARft0I3Crwf0/d60zMOF1DJ01RCWsXPA7ZhVPkY=",
        "Description": "Get case detail by ID"
      }
    },
    "ApproveCaseLambdaVersionA2Pk5ce7ubkezUnd0cWhYWvYDrRogUDKHaT7SV863eE": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "ApproveCaseLambdaFunction"
        },
        "CodeSha256": "v4j8+mVTStQTPTqyDp0s1I2/cfIQrCrx8f6eqQE1esY=",
        "Description": "Approve a verification case"
      }
    },
    "RejectCaseLambdaVersionxyzJ3u2sbv6dssTAKF5eYtnvda4zL9P4kXsdgHx53Q": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "RejectCaseLambdaFunction"
        },
        "CodeSha256": "VMuR4OAtyh2dZqAuuLMLKhZS2Y27TvsYbd1CRCdcSb8=",
        "Description": "Reject a verification case with reason"
      }
    },
    "SendWebhookLambdaVersion9dGKyrgxeDX0hdFIYJOTrm4h7j35KiBbqQ3TNLT8E": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "SendWebhookLambdaFunction"
        },
        "CodeSha256": "Qkk0kQ+yp61Djl9qf7V13/C82mr+z7zRFDgHzf6jBGA=",
        "Description": "Send webhook notifications for case decisions"
      }
    },
    "ConfigureWebhookLambdaVersionIUwiAiO2rv6w33q2gTnDctQBCsl6hCnVYOd4l9vpi8": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "ConfigureWebhookLambdaFunction"
        },
        "CodeSha256": "aZ16Vz4sYlAz1J5Re0t1PpMFJD2xdKWsgVlWXrgcmiY=",
        "Description": "Configure webhook URL and settings for client"
      }
    },
    "TestWebhookLambdaVersion1sLGbBdiRKGG5TucjQwTfQbiYIpGS20z1MkPuIcFPA": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "TestWebhookLambdaFunction"
        },
        "CodeSha256": "XlbQSV1o8n6jIcmAPE0PmOJVAQev8HMcklSIUGYAX3Q=",
        "Description": "Send test webhook notification to verify configuration"
      }
    },
    "AddNoteLambdaVersiontD8bsiFDPWESaWvoyxdt9QUKtvldUjWhIxdMD5MaFQ": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "AddNoteLambdaFunction"
        },
        "CodeSha256": "V2g5oZCe+7K06n23HEda7ZwADnbwt8/OLAn+tT6i2eQ=",
        "Description": "Add note to case"
      }
    },
    "GetNotesLambdaVersionL6fn1AWqMnf5trrnUWceXBgBs0LiQ9bAknC1Peiteao": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "GetNotesLambdaFunction"
        },
        "CodeSha256": "ciJ1pxkNbrcKiuEiE5as8IlYFFbwz9zz/HTOFtI+neg=",
        "Description": "Get all notes for a case"
      }
    },
    "GetAuditLogsLambdaVersionV8VRJnqQlgbIlfknGcdpkq99eTHaY0Fa0ToUCWcIDk": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "GetAuditLogsLambdaFunction"
        },
        "CodeSha256": "lPAXAnxKCvyAxbxqR/p2LuMsmDx+YMdRMj128dikaYM=",
        "Description": "Query audit logs with filters (date, user, action, resource)"
      }
    },
    "BulkApproveLambdaVersionY1B6OdBNLj3l87cwKa8vzC7agbIjhFB4xQQHxwkX8k": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "BulkApproveLambdaFunction"
        },
        "CodeSha256": "o4cfz+VCr37GjHlU8Xx2oSIFlwQxHRCCcfNUc5DvkpY=",
        "Description": "Bulk approve multiple verification cases"
      }
    },
    "BulkRejectLambdaVersionfR3OH6SLnSyZI8srJ0ERDERVP1VukERyQKXhXK7xM": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "BulkRejectLambdaFunction"
        },
        "CodeSha256": "IYjAOYc6CbRxPN5C0oqMUjhbCIOM9BAfs2sYiKQ4k18=",
        "Description": "Bulk reject multiple verification cases with reason"
      }
    },
    "CreateVerificationLambdaVersionFmZTKJ4Pl9o4Zk6M6jBPpjWcDISWuq9QcfskeFxQOLc": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "CreateVerificationLambdaFunction"
        },
        "CodeSha256": "rwVMORsshb7aLuo9WcSaxq6yz4on47ww2V1OBDPOh1M=",
        "Description": "Create new verification case"
      }
    },
    "UploadDocumentLambdaVersionjtX2WX4HoMXbjSbn408Y13vTloN4kNQThhJAaUhYc": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "UploadDocumentLambdaFunction"
        },
        "CodeSha256": "GkL/EH4cDLqAy2yhDf42yMbEd/akNbswKXri6V7kMiE=",
        "Description": "Upload document to verification case"
      }
    },
    "GetVerificationStatusLambdaVersionPZAgUNyoBLUyyaEv1AQTXWhlVUkP2tJ8gWrV4tDSDE": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "GetVerificationStatusLambdaFunction"
        },
        "CodeSha256": "bWtq2vG98Fh9rEuvHx0ew+UsjVbiOa/buW6eHq8/ve0=",
        "Description": "Get verification status and details"
      }
    },
    "ProcessOCRLambdaVersionPwhByq9rWMpRovavE0A9KadPTWe64HBM4rkrMzrJlno": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "ProcessOCRLambdaFunction"
        },
        "CodeSha256": "G5/N8qPR1RGLNxwsATmVeL6RHsznvVV8ofsHFKTO/7Q=",
        "Description": "Process OCR extraction from document images"
      }
    },
    "RefreshDocumentUrlLambdaVersionrCNxBUH1kCQpf9cmAvnkTtl6oLHW9hRfV5eJSrZRcEc": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "RefreshDocumentUrlLambdaFunction"
        },
        "CodeSha256": "9ak930YwAP08jEFsiZON593lOjZ/vxlLQobRjWfAYZw=",
        "Description": "Refresh presigned URL for document access"
      }
    },
    "ProcessBiometricLambdaVersionYmsSuwHgABxsEexzNEWWKg1i41ya74QL2ZO4I2yszE": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "ProcessBiometricLambdaFunction"
        },
        "CodeSha256": "icMWCPphTOVh3ltiH0LFFRHko7ECoMCuhetls2VR+O4=",
        "Description": "Process biometric face matching (liveness + comparison)"
      }
    },
    "ApiGatewayRestApi": {
      "Type": "AWS::ApiGateway::RestApi",
      "Properties": {
        "Name": "authbridge-verification-staging",
        "EndpointConfiguration": {
          "Types": [
            "EDGE"
          ]
        },
        "Policy": "",
        "MinimumCompressionSize": 1024
      }
    },
    "ApiGatewayResourceApi": {
      "Type": "AWS::ApiGateway::Resource",
      "Properties": {
        "ParentId": {
          "Fn::GetAtt": [
            "ApiGatewayRestApi",
            "RootResourceId"
          ]
        },
        "PathPart": "api",
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayResourceApiV1": {
      "Type": "AWS::ApiGateway::Resource",
      "Properties": {
        "ParentId": {
          "Ref": "ApiGatewayResourceApi"
        },
        "PathPart": "v1",
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayResourceApiV1Cases": {
      "Type": "AWS::ApiGateway::Resource",
      "Properties": {
        "ParentId": {
          "Ref": "ApiGatewayResourceApiV1"
        },
        "PathPart": "cases",
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayResourceApiV1CasesIdVar": {
      "Type": "AWS::ApiGateway::Resource",
      "Properties": {
        "ParentId": {
          "Ref": "ApiGatewayResourceApiV1Cases"
        },
        "PathPart": "{id}",
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayResourceApiV1CasesIdVarApprove": {
      "Type": "AWS::ApiGateway::Resource",
      "Properties": {
        "ParentId": {
          "Ref": "ApiGatewayResourceApiV1CasesIdVar"
        },
        "PathPart": "approve",
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayResourceApiV1CasesIdVarReject": {
      "Type": "AWS::ApiGateway::Resource",
      "Properties": {
        "ParentId": {
          "Ref": "ApiGatewayResourceApiV1CasesIdVar"
        },
        "PathPart": "reject",
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayResourceApiV1CasesIdVarNotes": {
      "Type": "AWS::ApiGateway::Resource",
      "Properties": {
        "ParentId": {
          "Ref": "ApiGatewayResourceApiV1CasesIdVar"
        },
        "PathPart": "notes",
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayResourceApiV1CasesBulkDashapprove": {
      "Type": "AWS::ApiGateway::Resource",
      "Properties": {
        "ParentId": {
          "Ref": "ApiGatewayResourceApiV1Cases"
        },
        "PathPart": "bulk-approve",
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayResourceApiV1CasesBulkDashreject": {
      "Type": "AWS::ApiGateway::Resource",
      "Properties": {
        "ParentId": {
          "Ref": "ApiGatewayResourceApiV1Cases"
        },
        "PathPart": "bulk-reject",
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayResourceApiV1Webhooks": {
      "Type": "AWS::ApiGateway::Resource",
      "Properties": {
        "ParentId": {
          "Ref": "ApiGatewayResourceApiV1"
        },
        "PathPart": "webhooks",
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayResourceApiV1WebhooksConfigure": {
      "Type": "AWS::ApiGateway::Resource",
      "Properties": {
        "ParentId": {
          "Ref": "ApiGatewayResourceApiV1Webhooks"
        },
        "PathPart": "configure",
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayResourceApiV1WebhooksTest": {
      "Type": "AWS::ApiGateway::Resource",
      "Properties": {
        "ParentId": {
          "Ref": "ApiGatewayResourceApiV1Webhooks"
        },
        "PathPart": "test",
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayResourceApiV1Audit": {
      "Type": "AWS::ApiGateway::Resource",
      "Properties": {
        "ParentId": {
          "Ref": "ApiGatewayResourceApiV1"
        },
        "PathPart": "audit",
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayResourceApiV1Verifications": {
      "Type": "AWS::ApiGateway::Resource",
      "Properties": {
        "ParentId": {
          "Ref": "ApiGatewayResourceApiV1"
        },
        "PathPart": "verifications",
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayResourceApiV1VerificationsVerificationidVar": {
      "Type": "AWS::ApiGateway::Resource",
      "Properties": {
        "ParentId": {
          "Ref": "ApiGatewayResourceApiV1Verifications"
        },
        "PathPart": "{verificationId}",
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayResourceApiV1VerificationsVerificationidVarDocuments": {
      "Type": "AWS::ApiGateway::Resource",
      "Properties": {
        "ParentId": {
          "Ref": "ApiGatewayResourceApiV1VerificationsVerificationidVar"
        },
        "PathPart": "documents",
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayResourceApiV1VerificationsVerificationidVarDocumentsDocumentidVar": {
      "Type": "AWS::ApiGateway::Resource",
      "Properties": {
        "ParentId": {
          "Ref": "ApiGatewayResourceApiV1VerificationsVerificationidVarDocuments"
        },
        "PathPart": "{documentId}",
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayResourceApiV1VerificationsVerificationidVarDocumentsDocumentidVarUrl": {
      "Type": "AWS::ApiGateway::Resource",
      "Properties": {
        "ParentId": {
          "Ref": "ApiGatewayResourceApiV1VerificationsVerificationidVarDocumentsDocumentidVar"
        },
        "PathPart": "url",
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayMethodApiV1CasesOptions": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "AuthorizationType": "NONE",
        "HttpMethod": "OPTIONS",
        "MethodResponses": [
          {
            "StatusCode": "200",
            "ResponseParameters": {
              "method.response.header.Access-Control-Allow-Origin": true,
              "method.response.header.Access-Control-Allow-Headers": true,
              "method.response.header.Access-Control-Allow-Methods": true
            },
            "ResponseModels": {}
          }
        ],
        "RequestParameters": {},
        "Integration": {
          "Type": "MOCK",
          "RequestTemplates": {
            "application/json": "{statusCode:200}"
          },
          "ContentHandling": "CONVERT_TO_TEXT",
          "IntegrationResponses": [
            {
              "StatusCode": "200",
              "ResponseParameters": {
                "method.response.header.Access-Control-Allow-Origin": "'*'",
                "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent,X-Amzn-Trace-Id'",
                "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET'"
              },
              "ResponseTemplates": {
                "application/json": ""
              }
            }
          ]
        },
        "ResourceId": {
          "Ref": "ApiGatewayResourceApiV1Cases"
        },
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayMethodApiV1CasesIdVarOptions": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "AuthorizationType": "NONE",
        "HttpMethod": "OPTIONS",
        "MethodResponses": [
          {
            "StatusCode": "200",
            "ResponseParameters": {
              "method.response.header.Access-Control-Allow-Origin": true,
              "method.response.header.Access-Control-Allow-Headers": true,
              "method.response.header.Access-Control-Allow-Methods": true
            },
            "ResponseModels": {}
          }
        ],
        "RequestParameters": {},
        "Integration": {
          "Type": "MOCK",
          "RequestTemplates": {
            "application/json": "{statusCode:200}"
          },
          "ContentHandling": "CONVERT_TO_TEXT",
          "IntegrationResponses": [
            {
              "StatusCode": "200",
              "ResponseParameters": {
                "method.response.header.Access-Control-Allow-Origin": "'*'",
                "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent,X-Amzn-Trace-Id'",
                "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET'"
              },
              "ResponseTemplates": {
                "application/json": ""
              }
            }
          ]
        },
        "ResourceId": {
          "Ref": "ApiGatewayResourceApiV1CasesIdVar"
        },
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayMethodApiV1CasesIdVarApproveOptions": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "AuthorizationType": "NONE",
        "HttpMethod": "OPTIONS",
        "MethodResponses": [
          {
            "StatusCode": "200",
            "ResponseParameters": {
              "method.response.header.Access-Control-Allow-Origin": true,
              "method.response.header.Access-Control-Allow-Headers": true,
              "method.response.header.Access-Control-Allow-Methods": true
            },
            "ResponseModels": {}
          }
        ],
        "RequestParameters": {},
        "Integration": {
          "Type": "MOCK",
          "RequestTemplates": {
            "application/json": "{statusCode:200}"
          },
          "ContentHandling": "CONVERT_TO_TEXT",
          "IntegrationResponses": [
            {
              "StatusCode": "200",
              "ResponseParameters": {
                "method.response.header.Access-Control-Allow-Origin": "'*'",
                "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent,X-Amzn-Trace-Id'",
                "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,POST'"
              },
              "ResponseTemplates": {
                "application/json": ""
              }
            }
          ]
        },
        "ResourceId": {
          "Ref": "ApiGatewayResourceApiV1CasesIdVarApprove"
        },
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayMethodApiV1CasesIdVarRejectOptions": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "AuthorizationType": "NONE",
        "HttpMethod": "OPTIONS",
        "MethodResponses": [
          {
            "StatusCode": "200",
            "ResponseParameters": {
              "method.response.header.Access-Control-Allow-Origin": true,
              "method.response.header.Access-Control-Allow-Headers": true,
              "method.response.header.Access-Control-Allow-Methods": true
            },
            "ResponseModels": {}
          }
        ],
        "RequestParameters": {},
        "Integration": {
          "Type": "MOCK",
          "RequestTemplates": {
            "application/json": "{statusCode:200}"
          },
          "ContentHandling": "CONVERT_TO_TEXT",
          "IntegrationResponses": [
            {
              "StatusCode": "200",
              "ResponseParameters": {
                "method.response.header.Access-Control-Allow-Origin": "'*'",
                "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent,X-Amzn-Trace-Id'",
                "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,POST'"
              },
              "ResponseTemplates": {
                "application/json": ""
              }
            }
          ]
        },
        "ResourceId": {
          "Ref": "ApiGatewayResourceApiV1CasesIdVarReject"
        },
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayMethodApiV1WebhooksConfigureOptions": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "AuthorizationType": "NONE",
        "HttpMethod": "OPTIONS",
        "MethodResponses": [
          {
            "StatusCode": "200",
            "ResponseParameters": {
              "method.response.header.Access-Control-Allow-Origin": true,
              "method.response.header.Access-Control-Allow-Headers": true,
              "method.response.header.Access-Control-Allow-Methods": true
            },
            "ResponseModels": {}
          }
        ],
        "RequestParameters": {},
        "Integration": {
          "Type": "MOCK",
          "RequestTemplates": {
            "application/json": "{statusCode:200}"
          },
          "ContentHandling": "CONVERT_TO_TEXT",
          "IntegrationResponses": [
            {
              "StatusCode": "200",
              "ResponseParameters": {
                "method.response.header.Access-Control-Allow-Origin": "'*'",
                "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent,X-Amzn-Trace-Id'",
                "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,POST'"
              },
              "ResponseTemplates": {
                "application/json": ""
              }
            }
          ]
        },
        "ResourceId": {
          "Ref": "ApiGatewayResourceApiV1WebhooksConfigure"
        },
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayMethodApiV1WebhooksTestOptions": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "AuthorizationType": "NONE",
        "HttpMethod": "OPTIONS",
        "MethodResponses": [
          {
            "StatusCode": "200",
            "ResponseParameters": {
              "method.response.header.Access-Control-Allow-Origin": true,
              "method.response.header.Access-Control-Allow-Headers": true,
              "method.response.header.Access-Control-Allow-Methods": true
            },
            "ResponseModels": {}
          }
        ],
        "RequestParameters": {},
        "Integration": {
          "Type": "MOCK",
          "RequestTemplates": {
            "application/json": "{statusCode:200}"
          },
          "ContentHandling": "CONVERT_TO_TEXT",
          "IntegrationResponses": [
            {
              "StatusCode": "200",
              "ResponseParameters": {
                "method.response.header.Access-Control-Allow-Origin": "'*'",
                "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent,X-Amzn-Trace-Id'",
                "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,POST'"
              },
              "ResponseTemplates": {
                "application/json": ""
              }
            }
          ]
        },
        "ResourceId": {
          "Ref": "ApiGatewayResourceApiV1WebhooksTest"
        },
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayMethodApiV1CasesIdVarNotesOptions": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "AuthorizationType": "NONE",
        "HttpMethod": "OPTIONS",
        "MethodResponses": [
          {
            "StatusCode": "200",
            "ResponseParameters": {
              "method.response.header.Access-Control-Allow-Origin": true,
              "method.response.header.Access-Control-Allow-Headers": true,
              "method.response.header.Access-Control-Allow-Methods": true
            },
            "ResponseModels": {}
          }
        ],
        "RequestParameters": {},
        "Integration": {
          "Type": "MOCK",
          "RequestTemplates": {
            "application/json": "{statusCode:200}"
          },
          "ContentHandling": "CONVERT_TO_TEXT",
          "IntegrationResponses": [
            {
              "StatusCode": "200",
              "ResponseParameters": {
                "method.response.header.Access-Control-Allow-Origin": "'*'",
                "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent,X-Amzn-Trace-Id'",
                "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,POST'"
              },
              "ResponseTemplates": {
                "application/json": ""
              }
            }
          ]
        },
        "ResourceId": {
          "Ref": "ApiGatewayResourceApiV1CasesIdVarNotes"
        },
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayMethodApiV1AuditOptions": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "AuthorizationType": "NONE",
        "HttpMethod": "OPTIONS",
        "MethodResponses": [
          {
            "StatusCode": "200",
            "ResponseParameters": {
              "method.response.header.Access-Control-Allow-Origin": true,
              "method.response.header.Access-Control-Allow-Headers": true,
              "method.response.header.Access-Control-Allow-Methods": true
            },
            "ResponseModels": {}
          }
        ],
        "RequestParameters": {},
        "Integration": {
          "Type": "MOCK",
          "RequestTemplates": {
            "application/json": "{statusCode:200}"
          },
          "ContentHandling": "CONVERT_TO_TEXT",
          "IntegrationResponses": [
            {
              "StatusCode": "200",
              "ResponseParameters": {
                "method.response.header.Access-Control-Allow-Origin": "'*'",
                "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent,X-Amzn-Trace-Id'",
                "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET'"
              },
              "ResponseTemplates": {
                "application/json": ""
              }
            }
          ]
        },
        "ResourceId": {
          "Ref": "ApiGatewayResourceApiV1Audit"
        },
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayMethodApiV1CasesBulkDashapproveOptions": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "AuthorizationType": "NONE",
        "HttpMethod": "OPTIONS",
        "MethodResponses": [
          {
            "StatusCode": "200",
            "ResponseParameters": {
              "method.response.header.Access-Control-Allow-Origin": true,
              "method.response.header.Access-Control-Allow-Headers": true,
              "method.response.header.Access-Control-Allow-Methods": true
            },
            "ResponseModels": {}
          }
        ],
        "RequestParameters": {},
        "Integration": {
          "Type": "MOCK",
          "RequestTemplates": {
            "application/json": "{statusCode:200}"
          },
          "ContentHandling": "CONVERT_TO_TEXT",
          "IntegrationResponses": [
            {
              "StatusCode": "200",
              "ResponseParameters": {
                "method.response.header.Access-Control-Allow-Origin": "'*'",
                "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent,X-Amzn-Trace-Id'",
                "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,POST'"
              },
              "ResponseTemplates": {
                "application/json": ""
              }
            }
          ]
        },
        "ResourceId": {
          "Ref": "ApiGatewayResourceApiV1CasesBulkDashapprove"
        },
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayMethodApiV1CasesBulkDashrejectOptions": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "AuthorizationType": "NONE",
        "HttpMethod": "OPTIONS",
        "MethodResponses": [
          {
            "StatusCode": "200",
            "ResponseParameters": {
              "method.response.header.Access-Control-Allow-Origin": true,
              "method.response.header.Access-Control-Allow-Headers": true,
              "method.response.header.Access-Control-Allow-Methods": true
            },
            "ResponseModels": {}
          }
        ],
        "RequestParameters": {},
        "Integration": {
          "Type": "MOCK",
          "RequestTemplates": {
            "application/json": "{statusCode:200}"
          },
          "ContentHandling": "CONVERT_TO_TEXT",
          "IntegrationResponses": [
            {
              "StatusCode": "200",
              "ResponseParameters": {
                "method.response.header.Access-Control-Allow-Origin": "'*'",
                "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent,X-Amzn-Trace-Id'",
                "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,POST'"
              },
              "ResponseTemplates": {
                "application/json": ""
              }
            }
          ]
        },
        "ResourceId": {
          "Ref": "ApiGatewayResourceApiV1CasesBulkDashreject"
        },
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayMethodApiV1VerificationsOptions": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "AuthorizationType": "NONE",
        "HttpMethod": "OPTIONS",
        "MethodResponses": [
          {
            "StatusCode": "200",
            "ResponseParameters": {
              "method.response.header.Access-Control-Allow-Origin": true,
              "method.response.header.Access-Control-Allow-Headers": true,
              "method.response.header.Access-Control-Allow-Methods": true
            },
            "ResponseModels": {}
          }
        ],
        "RequestParameters": {},
        "Integration": {
          "Type": "MOCK",
          "RequestTemplates": {
            "application/json": "{statusCode:200}"
          },
          "ContentHandling": "CONVERT_TO_TEXT",
          "IntegrationResponses": [
            {
              "StatusCode": "200",
              "ResponseParameters": {
                "method.response.header.Access-Control-Allow-Origin": "'*'",
                "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent,X-Amzn-Trace-Id'",
                "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,POST'"
              },
              "ResponseTemplates": {
                "application/json": ""
              }
            }
          ]
        },
        "ResourceId": {
          "Ref": "ApiGatewayResourceApiV1Verifications"
        },
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayMethodApiV1VerificationsVerificationidVarOptions": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "AuthorizationType": "NONE",
        "HttpMethod": "OPTIONS",
        "MethodResponses": [
          {
            "StatusCode": "200",
            "ResponseParameters": {
              "method.response.header.Access-Control-Allow-Origin": true,
              "method.response.header.Access-Control-Allow-Headers": true,
              "method.response.header.Access-Control-Allow-Methods": true
            },
            "ResponseModels": {}
          }
        ],
        "RequestParameters": {},
        "Integration": {
          "Type": "MOCK",
          "RequestTemplates": {
            "application/json": "{statusCode:200}"
          },
          "ContentHandling": "CONVERT_TO_TEXT",
          "IntegrationResponses": [
            {
              "StatusCode": "200",
              "ResponseParameters": {
                "method.response.header.Access-Control-Allow-Origin": "'*'",
                "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent,X-Amzn-Trace-Id'",
                "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET'"
              },
              "ResponseTemplates": {
                "application/json": ""
              }
            }
          ]
        },
        "ResourceId": {
          "Ref": "ApiGatewayResourceApiV1VerificationsVerificationidVar"
        },
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayMethodApiV1VerificationsVerificationidVarDocumentsOptions": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "AuthorizationType": "NONE",
        "HttpMethod": "OPTIONS",
        "MethodResponses": [
          {
            "StatusCode": "200",
            "ResponseParameters": {
              "method.response.header.Access-Control-Allow-Origin": true,
              "method.response.header.Access-Control-Allow-Headers": true,
              "method.response.header.Access-Control-Allow-Methods": true
            },
            "ResponseModels": {}
          }
        ],
        "RequestParameters": {},
        "Integration": {
          "Type": "MOCK",
          "RequestTemplates": {
            "application/json": "{statusCode:200}"
          },
          "ContentHandling": "CONVERT_TO_TEXT",
          "IntegrationResponses": [
            {
              "StatusCode": "200",
              "ResponseParameters": {
                "method.response.header.Access-Control-Allow-Origin": "'*'",
                "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent,X-Amzn-Trace-Id'",
                "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,POST'"
              },
              "ResponseTemplates": {
                "application/json": ""
              }
            }
          ]
        },
        "ResourceId": {
          "Ref": "ApiGatewayResourceApiV1VerificationsVerificationidVarDocuments"
        },
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayMethodApiV1VerificationsVerificationidVarDocumentsDocumentidVarUrlOptions": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "AuthorizationType": "NONE",
        "HttpMethod": "OPTIONS",
        "MethodResponses": [
          {
            "StatusCode": "200",
            "ResponseParameters": {
              "method.response.header.Access-Control-Allow-Origin": true,
              "method.response.header.Access-Control-Allow-Headers": true,
              "method.response.header.Access-Control-Allow-Methods": true
            },
            "ResponseModels": {}
          }
        ],
        "RequestParameters": {},
        "Integration": {
          "Type": "MOCK",
          "RequestTemplates": {
            "application/json": "{statusCode:200}"
          },
          "ContentHandling": "CONVERT_TO_TEXT",
          "IntegrationResponses": [
            {
              "StatusCode": "200",
              "ResponseParameters": {
                "method.response.header.Access-Control-Allow-Origin": "'*'",
                "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent,X-Amzn-Trace-Id'",
                "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,POST'"
              },
              "ResponseTemplates": {
                "application/json": ""
              }
            }
          ]
        },
        "ResourceId": {
          "Ref": "ApiGatewayResourceApiV1VerificationsVerificationidVarDocumentsDocumentidVarUrl"
        },
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayMethodApiV1CasesGet": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "HttpMethod": "GET",
        "RequestParameters": {},
        "ResourceId": {
          "Ref": "ApiGatewayResourceApiV1Cases"
        },
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        },
        "ApiKeyRequired": false,
        "AuthorizationType": "NONE",
        "Integration": {
          "IntegrationHttpMethod": "POST",
          "Type": "AWS_PROXY",
          "Uri": {
            "Fn::Join": [
              "",
              [
                "arn:",
                {
                  "Ref": "AWS::Partition"
                },
                ":apigateway:",
                {
                  "Ref": "AWS::Region"
                },
                ":lambda:path/2015-03-31/functions/",
                {
                  "Fn::GetAtt": [
                    "ListCasesLambdaFunction",
                    "Arn"
                  ]
                },
                "/invocations"
              ]
            ]
          }
        },
        "MethodResponses": []
      },
      "DependsOn": [
        "ListCasesLambdaPermissionApiGateway"
      ]
    },
    "ApiGatewayMethodApiV1CasesIdVarGet": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "HttpMethod": "GET",
        "RequestParameters": {},
        "ResourceId": {
          "Ref": "ApiGatewayResourceApiV1CasesIdVar"
        },
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        },
        "ApiKeyRequired": false,
        "AuthorizationType": "NONE",
        "Integration": {
          "IntegrationHttpMethod": "POST",
          "Type": "AWS_PROXY",
          "Uri": {
            "Fn::Join": [
              "",
              [
                "arn:",
                {
                  "Ref": "AWS::Partition"
                },
                ":apigateway:",
                {
                  "Ref": "AWS::Region"
                },
                ":lambda:path/2015-03-31/functions/",
                {
                  "Fn::GetAtt": [
                    "GetCaseLambdaFunction",
                    "Arn"
                  ]
                },
                "/invocations"
              ]
            ]
          }
        },
        "MethodResponses": []
      },
      "DependsOn": [
        "GetCaseLambdaPermissionApiGateway"
      ]
    },
    "ApiGatewayMethodApiV1CasesIdVarApprovePost": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "HttpMethod": "POST",
        "RequestParameters": {},
        "ResourceId": {
          "Ref": "ApiGatewayResourceApiV1CasesIdVarApprove"
        },
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        },
        "ApiKeyRequired": false,
        "AuthorizationType": "NONE",
        "Integration": {
          "IntegrationHttpMethod": "POST",
          "Type": "AWS_PROXY",
          "Uri": {
            "Fn::Join": [
              "",
              [
                "arn:",
                {
                  "Ref": "AWS::Partition"
                },
                ":apigateway:",
                {
                  "Ref": "AWS::Region"
                },
                ":lambda:path/2015-03-31/functions/",
                {
                  "Fn::GetAtt": [
                    "ApproveCaseLambdaFunction",
                    "Arn"
                  ]
                },
                "/invocations"
              ]
            ]
          }
        },
        "MethodResponses": []
      },
      "DependsOn": [
        "ApproveCaseLambdaPermissionApiGateway"
      ]
    },
    "ApiGatewayMethodApiV1CasesIdVarRejectPost": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "HttpMethod": "POST",
        "RequestParameters": {},
        "ResourceId": {
          "Ref": "ApiGatewayResourceApiV1CasesIdVarReject"
        },
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        },
        "ApiKeyRequired": false,
        "AuthorizationType": "NONE",
        "Integration": {
          "IntegrationHttpMethod": "POST",
          "Type": "AWS_PROXY",
          "Uri": {
            "Fn::Join": [
              "",
              [
                "arn:",
                {
                  "Ref": "AWS::Partition"
                },
                ":apigateway:",
                {
                  "Ref": "AWS::Region"
                },
                ":lambda:path/2015-03-31/functions/",
                {
                  "Fn::GetAtt": [
                    "RejectCaseLambdaFunction",
                    "Arn"
                  ]
                },
                "/invocations"
              ]
            ]
          }
        },
        "MethodResponses": []
      },
      "DependsOn": [
        "RejectCaseLambdaPermissionApiGateway"
      ]
    },
    "ApiGatewayMethodApiV1WebhooksConfigurePost": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "HttpMethod": "POST",
        "RequestParameters": {},
        "ResourceId": {
          "Ref": "ApiGatewayResourceApiV1WebhooksConfigure"
        },
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        },
        "ApiKeyRequired": false,
        "AuthorizationType": "CUSTOM",
        "AuthorizerId": {
          "Ref": "ApiKeyAuthorizerApiGatewayAuthorizer"
        },
        "Integration": {
          "IntegrationHttpMethod": "POST",
          "Type": "AWS_PROXY",
          "Uri": {
            "Fn::Join": [
              "",
              [
                "arn:",
                {
                  "Ref": "AWS::Partition"
                },
                ":apigateway:",
                {
                  "Ref": "AWS::Region"
                },
                ":lambda:path/2015-03-31/functions/",
                {
                  "Fn::GetAtt": [
                    "ConfigureWebhookLambdaFunction",
                    "Arn"
                  ]
                },
                "/invocations"
              ]
            ]
          }
        },
        "MethodResponses": []
      },
      "DependsOn": [
        "ApiKeyAuthorizerApiGatewayAuthorizer"
      ]
    },
    "ApiGatewayMethodApiV1WebhooksTestPost": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "HttpMethod": "POST",
        "RequestParameters": {},
        "ResourceId": {
          "Ref": "ApiGatewayResourceApiV1WebhooksTest"
        },
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        },
        "ApiKeyRequired": false,
        "AuthorizationType": "CUSTOM",
        "AuthorizerId": {
          "Ref": "ApiKeyAuthorizerApiGatewayAuthorizer"
        },
        "Integration": {
          "IntegrationHttpMethod": "POST",
          "Type": "AWS_PROXY",
          "Uri": {
            "Fn::Join": [
              "",
              [
                "arn:",
                {
                  "Ref": "AWS::Partition"
                },
                ":apigateway:",
                {
                  "Ref": "AWS::Region"
                },
                ":lambda:path/2015-03-31/functions/",
                {
                  "Fn::GetAtt": [
                    "TestWebhookLambdaFunction",
                    "Arn"
                  ]
                },
                "/invocations"
              ]
            ]
          }
        },
        "MethodResponses": []
      },
      "DependsOn": [
        "ApiKeyAuthorizerApiGatewayAuthorizer"
      ]
    },
    "ApiGatewayMethodApiV1CasesIdVarNotesPost": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "HttpMethod": "POST",
        "RequestParameters": {},
        "ResourceId": {
          "Ref": "ApiGatewayResourceApiV1CasesIdVarNotes"
        },
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        },
        "ApiKeyRequired": false,
        "AuthorizationType": "NONE",
        "Integration": {
          "IntegrationHttpMethod": "POST",
          "Type": "AWS_PROXY",
          "Uri": {
            "Fn::Join": [
              "",
              [
                "arn:",
                {
                  "Ref": "AWS::Partition"
                },
                ":apigateway:",
                {
                  "Ref": "AWS::Region"
                },
                ":lambda:path/2015-03-31/functions/",
                {
                  "Fn::GetAtt": [
                    "AddNoteLambdaFunction",
                    "Arn"
                  ]
                },
                "/invocations"
              ]
            ]
          }
        },
        "MethodResponses": []
      },
      "DependsOn": [
        "AddNoteLambdaPermissionApiGateway"
      ]
    },
    "ApiGatewayMethodApiV1CasesIdVarNotesGet": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "HttpMethod": "GET",
        "RequestParameters": {},
        "ResourceId": {
          "Ref": "ApiGatewayResourceApiV1CasesIdVarNotes"
        },
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        },
        "ApiKeyRequired": false,
        "AuthorizationType": "NONE",
        "Integration": {
          "IntegrationHttpMethod": "POST",
          "Type": "AWS_PROXY",
          "Uri": {
            "Fn::Join": [
              "",
              [
                "arn:",
                {
                  "Ref": "AWS::Partition"
                },
                ":apigateway:",
                {
                  "Ref": "AWS::Region"
                },
                ":lambda:path/2015-03-31/functions/",
                {
                  "Fn::GetAtt": [
                    "GetNotesLambdaFunction",
                    "Arn"
                  ]
                },
                "/invocations"
              ]
            ]
          }
        },
        "MethodResponses": []
      },
      "DependsOn": [
        "GetNotesLambdaPermissionApiGateway"
      ]
    },
    "ApiGatewayMethodApiV1AuditGet": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "HttpMethod": "GET",
        "RequestParameters": {},
        "ResourceId": {
          "Ref": "ApiGatewayResourceApiV1Audit"
        },
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        },
        "ApiKeyRequired": false,
        "AuthorizationType": "NONE",
        "Integration": {
          "IntegrationHttpMethod": "POST",
          "Type": "AWS_PROXY",
          "Uri": {
            "Fn::Join": [
              "",
              [
                "arn:",
                {
                  "Ref": "AWS::Partition"
                },
                ":apigateway:",
                {
                  "Ref": "AWS::Region"
                },
                ":lambda:path/2015-03-31/functions/",
                {
                  "Fn::GetAtt": [
                    "GetAuditLogsLambdaFunction",
                    "Arn"
                  ]
                },
                "/invocations"
              ]
            ]
          }
        },
        "MethodResponses": []
      },
      "DependsOn": [
        "GetAuditLogsLambdaPermissionApiGateway"
      ]
    },
    "ApiGatewayMethodApiV1CasesBulkDashapprovePost": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "HttpMethod": "POST",
        "RequestParameters": {},
        "ResourceId": {
          "Ref": "ApiGatewayResourceApiV1CasesBulkDashapprove"
        },
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        },
        "ApiKeyRequired": false,
        "AuthorizationType": "NONE",
        "Integration": {
          "IntegrationHttpMethod": "POST",
          "Type": "AWS_PROXY",
          "Uri": {
            "Fn::Join": [
              "",
              [
                "arn:",
                {
                  "Ref": "AWS::Partition"
                },
                ":apigateway:",
                {
                  "Ref": "AWS::Region"
                },
                ":lambda:path/2015-03-31/functions/",
                {
                  "Fn::GetAtt": [
                    "BulkApproveLambdaFunction",
                    "Arn"
                  ]
                },
                "/invocations"
              ]
            ]
          }
        },
        "MethodResponses": []
      },
      "DependsOn": [
        "BulkApproveLambdaPermissionApiGateway"
      ]
    },
    "ApiGatewayMethodApiV1CasesBulkDashrejectPost": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "HttpMethod": "POST",
        "RequestParameters": {},
        "ResourceId": {
          "Ref": "ApiGatewayResourceApiV1CasesBulkDashreject"
        },
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        },
        "ApiKeyRequired": false,
        "AuthorizationType": "NONE",
        "Integration": {
          "IntegrationHttpMethod": "POST",
          "Type": "AWS_PROXY",
          "Uri": {
            "Fn::Join": [
              "",
              [
                "arn:",
                {
                  "Ref": "AWS::Partition"
                },
                ":apigateway:",
                {
                  "Ref": "AWS::Region"
                },
                ":lambda:path/2015-03-31/functions/",
                {
                  "Fn::GetAtt": [
                    "BulkRejectLambdaFunction",
                    "Arn"
                  ]
                },
                "/invocations"
              ]
            ]
          }
        },
        "MethodResponses": []
      },
      "DependsOn": [
        "BulkRejectLambdaPermissionApiGateway"
      ]
    },
    "ApiGatewayMethodApiV1VerificationsPost": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "HttpMethod": "POST",
        "RequestParameters": {},
        "ResourceId": {
          "Ref": "ApiGatewayResourceApiV1Verifications"
        },
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        },
        "ApiKeyRequired": false,
        "AuthorizationType": "CUSTOM",
        "AuthorizerId": {
          "Ref": "ApiKeyAuthorizerApiGatewayAuthorizer"
        },
        "Integration": {
          "IntegrationHttpMethod": "POST",
          "Type": "AWS_PROXY",
          "Uri": {
            "Fn::Join": [
              "",
              [
                "arn:",
                {
                  "Ref": "AWS::Partition"
                },
                ":apigateway:",
                {
                  "Ref": "AWS::Region"
                },
                ":lambda:path/2015-03-31/functions/",
                {
                  "Fn::GetAtt": [
                    "CreateVerificationLambdaFunction",
                    "Arn"
                  ]
                },
                "/invocations"
              ]
            ]
          }
        },
        "MethodResponses": []
      },
      "DependsOn": [
        "ApiKeyAuthorizerApiGatewayAuthorizer"
      ]
    },
    "ApiGatewayMethodApiV1VerificationsVerificationidVarGet": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "HttpMethod": "GET",
        "RequestParameters": {},
        "ResourceId": {
          "Ref": "ApiGatewayResourceApiV1VerificationsVerificationidVar"
        },
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        },
        "ApiKeyRequired": false,
        "AuthorizationType": "CUSTOM",
        "AuthorizerId": {
          "Ref": "ApiKeyAuthorizerApiGatewayAuthorizer"
        },
        "Integration": {
          "IntegrationHttpMethod": "POST",
          "Type": "AWS_PROXY",
          "Uri": {
            "Fn::Join": [
              "",
              [
                "arn:",
                {
                  "Ref": "AWS::Partition"
                },
                ":apigateway:",
                {
                  "Ref": "AWS::Region"
                },
                ":lambda:path/2015-03-31/functions/",
                {
                  "Fn::GetAtt": [
                    "GetVerificationStatusLambdaFunction",
                    "Arn"
                  ]
                },
                "/invocations"
              ]
            ]
          }
        },
        "MethodResponses": []
      },
      "DependsOn": [
        "ApiKeyAuthorizerApiGatewayAuthorizer"
      ]
    },
    "ApiGatewayMethodApiV1VerificationsVerificationidVarDocumentsPost": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "HttpMethod": "POST",
        "RequestParameters": {},
        "ResourceId": {
          "Ref": "ApiGatewayResourceApiV1VerificationsVerificationidVarDocuments"
        },
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        },
        "ApiKeyRequired": false,
        "AuthorizationType": "CUSTOM",
        "AuthorizerId": {
          "Ref": "ApiKeyAuthorizerApiGatewayAuthorizer"
        },
        "Integration": {
          "IntegrationHttpMethod": "POST",
          "Type": "AWS_PROXY",
          "Uri": {
            "Fn::Join": [
              "",
              [
                "arn:",
                {
                  "Ref": "AWS::Partition"
                },
                ":apigateway:",
                {
                  "Ref": "AWS::Region"
                },
                ":lambda:path/2015-03-31/functions/",
                {
                  "Fn::GetAtt": [
                    "UploadDocumentLambdaFunction",
                    "Arn"
                  ]
                },
                "/invocations"
              ]
            ]
          }
        },
        "MethodResponses": []
      },
      "DependsOn": [
        "ApiKeyAuthorizerApiGatewayAuthorizer"
      ]
    },
    "ApiGatewayMethodApiV1VerificationsVerificationidVarDocumentsDocumentidVarUrlPost": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "HttpMethod": "POST",
        "RequestParameters": {},
        "ResourceId": {
          "Ref": "ApiGatewayResourceApiV1VerificationsVerificationidVarDocumentsDocumentidVarUrl"
        },
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        },
        "ApiKeyRequired": false,
        "AuthorizationType": "NONE",
        "Integration": {
          "IntegrationHttpMethod": "POST",
          "Type": "AWS_PROXY",
          "Uri": {
            "Fn::Join": [
              "",
              [
                "arn:",
                {
                  "Ref": "AWS::Partition"
                },
                ":apigateway:",
                {
                  "Ref": "AWS::Region"
                },
                ":lambda:path/2015-03-31/functions/",
                {
                  "Fn::GetAtt": [
                    "RefreshDocumentUrlLambdaFunction",
                    "Arn"
                  ]
                },
                "/invocations"
              ]
            ]
          }
        },
        "MethodResponses": []
      },
      "DependsOn": [
        "RefreshDocumentUrlLambdaPermissionApiGateway"
      ]
    },
    "ApiKeyAuthorizerApiGatewayAuthorizer": {
      "Type": "AWS::ApiGateway::Authorizer",
      "Properties": {
        "AuthorizerResultTtlInSeconds": 300,
        "IdentitySource": "method.request.header.Authorization",
        "Name": "apiKeyAuthorizer",
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        },
        "AuthorizerUri": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":apigateway:",
              {
                "Ref": "AWS::Region"
              },
              ":lambda:path/2015-03-31/functions/",
              "arn:aws:lambda:af-south-1:979237821231:function:authbridge-auth-staging-apiKeyAuthorizer",
              "/invocations"
            ]
          ]
        },
        "Type": "REQUEST"
      }
    },
    "ApiGatewayDeployment1768682314434": {
      "Type": "AWS::ApiGateway::Deployment",
      "Properties": {
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        },
        "StageName": "staging"
      },
      "DependsOn": [
        "ApiGatewayMethodApiV1CasesOptions",
        "ApiGatewayMethodApiV1CasesIdVarOptions",
        "ApiGatewayMethodApiV1CasesIdVarApproveOptions",
        "ApiGatewayMethodApiV1CasesIdVarRejectOptions",
        "ApiGatewayMethodApiV1WebhooksConfigureOptions",
        "ApiGatewayMethodApiV1WebhooksTestOptions",
        "ApiGatewayMethodApiV1CasesIdVarNotesOptions",
        "ApiGatewayMethodApiV1AuditOptions",
        "ApiGatewayMethodApiV1CasesBulkDashapproveOptions",
        "ApiGatewayMethodApiV1CasesBulkDashrejectOptions",
        "ApiGatewayMethodApiV1VerificationsOptions",
        "ApiGatewayMethodApiV1VerificationsVerificationidVarOptions",
        "ApiGatewayMethodApiV1VerificationsVerificationidVarDocumentsOptions",
        "ApiGatewayMethodApiV1VerificationsVerificationidVarDocumentsDocumentidVarUrlOptions",
        "ApiGatewayMethodApiV1CasesGet",
        "ApiGatewayMethodApiV1CasesIdVarGet",
        "ApiGatewayMethodApiV1CasesIdVarApprovePost",
        "ApiGatewayMethodApiV1CasesIdVarRejectPost",
        "ApiGatewayMethodApiV1WebhooksConfigurePost",
        "ApiGatewayMethodApiV1WebhooksTestPost",
        "ApiGatewayMethodApiV1CasesIdVarNotesPost",
        "ApiGatewayMethodApiV1CasesIdVarNotesGet",
        "ApiGatewayMethodApiV1AuditGet",
        "ApiGatewayMethodApiV1CasesBulkDashapprovePost",
        "ApiGatewayMethodApiV1CasesBulkDashrejectPost",
        "ApiGatewayMethodApiV1VerificationsPost",
        "ApiGatewayMethodApiV1VerificationsVerificationidVarGet",
        "ApiGatewayMethodApiV1VerificationsVerificationidVarDocumentsPost",
        "ApiGatewayMethodApiV1VerificationsVerificationidVarDocumentsDocumentidVarUrlPost"
      ]
    },
    "ListCasesLambdaPermissionApiGateway": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "ListCasesLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "ApiGatewayRestApi"
              },
              "/*/*"
            ]
          ]
        }
      }
    },
    "GetCaseLambdaPermissionApiGateway": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "GetCaseLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "ApiGatewayRestApi"
              },
              "/*/*"
            ]
          ]
        }
      }
    },
    "ApproveCaseLambdaPermissionApiGateway": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "ApproveCaseLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "ApiGatewayRestApi"
              },
              "/*/*"
            ]
          ]
        }
      }
    },
    "RejectCaseLambdaPermissionApiGateway": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "RejectCaseLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "ApiGatewayRestApi"
              },
              "/*/*"
            ]
          ]
        }
      }
    },
    "ConfigureWebhookLambdaPermissionApiGateway": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "ConfigureWebhookLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "ApiGatewayRestApi"
              },
              "/*/*"
            ]
          ]
        }
      }
    },
    "ApiKeyAuthorizerLambdaPermissionApiGateway": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": "arn:aws:lambda:af-south-1:979237821231:function:authbridge-auth-staging-apiKeyAuthorizer",
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "ApiGatewayRestApi"
              },
              "/*/*"
            ]
          ]
        }
      }
    },
    "TestWebhookLambdaPermissionApiGateway": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "TestWebhookLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "ApiGatewayRestApi"
              },
              "/*/*"
            ]
          ]
        }
      }
    },
    "AddNoteLambdaPermissionApiGateway": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "AddNoteLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "ApiGatewayRestApi"
              },
              "/*/*"
            ]
          ]
        }
      }
    },
    "GetNotesLambdaPermissionApiGateway": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "GetNotesLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "ApiGatewayRestApi"
              },
              "/*/*"
            ]
          ]
        }
      }
    },
    "GetAuditLogsLambdaPermissionApiGateway": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "GetAuditLogsLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "ApiGatewayRestApi"
              },
              "/*/*"
            ]
          ]
        }
      }
    },
    "BulkApproveLambdaPermissionApiGateway": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "BulkApproveLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "ApiGatewayRestApi"
              },
              "/*/*"
            ]
          ]
        }
      }
    },
    "BulkRejectLambdaPermissionApiGateway": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "BulkRejectLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "ApiGatewayRestApi"
              },
              "/*/*"
            ]
          ]
        }
      }
    },
    "CreateVerificationLambdaPermissionApiGateway": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "CreateVerificationLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "ApiGatewayRestApi"
              },
              "/*/*"
            ]
          ]
        }
      }
    },
    "GetVerificationStatusLambdaPermissionApiGateway": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "GetVerificationStatusLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "ApiGatewayRestApi"
              },
              "/*/*"
            ]
          ]
        }
      }
    },
    "UploadDocumentLambdaPermissionApiGateway": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "UploadDocumentLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "ApiGatewayRestApi"
              },
              "/*/*"
            ]
          ]
        }
      }
    },
    "RefreshDocumentUrlLambdaPermissionApiGateway": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "RefreshDocumentUrlLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "ApiGatewayRestApi"
              },
              "/*/*"
            ]
          ]
        }
      }
    },
    "SendWebhookEventSourceMappingSQSWebhookQueue": {
      "Type": "AWS::Lambda::EventSourceMapping",
      "DependsOn": [
        "IamRoleLambdaExecution"
      ],
      "Properties": {
        "BatchSize": 10,
        "EventSourceArn": {
          "Fn::GetAtt": [
            "WebhookQueue",
            "Arn"
          ]
        },
        "FunctionName": {
          "Fn::GetAtt": [
            "SendWebhookLambdaFunction",
            "Arn"
          ]
        },
        "Enabled": true
      }
    },
    "ProcessOCREventSourceMappingSQSOcrQueue": {
      "Type": "AWS::Lambda::EventSourceMapping",
      "DependsOn": [
        "IamRoleLambdaExecution"
      ],
      "Properties": {
        "BatchSize": 1,
        "EventSourceArn": {
          "Fn::GetAtt": [
            "OcrQueue",
            "Arn"
          ]
        },
        "FunctionName": {
          "Fn::GetAtt": [
            "ProcessOCRLambdaFunction",
            "Arn"
          ]
        },
        "Enabled": true,
        "FunctionResponseTypes": [
          "ReportBatchItemFailures"
        ]
      }
    },
    "ProcessBiometricEventSourceMappingSQSBiometricQueue": {
      "Type": "AWS::Lambda::EventSourceMapping",
      "DependsOn": [
        "IamRoleLambdaExecution"
      ],
      "Properties": {
        "BatchSize": 1,
        "EventSourceArn": {
          "Fn::GetAtt": [
            "BiometricQueue",
            "Arn"
          ]
        },
        "FunctionName": {
          "Fn::GetAtt": [
            "ProcessBiometricLambdaFunction",
            "Arn"
          ]
        },
        "Enabled": true,
        "FunctionResponseTypes": [
          "ReportBatchItemFailures"
        ]
      }
    },
    "DocumentsBucket": {
      "Type": "AWS::S3::Bucket",
      "Properties": {
        "BucketName": "authbridge-documents-staging",
        "BucketEncryption": {
          "ServerSideEncryptionConfiguration": [
            {
              "ServerSideEncryptionByDefault": {
                "SSEAlgorithm": "aws:kms",
                "KMSMasterKeyID": "arn:aws:kms:af-south-1:979237821231:key/dd242797-bf9b-4058-a079-3588989dd79b"
              }
            }
          ]
        },
        "PublicAccessBlockConfiguration": {
          "BlockPublicAcls": true,
          "BlockPublicPolicy": true,
          "IgnorePublicAcls": true,
          "RestrictPublicBuckets": true
        }
      }
    },
    "DocumentsBucketPolicy": {
      "Type": "AWS::S3::BucketPolicy",
      "Properties": {
        "Bucket": {
          "Ref": "DocumentsBucket"
        },
        "PolicyDocument": {
          "Statement": [
            {
              "Sid": "DenyUnencryptedObjectUploads",
              "Effect": "Deny",
              "Principal": "*",
              "Action": "s3:PutObject",
              "Resource": {
                "Fn::Sub": "${DocumentsBucket.Arn}/*"
              },
              "Condition": {
                "StringNotEquals": {
                  "s3:x-amz-server-side-encryption": "aws:kms"
                }
              }
            },
            {
              "Sid": "DenyIncorrectEncryptionHeader",
              "Effect": "Deny",
              "Principal": "*",
              "Action": "s3:PutObject",
              "Resource": {
                "Fn::Sub": "${DocumentsBucket.Arn}/*"
              },
              "Condition": {
                "StringNotEqualsIfExists": {
                  "s3:x-amz-server-side-encryption-aws-kms-key-id": "arn:aws:kms:af-south-1:979237821231:key/dd242797-bf9b-4058-a079-3588989dd79b"
                }
              }
            }
          ]
        }
      }
    },
    "OcrQueue": {
      "Type": "AWS::SQS::Queue",
      "Properties": {
        "QueueName": "authbridge-ocr-queue-staging",
        "VisibilityTimeout": 360,
        "MessageRetentionPeriod": 345600,
        "ReceiveMessageWaitTimeSeconds": 0,
        "RedrivePolicy": {
          "deadLetterTargetArn": {
            "Fn::GetAtt": [
              "OcrDLQ",
              "Arn"
            ]
          },
          "maxReceiveCount": 3
        }
      }
    },
    "OcrDLQ": {
      "Type": "AWS::SQS::Queue",
      "Properties": {
        "QueueName": "authbridge-ocr-dlq-staging",
        "MessageRetentionPeriod": 1209600,
        "ReceiveMessageWaitTimeSeconds": 0
      }
    },
    "BiometricQueue": {
      "Type": "AWS::SQS::Queue",
      "Properties": {
        "QueueName": "authbridge-biometric-queue-staging",
        "VisibilityTimeout": 360,
        "MessageRetentionPeriod": 345600,
        "ReceiveMessageWaitTimeSeconds": 0,
        "RedrivePolicy": {
          "deadLetterTargetArn": {
            "Fn::GetAtt": [
              "BiometricDLQ",
              "Arn"
            ]
          },
          "maxReceiveCount": 3
        }
      }
    },
    "BiometricDLQ": {
      "Type": "AWS::SQS::Queue",
      "Properties": {
        "QueueName": "authbridge-biometric-dlq-staging",
        "MessageRetentionPeriod": 1209600,
        "ReceiveMessageWaitTimeSeconds": 0
      }
    },
    "WebhookQueue": {
      "Type": "AWS::SQS::Queue",
      "Properties": {
        "QueueName": "authbridge-webhook-queue-staging",
        "VisibilityTimeout": 90,
        "MessageRetentionPeriod": 86400,
        "ReceiveMessageWaitTimeSeconds": 0,
        "RedrivePolicy": {
          "deadLetterTargetArn": {
            "Fn::GetAtt": [
              "WebhookDLQ",
              "Arn"
            ]
          },
          "maxReceiveCount": 3
        }
      }
    },
    "WebhookDLQ": {
      "Type": "AWS::SQS::Queue",
      "Properties": {
        "QueueName": "authbridge-webhook-dlq-staging",
        "MessageRetentionPeriod": 1209600,
        "ReceiveMessageWaitTimeSeconds": 0
      }
    },
    "OcrAlertTopic": {
      "Type": "AWS::SNS::Topic",
      "Properties": {
        "TopicName": "authbridge-ocr-alerts-staging",
        "DisplayName": "AuthBridge OCR Alerts"
      }
    },
    "OcrSuccessRateAlarm": {
      "Type": "AWS::CloudWatch::Alarm",
      "Properties": {
        "AlarmName": "authbridge-ocr-success-rate-staging",
        "AlarmDescription": "OCR success rate below 85%",
        "MetricName": "OcrSuccess",
        "Namespace": "AuthBridge/Verification",
        "Statistic": "Sum",
        "Period": 300,
        "EvaluationPeriods": 3,
        "Threshold": 85,
        "ComparisonOperator": "LessThanThreshold",
        "TreatMissingData": "notBreaching",
        "AlarmActions": [
          {
            "Ref": "OcrAlertTopic"
          }
        ]
      }
    },
    "OcrConfidenceAlarm": {
      "Type": "AWS::CloudWatch::Alarm",
      "Properties": {
        "AlarmName": "authbridge-ocr-confidence-staging",
        "AlarmDescription": "Average OCR confidence below 90%",
        "MetricName": "OcrConfidenceScore",
        "Namespace": "AuthBridge/Verification",
        "Statistic": "Average",
        "Period": 300,
        "EvaluationPeriods": 3,
        "Threshold": 90,
        "ComparisonOperator": "LessThanThreshold",
        "TreatMissingData": "notBreaching",
        "AlarmActions": [
          {
            "Ref": "OcrAlertTopic"
          }
        ]
      }
    },
    "OcrProcessingTimeAlarm": {
      "Type": "AWS::CloudWatch::Alarm",
      "Properties": {
        "AlarmName": "authbridge-ocr-processing-time-staging",
        "AlarmDescription": "OCR processing time exceeds 10 seconds (p95)",
        "MetricName": "OcrProcessingTime",
        "Namespace": "AuthBridge/Verification",
        "ExtendedStatistic": "p95",
        "Period": 300,
        "EvaluationPeriods": 2,
        "Threshold": 10000,
        "ComparisonOperator": "GreaterThanThreshold",
        "TreatMissingData": "notBreaching",
        "AlarmActions": [
          {
            "Ref": "OcrAlertTopic"
          }
        ]
      }
    },
    "OcrDLQAlarm": {
      "Type": "AWS::CloudWatch::Alarm",
      "Properties": {
        "AlarmName": "authbridge-ocr-dlq-messages-staging",
        "AlarmDescription": "Messages in OCR Dead Letter Queue",
        "MetricName": "ApproximateNumberOfMessagesVisible",
        "Namespace": "AWS/SQS",
        "Dimensions": [
          {
            "Name": "QueueName",
            "Value": {
              "Fn::GetAtt": [
                "OcrDLQ",
                "QueueName"
              ]
            }
          }
        ],
        "Statistic": "Sum",
        "Period": 300,
        "EvaluationPeriods": 1,
        "Threshold": 1,
        "ComparisonOperator": "GreaterThanOrEqualToThreshold",
        "TreatMissingData": "notBreaching",
        "AlarmActions": [
          {
            "Ref": "OcrAlertTopic"
          }
        ]
      }
    },
    "BiometricPassRateAlarm": {
      "Type": "AWS::CloudWatch::Alarm",
      "Properties": {
        "AlarmName": "authbridge-biometric-pass-rate-staging",
        "AlarmDescription": "Biometric pass rate below 70%",
        "MetricName": "BiometricPassed",
        "Namespace": "AuthBridge/Verification",
        "Statistic": "Sum",
        "Period": 3600,
        "EvaluationPeriods": 1,
        "Threshold": 70,
        "ComparisonOperator": "LessThanThreshold",
        "TreatMissingData": "notBreaching",
        "AlarmActions": [
          {
            "Ref": "OcrAlertTopic"
          }
        ]
      }
    },
    "BiometricDLQAlarm": {
      "Type": "AWS::CloudWatch::Alarm",
      "Properties": {
        "AlarmName": "authbridge-biometric-dlq-messages-staging",
        "AlarmDescription": "Messages in Biometric Dead Letter Queue",
        "MetricName": "ApproximateNumberOfMessagesVisible",
        "Namespace": "AWS/SQS",
        "Dimensions": [
          {
            "Name": "QueueName",
            "Value": {
              "Fn::GetAtt": [
                "BiometricDLQ",
                "QueueName"
              ]
            }
          }
        ],
        "Statistic": "Sum",
        "Period": 300,
        "EvaluationPeriods": 1,
        "Threshold": 1,
        "ComparisonOperator": "GreaterThanOrEqualToThreshold",
        "TreatMissingData": "notBreaching",
        "AlarmActions": [
          {
            "Ref": "OcrAlertTopic"
          }
        ]
      }
    }
  },
  "Outputs": {
    "ServerlessDeploymentBucketName": {
      "Value": {
        "Ref": "ServerlessDeploymentBucket"
      },
      "Export": {
        "Name": "sls-authbridge-verification-staging-ServerlessDeploymentBucketName"
      }
    },
    "ListCasesLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "ListCasesLambdaVersionlFeNsnM8AIa1aZbJFm3We0dR4YAQvykUrw10"
      },
      "Export": {
        "Name": "sls-authbridge-verification-staging-ListCasesLambdaFunctionQualifiedArn"
      }
    },
    "GetCaseLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "GetCaseLambdaVersionbG6SPKwWHzq6PyGkrQb1KPyaWm73VNqGAZGZj1FMY"
      },
      "Export": {
        "Name": "sls-authbridge-verification-staging-GetCaseLambdaFunctionQualifiedArn"
      }
    },
    "ApproveCaseLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "ApproveCaseLambdaVersionA2Pk5ce7ubkezUnd0cWhYWvYDrRogUDKHaT7SV863eE"
      },
      "Export": {
        "Name": "sls-authbridge-verification-staging-ApproveCaseLambdaFunctionQualifiedArn"
      }
    },
    "RejectCaseLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "RejectCaseLambdaVersionxyzJ3u2sbv6dssTAKF5eYtnvda4zL9P4kXsdgHx53Q"
      },
      "Export": {
        "Name": "sls-authbridge-verification-staging-RejectCaseLambdaFunctionQualifiedArn"
      }
    },
    "SendWebhookLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "SendWebhookLambdaVersion9dGKyrgxeDX0hdFIYJOTrm4h7j35KiBbqQ3TNLT8E"
      },
      "Export": {
        "Name": "sls-authbridge-verification-staging-SendWebhookLambdaFunctionQualifiedArn"
      }
    },
    "ConfigureWebhookLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "ConfigureWebhookLambdaVersionIUwiAiO2rv6w33q2gTnDctQBCsl6hCnVYOd4l9vpi8"
      },
      "Export": {
        "Name": "sls-authbridge-verification-staging-ConfigureWebhookLambdaFunctionQualifiedArn"
      }
    },
    "TestWebhookLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "TestWebhookLambdaVersion1sLGbBdiRKGG5TucjQwTfQbiYIpGS20z1MkPuIcFPA"
      },
      "Export": {
        "Name": "sls-authbridge-verification-staging-TestWebhookLambdaFunctionQualifiedArn"
      }
    },
    "AddNoteLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "AddNoteLambdaVersiontD8bsiFDPWESaWvoyxdt9QUKtvldUjWhIxdMD5MaFQ"
      },
      "Export": {
        "Name": "sls-authbridge-verification-staging-AddNoteLambdaFunctionQualifiedArn"
      }
    },
    "GetNotesLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "GetNotesLambdaVersionL6fn1AWqMnf5trrnUWceXBgBs0LiQ9bAknC1Peiteao"
      },
      "Export": {
        "Name": "sls-authbridge-verification-staging-GetNotesLambdaFunctionQualifiedArn"
      }
    },
    "GetAuditLogsLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "GetAuditLogsLambdaVersionV8VRJnqQlgbIlfknGcdpkq99eTHaY0Fa0ToUCWcIDk"
      },
      "Export": {
        "Name": "sls-authbridge-verification-staging-GetAuditLogsLambdaFunctionQualifiedArn"
      }
    },
    "BulkApproveLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "BulkApproveLambdaVersionY1B6OdBNLj3l87cwKa8vzC7agbIjhFB4xQQHxwkX8k"
      },
      "Export": {
        "Name": "sls-authbridge-verification-staging-BulkApproveLambdaFunctionQualifiedArn"
      }
    },
    "BulkRejectLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "BulkRejectLambdaVersionfR3OH6SLnSyZI8srJ0ERDERVP1VukERyQKXhXK7xM"
      },
      "Export": {
        "Name": "sls-authbridge-verification-staging-BulkRejectLambdaFunctionQualifiedArn"
      }
    },
    "CreateVerificationLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "CreateVerificationLambdaVersionFmZTKJ4Pl9o4Zk6M6jBPpjWcDISWuq9QcfskeFxQOLc"
      },
      "Export": {
        "Name": "sls-authbridge-verification-staging-CreateVerificationLambdaFunctionQualifiedArn"
      }
    },
    "UploadDocumentLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "UploadDocumentLambdaVersionjtX2WX4HoMXbjSbn408Y13vTloN4kNQThhJAaUhYc"
      },
      "Export": {
        "Name": "sls-authbridge-verification-staging-UploadDocumentLambdaFunctionQualifiedArn"
      }
    },
    "GetVerificationStatusLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "GetVerificationStatusLambdaVersionPZAgUNyoBLUyyaEv1AQTXWhlVUkP2tJ8gWrV4tDSDE"
      },
      "Export": {
        "Name": "sls-authbridge-verification-staging-GetVerificationStatusLambdaFunctionQualifiedArn"
      }
    },
    "ProcessOCRLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "ProcessOCRLambdaVersionPwhByq9rWMpRovavE0A9KadPTWe64HBM4rkrMzrJlno"
      },
      "Export": {
        "Name": "sls-authbridge-verification-staging-ProcessOCRLambdaFunctionQualifiedArn"
      }
    },
    "RefreshDocumentUrlLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "RefreshDocumentUrlLambdaVersionrCNxBUH1kCQpf9cmAvnkTtl6oLHW9hRfV5eJSrZRcEc"
      },
      "Export": {
        "Name": "sls-authbridge-verification-staging-RefreshDocumentUrlLambdaFunctionQualifiedArn"
      }
    },
    "ProcessBiometricLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "ProcessBiometricLambdaVersionYmsSuwHgABxsEexzNEWWKg1i41ya74QL2ZO4I2yszE"
      },
      "Export": {
        "Name": "sls-authbridge-verification-staging-ProcessBiometricLambdaFunctionQualifiedArn"
      }
    },
    "ServiceEndpoint": {
      "Description": "URL of the service endpoint",
      "Value": {
        "Fn::Join": [
          "",
          [
            "https://",
            {
              "Ref": "ApiGatewayRestApi"
            },
            ".execute-api.",
            {
              "Ref": "AWS::Region"
            },
            ".",
            {
              "Ref": "AWS::URLSuffix"
            },
            "/staging"
          ]
        ]
      },
      "Export": {
        "Name": "sls-authbridge-verification-staging-ServiceEndpoint"
      }
    },
    "OcrAlertTopicArn": {
      "Description": "ARN of the OCR Alert SNS Topic",
      "Value": {
        "Ref": "OcrAlertTopic"
      },
      "Export": {
        "Name": "authbridge-ocr-alert-topic-staging"
      }
    }
  }
}